(window.webpackJsonp=window.webpackJsonp||[]).push([[1],{"/6Yf":function(t,e,n){"use strict";n.d(e,"a",function(){return o}),n.d(e,"b",function(){return u});var r=n("mrSG"),i=n("qOnz"),o=function(){function t(t,e,n){this.name=t,this.instanceFactory=e,this.type=n,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY"}return t.prototype.setInstantiationMode=function(t){return this.instantiationMode=t,this},t.prototype.setMultipleInstances=function(t){return this.multipleInstances=t,this},t.prototype.setServiceProps=function(t){return this.serviceProps=t,this},t}(),s="[DEFAULT]",a=function(){function t(t,e){this.name=t,this.container=e,this.component=null,this.instances=new Map,this.instancesDeferred=new Map}return t.prototype.get=function(t){void 0===t&&(t=s);var e=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(e)){var n=new i.a;this.instancesDeferred.set(e,n);try{var r=this.getOrInitializeService({instanceIdentifier:e});r&&n.resolve(r)}catch(o){}}return this.instancesDeferred.get(e).promise},t.prototype.getImmediate=function(t){var e=Object(r.a)({identifier:s,optional:!1},t),n=e.optional,i=this.normalizeInstanceIdentifier(e.identifier);try{var o=this.getOrInitializeService({instanceIdentifier:i});if(!o){if(n)return null;throw Error("Service "+this.name+" is not available")}return o}catch(a){if(n)return null;throw a}},t.prototype.getComponent=function(){return this.component},t.prototype.setComponent=function(t){var e,n;if(t.name!==this.name)throw Error("Mismatching Component "+t.name+" for Provider "+this.name+".");if(this.component)throw Error("Component for "+this.name+" has already been provided");if(this.component=t,function(t){return"EAGER"===t.instantiationMode}(t))try{this.getOrInitializeService({instanceIdentifier:s})}catch(h){}try{for(var i=Object(r.g)(this.instancesDeferred.entries()),o=i.next();!o.done;o=i.next()){var a=Object(r.e)(o.value,2),u=a[1],c=this.normalizeInstanceIdentifier(a[0]);try{var l=this.getOrInitializeService({instanceIdentifier:c});u.resolve(l)}catch(h){}}}catch(f){e={error:f}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}},t.prototype.clearInstance=function(t){void 0===t&&(t=s),this.instancesDeferred.delete(t),this.instances.delete(t)},t.prototype.delete=function(){return Object(r.b)(this,void 0,void 0,function(){var t;return Object(r.d)(this,function(e){switch(e.label){case 0:return t=Array.from(this.instances.values()),[4,Promise.all(Object(r.f)(Object(r.f)([],Object(r.e)(t.filter(function(t){return"INTERNAL"in t}).map(function(t){return t.INTERNAL.delete()}))),Object(r.e)(t.filter(function(t){return"_delete"in t}).map(function(t){return t._delete()}))))];case 1:return e.sent(),[2]}})})},t.prototype.isComponentSet=function(){return null!=this.component},t.prototype.isInitialized=function(t){return void 0===t&&(t=s),this.instances.has(t)},t.prototype.initialize=function(t){void 0===t&&(t={});var e=t.instanceIdentifier,n=t.options,r=void 0===n?{}:n,i=this.normalizeInstanceIdentifier(void 0===e?s:e);if(this.isInitialized(i))throw Error(this.name+"("+i+") has already been initialized");if(!this.isComponentSet())throw Error("Component "+this.name+" has not been registered yet");return this.getOrInitializeService({instanceIdentifier:i,options:r})},t.prototype.getOrInitializeService=function(t){var e,n=t.instanceIdentifier,r=t.options,i=void 0===r?{}:r,o=this.instances.get(n);return!o&&this.component&&(o=this.component.instanceFactory(this.container,{instanceIdentifier:(e=n,e===s?void 0:e),options:i}),this.instances.set(n,o)),o||null},t.prototype.normalizeInstanceIdentifier=function(t){return this.component?this.component.multipleInstances?t:s:t},t}(),u=function(){function t(t){this.name=t,this.providers=new Map}return t.prototype.addComponent=function(t){var e=this.getProvider(t.name);if(e.isComponentSet())throw new Error("Component "+t.name+" has already been registered with "+this.name);e.setComponent(t)},t.prototype.addOrOverwriteComponent=function(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)},t.prototype.getProvider=function(t){if(this.providers.has(t))return this.providers.get(t);var e=new a(t,this);return this.providers.set(t,e),e},t.prototype.getProviders=function(){return Array.from(this.providers.values())},t}()},0:function(t,e,n){t.exports=n("zUnb")},"2QA8":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol?Symbol("rxSubscriber"):"@@rxSubscriber_"+Math.random())()},"2fFW":function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=!1;const i={Promise:void 0,set useDeprecatedSynchronousErrorHandling(t){if(t){const t=new Error;console.warn("DEPRECATED! RxJS was set to use deprecated synchronous error handling behavior by code at: \n"+t.stack)}else r&&console.log("RxJS: Back to a better error behavior. Thank you. <3");r=t},get useDeprecatedSynchronousErrorHandling(){return r}}},"3N8a":function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("quSY");class i extends r.a{constructor(t,e){super()}schedule(t,e=0){return this}}class o extends i{constructor(t,e){super(t,e),this.scheduler=t,this.work=e,this.pending=!1}schedule(t,e=0){if(this.closed)return this;this.state=t;const n=this.id,r=this.scheduler;return null!=n&&(this.id=this.recycleAsyncId(r,n,e)),this.pending=!0,this.delay=e,this.id=this.id||this.requestAsyncId(r,this.id,e),this}requestAsyncId(t,e,n=0){return setInterval(t.flush.bind(t,this),n)}recycleAsyncId(t,e,n=0){if(null!==n&&this.delay===n&&!1===this.pending)return e;clearInterval(e)}execute(t,e){if(this.closed)return new Error("executing a cancelled action");this.pending=!1;const n=this._execute(t,e);if(n)return n;!1===this.pending&&null!=this.id&&(this.id=this.recycleAsyncId(this.scheduler,this.id,null))}_execute(t,e){let n,r=!1;try{this.work(t)}catch(i){r=!0,n=!!i&&i||new Error(i)}if(r)return this.unsubscribe(),n}_unsubscribe(){const t=this.id,e=this.scheduler,n=e.actions,r=n.indexOf(this);this.work=null,this.state=null,this.pending=!1,this.scheduler=null,-1!==r&&n.splice(r,1),null!=t&&(this.id=this.recycleAsyncId(e,t,null)),this.delay=null}}},"3UD+":function(t,e){t.exports=function(t){if(!t.webpackPolyfill){var e=Object.create(t);e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),Object.defineProperty(e,"exports",{enumerable:!0}),e.webpackPolyfill=1}return e}},"5+tZ":function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("lJxs"),i=n("Cfvw"),o=n("zx2A");function s(t,e,n=Number.POSITIVE_INFINITY){return"function"==typeof e?o=>o.pipe(s((n,o)=>Object(i.a)(t(n,o)).pipe(Object(r.a)((t,r)=>e(n,t,o,r))),n)):("number"==typeof e&&(n=e),e=>e.lift(new a(t,n)))}class a{constructor(t,e=Number.POSITIVE_INFINITY){this.project=t,this.concurrent=e}call(t,e){return e.subscribe(new u(t,this.project,this.concurrent))}}class u extends o.b{constructor(t,e,n=Number.POSITIVE_INFINITY){super(t),this.project=e,this.concurrent=n,this.hasCompleted=!1,this.buffer=[],this.active=0,this.index=0}_next(t){this.active<this.concurrent?this._tryNext(t):this.buffer.push(t)}_tryNext(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this.active++,this._innerSub(e)}_innerSub(t){const e=new o.a(this),n=this.destination;n.add(e);const r=Object(o.c)(t,e);r!==e&&n.add(r)}_complete(){this.hasCompleted=!0,0===this.active&&0===this.buffer.length&&this.destination.complete(),this.unsubscribe()}notifyNext(t){this.destination.next(t)}notifyComplete(){const t=this.buffer;this.active--,t.length>0?this._next(t.shift()):0===this.active&&this.hasCompleted&&this.destination.complete()}}},"7o/Q":function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("n6bG"),i=n("gRHU"),o=n("quSY"),s=n("2QA8"),a=n("2fFW"),u=n("NJ4a");class c extends o.a{constructor(t,e,n){switch(super(),this.syncErrorValue=null,this.syncErrorThrown=!1,this.syncErrorThrowable=!1,this.isStopped=!1,arguments.length){case 0:this.destination=i.a;break;case 1:if(!t){this.destination=i.a;break}if("object"==typeof t){t instanceof c?(this.syncErrorThrowable=t.syncErrorThrowable,this.destination=t,t.add(this)):(this.syncErrorThrowable=!0,this.destination=new l(this,t));break}default:this.syncErrorThrowable=!0,this.destination=new l(this,t,e,n)}}[s.a](){return this}static create(t,e,n){const r=new c(t,e,n);return r.syncErrorThrowable=!1,r}next(t){this.isStopped||this._next(t)}error(t){this.isStopped||(this.isStopped=!0,this._error(t))}complete(){this.isStopped||(this.isStopped=!0,this._complete())}unsubscribe(){this.closed||(this.isStopped=!0,super.unsubscribe())}_next(t){this.destination.next(t)}_error(t){this.destination.error(t),this.unsubscribe()}_complete(){this.destination.complete(),this.unsubscribe()}_unsubscribeAndRecycle(){const{_parentOrParents:t}=this;return this._parentOrParents=null,this.unsubscribe(),this.closed=!1,this.isStopped=!1,this._parentOrParents=t,this}}class l extends c{constructor(t,e,n,o){let s;super(),this._parentSubscriber=t;let a=this;Object(r.a)(e)?s=e:e&&(s=e.next,n=e.error,o=e.complete,e!==i.a&&(a=Object.create(e),Object(r.a)(a.unsubscribe)&&this.add(a.unsubscribe.bind(a)),a.unsubscribe=this.unsubscribe.bind(this))),this._context=a,this._next=s,this._error=n,this._complete=o}next(t){if(!this.isStopped&&this._next){const{_parentSubscriber:e}=this;a.a.useDeprecatedSynchronousErrorHandling&&e.syncErrorThrowable?this.__tryOrSetError(e,this._next,t)&&this.unsubscribe():this.__tryOrUnsub(this._next,t)}}error(t){if(!this.isStopped){const{_parentSubscriber:e}=this,{useDeprecatedSynchronousErrorHandling:n}=a.a;if(this._error)n&&e.syncErrorThrowable?(this.__tryOrSetError(e,this._error,t),this.unsubscribe()):(this.__tryOrUnsub(this._error,t),this.unsubscribe());else if(e.syncErrorThrowable)n?(e.syncErrorValue=t,e.syncErrorThrown=!0):Object(u.a)(t),this.unsubscribe();else{if(this.unsubscribe(),n)throw t;Object(u.a)(t)}}}complete(){if(!this.isStopped){const{_parentSubscriber:t}=this;if(this._complete){const e=()=>this._complete.call(this._context);a.a.useDeprecatedSynchronousErrorHandling&&t.syncErrorThrowable?(this.__tryOrSetError(t,e),this.unsubscribe()):(this.__tryOrUnsub(e),this.unsubscribe())}else this.unsubscribe()}}__tryOrUnsub(t,e){try{t.call(this._context,e)}catch(n){if(this.unsubscribe(),a.a.useDeprecatedSynchronousErrorHandling)throw n;Object(u.a)(n)}}__tryOrSetError(t,e,n){if(!a.a.useDeprecatedSynchronousErrorHandling)throw new Error("bad call");try{e.call(this._context,n)}catch(r){return a.a.useDeprecatedSynchronousErrorHandling?(t.syncErrorValue=r,t.syncErrorThrown=!0,!0):(Object(u.a)(r),!0)}return!1}_unsubscribe(){const{_parentSubscriber:t}=this;this._context=null,this._parentSubscriber=null,t.unsubscribe()}}},"9ppp":function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>{function t(){return Error.call(this),this.message="object unsubscribed",this.name="ObjectUnsubscribedError",this}return t.prototype=Object.create(Error.prototype),t})()},Cfvw:function(t,e,n){"use strict";n.d(e,"a",function(){return h});var r=n("HDdC"),i=n("SeVD"),o=n("quSY"),s=n("kJWO"),a=n("jZKg"),u=n("Lhse"),c=n("c2HN"),l=n("I55L");function h(t,e){return e?function(t,e){if(null!=t){if(function(t){return t&&"function"==typeof t[s.a]}(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>{const i=t[s.a]();r.add(i.subscribe({next(t){r.add(e.schedule(()=>n.next(t)))},error(t){r.add(e.schedule(()=>n.error(t)))},complete(){r.add(e.schedule(()=>n.complete()))}}))})),r})}(t,e);if(Object(c.a)(t))return function(t,e){return new r.a(n=>{const r=new o.a;return r.add(e.schedule(()=>t.then(t=>{r.add(e.schedule(()=>{n.next(t),r.add(e.schedule(()=>n.complete()))}))},t=>{r.add(e.schedule(()=>n.error(t)))}))),r})}(t,e);if(Object(l.a)(t))return Object(a.a)(t,e);if(function(t){return t&&"function"==typeof t[u.a]}(t)||"string"==typeof t)return function(t,e){if(!t)throw new Error("Iterable cannot be null");return new r.a(n=>{const r=new o.a;let i;return r.add(()=>{i&&"function"==typeof i.return&&i.return()}),r.add(e.schedule(()=>{i=t[u.a](),r.add(e.schedule(function(){if(n.closed)return;let t,e;try{const n=i.next();t=n.value,e=n.done}catch(r){return void n.error(r)}e?n.complete():(n.next(t),this.schedule())}))})),r})}(t,e)}throw new TypeError((null!==t&&typeof t||t)+" is not observable")}(t,e):t instanceof r.a?t:new r.a(Object(i.a)(t))}},D0XW:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("3N8a");const i=new(n("IjjT").a)(r.a)},DH7j:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>Array.isArray||(t=>t&&"number"==typeof t.length))()},EQ5u:function(t,e,n){"use strict";n.d(e,"a",function(){return a}),n.d(e,"b",function(){return u});var r=n("XNiG"),i=n("HDdC"),o=(n("7o/Q"),n("quSY")),s=n("x+ZX");class a extends i.a{constructor(t,e){super(),this.source=t,this.subjectFactory=e,this._refCount=0,this._isComplete=!1}_subscribe(t){return this.getSubject().subscribe(t)}getSubject(){const t=this._subject;return t&&!t.isStopped||(this._subject=this.subjectFactory()),this._subject}connect(){let t=this._connection;return t||(this._isComplete=!1,t=this._connection=new o.a,t.add(this.source.subscribe(new c(this.getSubject(),this))),t.closed&&(this._connection=null,t=o.a.EMPTY)),t}refCount(){return Object(s.a)()(this)}}const u=(()=>{const t=a.prototype;return{operator:{value:null},_refCount:{value:0,writable:!0},_subject:{value:null,writable:!0},_connection:{value:null,writable:!0},_subscribe:{value:t._subscribe},_isComplete:{value:t._isComplete,writable:!0},getSubject:{value:t.getSubject},connect:{value:t.connect},refCount:{value:t.refCount}}})();class c extends r.b{constructor(t,e){super(t),this.connectable=e}_error(t){this._unsubscribe(),super._error(t)}_complete(){this.connectable._isComplete=!0,this._unsubscribe(),super._complete()}_unsubscribe(){const t=this.connectable;if(t){this.connectable=null;const e=t._connection;t._refCount=0,t._subject=null,t._connection=null,e&&e.unsubscribe()}}}},EY2u:function(t,e,n){"use strict";n.d(e,"a",function(){return i}),n.d(e,"b",function(){return o});var r=n("HDdC");const i=new r.a(t=>t.complete());function o(t){return t?function(t){return new r.a(e=>t.schedule(()=>e.complete()))}(t):i}},HDdC:function(t,e,n){"use strict";n.d(e,"a",function(){return c});var r=n("7o/Q"),i=n("2QA8"),o=n("gRHU"),s=n("kJWO"),a=n("SpAZ"),u=n("2fFW");let c=(()=>{class t{constructor(t){this._isScalar=!1,t&&(this._subscribe=t)}lift(e){const n=new t;return n.source=this,n.operator=e,n}subscribe(t,e,n){const{operator:s}=this,a=function(t,e,n){if(t){if(t instanceof r.a)return t;if(t[i.a])return t[i.a]()}return t||e||n?new r.a(t,e,n):new r.a(o.a)}(t,e,n);if(a.add(s?s.call(a,this.source):this.source||u.a.useDeprecatedSynchronousErrorHandling&&!a.syncErrorThrowable?this._subscribe(a):this._trySubscribe(a)),u.a.useDeprecatedSynchronousErrorHandling&&a.syncErrorThrowable&&(a.syncErrorThrowable=!1,a.syncErrorThrown))throw a.syncErrorValue;return a}_trySubscribe(t){try{return this._subscribe(t)}catch(e){u.a.useDeprecatedSynchronousErrorHandling&&(t.syncErrorThrown=!0,t.syncErrorValue=e),function(t){for(;t;){const{closed:e,destination:n,isStopped:i}=t;if(e||i)return!1;t=n&&n instanceof r.a?n:null}return!0}(t)?t.error(e):console.warn(e)}}forEach(t,e){return new(e=l(e))((e,n)=>{let r;r=this.subscribe(e=>{try{t(e)}catch(i){n(i),r&&r.unsubscribe()}},n,e)})}_subscribe(t){const{source:e}=this;return e&&e.subscribe(t)}[s.a](){return this}pipe(...t){return 0===t.length?this:(0===(e=t).length?a.a:1===e.length?e[0]:function(t){return e.reduce((t,e)=>e(t),t)})(this);var e}toPromise(t){return new(t=l(t))((t,e)=>{let n;this.subscribe(t=>n=t,t=>e(t),()=>t(n))})}}return t.create=e=>new t(e),t})();function l(t){if(t||(t=u.a.Promise||Promise),!t)throw new Error("no Promise impl found");return t}},I55L:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>t&&"number"==typeof t.length&&"function"!=typeof t},IjjT:function(t,e,n){"use strict";n.d(e,"a",function(){return i});let r=(()=>{class t{constructor(e,n=t.now){this.SchedulerAction=e,this.now=n}schedule(t,e=0,n){return new this.SchedulerAction(this,t).schedule(n,e)}}return t.now=()=>Date.now(),t})();class i extends r{constructor(t,e=r.now){super(t,()=>i.delegate&&i.delegate!==this?i.delegate.now():e()),this.actions=[],this.active=!1,this.scheduled=void 0}schedule(t,e=0,n){return i.delegate&&i.delegate!==this?i.delegate.schedule(t,e,n):super.schedule(t,e,n)}flush(t){const{actions:e}=this;if(this.active)return void e.push(t);let n;this.active=!0;do{if(n=t.execute(t.state,t.delay))break}while(t=e.shift());if(this.active=!1,n){for(;t=e.shift();)t.unsubscribe();throw n}}}},Jgta:function(t,e,n){"use strict";var r=n("zIRd");n.d(e,"a",function(){return r.a}),r.a.registerVersion("firebase","8.3.1","app")},LRne:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("z+Ro"),i=n("yCtX"),o=n("jZKg");function s(...t){let e=t[t.length-1];return Object(r.a)(e)?(t.pop(),Object(o.a)(t,e)):Object(i.a)(t)}},Lhse:function(t,e,n){"use strict";function r(){return"function"==typeof Symbol&&Symbol.iterator?Symbol.iterator:"@@iterator"}n.d(e,"a",function(){return i});const i=r()},NJ4a:function(t,e,n){"use strict";function r(t){setTimeout(()=>{throw t},0)}n.d(e,"a",function(){return r})},SeVD:function(t,e,n){"use strict";n.d(e,"a",function(){return l});var r=n("ngJS"),i=n("NJ4a"),o=n("Lhse"),s=n("kJWO"),a=n("I55L"),u=n("c2HN"),c=n("XoHu");const l=t=>{if(t&&"function"==typeof t[s.a])return l=t,t=>{const e=l[s.a]();if("function"!=typeof e.subscribe)throw new TypeError("Provided object does not correctly implement Symbol.observable");return e.subscribe(t)};if(Object(a.a)(t))return Object(r.a)(t);if(Object(u.a)(t))return n=t,t=>(n.then(e=>{t.closed||(t.next(e),t.complete())},e=>t.error(e)).then(null,i.a),t);if(t&&"function"==typeof t[o.a])return e=t,t=>{const n=e[o.a]();for(;;){let e;try{e=n.next()}catch(r){return t.error(r),t}if(e.done){t.complete();break}if(t.next(e.value),t.closed)break}return"function"==typeof n.return&&t.add(()=>{n.return&&n.return()}),t};{const e=Object(c.a)(t)?"an invalid object":`'${t}'`;throw new TypeError(`You provided ${e} where a stream was expected. You can provide an Observable, Promise, Array, or Iterable.`)}var e,n,l}},SpAZ:function(t,e,n){"use strict";function r(t){return t}n.d(e,"a",function(){return r})},VRyK:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("HDdC"),i=n("z+Ro"),o=n("bHdf"),s=n("yCtX");function a(...t){let e=Number.POSITIVE_INFINITY,n=null,a=t[t.length-1];return Object(i.a)(a)?(n=t.pop(),t.length>1&&"number"==typeof t[t.length-1]&&(e=t.pop())):"number"==typeof a&&(e=t.pop()),null===n&&1===t.length&&t[0]instanceof r.a?t[0]:Object(o.a)(e)(Object(s.a)(t,n))}},XNiG:function(t,e,n){"use strict";n.d(e,"b",function(){return c}),n.d(e,"a",function(){return l});var r=n("HDdC"),i=n("7o/Q"),o=n("quSY"),s=n("9ppp"),a=n("Ylt2"),u=n("2QA8");class c extends i.a{constructor(t){super(t),this.destination=t}}let l=(()=>{class t extends r.a{constructor(){super(),this.observers=[],this.closed=!1,this.isStopped=!1,this.hasError=!1,this.thrownError=null}[u.a](){return new c(this)}lift(t){const e=new h(this,this);return e.operator=t,e}next(t){if(this.closed)throw new s.a;if(!this.isStopped){const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].next(t)}}error(t){if(this.closed)throw new s.a;this.hasError=!0,this.thrownError=t,this.isStopped=!0;const{observers:e}=this,n=e.length,r=e.slice();for(let i=0;i<n;i++)r[i].error(t);this.observers.length=0}complete(){if(this.closed)throw new s.a;this.isStopped=!0;const{observers:t}=this,e=t.length,n=t.slice();for(let r=0;r<e;r++)n[r].complete();this.observers.length=0}unsubscribe(){this.isStopped=!0,this.closed=!0,this.observers=null}_trySubscribe(t){if(this.closed)throw new s.a;return super._trySubscribe(t)}_subscribe(t){if(this.closed)throw new s.a;return this.hasError?(t.error(this.thrownError),o.a.EMPTY):this.isStopped?(t.complete(),o.a.EMPTY):(this.observers.push(t),new a.a(this,t))}asObservable(){const t=new r.a;return t.source=this,t}}return t.create=(t,e)=>new h(t,e),t})();class h extends l{constructor(t,e){super(),this.destination=t,this.source=e}next(t){const{destination:e}=this;e&&e.next&&e.next(t)}error(t){const{destination:e}=this;e&&e.error&&this.destination.error(t)}complete(){const{destination:t}=this;t&&t.complete&&this.destination.complete()}_subscribe(t){const{source:e}=this;return e?this.source.subscribe(t):o.a.EMPTY}}},XoHu:function(t,e,n){"use strict";function r(t){return null!==t&&"object"==typeof t}n.d(e,"a",function(){return r})},Ylt2:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("quSY");class i extends r.a{constructor(t,e){super(),this.subject=t,this.subscriber=e,this.closed=!1}unsubscribe(){if(this.closed)return;this.closed=!0;const t=this.subject,e=t.observers;if(this.subject=null,!e||0===e.length||t.isStopped||t.closed)return;const n=e.indexOf(this.subscriber);-1!==n&&e.splice(n,1)}}},bHdf:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("5+tZ"),i=n("SpAZ");function o(t=Number.POSITIVE_INFINITY){return Object(r.a)(i.a,t)}},c2HN:function(t,e,n){"use strict";function r(t){return!!t&&"function"!=typeof t.subscribe&&"function"==typeof t.then}n.d(e,"a",function(){return r})},fXoL:function(t,e,n){"use strict";n.d(e,"a",function(){return We}),n.d(e,"b",function(){return ha}),n.d(e,"c",function(){return sa}),n.d(e,"d",function(){return ia}),n.d(e,"e",function(){return oa}),n.d(e,"f",function(){return iu}),n.d(e,"g",function(){return $a}),n.d(e,"h",function(){return ds}),n.d(e,"i",function(){return Ia}),n.d(e,"j",function(){return Mo}),n.d(e,"k",function(){return pa}),n.d(e,"l",function(){return qo}),n.d(e,"m",function(){return or}),n.d(e,"n",function(){return qs}),n.d(e,"o",function(){return Ri}),n.d(e,"p",function(){return fn}),n.d(e,"q",function(){return A}),n.d(e,"r",function(){return $e}),n.d(e,"s",function(){return Wi}),n.d(e,"t",function(){return ss}),n.d(e,"u",function(){return us}),n.d(e,"v",function(){return da}),n.d(e,"w",function(){return Ss}),n.d(e,"x",function(){return Qa}),n.d(e,"y",function(){return Es}),n.d(e,"z",function(){return Ha}),n.d(e,"A",function(){return Oa}),n.d(e,"B",function(){return dn}),n.d(e,"C",function(){return la}),n.d(e,"D",function(){return ca}),n.d(e,"E",function(){return zo}),n.d(e,"F",function(){return Ho}),n.d(e,"G",function(){return cr}),n.d(e,"H",function(){return Ko}),n.d(e,"I",function(){return tr}),n.d(e,"J",function(){return pn}),n.d(e,"K",function(){return Za}),n.d(e,"L",function(){return bs}),n.d(e,"M",function(){return Na}),n.d(e,"N",function(){return Qe}),n.d(e,"O",function(){return $o}),n.d(e,"P",function(){return Jo}),n.d(e,"Q",function(){return Ts}),n.d(e,"R",function(){return P}),n.d(e,"S",function(){return za}),n.d(e,"T",function(){return qa}),n.d(e,"U",function(){return Va}),n.d(e,"V",function(){return nu}),n.d(e,"W",function(){return Pa}),n.d(e,"X",function(){return fa}),n.d(e,"Y",function(){return Li}),n.d(e,"Z",function(){return ko}),n.d(e,"ab",function(){return Xn}),n.d(e,"bb",function(){return Pn}),n.d(e,"cb",function(){return Sn}),n.d(e,"db",function(){return Tn}),n.d(e,"eb",function(){return jn}),n.d(e,"fb",function(){return xn}),n.d(e,"gb",function(){return Cn}),n.d(e,"hb",function(){return An}),n.d(e,"ib",function(){return Co}),n.d(e,"jb",function(){return eu}),n.d(e,"kb",function(){return xo}),n.d(e,"lb",function(){return Ao}),n.d(e,"mb",function(){return On}),n.d(e,"nb",function(){return V}),n.d(e,"ob",function(){return Zi}),n.d(e,"pb",function(){return go}),n.d(e,"qb",function(){return fo}),n.d(e,"rb",function(){return po}),n.d(e,"sb",function(){return To}),n.d(e,"tb",function(){return St}),n.d(e,"ub",function(){return h}),n.d(e,"vb",function(){return En}),n.d(e,"wb",function(){return vt}),n.d(e,"xb",function(){return Kr}),n.d(e,"yb",function(){return no}),n.d(e,"zb",function(){return ta}),n.d(e,"Ab",function(){return Y}),n.d(e,"Bb",function(){return it}),n.d(e,"Cb",function(){return w}),n.d(e,"Db",function(){return _}),n.d(e,"Eb",function(){return et}),n.d(e,"Fb",function(){return ot}),n.d(e,"Gb",function(){return oo}),n.d(e,"Hb",function(){return lo}),n.d(e,"Ib",function(){return co}),n.d(e,"Jb",function(){return uo}),n.d(e,"Kb",function(){return ho}),n.d(e,"Lb",function(){return Io}),n.d(e,"Mb",function(){return cn}),n.d(e,"Nb",function(){return Ge}),n.d(e,"Ob",function(){return ra}),n.d(e,"Pb",function(){return mo}),n.d(e,"Qb",function(){return ea}),n.d(e,"Rb",function(){return so}),n.d(e,"Sb",function(){return Zs}),n.d(e,"Tb",function(){return io}),n.d(e,"Ub",function(){return qt}),n.d(e,"Vb",function(){return er}),n.d(e,"Wb",function(){return nt}),n.d(e,"Xb",function(){return ro}),n.d(e,"Yb",function(){return bo}),n.d(e,"Zb",function(){return wo});var r=n("XNiG"),i=n("quSY"),o=n("HDdC"),s=n("VRyK"),a=n("EQ5u"),u=n("x+ZX");function c(){return new r.a}function l(t){for(let e in t)if(t[e]===l)return e;throw Error("Could not find renamed property on target object.")}function h(t){if("string"==typeof t)return t;if(Array.isArray(t))return"["+t.map(h).join(", ")+"]";if(null==t)return""+t;if(t.overriddenName)return`${t.overriddenName}`;if(t.name)return`${t.name}`;const e=t.toString();if(null==e)return""+e;const n=e.indexOf("\n");return-1===n?e:e.substring(0,n)}function f(t,e){return null==t||""===t?null===e?"":e:null==e||""===e?t:t+" "+e}const d=l({__forward_ref__:l});function p(t){return t.__forward_ref__=p,t.toString=function(){return h(this())},t}function g(t){return"function"==typeof(e=t)&&e.hasOwnProperty(d)&&e.__forward_ref__===p?t():t;var e}class m extends Error{constructor(t,e){super(function(t,e){return`${t?`NG0${t}: `:""}${e}`}(t,e)),this.code=t}}function y(t){return"string"==typeof t?t:null==t?"":String(t)}function v(t){return"function"==typeof t?t.name||t.toString():"object"==typeof t&&null!=t&&"function"==typeof t.type?t.type.name||t.type.toString():y(t)}function b(t,e){const n=e?` in ${e}`:"";throw new m("201",`No provider for ${v(t)} found${n}`)}function w(t){return{token:t.token,providedIn:t.providedIn||null,factory:t.factory,value:void 0}}function _(t){return{providers:t.providers||[],imports:t.imports||[]}}function I(t){return E(t,O)||E(t,C)}function E(t,e){return t.hasOwnProperty(e)?t[e]:null}function S(t){return t&&(t.hasOwnProperty(T)||t.hasOwnProperty(x))?t[T]:null}const O=l({"\u0275prov":l}),T=l({"\u0275inj":l}),C=l({ngInjectableDef:l}),x=l({ngInjectorDef:l});var A=function(t){return t[t.Default=0]="Default",t[t.Host=1]="Host",t[t.Self=2]="Self",t[t.SkipSelf=4]="SkipSelf",t[t.Optional=8]="Optional",t}({});let j;function k(t){const e=j;return j=t,e}function N(t,e,n){const r=I(t);return r&&"root"==r.providedIn?void 0===r.value?r.value=r.factory():r.value:n&A.Optional?null:void 0!==e?e:void b(h(t),"Injector")}function D(t){return{toString:t}.toString()}var R=function(t){return t[t.OnPush=0]="OnPush",t[t.Default=1]="Default",t}({}),P=function(t){return t[t.Emulated=0]="Emulated",t[t.None=2]="None",t[t.ShadowDom=3]="ShadowDom",t}({});const L="undefined"!=typeof globalThis&&globalThis,M="undefined"!=typeof window&&window,U="undefined"!=typeof self&&"undefined"!=typeof WorkerGlobalScope&&self instanceof WorkerGlobalScope&&self,F="undefined"!=typeof global&&global,V=L||F||M||U,q={},B=[],H=l({"\u0275cmp":l}),z=l({"\u0275dir":l}),G=l({"\u0275pipe":l}),K=l({"\u0275mod":l}),J=l({"\u0275loc":l}),$=l({"\u0275fac":l}),W=l({__NG_ELEMENT_ID__:l});let Q=0;function Y(t){return D(()=>{const e={},n={type:t.type,providersResolver:null,decls:t.decls,vars:t.vars,factory:null,template:t.template||null,consts:t.consts||null,ngContentSelectors:t.ngContentSelectors,hostBindings:t.hostBindings||null,hostVars:t.hostVars||0,hostAttrs:t.hostAttrs||null,contentQueries:t.contentQueries||null,declaredInputs:e,inputs:null,outputs:null,exportAs:t.exportAs||null,onPush:t.changeDetection===R.OnPush,directiveDefs:null,pipeDefs:null,selectors:t.selectors||B,viewQuery:t.viewQuery||null,features:t.features||null,data:t.data||{},encapsulation:t.encapsulation||P.Emulated,id:"c",styles:t.styles||B,_:null,setInput:null,schemas:t.schemas||null,tView:null},r=t.directives,i=t.features,o=t.pipes;return n.id+=Q++,n.inputs=rt(t.inputs,e),n.outputs=rt(t.outputs),i&&i.forEach(t=>t(n)),n.directiveDefs=r?()=>("function"==typeof r?r():r).map(X):null,n.pipeDefs=o?()=>("function"==typeof o?o():o).map(Z):null,n})}function X(t){return st(t)||function(t){return t[z]||null}(t)}function Z(t){return function(t){return t[G]||null}(t)}const tt={};function et(t){const e={type:t.type,bootstrap:t.bootstrap||B,declarations:t.declarations||B,imports:t.imports||B,exports:t.exports||B,transitiveCompileScopes:null,schemas:t.schemas||null,id:t.id||null};return null!=t.id&&D(()=>{tt[t.id]=t.type}),e}function nt(t,e){return D(()=>{const n=at(t,!0);n.declarations=e.declarations||B,n.imports=e.imports||B,n.exports=e.exports||B})}function rt(t,e){if(null==t)return q;const n={};for(const r in t)if(t.hasOwnProperty(r)){let i=t[r],o=i;Array.isArray(i)&&(o=i[1],i=i[0]),n[i]=r,e&&(e[i]=o)}return n}const it=Y;function ot(t){return{type:t.type,name:t.name,factory:null,pure:!1!==t.pure,onDestroy:t.type.prototype.ngOnDestroy||null}}function st(t){return t[H]||null}function at(t,e){const n=t[K]||null;if(!n&&!0===e)throw new Error(`Type ${h(t)} does not have '\u0275mod' property.`);return n}const ut=20,ct=10;function lt(t){return Array.isArray(t)&&"object"==typeof t[1]}function ht(t){return Array.isArray(t)&&!0===t[1]}function ft(t){return 0!=(8&t.flags)}function dt(t){return 2==(2&t.flags)}function pt(t){return 1==(1&t.flags)}function gt(t){return null!==t.template}function mt(t,e){return t.hasOwnProperty($)?t[$]:null}class yt{constructor(t,e,n){this.previousValue=t,this.currentValue=e,this.firstChange=n}isFirstChange(){return this.firstChange}}function vt(){return bt}function bt(t){return t.type.prototype.ngOnChanges&&(t.setInput=_t),wt}function wt(){const t=It(this),e=null==t?void 0:t.current;if(e){const n=t.previous;if(n===q)t.previous=e;else for(let t in e)n[t]=e[t];t.current=null,this.ngOnChanges(e)}}function _t(t,e,n,r){const i=It(t)||function(t,e){return t.__ngSimpleChanges__=e}(t,{previous:q,current:null}),o=i.current||(i.current={}),s=i.previous,a=this.declaredInputs[n],u=s[a];o[a]=new yt(u&&u.currentValue,e,s===q),t[r]=e}function It(t){return t.__ngSimpleChanges__||null}let Et;function St(t){Et=t}function Ot(t){return!!t.listen}vt.ngInherit=!0;const Tt={createRenderer:(t,e)=>void 0!==Et?Et:"undefined"!=typeof document?document:void 0};function Ct(t){for(;Array.isArray(t);)t=t[0];return t}function xt(t,e){return Ct(e[t.index])}function At(t,e){return t.data[e]}function jt(t,e){const n=e[t];return lt(n)?n:n[0]}function kt(t){const e=function(t){return t.__ngContext__||null}(t);return e?Array.isArray(e)?e:e.lView:null}function Nt(t){return 4==(4&t[2])}function Dt(t){return 128==(128&t[2])}function Rt(t,e){return null==e?null:t[e]}function Pt(t){t[18]=0}function Lt(t,e){t[5]+=e;let n=t,r=t[3];for(;null!==r&&(1===e&&1===n[5]||-1===e&&0===n[5]);)r[5]+=e,n=r,r=r[3]}const Mt={lFrame:re(null),bindingsEnabled:!0,isInCheckNoChangesMode:!1};function Ut(){return Mt.bindingsEnabled}function Ft(){return Mt.lFrame.lView}function Vt(){return Mt.lFrame.tView}function qt(t){Mt.lFrame.contextLView=t}function Bt(){let t=Ht();for(;null!==t&&64===t.type;)t=t.parent;return t}function Ht(){return Mt.lFrame.currentTNode}function zt(t,e){const n=Mt.lFrame;n.currentTNode=t,n.isParent=e}function Gt(){return Mt.lFrame.isParent}function Kt(){return Mt.isInCheckNoChangesMode}function Jt(t){Mt.isInCheckNoChangesMode=t}function $t(){return Mt.lFrame.bindingIndex++}function Wt(t,e){const n=Mt.lFrame;n.bindingIndex=n.bindingRootIndex=t,Qt(e)}function Qt(t){Mt.lFrame.currentDirectiveIndex=t}function Yt(){return Mt.lFrame.currentQueryIndex}function Xt(t){Mt.lFrame.currentQueryIndex=t}function Zt(t){const e=t[1];return 2===e.type?e.declTNode:1===e.type?t[6]:null}function te(t,e,n){if(n&A.SkipSelf){let r=e,i=t;for(;r=r.parent,!(null!==r||n&A.Host||(r=Zt(i),null===r)||(i=i[15],10&r.type)););if(null===r)return!1;e=r,t=i}const r=Mt.lFrame=ne();return r.currentTNode=e,r.lView=t,!0}function ee(t){const e=ne(),n=t[1];Mt.lFrame=e,e.currentTNode=n.firstChild,e.lView=t,e.tView=n,e.contextLView=t,e.bindingIndex=n.bindingStartIndex,e.inI18n=!1}function ne(){const t=Mt.lFrame,e=null===t?null:t.child;return null===e?re(t):e}function re(t){const e={currentTNode:null,isParent:!0,lView:null,tView:null,selectedIndex:-1,contextLView:null,elementDepthCount:0,currentNamespace:null,currentDirectiveIndex:-1,bindingRootIndex:-1,bindingIndex:-1,currentQueryIndex:0,parent:t,child:null,inI18n:!1};return null!==t&&(t.child=e),e}function ie(){const t=Mt.lFrame;return Mt.lFrame=t.parent,t.currentTNode=null,t.lView=null,t}const oe=ie;function se(){const t=ie();t.isParent=!0,t.tView=null,t.selectedIndex=-1,t.contextLView=null,t.elementDepthCount=0,t.currentDirectiveIndex=-1,t.currentNamespace=null,t.bindingRootIndex=-1,t.bindingIndex=-1,t.currentQueryIndex=0}function ae(){return Mt.lFrame.selectedIndex}function ue(t){Mt.lFrame.selectedIndex=t}function ce(){const t=Mt.lFrame;return At(t.tView,t.selectedIndex)}function le(t,e){for(let n=e.directiveStart,r=e.directiveEnd;n<r;n++){const e=t.data[n].type.prototype,{ngAfterContentInit:r,ngAfterContentChecked:i,ngAfterViewInit:o,ngAfterViewChecked:s,ngOnDestroy:a}=e;r&&(t.contentHooks||(t.contentHooks=[])).push(-n,r),i&&((t.contentHooks||(t.contentHooks=[])).push(n,i),(t.contentCheckHooks||(t.contentCheckHooks=[])).push(n,i)),o&&(t.viewHooks||(t.viewHooks=[])).push(-n,o),s&&((t.viewHooks||(t.viewHooks=[])).push(n,s),(t.viewCheckHooks||(t.viewCheckHooks=[])).push(n,s)),null!=a&&(t.destroyHooks||(t.destroyHooks=[])).push(n,a)}}function he(t,e,n){pe(t,e,3,n)}function fe(t,e,n,r){(3&t[2])===n&&pe(t,e,n,r)}function de(t,e){let n=t[2];(3&n)===e&&(n&=2047,n+=1,t[2]=n)}function pe(t,e,n,r){const i=null!=r?r:-1,o=e.length-1;let s=0;for(let a=void 0!==r?65535&t[18]:0;a<o;a++)if("number"==typeof e[a+1]){if(s=e[a],null!=r&&s>=r)break}else e[a]<0&&(t[18]+=65536),(s<i||-1==i)&&(ge(t,n,e,a),t[18]=(4294901760&t[18])+a+2),a++}function ge(t,e,n,r){const i=n[r]<0,o=n[r+1],s=t[i?-n[r]:n[r]];i?t[2]>>11<t[18]>>16&&(3&t[2])===e&&(t[2]+=2048,o.call(s)):o.call(s)}const me=-1;class ye{constructor(t,e,n){this.factory=t,this.resolving=!1,this.canSeeViewProviders=e,this.injectImpl=n}}function ve(t,e,n){const r=Ot(t);let i=0;for(;i<n.length;){const o=n[i];if("number"==typeof o){if(0!==o)break;i++;const s=n[i++],a=n[i++],u=n[i++];r?t.setAttribute(e,a,u,s):e.setAttributeNS(s,a,u)}else{const s=o,a=n[++i];we(s)?r&&t.setProperty(e,s,a):r?t.setAttribute(e,s,a):e.setAttribute(s,a),i++}}return i}function be(t){return 3===t||4===t||6===t}function we(t){return 64===t.charCodeAt(0)}function _e(t,e){if(null===e||0===e.length);else if(null===t||0===t.length)t=e.slice();else{let n=-1;for(let r=0;r<e.length;r++){const i=e[r];"number"==typeof i?n=i:0===n||Ie(t,n,i,null,-1===n||2===n?e[++r]:null)}}return t}function Ie(t,e,n,r,i){let o=0,s=t.length;if(-1===e)s=-1;else for(;o<t.length;){const n=t[o++];if("number"==typeof n){if(n===e){s=-1;break}if(n>e){s=o-1;break}}}for(;o<t.length;){const e=t[o];if("number"==typeof e)break;if(e===n){if(null===r)return void(null!==i&&(t[o+1]=i));if(r===t[o+1])return void(t[o+2]=i)}o++,null!==r&&o++,null!==i&&o++}-1!==s&&(t.splice(s,0,e),o=s+1),t.splice(o++,0,n),null!==r&&t.splice(o++,0,r),null!==i&&t.splice(o++,0,i)}function Ee(t){return t!==me}function Se(t){return 32767&t}function Oe(t,e){let n=t>>16,r=e;for(;n>0;)r=r[15],n--;return r}let Te=!0;function Ce(t){const e=Te;return Te=t,e}let xe=0;function Ae(t,e){const n=ke(t,e);if(-1!==n)return n;const r=e[1];r.firstCreatePass&&(t.injectorIndex=e.length,je(r.data,t),je(e,null),je(r.blueprint,null));const i=Ne(t,e),o=t.injectorIndex;if(Ee(i)){const t=Se(i),n=Oe(i,e),r=n[1].data;for(let i=0;i<8;i++)e[o+i]=n[t+i]|r[t+i]}return e[o+8]=i,o}function je(t,e){t.push(0,0,0,0,0,0,0,0,e)}function ke(t,e){return-1===t.injectorIndex||t.parent&&t.parent.injectorIndex===t.injectorIndex||null===e[t.injectorIndex+8]?-1:t.injectorIndex}function Ne(t,e){if(t.parent&&-1!==t.parent.injectorIndex)return t.parent.injectorIndex;let n=0,r=null,i=e;for(;null!==i;){const t=i[1],e=t.type;if(r=2===e?t.declTNode:1===e?i[6]:null,null===r)return me;if(n++,i=i[15],-1!==r.injectorIndex)return r.injectorIndex|n<<16}return me}function De(t,e,n){!function(t,e,n){let r;"string"==typeof n?r=n.charCodeAt(0)||0:n.hasOwnProperty(W)&&(r=n[W]),null==r&&(r=n[W]=xe++);const i=255&r;e.data[t+(i>>5)]|=1<<i}(t,e,n)}function Re(t,e,n){if(n&A.Optional)return t;b(e,"NodeInjector")}function Pe(t,e,n,r){if(n&A.Optional&&void 0===r&&(r=null),0==(n&(A.Self|A.Host))){const i=t[9],o=k(void 0);try{return i?i.get(e,r,n&A.Optional):N(e,r,n&A.Optional)}finally{k(o)}}return Re(r,e,n)}function Le(t,e,n,r=A.Default,i){if(null!==t){const o=function(t){if("string"==typeof t)return t.charCodeAt(0)||0;const e=t.hasOwnProperty(W)?t[W]:void 0;return"number"==typeof e?e>=0?255&e:Ue:e}(n);if("function"==typeof o){if(!te(e,t,r))return r&A.Host?Re(i,n,r):Pe(e,n,r,i);try{const t=o();if(null!=t||r&A.Optional)return t;b(n)}finally{oe()}}else if("number"==typeof o){let i=null,s=ke(t,e),a=me,u=r&A.Host?e[16][6]:null;for((-1===s||r&A.SkipSelf)&&(a=-1===s?Ne(t,e):e[s+8],a!==me&&He(r,!1)?(i=e[1],s=Se(a),e=Oe(a,e)):s=-1);-1!==s;){const t=e[1];if(Be(o,s,t.data)){const t=Fe(s,e,n,i,r,u);if(t!==Me)return t}a=e[s+8],a!==me&&He(r,e[1].data[s+8]===u)&&Be(o,s,e)?(i=t,s=Se(a),e=Oe(a,e)):s=-1}}}return Pe(e,n,r,i)}const Me={};function Ue(){return new ze(Bt(),Ft())}function Fe(t,e,n,r,i,o){const s=e[1],a=s.data[t+8],u=Ve(a,s,n,null==r?dt(a)&&Te:r!=s&&0!=(3&a.type),i&A.Host&&o===a);return null!==u?qe(e,s,u,a):Me}function Ve(t,e,n,r,i){const o=t.providerIndexes,s=e.data,a=1048575&o,u=t.directiveStart,c=o>>20,l=i?a+c:t.directiveEnd;for(let h=r?a:a+c;h<l;h++){const t=s[h];if(h<u&&n===t||h>=u&&t.type===n)return h}if(i){const t=s[u];if(t&&gt(t)&&t.type===n)return u}return null}function qe(t,e,n,r){let i=t[n];const o=e.data;if(i instanceof ye){const s=i;s.resolving&&function(t,e){throw new m("200",`Circular dependency in DI detected for ${t}`)}(v(o[n]));const a=Ce(s.canSeeViewProviders);s.resolving=!0;const u=s.injectImpl?k(s.injectImpl):null;te(t,r,A.Default);try{i=t[n]=s.factory(void 0,o,t,r),e.firstCreatePass&&n>=r.directiveStart&&function(t,e,n){const{ngOnChanges:r,ngOnInit:i,ngDoCheck:o}=e.type.prototype;if(r){const r=bt(e);(n.preOrderHooks||(n.preOrderHooks=[])).push(t,r),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,r)}i&&(n.preOrderHooks||(n.preOrderHooks=[])).push(0-t,i),o&&((n.preOrderHooks||(n.preOrderHooks=[])).push(t,o),(n.preOrderCheckHooks||(n.preOrderCheckHooks=[])).push(t,o))}(n,o[n],e)}finally{null!==u&&k(u),Ce(a),s.resolving=!1,oe()}}return i}function Be(t,e,n){return!!(n[e+(t>>5)]&1<<t)}function He(t,e){return!(t&A.Self||t&A.Host&&e)}class ze{constructor(t,e){this._tNode=t,this._lView=e}get(t,e){return Le(this._tNode,this._lView,t,void 0,e)}}function Ge(t){return function(t,e){if("class"===e)return t.classes;if("style"===e)return t.styles;const n=t.attrs;if(n){const t=n.length;let r=0;for(;r<t;){const i=n[r];if(be(i))break;if(0===i)r+=2;else if("number"==typeof i)for(r++;r<t&&"string"==typeof n[r];)r++;else{if(i===e)return n[r+1];r+=2}}}return null}(Bt(),t)}const Ke="__parameters__";function Je(t,e,n){return D(()=>{const r=function(t){return function(...e){if(t){const n=t(...e);for(const t in n)this[t]=n[t]}}}(e);function i(...t){if(this instanceof i)return r.apply(this,t),this;const e=new i(...t);return n.annotation=e,n;function n(t,n,r){const i=t.hasOwnProperty(Ke)?t[Ke]:Object.defineProperty(t,Ke,{value:[]})[Ke];for(;i.length<=r;)i.push(null);return(i[r]=i[r]||[]).push(e),t}}return n&&(i.prototype=Object.create(n.prototype)),i.prototype.ngMetadataName=t,i.annotationCls=i,i})}class $e{constructor(t,e){this._desc=t,this.ngMetadataName="InjectionToken",this.\u0275prov=void 0,"number"==typeof e?this.__NG_ELEMENT_ID__=e:void 0!==e&&(this.\u0275prov=w({token:this,providedIn:e.providedIn||"root",factory:e.factory}))}toString(){return`InjectionToken ${this._desc}`}}const We=new $e("AnalyzeForEntryComponents"),Qe=Function;function Ye(t,e){void 0===e&&(e=t);for(let n=0;n<t.length;n++){let r=t[n];Array.isArray(r)?(e===t&&(e=t.slice(0,n)),Ye(r,e)):e!==t&&e.push(r)}return e}function Xe(t,e){t.forEach(t=>Array.isArray(t)?Xe(t,e):e(t))}function Ze(t,e,n){e>=t.length?t.push(n):t.splice(e,0,n)}function tn(t,e){return e>=t.length-1?t.pop():t.splice(e,1)[0]}const en={},nn=/\n/gm,rn="__source",on=l({provide:String,useValue:l});let sn;function an(t){const e=sn;return sn=t,e}function un(t,e=A.Default){if(void 0===sn)throw new Error("inject() must be called from an injection context");return null===sn?N(t,void 0,e):sn.get(t,e&A.Optional?null:void 0,e)}function cn(t,e=A.Default){return(j||un)(g(t),e)}function ln(t){const e=[];for(let n=0;n<t.length;n++){const r=g(t[n]);if(Array.isArray(r)){if(0===r.length)throw new Error("Arguments array must have arguments.");let t,n=A.Default;for(let e=0;e<r.length;e++){const i=r[e],o=i.__NG_DI_FLAG__;"number"==typeof o?-1===o?t=i.token:n|=o:t=i}e.push(cn(t,n))}else e.push(cn(r))}return e}function hn(t,e){return t.__NG_DI_FLAG__=e,t.prototype.__NG_DI_FLAG__=e,t}const fn=hn(Je("Inject",t=>({token:t})),-1),dn=hn(Je("Optional"),8),pn=hn(Je("SkipSelf"),4);let gn;function mn(t){var e;return(null===(e=function(){if(void 0===gn&&(gn=null,V.trustedTypes))try{gn=V.trustedTypes.createPolicy("angular",{createHTML:t=>t,createScript:t=>t,createScriptURL:t=>t})}catch(e){}return gn}())||void 0===e?void 0:e.createHTML(t))||t}class yn{constructor(t){this.changingThisBreaksApplicationSecurity=t}toString(){return`SafeValue must use [property]=binding: ${this.changingThisBreaksApplicationSecurity} (see https://g.co/ng/security#xss)`}}class vn extends yn{getTypeName(){return"HTML"}}class bn extends yn{getTypeName(){return"Style"}}class wn extends yn{getTypeName(){return"Script"}}class _n extends yn{getTypeName(){return"URL"}}class In extends yn{getTypeName(){return"ResourceURL"}}function En(t){return t instanceof yn?t.changingThisBreaksApplicationSecurity:t}function Sn(t,e){const n=On(t);if(null!=n&&n!==e){if("ResourceURL"===n&&"URL"===e)return!0;throw new Error(`Required a safe ${e}, got a ${n} (see https://g.co/ng/security#xss)`)}return n===e}function On(t){return t instanceof yn&&t.getTypeName()||null}function Tn(t){return new vn(t)}function Cn(t){return new bn(t)}function xn(t){return new wn(t)}function An(t){return new _n(t)}function jn(t){return new In(t)}class kn{constructor(t){this.inertDocumentHelper=t}getInertBodyElement(t){t="<body><remove></remove>"+t;try{const e=(new window.DOMParser).parseFromString(mn(t),"text/html").body;return null===e?this.inertDocumentHelper.getInertBodyElement(t):(e.removeChild(e.firstChild),e)}catch(e){return null}}}class Nn{constructor(t){if(this.defaultDoc=t,this.inertDocument=this.defaultDoc.implementation.createHTMLDocument("sanitization-inert"),null==this.inertDocument.body){const t=this.inertDocument.createElement("html");this.inertDocument.appendChild(t);const e=this.inertDocument.createElement("body");t.appendChild(e)}}getInertBodyElement(t){const e=this.inertDocument.createElement("template");if("content"in e)return e.innerHTML=mn(t),e;const n=this.inertDocument.createElement("body");return n.innerHTML=mn(t),this.defaultDoc.documentMode&&this.stripCustomNsAttrs(n),n}stripCustomNsAttrs(t){const e=t.attributes;for(let r=e.length-1;0<r;r--){const n=e.item(r).name;"xmlns:ns1"!==n&&0!==n.indexOf("ns1:")||t.removeAttribute(n)}let n=t.firstChild;for(;n;)n.nodeType===Node.ELEMENT_NODE&&this.stripCustomNsAttrs(n),n=n.nextSibling}}const Dn=/^(?:(?:https?|mailto|ftp|tel|file|sms):|[^&:/?#]*(?:[/?#]|$))/gi,Rn=/^data:(?:image\/(?:bmp|gif|jpeg|jpg|png|tiff|webp)|video\/(?:mpeg|mp4|ogg|webm)|audio\/(?:mp3|oga|ogg|opus));base64,[a-z0-9+\/]+=*$/i;function Pn(t){return(t=String(t)).match(Dn)||t.match(Rn)?t:"unsafe:"+t}function Ln(t){const e={};for(const n of t.split(","))e[n]=!0;return e}function Mn(...t){const e={};for(const n of t)for(const t in n)n.hasOwnProperty(t)&&(e[t]=!0);return e}const Un=Ln("area,br,col,hr,img,wbr"),Fn=Ln("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),Vn=Ln("rp,rt"),qn=Mn(Vn,Fn),Bn=Mn(Un,Mn(Fn,Ln("address,article,aside,blockquote,caption,center,del,details,dialog,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,main,map,menu,nav,ol,pre,section,summary,table,ul")),Mn(Vn,Ln("a,abbr,acronym,audio,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,picture,q,ruby,rp,rt,s,samp,small,source,span,strike,strong,sub,sup,time,track,tt,u,var,video")),qn),Hn=Ln("background,cite,href,itemtype,longdesc,poster,src,xlink:href"),zn=Ln("srcset"),Gn=Mn(Hn,zn,Ln("abbr,accesskey,align,alt,autoplay,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,controls,coords,datetime,default,dir,download,face,headers,height,hidden,hreflang,hspace,ismap,itemscope,itemprop,kind,label,lang,language,loop,media,muted,nohref,nowrap,open,preload,rel,rev,role,rows,rowspan,rules,scope,scrolling,shape,size,sizes,span,srclang,start,summary,tabindex,target,title,translate,type,usemap,valign,value,vspace,width"),Ln("aria-activedescendant,aria-atomic,aria-autocomplete,aria-busy,aria-checked,aria-colcount,aria-colindex,aria-colspan,aria-controls,aria-current,aria-describedby,aria-details,aria-disabled,aria-dropeffect,aria-errormessage,aria-expanded,aria-flowto,aria-grabbed,aria-haspopup,aria-hidden,aria-invalid,aria-keyshortcuts,aria-label,aria-labelledby,aria-level,aria-live,aria-modal,aria-multiline,aria-multiselectable,aria-orientation,aria-owns,aria-placeholder,aria-posinset,aria-pressed,aria-readonly,aria-relevant,aria-required,aria-roledescription,aria-rowcount,aria-rowindex,aria-rowspan,aria-selected,aria-setsize,aria-sort,aria-valuemax,aria-valuemin,aria-valuenow,aria-valuetext")),Kn=Ln("script,style,template");class Jn{constructor(){this.sanitizedSomething=!1,this.buf=[]}sanitizeChildren(t){let e=t.firstChild,n=!0;for(;e;)if(e.nodeType===Node.ELEMENT_NODE?n=this.startElement(e):e.nodeType===Node.TEXT_NODE?this.chars(e.nodeValue):this.sanitizedSomething=!0,n&&e.firstChild)e=e.firstChild;else for(;e;){e.nodeType===Node.ELEMENT_NODE&&this.endElement(e);let t=this.checkClobberedElement(e,e.nextSibling);if(t){e=t;break}e=this.checkClobberedElement(e,e.parentNode)}return this.buf.join("")}startElement(t){const e=t.nodeName.toLowerCase();if(!Bn.hasOwnProperty(e))return this.sanitizedSomething=!0,!Kn.hasOwnProperty(e);this.buf.push("<"),this.buf.push(e);const n=t.attributes;for(let i=0;i<n.length;i++){const t=n.item(i),e=t.name,o=e.toLowerCase();if(!Gn.hasOwnProperty(o)){this.sanitizedSomething=!0;continue}let s=t.value;Hn[o]&&(s=Pn(s)),zn[o]&&(r=s,s=(r=String(r)).split(",").map(t=>Pn(t.trim())).join(", ")),this.buf.push(" ",e,'="',Qn(s),'"')}var r;return this.buf.push(">"),!0}endElement(t){const e=t.nodeName.toLowerCase();Bn.hasOwnProperty(e)&&!Un.hasOwnProperty(e)&&(this.buf.push("</"),this.buf.push(e),this.buf.push(">"))}chars(t){this.buf.push(Qn(t))}checkClobberedElement(t,e){if(e&&(t.compareDocumentPosition(e)&Node.DOCUMENT_POSITION_CONTAINED_BY)===Node.DOCUMENT_POSITION_CONTAINED_BY)throw new Error(`Failed to sanitize html because the element is clobbered: ${t.outerHTML}`);return e}}const $n=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,Wn=/([^\#-~ |!])/g;function Qn(t){return t.replace(/&/g,"&amp;").replace($n,function(t){return"&#"+(1024*(t.charCodeAt(0)-55296)+(t.charCodeAt(1)-56320)+65536)+";"}).replace(Wn,function(t){return"&#"+t.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}let Yn;function Xn(t,e){let n=null;try{Yn=Yn||function(t){const e=new Nn(t);return function(){try{return!!(new window.DOMParser).parseFromString(mn(""),"text/html")}catch(t){return!1}}()?new kn(e):e}(t);let r=e?String(e):"";n=Yn.getInertBodyElement(r);let i=5,o=r;do{if(0===i)throw new Error("Failed to sanitize html because the input is unstable");i--,r=o,o=n.innerHTML,n=Yn.getInertBodyElement(r)}while(r!==o);return mn((new Jn).sanitizeChildren(Zn(n)||n))}finally{if(n){const t=Zn(n)||n;for(;t.firstChild;)t.removeChild(t.firstChild)}}}function Zn(t){return"content"in t&&function(t){return t.nodeType===Node.ELEMENT_NODE&&"TEMPLATE"===t.nodeName}(t)?t.content:null}var tr=function(t){return t[t.NONE=0]="NONE",t[t.HTML=1]="HTML",t[t.STYLE=2]="STYLE",t[t.SCRIPT=3]="SCRIPT",t[t.URL=4]="URL",t[t.RESOURCE_URL=5]="RESOURCE_URL",t}({});function er(t){const e=function(){const t=Ft();return t&&t[12]}();return e?e.sanitize(tr.URL,t)||"":Sn(t,"URL")?En(t):Pn(y(t))}function nr(t){return t.ngDebugContext}function rr(t){return t.ngOriginalError}function ir(t,...e){t.error(...e)}class or{constructor(){this._console=console}handleError(t){const e=this._findOriginalError(t),n=this._findContext(t),r=function(t){return t.ngErrorLogger||ir}(t);r(this._console,"ERROR",t),e&&r(this._console,"ORIGINAL ERROR",e),n&&r(this._console,"ERROR CONTEXT",n)}_findContext(t){return t?nr(t)?nr(t):this._findContext(rr(t)):null}_findOriginalError(t){let e=rr(t);for(;e&&rr(e);)e=rr(e);return e}}function sr(t,e){t.__ngContext__=e}const ar=(()=>("undefined"!=typeof requestAnimationFrame&&requestAnimationFrame||setTimeout).bind(V))();function ur(t){return t instanceof Function?t():t}var cr=function(t){return t[t.Important=1]="Important",t[t.DashCase=2]="DashCase",t}({});function lr(t,e){return(void 0)(t,e)}function hr(t){const e=t[3];return ht(e)?e[3]:e}function fr(t){return pr(t[13])}function dr(t){return pr(t[4])}function pr(t){for(;null!==t&&!ht(t);)t=t[4];return t}function gr(t,e,n,r,i){if(null!=r){let o,s=!1;ht(r)?o=r:lt(r)&&(s=!0,r=r[0]);const a=Ct(r);0===t&&null!==n?null==i?Ir(e,n,a):_r(e,n,a,i||null,!0):1===t&&null!==n?_r(e,n,a,i||null,!0):2===t?function(t,e,n){const r=Sr(t,e);r&&function(t,e,n,r){Ot(t)?t.removeChild(e,n,r):e.removeChild(n)}(t,r,e,n)}(e,a,s):3===t&&e.destroyNode(a),null!=o&&function(t,e,n,r,i){const o=n[7];o!==Ct(n)&&gr(e,t,r,o,i);for(let s=ct;s<n.length;s++){const i=n[s];jr(i[1],i,t,e,r,o)}}(e,t,o,n,i)}}function mr(t,e,n){return Ot(t)?t.createElement(e,n):null===n?t.createElement(e):t.createElementNS(n,e)}function yr(t,e){const n=t[9],r=n.indexOf(e),i=e[3];1024&e[2]&&(e[2]&=-1025,Lt(i,-1)),n.splice(r,1)}function vr(t,e){if(t.length<=ct)return;const n=ct+e,r=t[n];if(r){const o=r[17];null!==o&&o!==t&&yr(o,r),e>0&&(t[n-1][4]=r[4]);const s=tn(t,ct+e);jr(r[1],i=r,i[11],2,null,null),i[0]=null,i[6]=null;const a=s[19];null!==a&&a.detachView(s[1]),r[3]=null,r[4]=null,r[2]&=-129}var i;return r}function br(t,e){if(!(256&e[2])){const n=e[11];Ot(n)&&n.destroyNode&&jr(t,e,n,3,null,null),function(t){let e=t[13];if(!e)return wr(t[1],t);for(;e;){let n=null;if(lt(e))n=e[13];else{const t=e[10];t&&(n=t)}if(!n){for(;e&&!e[4]&&e!==t;)lt(e)&&wr(e[1],e),e=e[3];null===e&&(e=t),lt(e)&&wr(e[1],e),n=e&&e[4]}e=n}}(e)}}function wr(t,e){if(!(256&e[2])){e[2]&=-129,e[2]|=256,function(t,e){let n;if(null!=t&&null!=(n=t.destroyHooks))for(let r=0;r<n.length;r+=2){const t=e[n[r]];if(!(t instanceof ye)){const e=n[r+1];if(Array.isArray(e))for(let n=0;n<e.length;n+=2)e[n+1].call(t[e[n]]);else e.call(t)}}}(t,e),function(t,e){const n=t.cleanup,r=e[7];let i=-1;if(null!==n)for(let o=0;o<n.length-1;o+=2)if("string"==typeof n[o]){const t=n[o+1],s="function"==typeof t?t(e):Ct(e[t]),a=r[i=n[o+2]],u=n[o+3];"boolean"==typeof u?s.removeEventListener(n[o],a,u):u>=0?r[i=u]():r[i=-u].unsubscribe(),o+=2}else{const t=r[i=n[o+1]];n[o].call(t)}if(null!==r){for(let t=i+1;t<r.length;t++)(0,r[t])();e[7]=null}}(t,e),1===e[1].type&&Ot(e[11])&&e[11].destroy();const n=e[17];if(null!==n&&ht(e[3])){n!==e[3]&&yr(n,e);const r=e[19];null!==r&&r.detachView(t)}}}function _r(t,e,n,r,i){Ot(t)?t.insertBefore(e,n,r,i):e.insertBefore(n,r,i)}function Ir(t,e,n){Ot(t)?t.appendChild(e,n):e.appendChild(n)}function Er(t,e,n,r,i){null!==r?_r(t,e,n,r,i):Ir(t,e,n)}function Sr(t,e){return Ot(t)?t.parentNode(e):e.parentNode}function Or(t,e,n,r){const i=function(t,e,n){return function(t,e,n){let r=e;for(;null!==r&&40&r.type;)r=(e=r).parent;if(null===r)return n[0];if(2&r.flags){const e=t.data[r.directiveStart].encapsulation;if(e===P.None||e===P.Emulated)return null}return xt(r,n)}(t,e.parent,n)}(t,r,e),o=e[11],s=function(t,e,n){return function(t,e,n){return 40&t.type?xt(t,n):null}(t,0,n)}(r.parent||e[6],0,e);if(null!=i)if(Array.isArray(n))for(let a=0;a<n.length;a++)Er(o,i,n[a],s,!1);else Er(o,i,n,s,!1)}function Tr(t,e){if(null!==e){const n=e.type;if(3&n)return xt(e,t);if(4&n)return xr(-1,t[e.index]);if(8&n){const n=e.child;if(null!==n)return Tr(t,n);{const n=t[e.index];return ht(n)?xr(-1,n):Ct(n)}}if(32&n)return lr(e,t)()||Ct(t[e.index]);{const n=Cr(t,e);return null!==n?Array.isArray(n)?n[0]:Tr(hr(t[16]),n):Tr(t,e.next)}}return null}function Cr(t,e){return null!==e?t[16][6].projection[e.projection]:null}function xr(t,e){const n=ct+t+1;if(n<e.length){const t=e[n],r=t[1].firstChild;if(null!==r)return Tr(t,r)}return e[7]}function Ar(t,e,n,r,i,o,s){for(;null!=n;){const a=r[n.index],u=n.type;if(s&&0===e&&(a&&sr(Ct(a),r),n.flags|=4),64!=(64&n.flags))if(8&u)Ar(t,e,n.child,r,i,o,!1),gr(e,t,i,a,o);else if(32&u){const s=lr(n,r);let u;for(;u=s();)gr(e,t,i,u,o);gr(e,t,i,a,o)}else 16&u?kr(t,e,r,n,i,o):gr(e,t,i,a,o);n=s?n.projectionNext:n.next}}function jr(t,e,n,r,i,o){Ar(n,r,t.firstChild,e,i,o,!1)}function kr(t,e,n,r,i,o){const s=n[16],a=s[6].projection[r.projection];if(Array.isArray(a))for(let u=0;u<a.length;u++)gr(e,t,i,a[u],o);else Ar(t,e,a,s[3],i,o,!0)}function Nr(t,e,n){Ot(t)?t.setAttribute(e,"style",n):e.style.cssText=n}function Dr(t,e,n){Ot(t)?""===n?t.removeAttribute(e,"class"):t.setAttribute(e,"class",n):e.className=n}function Rr(t,e,n){let r=t.length;for(;;){const i=t.indexOf(e,n);if(-1===i)return i;if(0===i||t.charCodeAt(i-1)<=32){const n=e.length;if(i+n===r||t.charCodeAt(i+n)<=32)return i}n=i+1}}const Pr="ng-template";function Lr(t,e,n){let r=0;for(;r<t.length;){let i=t[r++];if(n&&"class"===i){if(i=t[r],-1!==Rr(i.toLowerCase(),e,0))return!0}else if(1===i){for(;r<t.length&&"string"==typeof(i=t[r++]);)if(i.toLowerCase()===e)return!0;return!1}}return!1}function Mr(t){return 4===t.type&&t.value!==Pr}function Ur(t,e,n){return e===(4!==t.type||n?t.value:Pr)}function Fr(t,e,n){let r=4;const i=t.attrs||[],o=function(t){for(let e=0;e<t.length;e++)if(be(t[e]))return e;return t.length}(i);let s=!1;for(let a=0;a<e.length;a++){const u=e[a];if("number"!=typeof u){if(!s)if(4&r){if(r=2|1&r,""!==u&&!Ur(t,u,n)||""===u&&1===e.length){if(Vr(r))return!1;s=!0}}else{const c=8&r?u:e[++a];if(8&r&&null!==t.attrs){if(!Lr(t.attrs,c,n)){if(Vr(r))return!1;s=!0}continue}const l=qr(8&r?"class":u,i,Mr(t),n);if(-1===l){if(Vr(r))return!1;s=!0;continue}if(""!==c){let t;t=l>o?"":i[l+1].toLowerCase();const e=8&r?t:null;if(e&&-1!==Rr(e,c,0)||2&r&&c!==t){if(Vr(r))return!1;s=!0}}}}else{if(!s&&!Vr(r)&&!Vr(u))return!1;if(s&&Vr(u))continue;s=!1,r=u|1&r}}return Vr(r)||s}function Vr(t){return 0==(1&t)}function qr(t,e,n,r){if(null===e)return-1;let i=0;if(r||!n){let n=!1;for(;i<e.length;){const r=e[i];if(r===t)return i;if(3===r||6===r)n=!0;else{if(1===r||2===r){let t=e[++i];for(;"string"==typeof t;)t=e[++i];continue}if(4===r)break;if(0===r){i+=4;continue}}i+=n?1:2}return-1}return function(t,e){let n=t.indexOf(4);if(n>-1)for(n++;n<t.length;){const r=t[n];if("number"==typeof r)return-1;if(r===e)return n;n++}return-1}(e,t)}function Br(t,e,n=!1){for(let r=0;r<e.length;r++)if(Fr(t,e[r],n))return!0;return!1}function Hr(t,e){return t?":not("+e.trim()+")":e}function zr(t){let e=t[0],n=1,r=2,i="",o=!1;for(;n<t.length;){let s=t[n];if("string"==typeof s)if(2&r){const e=t[++n];i+="["+s+(e.length>0?'="'+e+'"':"")+"]"}else 8&r?i+="."+s:4&r&&(i+=" "+s);else""===i||Vr(s)||(e+=Hr(o,i),i=""),r=s,o=o||!Vr(r);n++}return""!==i&&(e+=Hr(o,i)),e}const Gr={};function Kr(t){Jr(Vt(),Ft(),ae()+t,Kt())}function Jr(t,e,n,r){if(!r)if(3==(3&e[2])){const r=t.preOrderCheckHooks;null!==r&&he(e,r,n)}else{const r=t.preOrderHooks;null!==r&&fe(e,r,0,n)}ue(n)}function $r(t,e){const n=t.contentQueries;if(null!==n)for(let r=0;r<n.length;r+=2){const i=n[r],o=n[r+1];if(-1!==o){const n=t.data[o];Xt(i),n.contentQueries(2,e[o],o)}}}function Wr(t,e,n,r,i,o,s,a,u,c){const l=e.blueprint.slice();return l[0]=i,l[2]=140|r,Pt(l),l[3]=l[15]=t,l[8]=n,l[10]=s||t&&t[10],l[11]=a||t&&t[11],l[12]=u||t&&t[12]||null,l[9]=c||t&&t[9]||null,l[6]=o,l[16]=2==e.type?t[16]:l,l}function Qr(t,e,n,r,i){let o=t.data[e];if(null===o)o=function(t,e,n,r,i){const o=Ht(),s=Gt(),a=t.data[e]=function(t,e,n,r,i,o){return{type:n,index:r,insertBeforeIndex:null,injectorIndex:e?e.injectorIndex:-1,directiveStart:-1,directiveEnd:-1,directiveStylingLast:-1,propertyBindings:null,flags:0,providerIndexes:0,value:i,attrs:o,mergedAttrs:null,localNames:null,initialInputs:void 0,inputs:null,outputs:null,tViews:null,next:null,projectionNext:null,child:null,parent:e,projection:null,styles:null,stylesWithoutHost:null,residualStyles:void 0,classes:null,classesWithoutHost:null,residualClasses:void 0,classBindings:0,styleBindings:0}}(0,s?o:o&&o.parent,n,e,r,i);return null===t.firstChild&&(t.firstChild=a),null!==o&&(s?null==o.child&&null!==a.parent&&(o.child=a):null===o.next&&(o.next=a)),a}(t,e,n,r,i),Mt.lFrame.inI18n&&(o.flags|=64);else if(64&o.type){o.type=n,o.value=r,o.attrs=i;const t=function(){const t=Mt.lFrame,e=t.currentTNode;return t.isParent?e:e.parent}();o.injectorIndex=null===t?-1:t.injectorIndex}return zt(o,!0),o}function Yr(t,e,n,r){if(0===n)return-1;const i=e.length;for(let o=0;o<n;o++)e.push(r),t.blueprint.push(r),t.data.push(null);return i}function Xr(t,e,n){ee(e);try{const r=t.viewQuery;null!==r&&Ci(1,r,n);const i=t.template;null!==i&&ei(t,e,i,1,n),t.firstCreatePass&&(t.firstCreatePass=!1),t.staticContentQueries&&$r(t,e),t.staticViewQueries&&Ci(2,t.viewQuery,n);const o=t.components;null!==o&&function(t,e){for(let n=0;n<e.length;n++)Ii(t,e[n])}(e,o)}catch(r){throw t.firstCreatePass&&(t.incompleteFirstPass=!0),r}finally{e[2]&=-5,se()}}function Zr(t,e,n,r){const i=e[2];if(256==(256&i))return;ee(e);const o=Kt();try{Pt(e),Mt.lFrame.bindingIndex=t.bindingStartIndex,null!==n&&ei(t,e,n,2,r);const s=3==(3&i);if(!o)if(s){const n=t.preOrderCheckHooks;null!==n&&he(e,n,null)}else{const n=t.preOrderHooks;null!==n&&fe(e,n,0,null),de(e,0)}if(function(t){for(let e=fr(t);null!==e;e=dr(e)){if(!e[2])continue;const t=e[9];for(let e=0;e<t.length;e++){const n=t[e],r=n[3];0==(1024&n[2])&&Lt(r,1),n[2]|=1024}}}(e),function(t){for(let e=fr(t);null!==e;e=dr(e))for(let t=ct;t<e.length;t++){const n=e[t],r=n[1];Dt(n)&&Zr(r,n,r.template,n[8])}}(e),null!==t.contentQueries&&$r(t,e),!o)if(s){const n=t.contentCheckHooks;null!==n&&he(e,n)}else{const n=t.contentHooks;null!==n&&fe(e,n,1),de(e,1)}!function(t,e){const n=t.hostBindingOpCodes;if(null!==n)try{for(let t=0;t<n.length;t++){const r=n[t];if(r<0)ue(~r);else{const i=r,o=n[++t],s=n[++t];Wt(o,i),s(2,e[i])}}}finally{ue(-1)}}(t,e);const a=t.components;null!==a&&function(t,e){for(let n=0;n<e.length;n++)wi(t,e[n])}(e,a);const u=t.viewQuery;if(null!==u&&Ci(2,u,r),!o)if(s){const n=t.viewCheckHooks;null!==n&&he(e,n)}else{const n=t.viewHooks;null!==n&&fe(e,n,2),de(e,2)}!0===t.firstUpdatePass&&(t.firstUpdatePass=!1),o||(e[2]&=-73),1024&e[2]&&(e[2]&=-1025,Lt(e[3],-1))}finally{se()}}function ti(t,e,n,r){const i=e[10],o=!Kt(),s=Nt(e);try{o&&!s&&i.begin&&i.begin(),s&&Xr(t,e,r),Zr(t,e,n,r)}finally{o&&!s&&i.end&&i.end()}}function ei(t,e,n,r,i){const o=ae();try{ue(-1),2&r&&e.length>ut&&Jr(t,e,ut,Kt()),n(r,i)}finally{ue(o)}}function ni(t,e,n){Ut()&&(function(t,e,n,r){const i=n.directiveStart,o=n.directiveEnd;t.firstCreatePass||Ae(n,e),sr(r,e);const s=n.initialInputs;for(let a=i;a<o;a++){const r=t.data[a],o=gt(r);o&&mi(e,n,r);const u=qe(e,t,a,n);sr(u,e),null!==s&&yi(0,a-i,u,r,0,s),o&&(jt(n.index,e)[8]=u)}}(t,e,n,xt(n,e)),128==(128&n.flags)&&function(t,e,n){const r=n.directiveStart,i=n.directiveEnd,o=n.index,s=Mt.lFrame.currentDirectiveIndex;try{ue(o);for(let n=r;n<i;n++){const r=t.data[n],i=e[n];Qt(n),null===r.hostBindings&&0===r.hostVars&&null===r.hostAttrs||hi(r,i)}}finally{ue(-1),Qt(s)}}(t,e,n))}function ri(t,e,n=xt){const r=e.localNames;if(null!==r){let i=e.index+1;for(let o=0;o<r.length;o+=2){const s=r[o+1],a=-1===s?n(e,t):t[s];t[i++]=a}}}function ii(t){const e=t.tView;return null===e||e.incompleteFirstPass?t.tView=oi(1,null,t.template,t.decls,t.vars,t.directiveDefs,t.pipeDefs,t.viewQuery,t.schemas,t.consts):e}function oi(t,e,n,r,i,o,s,a,u,c){const l=ut+r,h=l+i,f=function(t,e){const n=[];for(let r=0;r<e;r++)n.push(r<t?null:Gr);return n}(l,h),d="function"==typeof c?c():c;return f[1]={type:t,blueprint:f,template:n,queries:null,viewQuery:a,declTNode:e,data:f.slice().fill(null,l),bindingStartIndex:l,expandoStartIndex:h,hostBindingOpCodes:null,firstCreatePass:!0,firstUpdatePass:!0,staticViewQueries:!1,staticContentQueries:!1,preOrderHooks:null,preOrderCheckHooks:null,contentHooks:null,contentCheckHooks:null,viewHooks:null,viewCheckHooks:null,destroyHooks:null,cleanup:null,contentQueries:null,components:null,directiveRegistry:"function"==typeof o?o():o,pipeRegistry:"function"==typeof s?s():s,firstChild:null,schemas:u,consts:d,incompleteFirstPass:!1}}function si(t,e,n,r){const i=Ai(e);null===n?i.push(r):(i.push(n),t.firstCreatePass&&ji(t).push(r,i.length-1))}function ai(t,e,n){for(let r in t)if(t.hasOwnProperty(r)){const i=t[r];(n=null===n?{}:n).hasOwnProperty(r)?n[r].push(e,i):n[r]=[e,i]}return n}function ui(t,e,n,r,i,o,s,a){const u=xt(e,n);let c,l=e.inputs;var h;!a&&null!=l&&(c=l[r])?(Ni(t,n,c,r,i),dt(e)&&function(t,e){const n=jt(e,t);16&n[2]||(n[2]|=64)}(n,e.index)):3&e.type&&(r="class"===(h=r)?"className":"for"===h?"htmlFor":"formaction"===h?"formAction":"innerHtml"===h?"innerHTML":"readonly"===h?"readOnly":"tabindex"===h?"tabIndex":h,i=null!=s?s(i,e.value||"",r):i,Ot(o)?o.setProperty(u,r,i):we(r)||(u.setProperty?u.setProperty(r,i):u[r]=i))}function ci(t,e,n,r){let i=!1;if(Ut()){const o=function(t,e,n){const r=t.directiveRegistry;let i=null;if(r)for(let o=0;o<r.length;o++){const s=r[o];Br(n,s.selectors,!1)&&(i||(i=[]),De(Ae(n,e),t,s.type),gt(s)?(fi(t,n),i.unshift(s)):i.push(s))}return i}(t,e,n),s=null===r?null:{"":-1};if(null!==o){i=!0,pi(n,t.data.length,o.length);for(let t=0;t<o.length;t++){const e=o[t];e.providersResolver&&e.providersResolver(e)}let r=!1,a=!1,u=Yr(t,e,o.length,null);for(let i=0;i<o.length;i++){const c=o[i];n.mergedAttrs=_e(n.mergedAttrs,c.hostAttrs),gi(t,n,e,u,c),di(u,c,s),null!==c.contentQueries&&(n.flags|=8),null===c.hostBindings&&null===c.hostAttrs&&0===c.hostVars||(n.flags|=128);const l=c.type.prototype;!r&&(l.ngOnChanges||l.ngOnInit||l.ngDoCheck)&&((t.preOrderHooks||(t.preOrderHooks=[])).push(n.index),r=!0),a||!l.ngOnChanges&&!l.ngDoCheck||((t.preOrderCheckHooks||(t.preOrderCheckHooks=[])).push(n.index),a=!0),u++}!function(t,e){const n=e.directiveEnd,r=t.data,i=e.attrs,o=[];let s=null,a=null;for(let u=e.directiveStart;u<n;u++){const t=r[u],n=t.inputs,c=null===i||Mr(e)?null:vi(n,i);o.push(c),s=ai(n,u,s),a=ai(t.outputs,u,a)}null!==s&&(s.hasOwnProperty("class")&&(e.flags|=16),s.hasOwnProperty("style")&&(e.flags|=32)),e.initialInputs=o,e.inputs=s,e.outputs=a}(t,n)}s&&function(t,e,n){if(e){const r=t.localNames=[];for(let t=0;t<e.length;t+=2){const i=n[e[t+1]];if(null==i)throw new m("301",`Export of name '${e[t+1]}' not found!`);r.push(e[t],i)}}}(n,r,s)}return n.mergedAttrs=_e(n.mergedAttrs,n.attrs),i}function li(t,e,n,r,i,o){const s=o.hostBindings;if(s){let n=t.hostBindingOpCodes;null===n&&(n=t.hostBindingOpCodes=[]);const o=~e.index;(function(t){let e=t.length;for(;e>0;){const n=t[--e];if("number"==typeof n&&n<0)return n}return 0})(n)!=o&&n.push(o),n.push(r,i,s)}}function hi(t,e){null!==t.hostBindings&&t.hostBindings(1,e)}function fi(t,e){e.flags|=2,(t.components||(t.components=[])).push(e.index)}function di(t,e,n){if(n){if(e.exportAs)for(let r=0;r<e.exportAs.length;r++)n[e.exportAs[r]]=t;gt(e)&&(n[""]=t)}}function pi(t,e,n){t.flags|=1,t.directiveStart=e,t.directiveEnd=e+n,t.providerIndexes=e}function gi(t,e,n,r,i){t.data[r]=i;const o=i.factory||(i.factory=mt(i.type)),s=new ye(o,gt(i),null);t.blueprint[r]=s,n[r]=s,li(t,e,0,r,Yr(t,n,i.hostVars,Gr),i)}function mi(t,e,n){const r=xt(e,t),i=ii(n),o=t[10],s=Ei(t,Wr(t,i,null,n.onPush?64:16,r,e,o,o.createRenderer(r,n),null,null));t[e.index]=s}function yi(t,e,n,r,i,o){const s=o[e];if(null!==s){const t=r.setInput;for(let e=0;e<s.length;){const i=s[e++],o=s[e++],a=s[e++];null!==t?r.setInput(n,a,i,o):n[o]=a}}}function vi(t,e){let n=null,r=0;for(;r<e.length;){const i=e[r];if(0!==i)if(5!==i){if("number"==typeof i)break;t.hasOwnProperty(i)&&(null===n&&(n=[]),n.push(i,t[i],e[r+1])),r+=2}else r+=2;else r+=4}return n}function bi(t,e,n,r){return new Array(t,!0,!1,e,null,0,r,n,null,null)}function wi(t,e){const n=jt(e,t);if(Dt(n)){const t=n[1];80&n[2]?Zr(t,n,t.template,n[8]):n[5]>0&&_i(n)}}function _i(t){for(let n=fr(t);null!==n;n=dr(n))for(let t=ct;t<n.length;t++){const e=n[t];if(1024&e[2]){const t=e[1];Zr(t,e,t.template,e[8])}else e[5]>0&&_i(e)}const e=t[1].components;if(null!==e)for(let n=0;n<e.length;n++){const r=jt(e[n],t);Dt(r)&&r[5]>0&&_i(r)}}function Ii(t,e){const n=jt(e,t),r=n[1];!function(t,e){for(let n=e.length;n<t.blueprint.length;n++)e.push(t.blueprint[n])}(r,n),Xr(r,n,n[8])}function Ei(t,e){return t[13]?t[14][4]=e:t[13]=e,t[14]=e,e}function Si(t){for(;t;){t[2]|=64;const e=hr(t);if(0!=(512&t[2])&&!e)return t;t=e}return null}function Oi(t,e,n){const r=e[10];r.begin&&r.begin();try{Zr(t,e,t.template,n)}catch(i){throw ki(e,i),i}finally{r.end&&r.end()}}function Ti(t){!function(t){for(let e=0;e<t.components.length;e++){const n=t.components[e],r=kt(n),i=r[1];ti(i,r,i.template,n)}}(t[8])}function Ci(t,e,n){Xt(0),e(t,n)}const xi=(()=>Promise.resolve(null))();function Ai(t){return t[7]||(t[7]=[])}function ji(t){return t.cleanup||(t.cleanup=[])}function ki(t,e){const n=t[9],r=n?n.get(or,null):null;r&&r.handleError(e)}function Ni(t,e,n,r,i){for(let o=0;o<n.length;){const s=n[o++],a=n[o++],u=e[s],c=t.data[s];null!==c.setInput?c.setInput(u,i,r,a):u[a]=i}}function Di(t,e,n){let r=n?t.styles:null,i=n?t.classes:null,o=0;if(null!==e)for(let s=0;s<e.length;s++){const t=e[s];"number"==typeof t?o=t:1==o?i=f(i,t):2==o&&(r=f(r,t+": "+e[++s]+";"))}n?t.styles=r:t.stylesWithoutHost=r,n?t.classes=i:t.classesWithoutHost=i}const Ri=new $e("INJECTOR",-1);class Pi{get(t,e=en){if(e===en){const e=new Error(`NullInjectorError: No provider for ${h(t)}!`);throw e.name="NullInjectorError",e}return e}}const Li=new $e("Set Injector scope."),Mi={},Ui={},Fi=[];let Vi;function qi(){return void 0===Vi&&(Vi=new Pi),Vi}function Bi(t,e=null,n=null,r){return new Hi(t,n,e||qi(),r)}class Hi{constructor(t,e,n,r=null){this.parent=n,this.records=new Map,this.injectorDefTypes=new Set,this.onDestroy=new Set,this._destroyed=!1;const i=[];e&&Xe(e,n=>this.processProvider(n,t,e)),Xe([t],t=>this.processInjectorType(t,[],i)),this.records.set(Ri,Gi(void 0,this));const o=this.records.get(Li);this.scope=null!=o?o.value:null,this.source=r||("object"==typeof t?null:h(t))}get destroyed(){return this._destroyed}destroy(){this.assertNotDestroyed(),this._destroyed=!0;try{this.onDestroy.forEach(t=>t.ngOnDestroy())}finally{this.records.clear(),this.onDestroy.clear(),this.injectorDefTypes.clear()}}get(t,e=en,n=A.Default){this.assertNotDestroyed();const r=an(this);try{if(!(n&A.SkipSelf)){let e=this.records.get(t);if(void 0===e){const n=("function"==typeof(i=t)||"object"==typeof i&&i instanceof $e)&&I(t);e=n&&this.injectableDefInScope(n)?Gi(zi(t),Mi):null,this.records.set(t,e)}if(null!=e)return this.hydrate(t,e)}return(n&A.Self?qi():this.parent).get(t,e=n&A.Optional&&e===en?null:e)}catch(o){if("NullInjectorError"===o.name){if((o.ngTempTokenPath=o.ngTempTokenPath||[]).unshift(h(t)),r)throw o;return function(t,e,n,r){const i=t.ngTempTokenPath;throw e[rn]&&i.unshift(e[rn]),t.message=function(t,e,n,r=null){t=t&&"\n"===t.charAt(0)&&"\u0275"==t.charAt(1)?t.substr(2):t;let i=h(e);if(Array.isArray(e))i=e.map(h).join(" -> ");else if("object"==typeof e){let t=[];for(let n in e)if(e.hasOwnProperty(n)){let r=e[n];t.push(n+":"+("string"==typeof r?JSON.stringify(r):h(r)))}i=`{${t.join(", ")}}`}return`${n}${r?"("+r+")":""}[${i}]: ${t.replace(nn,"\n  ")}`}("\n"+t.message,i,n,r),t.ngTokenPath=i,t.ngTempTokenPath=null,t}(o,t,"R3InjectorError",this.source)}throw o}finally{an(r)}var i}_resolveInjectorDefTypes(){this.injectorDefTypes.forEach(t=>this.get(t))}toString(){const t=[];return this.records.forEach((e,n)=>t.push(h(n))),`R3Injector[${t.join(", ")}]`}assertNotDestroyed(){if(this._destroyed)throw new Error("Injector has already been destroyed.")}processInjectorType(t,e,n){if(!(t=g(t)))return!1;let r=S(t);const i=null==r&&t.ngModule||void 0,o=void 0===i?t:i,s=-1!==n.indexOf(o);if(void 0!==i&&(r=S(i)),null==r)return!1;if(null!=r.imports&&!s){let t;n.push(o);try{Xe(r.imports,r=>{this.processInjectorType(r,e,n)&&(void 0===t&&(t=[]),t.push(r))})}finally{}if(void 0!==t)for(let e=0;e<t.length;e++){const{ngModule:n,providers:r}=t[e];Xe(r,t=>this.processProvider(t,n,r||Fi))}}this.injectorDefTypes.add(o);const a=mt(o)||(()=>new o);this.records.set(o,Gi(a,Mi));const u=r.providers;if(null!=u&&!s){const e=t;Xe(u,t=>this.processProvider(t,e,u))}return void 0!==i&&void 0!==t.providers}processProvider(t,e,n){let r=Ji(t=g(t))?t:g(t&&t.provide);const i=function(t,e,n){return Ki(t)?Gi(void 0,t.useValue):Gi(function(t,e,n){let r;if(Ji(t)){const e=g(t);return mt(e)||zi(e)}if(Ki(t))r=()=>g(t.useValue);else if((i=t)&&i.useFactory)r=()=>t.useFactory(...ln(t.deps||[]));else if(function(t){return!(!t||!t.useExisting)}(t))r=()=>cn(g(t.useExisting));else{const e=g(t&&(t.useClass||t.provide));if(!function(t){return!!t.deps}(t))return mt(e)||zi(e);r=()=>new e(...ln(t.deps))}var i;return r}(t),Mi)}(t);if(Ji(t)||!0!==t.multi)this.records.get(r);else{let e=this.records.get(r);e||(e=Gi(void 0,Mi,!0),e.factory=()=>ln(e.multi),this.records.set(r,e)),r=t,e.multi.push(t)}this.records.set(r,i)}hydrate(t,e){var n;return e.value===Mi&&(e.value=Ui,e.value=e.factory()),"object"==typeof e.value&&e.value&&null!==(n=e.value)&&"object"==typeof n&&"function"==typeof n.ngOnDestroy&&this.onDestroy.add(e.value),e.value}injectableDefInScope(t){return!!t.providedIn&&("string"==typeof t.providedIn?"any"===t.providedIn||t.providedIn===this.scope:this.injectorDefTypes.has(t.providedIn))}}function zi(t){const e=I(t),n=null!==e?e.factory:mt(t);if(null!==n)return n;if(t instanceof $e)throw new Error(`Token ${h(t)} is missing a \u0275prov definition.`);if(t instanceof Function)return function(t){const e=t.length;if(e>0){const n=function(t,e){const n=[];for(let r=0;r<t;r++)n.push("?");return n}(e);throw new Error(`Can't resolve all parameters for ${h(t)}: (${n.join(", ")}).`)}const n=function(t){const e=t&&(t[O]||t[C]);if(e){const n=function(t){if(t.hasOwnProperty("name"))return t.name;const e=(""+t).match(/^function\s*([^\s(]+)/);return null===e?"":e[1]}(t);return console.warn(`DEPRECATED: DI is instantiating a token "${n}" that inherits its @Injectable decorator but does not provide one itself.\nThis will become an error in a future version of Angular. Please add @Injectable() to the "${n}" class.`),e}return null}(t);return null!==n?()=>n.factory(t):()=>new t}(t);throw new Error("unreachable")}function Gi(t,e,n=!1){return{factory:t,value:e,multi:n?[]:void 0}}function Ki(t){return null!==t&&"object"==typeof t&&on in t}function Ji(t){return"function"==typeof t}const $i=function(t,e,n){return function(t,e=null,n=null,r){const i=Bi(t,e,n,r);return i._resolveInjectorDefTypes(),i}({name:n},e,t,n)};let Wi=(()=>{class t{static create(t,e){return Array.isArray(t)?$i(t,e,""):$i(t.providers,t.parent,t.name||"")}}return t.THROW_IF_NOT_FOUND=en,t.NULL=new Pi,t.\u0275prov=w({token:t,providedIn:"any",factory:()=>cn(Ri)}),t.__NG_ELEMENT_ID__=-1,t})();function Qi(t,e){le(kt(t)[1],Bt())}let Yi=null;function Xi(){if(!Yi){const t=V.Symbol;if(t&&t.iterator)Yi=t.iterator;else{const t=Object.getOwnPropertyNames(Map.prototype);for(let e=0;e<t.length;++e){const n=t[e];"entries"!==n&&"size"!==n&&Map.prototype[n]===Map.prototype.entries&&(Yi=n)}}}return Yi}function Zi(t){return!!to(t)&&(Array.isArray(t)||!(t instanceof Map)&&Xi()in t)}function to(t){return null!==t&&("function"==typeof t||"object"==typeof t)}function eo(t,e,n){return!Object.is(t[e],n)&&(t[e]=n,!0)}function no(t,e,n,r){const i=Ft();return eo(i,$t(),e)&&(Vt(),function(t,e,n,r,i,o){const s=xt(t,e);!function(t,e,n,r,i,o,s){if(null==o)Ot(t)?t.removeAttribute(e,i,n):e.removeAttribute(i);else{const a=null==s?y(o):s(o,r||"",i);Ot(t)?t.setAttribute(e,i,a,n):n?e.setAttributeNS(n,i,a):e.setAttribute(i,a)}}(e[11],s,o,t.value,n,r,i)}(ce(),i,t,e,n,r)),no}function ro(t,e,n,r,i,o,s,a){const u=Ft(),c=Vt(),l=t+ut,h=c.firstCreatePass?function(t,e,n,r,i,o,s,a,u){const c=e.consts,l=Qr(e,t,4,s||null,Rt(c,a));ci(e,n,l,Rt(c,u)),le(e,l);const h=l.tViews=oi(2,l,r,i,o,e.directiveRegistry,e.pipeRegistry,null,e.schemas,c);return null!==e.queries&&(e.queries.template(e,l),h.queries=e.queries.embeddedTView(l)),l}(l,c,u,e,n,r,i,o,s):c.data[l];zt(h,!1);const f=u[11].createComment("");Or(c,u,f,h),sr(f,u),Ei(u,u[l]=bi(f,u,f,h)),pt(h)&&ni(c,u,h),null!=s&&ri(u,h,a)}function io(t){return function(t,e){return t[e]}(Mt.lFrame.contextLView,ut+t)}function oo(t,e=A.Default){const n=Ft();return null===n?cn(t,e):Le(Bt(),n,g(t),e)}function so(t,e,n){const r=Ft();return eo(r,$t(),e)&&ui(Vt(),ce(),r,t,e,r[11],n,!1),so}function ao(t,e,n,r,i){const o=i?"class":"style";Ni(t,n,e.inputs[o],o,r)}function uo(t,e,n,r){const i=Ft(),o=Vt(),s=ut+t,a=i[11],u=i[s]=mr(a,e,Mt.lFrame.currentNamespace),c=o.firstCreatePass?function(t,e,n,r,i,o,s){const a=e.consts,u=Qr(e,t,2,i,Rt(a,o));return ci(e,n,u,Rt(a,s)),null!==u.attrs&&Di(u,u.attrs,!1),null!==u.mergedAttrs&&Di(u,u.mergedAttrs,!0),null!==e.queries&&e.queries.elementStart(e,u),u}(s,o,i,0,e,n,r):o.data[s];zt(c,!0);const l=c.mergedAttrs;null!==l&&ve(a,u,l);const h=c.classes;null!==h&&Dr(a,u,h);const f=c.styles;null!==f&&Nr(a,u,f),64!=(64&c.flags)&&Or(o,i,u,c),0===Mt.lFrame.elementDepthCount&&sr(u,i),Mt.lFrame.elementDepthCount++,pt(c)&&(ni(o,i,c),function(t,e,n){if(ft(e)){const r=e.directiveEnd;for(let i=e.directiveStart;i<r;i++){const e=t.data[i];e.contentQueries&&e.contentQueries(1,n[i],i)}}}(o,c,i)),null!==r&&ri(i,c)}function co(){let t=Bt();Gt()?Mt.lFrame.isParent=!1:(t=t.parent,zt(t,!1));const e=t;Mt.lFrame.elementDepthCount--;const n=Vt();n.firstCreatePass&&(le(n,t),ft(t)&&n.queries.elementEnd(t)),null!=e.classesWithoutHost&&function(t){return 0!=(16&t.flags)}(e)&&ao(n,e,Ft(),e.classesWithoutHost,!0),null!=e.stylesWithoutHost&&function(t){return 0!=(32&t.flags)}(e)&&ao(n,e,Ft(),e.stylesWithoutHost,!1)}function lo(t,e,n,r){uo(t,e,n,r),co()}function ho(){return Ft()}function fo(t){return!!t&&"function"==typeof t.then}function po(t){return!!t&&"function"==typeof t.subscribe}const go=po;function mo(t,e,n=!1,r){const i=Ft(),o=Vt(),s=Bt();return function(t,e,n,r,i,o,s=!1,a){const u=pt(r),c=t.firstCreatePass&&ji(t),l=Ai(e);let h=!0;if(3&r.type){const f=xt(r,e),d=a?a(f):q,p=d.target||f,g=l.length,m=a?t=>a(Ct(t[r.index])).target:r.index;if(Ot(n)){let s=null;if(!a&&u&&(s=function(t,e,n,r){const i=t.cleanup;if(null!=i)for(let o=0;o<i.length-1;o+=2){const t=i[o];if(t===n&&i[o+1]===r){const t=e[7],n=i[o+2];return t.length>n?t[n]:null}"string"==typeof t&&(o+=2)}return null}(t,e,i,r.index)),null!==s)(s.__ngLastListenerFn__||s).__ngNextListenerFn__=o,s.__ngLastListenerFn__=o,h=!1;else{o=vo(r,e,o,!1);const t=n.listen(d.name||p,i,o);l.push(o,t),c&&c.push(i,m,g,g+1)}}else o=vo(r,e,o,!0),p.addEventListener(i,o,s),l.push(o),c&&c.push(i,m,g,s)}else o=vo(r,e,o,!1);const f=r.outputs;let d;if(h&&null!==f&&(d=f[i])){const t=d.length;if(t)for(let n=0;n<t;n+=2){const t=e[d[n]][d[n+1]].subscribe(o),s=l.length;l.push(o,t),c&&c.push(i,r.index,s,-(s+1))}}}(o,i,i[11],s,t,e,n,r),mo}function yo(t,e,n){try{return!1!==e(n)}catch(r){return ki(t,r),!1}}function vo(t,e,n,r){return function i(o){if(o===Function)return n;const s=2&t.flags?jt(t.index,e):e;0==(32&e[2])&&Si(s);let a=yo(e,n,o),u=i.__ngNextListenerFn__;for(;u;)a=yo(e,u,o)&&a,u=u.__ngNextListenerFn__;return r&&!1===a&&(o.preventDefault(),o.returnValue=!1),a}}function bo(t,e=""){const n=Ft(),r=Vt(),i=t+ut,o=r.firstCreatePass?Qr(r,i,1,e,null):r.data[i],s=n[i]=function(t,e){return Ot(t)?t.createText(e):t.createTextNode(e)}(n[11],e);Or(r,n,s,o),zt(o,!1)}function wo(t){return _o("",t,""),wo}function _o(t,e,n){const r=Ft(),i=function(t,e,n,r){return eo(t,$t(),n)?e+y(n)+r:Gr}(r,t,e,n);return i!==Gr&&function(t,e,n){const r=function(t,e){return Ct(e[t])}(e,t);!function(t,e,n){Ot(t)?t.setValue(e,n):e.textContent=n}(t[11],r,n)}(r,ae(),i),_o}function Io(t,e,n){const r=Ft();return eo(r,$t(),e)&&ui(Vt(),ce(),r,t,e,r[11],n,!0),Io}const Eo=void 0;var So=["en",[["a","p"],["AM","PM"],Eo],[["AM","PM"],Eo,Eo],[["S","M","T","W","T","F","S"],["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],["Su","Mo","Tu","We","Th","Fr","Sa"]],Eo,[["J","F","M","A","M","J","J","A","S","O","N","D"],["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],["January","February","March","April","May","June","July","August","September","October","November","December"]],Eo,[["B","A"],["BC","AD"],["Before Christ","Anno Domini"]],0,[6,0],["M/d/yy","MMM d, y","MMMM d, y","EEEE, MMMM d, y"],["h:mm a","h:mm:ss a","h:mm:ss a z","h:mm:ss a zzzz"],["{1}, {0}",Eo,"{1} 'at' {0}",Eo],[".",",",";","%","+","-","E","\xd7","\u2030","\u221e","NaN",":"],["#,##0.###","#,##0%","\xa4#,##0.00","#E0"],"USD","$","US Dollar",{},"ltr",function(t){let e=Math.floor(Math.abs(t)),n=t.toString().replace(/^[^.]*\.?/,"").length;return 1===e&&0===n?1:5}];let Oo={};function To(t,e,n){"string"!=typeof e&&(n=e,e=t[ko.LocaleId]),e=e.toLowerCase().replace(/_/g,"-"),Oo[e]=t,n&&(Oo[e][ko.ExtraData]=n)}function Co(t){const e=function(t){return t.toLowerCase().replace(/_/g,"-")}(t);let n=jo(e);if(n)return n;const r=e.split("-")[0];if(n=jo(r),n)return n;if("en"===r)return So;throw new Error(`Missing locale data for the locale "${t}".`)}function xo(t){return Co(t)[ko.CurrencyCode]||null}function Ao(t){return Co(t)[ko.PluralCase]}function jo(t){return t in Oo||(Oo[t]=V.ng&&V.ng.common&&V.ng.common.locales&&V.ng.common.locales[t]),Oo[t]}var ko=function(t){return t[t.LocaleId=0]="LocaleId",t[t.DayPeriodsFormat=1]="DayPeriodsFormat",t[t.DayPeriodsStandalone=2]="DayPeriodsStandalone",t[t.DaysFormat=3]="DaysFormat",t[t.DaysStandalone=4]="DaysStandalone",t[t.MonthsFormat=5]="MonthsFormat",t[t.MonthsStandalone=6]="MonthsStandalone",t[t.Eras=7]="Eras",t[t.FirstDayOfWeek=8]="FirstDayOfWeek",t[t.WeekendRange=9]="WeekendRange",t[t.DateFormat=10]="DateFormat",t[t.TimeFormat=11]="TimeFormat",t[t.DateTimeFormat=12]="DateTimeFormat",t[t.NumberSymbols=13]="NumberSymbols",t[t.NumberFormats=14]="NumberFormats",t[t.CurrencyCode=15]="CurrencyCode",t[t.CurrencySymbol=16]="CurrencySymbol",t[t.CurrencyName=17]="CurrencyName",t[t.Currencies=18]="Currencies",t[t.Directionality=19]="Directionality",t[t.PluralCase=20]="PluralCase",t[t.ExtraData=21]="ExtraData",t}({});const No="en-US";let Do=No;function Ro(t){var e,n;n="Expected localeId to be defined",null==(e=t)&&function(t,e,n,r){throw new Error(`ASSERTION ERROR: ${t} [Expected=> null != ${e} <=Actual]`)}(n,e),"string"==typeof t&&(Do=t.toLowerCase().replace(/_/g,"-"))}class Po{}class Lo{resolveComponentFactory(t){throw function(t){const e=Error(`No component factory found for ${h(t)}. Did you add it to @NgModule.entryComponents?`);return e.ngComponent=t,e}(t)}}let Mo=(()=>{class t{}return t.NULL=new Lo,t})();function Uo(...t){}function Fo(t,e){return new qo(xt(t,e))}const Vo=function(){return Fo(Bt(),Ft())};let qo=(()=>{class t{constructor(t){this.nativeElement=t}}return t.__NG_ELEMENT_ID__=Vo,t})();function Bo(t){return t instanceof qo?t.nativeElement:t}class Ho{}let zo=(()=>{class t{}return t.__NG_ELEMENT_ID__=()=>Go(),t})();const Go=function(){const t=Ft(),e=jt(Bt().index,t);return function(t){return t[11]}(lt(e)?e:t)};let Ko=(()=>{class t{}return t.\u0275prov=w({token:t,providedIn:"root",factory:()=>null}),t})();class Jo{constructor(t){this.full=t,this.major=t.split(".")[0],this.minor=t.split(".")[1],this.patch=t.split(".").slice(2).join(".")}}const $o=new Jo("11.2.7");class Wo{constructor(){}supports(t){return Zi(t)}create(t){return new Yo(t)}}const Qo=(t,e)=>e;class Yo{constructor(t){this.length=0,this._linkedRecords=null,this._unlinkedRecords=null,this._previousItHead=null,this._itHead=null,this._itTail=null,this._additionsHead=null,this._additionsTail=null,this._movesHead=null,this._movesTail=null,this._removalsHead=null,this._removalsTail=null,this._identityChangesHead=null,this._identityChangesTail=null,this._trackByFn=t||Qo}forEachItem(t){let e;for(e=this._itHead;null!==e;e=e._next)t(e)}forEachOperation(t){let e=this._itHead,n=this._removalsHead,r=0,i=null;for(;e||n;){const o=!n||e&&e.currentIndex<es(n,r,i)?e:n,s=es(o,r,i),a=o.currentIndex;if(o===n)r--,n=n._nextRemoved;else if(e=e._next,null==o.previousIndex)r++;else{i||(i=[]);const t=s-r,e=a-r;if(t!=e){for(let n=0;n<t;n++){const r=n<i.length?i[n]:i[n]=0,o=r+n;e<=o&&o<t&&(i[n]=r+1)}i[o.previousIndex]=e-t}}s!==a&&t(o,s,a)}}forEachPreviousItem(t){let e;for(e=this._previousItHead;null!==e;e=e._nextPrevious)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachMovedItem(t){let e;for(e=this._movesHead;null!==e;e=e._nextMoved)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}forEachIdentityChange(t){let e;for(e=this._identityChangesHead;null!==e;e=e._nextIdentityChange)t(e)}diff(t){if(null==t&&(t=[]),!Zi(t))throw new Error(`Error trying to diff '${h(t)}'. Only arrays and iterables are allowed`);return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e,n,r,i=this._itHead,o=!1;if(Array.isArray(t)){this.length=t.length;for(let e=0;e<this.length;e++)n=t[e],r=this._trackByFn(e,n),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,n,r,e)),Object.is(i.item,n)||this._addIdentityChange(i,n)):(i=this._mismatch(i,n,r,e),o=!0),i=i._next}else e=0,function(t,e){if(Array.isArray(t))for(let n=0;n<t.length;n++)e(t[n]);else{const n=t[Xi()]();let r;for(;!(r=n.next()).done;)e(r.value)}}(t,t=>{r=this._trackByFn(e,t),null!==i&&Object.is(i.trackById,r)?(o&&(i=this._verifyReinsertion(i,t,r,e)),Object.is(i.item,t)||this._addIdentityChange(i,t)):(i=this._mismatch(i,t,r,e),o=!0),i=i._next,e++}),this.length=e;return this._truncate(i),this.collection=t,this.isDirty}get isDirty(){return null!==this._additionsHead||null!==this._movesHead||null!==this._removalsHead||null!==this._identityChangesHead}_reset(){if(this.isDirty){let t;for(t=this._previousItHead=this._itHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._additionsHead;null!==t;t=t._nextAdded)t.previousIndex=t.currentIndex;for(this._additionsHead=this._additionsTail=null,t=this._movesHead;null!==t;t=t._nextMoved)t.previousIndex=t.currentIndex;this._movesHead=this._movesTail=null,this._removalsHead=this._removalsTail=null,this._identityChangesHead=this._identityChangesTail=null}}_mismatch(t,e,n,r){let i;return null===t?i=this._itTail:(i=t._prev,this._remove(t)),null!==(t=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._reinsertAfter(t,i,r)):null!==(t=null===this._linkedRecords?null:this._linkedRecords.get(n,r))?(Object.is(t.item,e)||this._addIdentityChange(t,e),this._moveAfter(t,i,r)):t=this._addAfter(new Xo(e,n),i,r),t}_verifyReinsertion(t,e,n,r){let i=null===this._unlinkedRecords?null:this._unlinkedRecords.get(n,null);return null!==i?t=this._reinsertAfter(i,t._prev,r):t.currentIndex!=r&&(t.currentIndex=r,this._addToMoves(t,r)),t}_truncate(t){for(;null!==t;){const e=t._next;this._addToRemovals(this._unlink(t)),t=e}null!==this._unlinkedRecords&&this._unlinkedRecords.clear(),null!==this._additionsTail&&(this._additionsTail._nextAdded=null),null!==this._movesTail&&(this._movesTail._nextMoved=null),null!==this._itTail&&(this._itTail._next=null),null!==this._removalsTail&&(this._removalsTail._nextRemoved=null),null!==this._identityChangesTail&&(this._identityChangesTail._nextIdentityChange=null)}_reinsertAfter(t,e,n){null!==this._unlinkedRecords&&this._unlinkedRecords.remove(t);const r=t._prevRemoved,i=t._nextRemoved;return null===r?this._removalsHead=i:r._nextRemoved=i,null===i?this._removalsTail=r:i._prevRemoved=r,this._insertAfter(t,e,n),this._addToMoves(t,n),t}_moveAfter(t,e,n){return this._unlink(t),this._insertAfter(t,e,n),this._addToMoves(t,n),t}_addAfter(t,e,n){return this._insertAfter(t,e,n),this._additionsTail=null===this._additionsTail?this._additionsHead=t:this._additionsTail._nextAdded=t,t}_insertAfter(t,e,n){const r=null===e?this._itHead:e._next;return t._next=r,t._prev=e,null===r?this._itTail=t:r._prev=t,null===e?this._itHead=t:e._next=t,null===this._linkedRecords&&(this._linkedRecords=new ts),this._linkedRecords.put(t),t.currentIndex=n,t}_remove(t){return this._addToRemovals(this._unlink(t))}_unlink(t){null!==this._linkedRecords&&this._linkedRecords.remove(t);const e=t._prev,n=t._next;return null===e?this._itHead=n:e._next=n,null===n?this._itTail=e:n._prev=e,t}_addToMoves(t,e){return t.previousIndex===e||(this._movesTail=null===this._movesTail?this._movesHead=t:this._movesTail._nextMoved=t),t}_addToRemovals(t){return null===this._unlinkedRecords&&(this._unlinkedRecords=new ts),this._unlinkedRecords.put(t),t.currentIndex=null,t._nextRemoved=null,null===this._removalsTail?(this._removalsTail=this._removalsHead=t,t._prevRemoved=null):(t._prevRemoved=this._removalsTail,this._removalsTail=this._removalsTail._nextRemoved=t),t}_addIdentityChange(t,e){return t.item=e,this._identityChangesTail=null===this._identityChangesTail?this._identityChangesHead=t:this._identityChangesTail._nextIdentityChange=t,t}}class Xo{constructor(t,e){this.item=t,this.trackById=e,this.currentIndex=null,this.previousIndex=null,this._nextPrevious=null,this._prev=null,this._next=null,this._prevDup=null,this._nextDup=null,this._prevRemoved=null,this._nextRemoved=null,this._nextAdded=null,this._nextMoved=null,this._nextIdentityChange=null}}class Zo{constructor(){this._head=null,this._tail=null}add(t){null===this._head?(this._head=this._tail=t,t._nextDup=null,t._prevDup=null):(this._tail._nextDup=t,t._prevDup=this._tail,t._nextDup=null,this._tail=t)}get(t,e){let n;for(n=this._head;null!==n;n=n._nextDup)if((null===e||e<=n.currentIndex)&&Object.is(n.trackById,t))return n;return null}remove(t){const e=t._prevDup,n=t._nextDup;return null===e?this._head=n:e._nextDup=n,null===n?this._tail=e:n._prevDup=e,null===this._head}}class ts{constructor(){this.map=new Map}put(t){const e=t.trackById;let n=this.map.get(e);n||(n=new Zo,this.map.set(e,n)),n.add(t)}get(t,e){const n=this.map.get(t);return n?n.get(t,e):null}remove(t){const e=t.trackById;return this.map.get(e).remove(t)&&this.map.delete(e),t}get isEmpty(){return 0===this.map.size}clear(){this.map.clear()}}function es(t,e,n){const r=t.previousIndex;if(null===r)return r;let i=0;return n&&r<n.length&&(i=n[r]),r+e+i}class ns{constructor(){}supports(t){return t instanceof Map||to(t)}create(){return new rs}}class rs{constructor(){this._records=new Map,this._mapHead=null,this._appendAfter=null,this._previousMapHead=null,this._changesHead=null,this._changesTail=null,this._additionsHead=null,this._additionsTail=null,this._removalsHead=null,this._removalsTail=null}get isDirty(){return null!==this._additionsHead||null!==this._changesHead||null!==this._removalsHead}forEachItem(t){let e;for(e=this._mapHead;null!==e;e=e._next)t(e)}forEachPreviousItem(t){let e;for(e=this._previousMapHead;null!==e;e=e._nextPrevious)t(e)}forEachChangedItem(t){let e;for(e=this._changesHead;null!==e;e=e._nextChanged)t(e)}forEachAddedItem(t){let e;for(e=this._additionsHead;null!==e;e=e._nextAdded)t(e)}forEachRemovedItem(t){let e;for(e=this._removalsHead;null!==e;e=e._nextRemoved)t(e)}diff(t){if(t){if(!(t instanceof Map||to(t)))throw new Error(`Error trying to diff '${h(t)}'. Only maps and objects are allowed`)}else t=new Map;return this.check(t)?this:null}onDestroy(){}check(t){this._reset();let e=this._mapHead;if(this._appendAfter=null,this._forEach(t,(t,n)=>{if(e&&e.key===n)this._maybeAddToChanges(e,t),this._appendAfter=e,e=e._next;else{const r=this._getOrCreateRecordForKey(n,t);e=this._insertBeforeOrAppend(e,r)}}),e){e._prev&&(e._prev._next=null),this._removalsHead=e;for(let t=e;null!==t;t=t._nextRemoved)t===this._mapHead&&(this._mapHead=null),this._records.delete(t.key),t._nextRemoved=t._next,t.previousValue=t.currentValue,t.currentValue=null,t._prev=null,t._next=null}return this._changesTail&&(this._changesTail._nextChanged=null),this._additionsTail&&(this._additionsTail._nextAdded=null),this.isDirty}_insertBeforeOrAppend(t,e){if(t){const n=t._prev;return e._next=t,e._prev=n,t._prev=e,n&&(n._next=e),t===this._mapHead&&(this._mapHead=e),this._appendAfter=t,t}return this._appendAfter?(this._appendAfter._next=e,e._prev=this._appendAfter):this._mapHead=e,this._appendAfter=e,null}_getOrCreateRecordForKey(t,e){if(this._records.has(t)){const n=this._records.get(t);this._maybeAddToChanges(n,e);const r=n._prev,i=n._next;return r&&(r._next=i),i&&(i._prev=r),n._next=null,n._prev=null,n}const n=new is(t);return this._records.set(t,n),n.currentValue=e,this._addToAdditions(n),n}_reset(){if(this.isDirty){let t;for(this._previousMapHead=this._mapHead,t=this._previousMapHead;null!==t;t=t._next)t._nextPrevious=t._next;for(t=this._changesHead;null!==t;t=t._nextChanged)t.previousValue=t.currentValue;for(t=this._additionsHead;null!=t;t=t._nextAdded)t.previousValue=t.currentValue;this._changesHead=this._changesTail=null,this._additionsHead=this._additionsTail=null,this._removalsHead=null}}_maybeAddToChanges(t,e){Object.is(e,t.currentValue)||(t.previousValue=t.currentValue,t.currentValue=e,this._addToChanges(t))}_addToAdditions(t){null===this._additionsHead?this._additionsHead=this._additionsTail=t:(this._additionsTail._nextAdded=t,this._additionsTail=t)}_addToChanges(t){null===this._changesHead?this._changesHead=this._changesTail=t:(this._changesTail._nextChanged=t,this._changesTail=t)}_forEach(t,e){t instanceof Map?t.forEach(e):Object.keys(t).forEach(n=>e(t[n],n))}}class is{constructor(t){this.key=t,this.previousValue=null,this.currentValue=null,this._nextPrevious=null,this._next=null,this._prev=null,this._nextAdded=null,this._nextRemoved=null,this._nextChanged=null}}function os(){return new ss([new Wo])}let ss=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(null!=n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||os()),deps:[[t,new pn,new dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(null!=e)return e;throw new Error(`Cannot find a differ supporting object '${t}' of type '${n=t,n.name||typeof n}'`);var n}}return t.\u0275prov=w({token:t,providedIn:"root",factory:os}),t})();function as(){return new us([new ns])}let us=(()=>{class t{constructor(t){this.factories=t}static create(e,n){if(n){const t=n.factories.slice();e=e.concat(t)}return new t(e)}static extend(e){return{provide:t,useFactory:n=>t.create(e,n||as()),deps:[[t,new pn,new dn]]}}find(t){const e=this.factories.find(e=>e.supports(t));if(e)return e;throw new Error(`Cannot find a differ supporting object '${t}'`)}}return t.\u0275prov=w({token:t,providedIn:"root",factory:as}),t})();function cs(t,e,n,r,i=!1){for(;null!==n;){const o=e[n.index];if(null!==o&&r.push(Ct(o)),ht(o))for(let t=ct;t<o.length;t++){const e=o[t],n=e[1].firstChild;null!==n&&cs(e[1],e,n,r)}const s=n.type;if(8&s)cs(t,e,n.child,r);else if(32&s){const t=lr(n,e);let i;for(;i=t();)r.push(i)}else if(16&s){const t=Cr(e,n);if(Array.isArray(t))r.push(...t);else{const n=hr(e[16]);cs(n[1],n,t,r,!0)}}n=i?n.projectionNext:n.next}return r}class ls{constructor(t,e){this._lView=t,this._cdRefInjectingView=e,this._appRef=null,this._attachedToViewContainer=!1}get rootNodes(){const t=this._lView,e=t[1];return cs(e,t,e.firstChild,[])}get context(){return this._lView[8]}get destroyed(){return 256==(256&this._lView[2])}destroy(){if(this._appRef)this._appRef.detachView(this);else if(this._attachedToViewContainer){const t=this._lView[3];if(ht(t)){const e=t[8],n=e?e.indexOf(this):-1;n>-1&&(vr(t,n),tn(e,n))}this._attachedToViewContainer=!1}br(this._lView[1],this._lView)}onDestroy(t){si(this._lView[1],this._lView,null,t)}markForCheck(){Si(this._cdRefInjectingView||this._lView)}detach(){this._lView[2]&=-129}reattach(){this._lView[2]|=128}detectChanges(){Oi(this._lView[1],this._lView,this.context)}checkNoChanges(){!function(t,e,n){Jt(!0);try{Oi(t,e,n)}finally{Jt(!1)}}(this._lView[1],this._lView,this.context)}attachToViewContainerRef(){if(this._appRef)throw new Error("This view is already attached directly to the ApplicationRef!");this._attachedToViewContainer=!0}detachFromAppRef(){var t;this._appRef=null,jr(this._lView[1],t=this._lView,t[11],2,null,null)}attachToAppRef(t){if(this._attachedToViewContainer)throw new Error("This view is already attached to a ViewContainer!");this._appRef=t}}class hs extends ls{constructor(t){super(t),this._view=t}detectChanges(){Ti(this._view)}checkNoChanges(){!function(t){Jt(!0);try{Ti(t)}finally{Jt(!1)}}(this._view)}get context(){return null}}const fs=ps;let ds=(()=>{class t{}return t.__NG_ELEMENT_ID__=fs,t.__ChangeDetectorRef__=!0,t})();function ps(t=!1){return function(t,e,n){if(!n&&dt(t)){const n=jt(t.index,e);return new ls(n,n)}return 47&t.type?new ls(e[16],e):null}(Bt(),Ft(),t)}const gs=[new ns],ms=new ss([new Wo]),ys=new us(gs),vs=function(){return Is(Bt(),Ft())};let bs=(()=>{class t{}return t.__NG_ELEMENT_ID__=vs,t})();const ws=bs,_s=class extends ws{constructor(t,e,n){super(),this._declarationLView=t,this._declarationTContainer=e,this.elementRef=n}createEmbeddedView(t){const e=this._declarationTContainer.tViews,n=Wr(this._declarationLView,e,t,16,null,e.declTNode,null,null,null,null);n[17]=this._declarationLView[this._declarationTContainer.index];const r=this._declarationLView[19];return null!==r&&(n[19]=r.createEmbeddedView(e)),Xr(e,n,t),new ls(n)}};function Is(t,e){return 4&t.type?new _s(e,t,Fo(t,e)):null}class Es{}class Ss{}const Os=function(){return ks(Bt(),Ft())};let Ts=(()=>{class t{}return t.__NG_ELEMENT_ID__=Os,t})();const Cs=Ts,xs=class extends Cs{constructor(t,e,n){super(),this._lContainer=t,this._hostTNode=e,this._hostLView=n}get element(){return Fo(this._hostTNode,this._hostLView)}get injector(){return new ze(this._hostTNode,this._hostLView)}get parentInjector(){const t=Ne(this._hostTNode,this._hostLView);if(Ee(t)){const e=Oe(t,this._hostLView),n=Se(t);return new ze(e[1].data[n+8],e)}return new ze(null,this._hostLView)}clear(){for(;this.length>0;)this.remove(this.length-1)}get(t){const e=As(this._lContainer);return null!==e&&e[t]||null}get length(){return this._lContainer.length-ct}createEmbeddedView(t,e,n){const r=t.createEmbeddedView(e||{});return this.insert(r,n),r}createComponent(t,e,n,r,i){const o=n||this.parentInjector;if(!i&&null==t.ngModule&&o){const t=o.get(Es,null);t&&(i=t)}const s=t.create(o,r,void 0,i);return this.insert(s.hostView,e),s}insert(t,e){const n=t._lView,r=n[1];if(ht(n[3])){const e=this.indexOf(t);if(-1!==e)this.detach(e);else{const e=n[3],r=new xs(e,e[6],e[3]);r.detach(r.indexOf(t))}}const i=this._adjustIndex(e),o=this._lContainer;!function(t,e,n,r){const i=ct+r,o=n.length;r>0&&(n[i-1][4]=e),r<o-ct?(e[4]=n[i],Ze(n,ct+r,e)):(n.push(e),e[4]=null),e[3]=n;const s=e[17];null!==s&&n!==s&&function(t,e){const n=t[9];e[16]!==e[3][3][16]&&(t[2]=!0),null===n?t[9]=[e]:n.push(e)}(s,e);const a=e[19];null!==a&&a.insertView(t),e[2]|=128}(r,n,o,i);const s=xr(i,o),a=n[11],u=Sr(a,o[7]);return null!==u&&function(t,e,n,r,i,o){r[0]=i,r[6]=e,jr(t,r,n,1,i,o)}(r,o[6],a,n,u,s),t.attachToViewContainerRef(),Ze(js(o),i,t),t}move(t,e){return this.insert(t,e)}indexOf(t){const e=As(this._lContainer);return null!==e?e.indexOf(t):-1}remove(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);n&&(tn(js(this._lContainer),e),br(n[1],n))}detach(t){const e=this._adjustIndex(t,-1),n=vr(this._lContainer,e);return n&&null!=tn(js(this._lContainer),e)?new ls(n):null}_adjustIndex(t,e=0){return null==t?this.length+e:t}};function As(t){return t[8]}function js(t){return t[8]||(t[8]=[])}function ks(t,e){let n;const r=e[t.index];if(ht(r))n=r;else{let i;if(8&t.type)i=Ct(r);else{const n=e[11];i=n.createComment("");const r=xt(t,e);_r(n,Sr(n,r),i,function(t,e){return Ot(t)?t.nextSibling(e):e.nextSibling}(n,r),!1)}e[t.index]=n=bi(r,e,i,t),Ei(e,n)}return new xs(n,t,e)}const Ns={};class Ds extends Mo{constructor(t){super(),this.ngModule=t}resolveComponentFactory(t){const e=st(t);return new Ls(e,this.ngModule)}}function Rs(t){const e=[];for(let n in t)t.hasOwnProperty(n)&&e.push({propName:t[n],templateName:n});return e}const Ps=new $e("SCHEDULER_TOKEN",{providedIn:"root",factory:()=>ar});class Ls extends Po{constructor(t,e){super(),this.componentDef=t,this.ngModule=e,this.componentType=t.type,this.selector=t.selectors.map(zr).join(","),this.ngContentSelectors=t.ngContentSelectors?t.ngContentSelectors:[],this.isBoundToModule=!!e}get inputs(){return Rs(this.componentDef.inputs)}get outputs(){return Rs(this.componentDef.outputs)}create(t,e,n,r){const i=(r=r||this.ngModule)?function(t,e){return{get:(n,r,i)=>{const o=t.get(n,Ns,i);return o!==Ns||r===Ns?o:e.get(n,r,i)}}}(t,r.injector):t,o=i.get(Ho,Tt),s=i.get(Ko,null),a=o.createRenderer(null,this.componentDef),u=this.componentDef.selectors[0][0]||"div",c=n?function(t,e,n){if(Ot(t))return t.selectRootElement(e,n===P.ShadowDom);let r="string"==typeof e?t.querySelector(e):e;return r.textContent="",r}(a,n,this.componentDef.encapsulation):mr(o.createRenderer(null,this.componentDef),u,function(t){const e=t.toLowerCase();return"svg"===e?"http://www.w3.org/2000/svg":"math"===e?"http://www.w3.org/1998/MathML/":null}(u)),l=this.componentDef.onPush?576:528,h={components:[],scheduler:ar,clean:xi,playerHandler:null,flags:0},f=oi(0,null,null,1,0,null,null,null,null,null),d=Wr(null,f,h,l,null,null,o,a,s,i);let p,g;ee(d);try{const t=function(t,e,n,r,i,o){const s=n[1];n[20]=t;const a=Qr(s,20,2,"#host",null),u=a.mergedAttrs=e.hostAttrs;null!==u&&(Di(a,u,!0),null!==t&&(ve(i,t,u),null!==a.classes&&Dr(i,t,a.classes),null!==a.styles&&Nr(i,t,a.styles)));const c=r.createRenderer(t,e),l=Wr(n,ii(e),null,e.onPush?64:16,n[20],a,r,c,null,null);return s.firstCreatePass&&(De(Ae(a,n),s,e.type),fi(s,a),pi(a,n.length,1)),Ei(n,l),n[20]=l}(c,this.componentDef,d,o,a);if(c)if(n)ve(a,c,["ng-version",$o.full]);else{const{attrs:t,classes:e}=function(t){const e=[],n=[];let r=1,i=2;for(;r<t.length;){let o=t[r];if("string"==typeof o)2===i?""!==o&&e.push(o,t[++r]):8===i&&n.push(o);else{if(!Vr(i))break;i=o}r++}return{attrs:e,classes:n}}(this.componentDef.selectors[0]);t&&ve(a,c,t),e&&e.length>0&&Dr(a,c,e.join(" "))}if(g=At(f,ut),void 0!==e){const t=g.projection=[];for(let n=0;n<this.ngContentSelectors.length;n++){const r=e[n];t.push(null!=r?Array.from(r):null)}}p=function(t,e,n,r,i){const o=n[1],s=function(t,e,n){const r=Bt();t.firstCreatePass&&(n.providersResolver&&n.providersResolver(n),gi(t,r,e,Yr(t,e,1,null),n));const i=qe(e,t,r.directiveStart,r);sr(i,e);const o=xt(r,e);return o&&sr(o,e),i}(o,n,e);if(r.components.push(s),t[8]=s,i&&i.forEach(t=>t(s,e)),e.contentQueries){const t=Bt();e.contentQueries(1,s,t.directiveStart)}const a=Bt();return!o.firstCreatePass||null===e.hostBindings&&null===e.hostAttrs||(ue(a.index),li(n[1],a,0,a.directiveStart,a.directiveEnd,e),hi(e,s)),s}(t,this.componentDef,d,h,[Qi]),Xr(f,d,null)}finally{se()}return new Ms(this.componentType,p,Fo(g,d),d,g)}}class Ms extends class{}{constructor(t,e,n,r,i){super(),this.location=n,this._rootLView=r,this._tNode=i,this.instance=e,this.hostView=this.changeDetectorRef=new hs(r),this.componentType=t}get injector(){return new ze(this._tNode,this._rootLView)}destroy(){this.hostView.destroy()}onDestroy(t){this.hostView.onDestroy(t)}}const Us=new Map;class Fs extends Es{constructor(t,e){super(),this._parent=e,this._bootstrapComponents=[],this.injector=this,this.destroyCbs=[],this.componentFactoryResolver=new Ds(this);const n=at(t),r=t[J]||null;r&&Ro(r),this._bootstrapComponents=ur(n.bootstrap),this._r3Injector=Bi(t,e,[{provide:Es,useValue:this},{provide:Mo,useValue:this.componentFactoryResolver}],h(t)),this._r3Injector._resolveInjectorDefTypes(),this.instance=this.get(t)}get(t,e=Wi.THROW_IF_NOT_FOUND,n=A.Default){return t===Wi||t===Es||t===Ri?this:this._r3Injector.get(t,e,n)}destroy(){const t=this._r3Injector;!t.destroyed&&t.destroy(),this.destroyCbs.forEach(t=>t()),this.destroyCbs=null}onDestroy(t){this.destroyCbs.push(t)}}class Vs extends Ss{constructor(t){super(),this.moduleType=t,null!==at(t)&&function(t){const e=new Set;!function t(n){const r=at(n,!0),i=r.id;null!==i&&(function(t,e,n){if(e&&e!==n)throw new Error(`Duplicate module registered for ${t} - ${h(e)} vs ${h(e.name)}`)}(i,Us.get(i),n),Us.set(i,n));const o=ur(r.imports);for(const s of o)e.has(s)||(e.add(s),t(s))}(t)}(t)}create(t){return new Fs(this.moduleType,t)}}const qs=class extends r.a{constructor(t=!1){super(),this.__isAsync=t}emit(t){super.next(t)}subscribe(t,e,n){let r,o=t=>null,s=()=>null;t&&"object"==typeof t?(r=this.__isAsync?e=>{setTimeout(()=>t.next(e))}:e=>{t.next(e)},t.error&&(o=this.__isAsync?e=>{setTimeout(()=>t.error(e))}:e=>{t.error(e)}),t.complete&&(s=this.__isAsync?()=>{setTimeout(()=>t.complete())}:()=>{t.complete()})):(r=this.__isAsync?e=>{setTimeout(()=>t(e))}:e=>{t(e)},e&&(o=this.__isAsync?t=>{setTimeout(()=>e(t))}:t=>{e(t)}),n&&(s=this.__isAsync?()=>{setTimeout(()=>n())}:()=>{n()}));const a=super.subscribe(r,o,s);return t instanceof i.a&&t.add(a),a}};function Bs(){return this._results[Xi()]()}class Hs{constructor(t=!1){this._emitDistinctChangesOnly=t,this.dirty=!0,this._results=[],this._changesDetected=!1,this._changes=null,this.length=0,this.first=void 0,this.last=void 0;const e=Xi(),n=Hs.prototype;n[e]||(n[e]=Bs)}get changes(){return this._changes||(this._changes=new qs)}get(t){return this._results[t]}map(t){return this._results.map(t)}filter(t){return this._results.filter(t)}find(t){return this._results.find(t)}reduce(t,e){return this._results.reduce(t,e)}forEach(t){this._results.forEach(t)}some(t){return this._results.some(t)}toArray(){return this._results.slice()}toString(){return this._results.toString()}reset(t,e){const n=this;n.dirty=!1;const r=Ye(t);(this._changesDetected=!function(t,e,n){if(t.length!==e.length)return!1;for(let r=0;r<t.length;r++){let i=t[r],o=e[r];if(n&&(i=n(i),o=n(o)),o!==i)return!1}return!0}(n._results,r,e))&&(n._results=r,n.length=r.length,n.last=r[this.length-1],n.first=r[0])}notifyOnChanges(){!this._changes||!this._changesDetected&&this._emitDistinctChangesOnly||this._changes.emit(this)}setDirty(){this.dirty=!0}destroy(){this.changes.complete(),this.changes.unsubscribe()}}class zs{constructor(t){this.queryList=t,this.matches=null}clone(){return new zs(this.queryList)}setDirty(){this.queryList.setDirty()}}class Gs{constructor(t=[]){this.queries=t}createEmbeddedView(t){const e=t.queries;if(null!==e){const n=null!==t.contentQueries?t.contentQueries[0]:e.length,r=[];for(let t=0;t<n;t++){const n=e.getByIndex(t);r.push(this.queries[n.indexInDeclarationView].clone())}return new Gs(r)}return null}insertView(t){this.dirtyQueriesWithMatches(t)}detachView(t){this.dirtyQueriesWithMatches(t)}dirtyQueriesWithMatches(t){for(let e=0;e<this.queries.length;e++)null!==na(t,e).matches&&this.queries[e].setDirty()}}class Ks{constructor(t,e,n=null){this.predicate=t,this.flags=e,this.read=n}}class Js{constructor(t=[]){this.queries=t}elementStart(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].elementStart(t,e)}elementEnd(t){for(let e=0;e<this.queries.length;e++)this.queries[e].elementEnd(t)}embeddedTView(t){let e=null;for(let n=0;n<this.length;n++){const r=null!==e?e.length:0,i=this.getByIndex(n).embeddedTView(t,r);i&&(i.indexInDeclarationView=n,null!==e?e.push(i):e=[i])}return null!==e?new Js(e):null}template(t,e){for(let n=0;n<this.queries.length;n++)this.queries[n].template(t,e)}getByIndex(t){return this.queries[t]}get length(){return this.queries.length}track(t){this.queries.push(t)}}class $s{constructor(t,e=-1){this.metadata=t,this.matches=null,this.indexInDeclarationView=-1,this.crossesNgTemplate=!1,this._appliesToNextNode=!0,this._declarationNodeIndex=e}elementStart(t,e){this.isApplyingToNode(e)&&this.matchTNode(t,e)}elementEnd(t){this._declarationNodeIndex===t.index&&(this._appliesToNextNode=!1)}template(t,e){this.elementStart(t,e)}embeddedTView(t,e){return this.isApplyingToNode(t)?(this.crossesNgTemplate=!0,this.addMatch(-t.index,e),new $s(this.metadata)):null}isApplyingToNode(t){if(this._appliesToNextNode&&1!=(1&this.metadata.flags)){const e=this._declarationNodeIndex;let n=t.parent;for(;null!==n&&8&n.type&&n.index!==e;)n=n.parent;return e===(null!==n?n.index:-1)}return this._appliesToNextNode}matchTNode(t,e){const n=this.metadata.predicate;if(Array.isArray(n))for(let r=0;r<n.length;r++){const i=n[r];this.matchTNodeWithReadOption(t,e,Ws(e,i)),this.matchTNodeWithReadOption(t,e,Ve(e,t,i,!1,!1))}else n===bs?4&e.type&&this.matchTNodeWithReadOption(t,e,-1):this.matchTNodeWithReadOption(t,e,Ve(e,t,n,!1,!1))}matchTNodeWithReadOption(t,e,n){if(null!==n){const r=this.metadata.read;if(null!==r)if(r===qo||r===Ts||r===bs&&4&e.type)this.addMatch(e.index,-2);else{const n=Ve(e,t,r,!1,!1);null!==n&&this.addMatch(e.index,n)}else this.addMatch(e.index,n)}}addMatch(t,e){null===this.matches?this.matches=[t,e]:this.matches.push(t,e)}}function Ws(t,e){const n=t.localNames;if(null!==n)for(let r=0;r<n.length;r+=2)if(n[r]===e)return n[r+1];return null}function Qs(t,e,n,r){return-1===n?function(t,e){return 11&t.type?Fo(t,e):4&t.type?Is(t,e):null}(e,t):-2===n?function(t,e,n){return n===qo?Fo(e,t):n===bs?Is(e,t):n===Ts?ks(e,t):void 0}(t,e,r):qe(t,t[1],n,e)}function Ys(t,e,n,r){const i=e[19].queries[r];if(null===i.matches){const r=t.data,o=n.matches,s=[];for(let t=0;t<o.length;t+=2){const i=o[t];s.push(i<0?null:Qs(e,r[i],o[t+1],n.metadata.read))}i.matches=s}return i.matches}function Xs(t,e,n,r){const i=t.queries.getByIndex(n),o=i.matches;if(null!==o){const s=Ys(t,e,i,n);for(let t=0;t<o.length;t+=2){const n=o[t];if(n>0)r.push(s[t/2]);else{const i=o[t+1],s=e[-n];for(let t=ct;t<s.length;t++){const e=s[t];e[17]===e[3]&&Xs(e[1],e,i,r)}if(null!==s[9]){const t=s[9];for(let e=0;e<t.length;e++){const n=t[e];Xs(n[1],n,i,r)}}}}}return r}function Zs(t){const e=Ft(),n=Vt(),r=Yt();Xt(r+1);const i=na(n,r);if(t.dirty&&Nt(e)===(2==(2&i.metadata.flags))){if(null===i.matches)t.reset([]);else{const o=i.crossesNgTemplate?Xs(n,e,r,[]):Ys(n,e,i,r);t.reset(o,Bo),t.notifyOnChanges()}return!0}return!1}function ta(t,e,n,r){const i=Vt();if(i.firstCreatePass){const o=Bt();(function(t,e,n){null===t.queries&&(t.queries=new Js),t.queries.track(new $s(e,n))})(i,new Ks(e,n,r),o.index),function(t,e){const n=t.contentQueries||(t.contentQueries=[]);e!==(n.length?n[n.length-1]:-1)&&n.push(t.queries.length-1,e)}(i,t),2==(2&n)&&(i.staticContentQueries=!0)}!function(t,e,n){const r=new Hs(4==(4&n));si(t,e,r,r.destroy),null===e[19]&&(e[19]=new Gs),e[19].queries.push(new zs(r))}(i,Ft(),n)}function ea(){return t=Ft(),e=Yt(),t[19].queries[e].queryList;var t,e}function na(t,e){return t.queries.getByIndex(e)}function ra(t=A.Default){const e=ps(!0);if(null!=e||t&A.Optional)return e;b("ChangeDetectorRef")}const ia=new $e("Application Initializer");let oa=(()=>{class t{constructor(t){this.appInits=t,this.resolve=Uo,this.reject=Uo,this.initialized=!1,this.done=!1,this.donePromise=new Promise((t,e)=>{this.resolve=t,this.reject=e})}runInitializers(){if(this.initialized)return;const t=[],e=()=>{this.done=!0,this.resolve()};if(this.appInits)for(let n=0;n<this.appInits.length;n++){const e=this.appInits[n]();fo(e)&&t.push(e)}Promise.all(t).then(()=>{e()}).catch(t=>{this.reject(t)}),0===t.length&&e(),this.initialized=!0}}return t.\u0275fac=function(e){return new(e||t)(cn(ia,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const sa=new $e("AppId"),aa={provide:sa,useFactory:function(){return`${ua()}${ua()}${ua()}`},deps:[]};function ua(){return String.fromCharCode(97+Math.floor(25*Math.random()))}const ca=new $e("Platform Initializer"),la=new $e("Platform ID"),ha=new $e("appBootstrapListener");let fa=(()=>{class t{log(t){console.log(t)}warn(t){console.warn(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const da=new $e("LocaleId"),pa=new $e("DefaultCurrencyCode");class ga{constructor(t,e){this.ngModuleFactory=t,this.componentFactories=e}}const ma=function(t){return new Vs(t)},ya=ma,va=function(t){return Promise.resolve(ma(t))},ba=function(t){const e=ma(t),n=ur(at(t).declarations).reduce((t,e)=>{const n=st(e);return n&&t.push(new Ls(n)),t},[]);return new ga(e,n)},wa=ba,_a=function(t){return Promise.resolve(ba(t))};let Ia=(()=>{class t{constructor(){this.compileModuleSync=ya,this.compileModuleAsync=va,this.compileModuleAndAllComponentsSync=wa,this.compileModuleAndAllComponentsAsync=_a}clearCache(){}clearCacheFor(t){}getModuleId(t){}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();const Ea=(()=>Promise.resolve(0))();function Sa(t){"undefined"==typeof Zone?Ea.then(()=>{t&&t.apply(null,null)}):Zone.current.scheduleMicroTask("scheduleMicrotask",t)}class Oa{constructor({enableLongStackTrace:t=!1,shouldCoalesceEventChangeDetection:e=!1,shouldCoalesceRunChangeDetection:n=!1}){if(this.hasPendingMacrotasks=!1,this.hasPendingMicrotasks=!1,this.isStable=!0,this.onUnstable=new qs(!1),this.onMicrotaskEmpty=new qs(!1),this.onStable=new qs(!1),this.onError=new qs(!1),"undefined"==typeof Zone)throw new Error("In this configuration Angular requires Zone.js");Zone.assertZonePatched();const r=this;r._nesting=0,r._outer=r._inner=Zone.current,Zone.TaskTrackingZoneSpec&&(r._inner=r._inner.fork(new Zone.TaskTrackingZoneSpec)),t&&Zone.longStackTraceZoneSpec&&(r._inner=r._inner.fork(Zone.longStackTraceZoneSpec)),r.shouldCoalesceEventChangeDetection=!n&&e,r.shouldCoalesceRunChangeDetection=n,r.lastRequestAnimationFrameId=-1,r.nativeRequestAnimationFrame=function(){let t=V.requestAnimationFrame,e=V.cancelAnimationFrame;if("undefined"!=typeof Zone&&t&&e){const n=t[Zone.__symbol__("OriginalDelegate")];n&&(t=n);const r=e[Zone.__symbol__("OriginalDelegate")];r&&(e=r)}return{nativeRequestAnimationFrame:t,nativeCancelAnimationFrame:e}}().nativeRequestAnimationFrame,function(t){const e=()=>{!function(t){-1===t.lastRequestAnimationFrameId&&(t.lastRequestAnimationFrameId=t.nativeRequestAnimationFrame.call(V,()=>{t.fakeTopEventTask||(t.fakeTopEventTask=Zone.root.scheduleEventTask("fakeTopEventTask",()=>{t.lastRequestAnimationFrameId=-1,xa(t),Ca(t)},void 0,()=>{},()=>{})),t.fakeTopEventTask.invoke()}),xa(t))}(t)};t._inner=t._inner.fork({name:"angular",properties:{isAngularZone:!0},onInvokeTask:(n,r,i,o,s,a)=>{try{return Aa(t),n.invokeTask(i,o,s,a)}finally{(t.shouldCoalesceEventChangeDetection&&"eventTask"===o.type||t.shouldCoalesceRunChangeDetection)&&e(),ja(t)}},onInvoke:(n,r,i,o,s,a,u)=>{try{return Aa(t),n.invoke(i,o,s,a,u)}finally{t.shouldCoalesceRunChangeDetection&&e(),ja(t)}},onHasTask:(e,n,r,i)=>{e.hasTask(r,i),n===r&&("microTask"==i.change?(t._hasPendingMicrotasks=i.microTask,xa(t),Ca(t)):"macroTask"==i.change&&(t.hasPendingMacrotasks=i.macroTask))},onHandleError:(e,n,r,i)=>(e.handleError(r,i),t.runOutsideAngular(()=>t.onError.emit(i)),!1)})}(r)}static isInAngularZone(){return!0===Zone.current.get("isAngularZone")}static assertInAngularZone(){if(!Oa.isInAngularZone())throw new Error("Expected to be in Angular Zone, but it is not!")}static assertNotInAngularZone(){if(Oa.isInAngularZone())throw new Error("Expected to not be in Angular Zone, but it is!")}run(t,e,n){return this._inner.run(t,e,n)}runTask(t,e,n,r){const i=this._inner,o=i.scheduleEventTask("NgZoneEvent: "+r,t,Ta,Uo,Uo);try{return i.runTask(o,e,n)}finally{i.cancelTask(o)}}runGuarded(t,e,n){return this._inner.runGuarded(t,e,n)}runOutsideAngular(t){return this._outer.run(t)}}const Ta={};function Ca(t){if(0==t._nesting&&!t.hasPendingMicrotasks&&!t.isStable)try{t._nesting++,t.onMicrotaskEmpty.emit(null)}finally{if(t._nesting--,!t.hasPendingMicrotasks)try{t.runOutsideAngular(()=>t.onStable.emit(null))}finally{t.isStable=!0}}}function xa(t){t.hasPendingMicrotasks=!!(t._hasPendingMicrotasks||(t.shouldCoalesceEventChangeDetection||t.shouldCoalesceRunChangeDetection)&&-1!==t.lastRequestAnimationFrameId)}function Aa(t){t._nesting++,t.isStable&&(t.isStable=!1,t.onUnstable.emit(null))}function ja(t){t._nesting--,Ca(t)}class ka{constructor(){this.hasPendingMicrotasks=!1,this.hasPendingMacrotasks=!1,this.isStable=!0,this.onUnstable=new qs,this.onMicrotaskEmpty=new qs,this.onStable=new qs,this.onError=new qs}run(t,e,n){return t.apply(e,n)}runGuarded(t,e,n){return t.apply(e,n)}runOutsideAngular(t){return t()}runTask(t,e,n,r){return t.apply(e,n)}}let Na=(()=>{class t{constructor(t){this._ngZone=t,this._pendingCount=0,this._isZoneStable=!0,this._didWork=!1,this._callbacks=[],this.taskTrackingZone=null,this._watchAngularEvents(),t.run(()=>{this.taskTrackingZone="undefined"==typeof Zone?null:Zone.current.get("TaskTrackingZone")})}_watchAngularEvents(){this._ngZone.onUnstable.subscribe({next:()=>{this._didWork=!0,this._isZoneStable=!1}}),this._ngZone.runOutsideAngular(()=>{this._ngZone.onStable.subscribe({next:()=>{Oa.assertNotInAngularZone(),Sa(()=>{this._isZoneStable=!0,this._runCallbacksIfReady()})}})})}increasePendingRequestCount(){return this._pendingCount+=1,this._didWork=!0,this._pendingCount}decreasePendingRequestCount(){if(this._pendingCount-=1,this._pendingCount<0)throw new Error("pending async requests below zero");return this._runCallbacksIfReady(),this._pendingCount}isStable(){return this._isZoneStable&&0===this._pendingCount&&!this._ngZone.hasPendingMacrotasks}_runCallbacksIfReady(){if(this.isStable())Sa(()=>{for(;0!==this._callbacks.length;){let t=this._callbacks.pop();clearTimeout(t.timeoutId),t.doneCb(this._didWork)}this._didWork=!1});else{let t=this.getPendingTasks();this._callbacks=this._callbacks.filter(e=>!e.updateCb||!e.updateCb(t)||(clearTimeout(e.timeoutId),!1)),this._didWork=!0}}getPendingTasks(){return this.taskTrackingZone?this.taskTrackingZone.macroTasks.map(t=>({source:t.source,creationLocation:t.creationLocation,data:t.data})):[]}addCallback(t,e,n){let r=-1;e&&e>0&&(r=setTimeout(()=>{this._callbacks=this._callbacks.filter(t=>t.timeoutId!==r),t(this._didWork,this.getPendingTasks())},e)),this._callbacks.push({doneCb:t,timeoutId:r,updateCb:n})}whenStable(t,e,n){if(n&&!this.taskTrackingZone)throw new Error('Task tracking zone is required when passing an update callback to whenStable(). Is "zone.js/dist/task-tracking.js" loaded?');this.addCallback(t,e,n),this._runCallbacksIfReady()}getPendingRequestCount(){return this._pendingCount}findProviders(t,e,n){return[]}}return t.\u0275fac=function(e){return new(e||t)(cn(Oa))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})(),Da=(()=>{class t{constructor(){this._applications=new Map,Ma.addToWindow(this)}registerApplication(t,e){this._applications.set(t,e)}unregisterApplication(t){this._applications.delete(t)}unregisterAllApplications(){this._applications.clear()}getTestability(t){return this._applications.get(t)||null}getAllTestabilities(){return Array.from(this._applications.values())}getAllRootElements(){return Array.from(this._applications.keys())}findTestabilityInTree(t,e=!0){return Ma.findTestabilityInTree(this,t,e)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();class Ra{addToWindow(t){}findTestabilityInTree(t,e,n){return null}}function Pa(t){Ma=t}let La,Ma=new Ra,Ua=!0,Fa=!1;function Va(){return Fa=!0,Ua}function qa(){if(Fa)throw new Error("Cannot enable prod mode after platform setup.");Ua=!1}const Ba=new $e("AllowMultipleToken");class Ha{constructor(t,e){this.name=t,this.token=e}}function za(t,e,n=[]){const r=`Platform: ${e}`,i=new $e(r);return(e=[])=>{let o=Ga();if(!o||o.injector.get(Ba,!1))if(t)t(n.concat(e).concat({provide:i,useValue:!0}));else{const t=n.concat(e).concat({provide:i,useValue:!0},{provide:Li,useValue:"platform"});!function(t){if(La&&!La.destroyed&&!La.injector.get(Ba,!1))throw new Error("There can be only one platform. Destroy the previous one to create a new one.");La=t.get(Ka);const e=t.get(ca,null);e&&e.forEach(t=>t())}(Wi.create({providers:t,name:r}))}return function(t){const e=Ga();if(!e)throw new Error("No platform exists!");if(!e.injector.get(t,null))throw new Error("A platform with a different configuration has been created. Please destroy it first.");return e}(i)}}function Ga(){return La&&!La.destroyed?La:null}let Ka=(()=>{class t{constructor(t){this._injector=t,this._modules=[],this._destroyListeners=[],this._destroyed=!1}bootstrapModuleFactory(t,e){const n=function(t,e){let n;return n="noop"===t?new ka:("zone.js"===t?void 0:t)||new Oa({enableLongStackTrace:Va(),shouldCoalesceEventChangeDetection:!!(null==e?void 0:e.ngZoneEventCoalescing),shouldCoalesceRunChangeDetection:!!(null==e?void 0:e.ngZoneRunCoalescing)}),n}(e?e.ngZone:void 0,{ngZoneEventCoalescing:e&&e.ngZoneEventCoalescing||!1,ngZoneRunCoalescing:e&&e.ngZoneRunCoalescing||!1}),r=[{provide:Oa,useValue:n}];return n.run(()=>{const e=Wi.create({providers:r,parent:this.injector,name:t.moduleType.name}),i=t.create(e),o=i.injector.get(or,null);if(!o)throw new Error("No ErrorHandler. Is platform module (BrowserModule) included?");return n.runOutsideAngular(()=>{const t=n.onError.subscribe({next:t=>{o.handleError(t)}});i.onDestroy(()=>{Wa(this._modules,i),t.unsubscribe()})}),function(t,e,n){try{const r=n();return fo(r)?r.catch(n=>{throw e.runOutsideAngular(()=>t.handleError(n)),n}):r}catch(r){throw e.runOutsideAngular(()=>t.handleError(r)),r}}(o,n,()=>{const t=i.injector.get(oa);return t.runInitializers(),t.donePromise.then(()=>(Ro(i.injector.get(da,No)||No),this._moduleDoBootstrap(i),i))})})}bootstrapModule(t,e=[]){const n=Ja({},e);return function(t,e,n){const r=new Vs(n);return Promise.resolve(r)}(0,0,t).then(t=>this.bootstrapModuleFactory(t,n))}_moduleDoBootstrap(t){const e=t.injector.get($a);if(t._bootstrapComponents.length>0)t._bootstrapComponents.forEach(t=>e.bootstrap(t));else{if(!t.instance.ngDoBootstrap)throw new Error(`The module ${h(t.instance.constructor)} was bootstrapped, but it does not declare "@NgModule.bootstrap" components nor a "ngDoBootstrap" method. Please define one of these.`);t.instance.ngDoBootstrap(e)}this._modules.push(t)}onDestroy(t){this._destroyListeners.push(t)}get injector(){return this._injector}destroy(){if(this._destroyed)throw new Error("The platform has already been destroyed!");this._modules.slice().forEach(t=>t.destroy()),this._destroyListeners.forEach(t=>t()),this._destroyed=!0}get destroyed(){return this._destroyed}}return t.\u0275fac=function(e){return new(e||t)(cn(Wi))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Ja(t,e){return Array.isArray(e)?e.reduce(Ja,t):Object.assign(Object.assign({},t),e)}let $a=(()=>{class t{constructor(t,e,n,r,i){this._zone=t,this._injector=e,this._exceptionHandler=n,this._componentFactoryResolver=r,this._initStatus=i,this._bootstrapListeners=[],this._views=[],this._runningTick=!1,this._stable=!0,this.componentTypes=[],this.components=[],this._onMicrotaskEmptySubscription=this._zone.onMicrotaskEmpty.subscribe({next:()=>{this._zone.run(()=>{this.tick()})}});const l=new o.a(t=>{this._stable=this._zone.isStable&&!this._zone.hasPendingMacrotasks&&!this._zone.hasPendingMicrotasks,this._zone.runOutsideAngular(()=>{t.next(this._stable),t.complete()})}),h=new o.a(t=>{let e;this._zone.runOutsideAngular(()=>{e=this._zone.onStable.subscribe(()=>{Oa.assertNotInAngularZone(),Sa(()=>{this._stable||this._zone.hasPendingMacrotasks||this._zone.hasPendingMicrotasks||(this._stable=!0,t.next(!0))})})});const n=this._zone.onUnstable.subscribe(()=>{Oa.assertInAngularZone(),this._stable&&(this._stable=!1,this._zone.runOutsideAngular(()=>{t.next(!1)}))});return()=>{e.unsubscribe(),n.unsubscribe()}});this.isStable=Object(s.a)(l,h.pipe(t=>{return Object(u.a)()((e=c,function(t){let n;n="function"==typeof e?e:function(){return e};const r=Object.create(t,a.b);return r.source=t,r.subjectFactory=n,r})(t));var e}))}bootstrap(t,e){if(!this._initStatus.done)throw new Error("Cannot bootstrap as there are still asynchronous initializers running. Bootstrap components in the `ngDoBootstrap` method of the root module.");let n;n=t instanceof Po?t:this._componentFactoryResolver.resolveComponentFactory(t),this.componentTypes.push(n.componentType);const r=n.isBoundToModule?void 0:this._injector.get(Es),i=n.create(Wi.NULL,[],e||n.selector,r),o=i.location.nativeElement,s=i.injector.get(Na,null),a=s&&i.injector.get(Da);return s&&a&&a.registerApplication(o,s),i.onDestroy(()=>{this.detachView(i.hostView),Wa(this.components,i),a&&a.unregisterApplication(o)}),this._loadComponent(i),i}tick(){if(this._runningTick)throw new Error("ApplicationRef.tick is called recursively");try{this._runningTick=!0;for(let t of this._views)t.detectChanges()}catch(t){this._zone.runOutsideAngular(()=>this._exceptionHandler.handleError(t))}finally{this._runningTick=!1}}attachView(t){const e=t;this._views.push(e),e.attachToAppRef(this)}detachView(t){const e=t;Wa(this._views,e),e.detachFromAppRef()}_loadComponent(t){this.attachView(t.hostView),this.tick(),this.components.push(t),this._injector.get(ha,[]).concat(this._bootstrapListeners).forEach(e=>e(t))}ngOnDestroy(){this._views.slice().forEach(t=>t.destroy()),this._onMicrotaskEmptySubscription.unsubscribe()}get viewCount(){return this._views.length}}return t.\u0275fac=function(e){return new(e||t)(cn(Oa),cn(Wi),cn(or),cn(Mo),cn(oa))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function Wa(t,e){const n=t.indexOf(e);n>-1&&t.splice(n,1)}class Qa{}class Ya{}const Xa={factoryPathPrefix:"",factoryPathSuffix:".ngfactory"};let Za=(()=>{class t{constructor(t,e){this._compiler=t,this._config=e||Xa}load(t){return this.loadAndCompile(t)}loadAndCompile(t){let[e,r]=t.split("#");return void 0===r&&(r="default"),n("zn8P")(e).then(t=>t[r]).then(t=>tu(t,e,r)).then(t=>this._compiler.compileModuleAsync(t))}loadFactory(t){let[e,r]=t.split("#"),i="NgFactory";return void 0===r&&(r="default",i=""),n("zn8P")(this._config.factoryPathPrefix+e+this._config.factoryPathSuffix).then(t=>t[r+i]).then(t=>tu(t,e,r))}}return t.\u0275fac=function(e){return new(e||t)(cn(Ia),cn(Ya,8))},t.\u0275prov=w({token:t,factory:t.\u0275fac}),t})();function tu(t,e,n){if(!t)throw new Error(`Cannot find '${n}' in '${e}'`);return t}const eu=function(t){return null},nu=za(null,"core",[{provide:la,useValue:"unknown"},{provide:Ka,deps:[Wi]},{provide:Da,deps:[]},{provide:fa,deps:[]}]),ru=[{provide:$a,useClass:$a,deps:[Oa,Wi,or,Mo,oa]},{provide:Ps,deps:[Oa],useFactory:function(t){let e=[];return t.onStable.subscribe(()=>{for(;e.length;)e.pop()()}),function(t){e.push(t)}}},{provide:oa,useClass:oa,deps:[[new dn,ia]]},{provide:Ia,useClass:Ia,deps:[]},aa,{provide:ss,useFactory:function(){return ms},deps:[]},{provide:us,useFactory:function(){return ys},deps:[]},{provide:da,useFactory:function(t){return Ro(t=t||"undefined"!=typeof $localize&&$localize.locale||No),t},deps:[[new fn(da),new dn,new pn]]},{provide:pa,useValue:"USD"}];let iu=(()=>{class t{constructor(t){}}return t.\u0275fac=function(e){return new(e||t)(cn($a))},t.\u0275mod=et({type:t}),t.\u0275inj=_({providers:ru}),t})()},gRHU:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("2fFW"),i=n("NJ4a");const o={closed:!0,next(t){},error(t){if(r.a.useDeprecatedSynchronousErrorHandling)throw t;Object(i.a)(t)},complete(){}}},jZKg:function(t,e,n){"use strict";n.d(e,"a",function(){return o});var r=n("HDdC"),i=n("quSY");function o(t,e){return new r.a(n=>{const r=new i.a;let o=0;return r.add(e.schedule(function(){o!==t.length?(n.next(t[o++]),n.closed||r.add(this.schedule())):n.complete()})),r})}},kJWO:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=(()=>"function"==typeof Symbol&&Symbol.observable||"@@observable")()},lJxs:function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(t,e){return function(n){if("function"!=typeof t)throw new TypeError("argument is not a function. Are you looking for `mapTo()`?");return n.lift(new o(t,e))}}class o{constructor(t,e){this.project=t,this.thisArg=e}call(t,e){return e.subscribe(new s(t,this.project,this.thisArg))}}class s extends r.a{constructor(t,e,n){super(t),this.project=e,this.count=0,this.thisArg=n||this}_next(t){let e;try{e=this.project.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}},mrSG:function(t,e,n){"use strict";n.d(e,"c",function(){return i}),n.d(e,"a",function(){return o}),n.d(e,"b",function(){return s}),n.d(e,"d",function(){return a}),n.d(e,"g",function(){return u}),n.d(e,"e",function(){return c}),n.d(e,"f",function(){return l});var r=function(t,e){return(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function i(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Class extends value "+String(e)+" is not a constructor or null");function n(){this.constructor=t}r(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}var o=function(){return(o=Object.assign||function(t){for(var e,n=1,r=arguments.length;n<r;n++)for(var i in e=arguments[n])Object.prototype.hasOwnProperty.call(e,i)&&(t[i]=e[i]);return t}).apply(this,arguments)};function s(t,e,n,r){return new(n||(n=Promise))(function(i,o){function s(t){try{u(r.next(t))}catch(e){o(e)}}function a(t){try{u(r.throw(t))}catch(e){o(e)}}function u(t){var e;t.done?i(t.value):(e=t.value,e instanceof n?e:new n(function(t){t(e)})).then(s,a)}u((r=r.apply(t,e||[])).next())})}function a(t,e){var n,r,i,o,s={label:0,sent:function(){if(1&i[0])throw i[1];return i[1]},trys:[],ops:[]};return o={next:a(0),throw:a(1),return:a(2)},"function"==typeof Symbol&&(o[Symbol.iterator]=function(){return this}),o;function a(o){return function(a){return function(o){if(n)throw new TypeError("Generator is already executing.");for(;s;)try{if(n=1,r&&(i=2&o[0]?r.return:o[0]?r.throw||((i=r.return)&&i.call(r),0):r.next)&&!(i=i.call(r,o[1])).done)return i;switch(r=0,i&&(o=[2&o[0],i.value]),o[0]){case 0:case 1:i=o;break;case 4:return s.label++,{value:o[1],done:!1};case 5:s.label++,r=o[1],o=[0];continue;case 7:o=s.ops.pop(),s.trys.pop();continue;default:if(!((i=(i=s.trys).length>0&&i[i.length-1])||6!==o[0]&&2!==o[0])){s=0;continue}if(3===o[0]&&(!i||o[1]>i[0]&&o[1]<i[3])){s.label=o[1];break}if(6===o[0]&&s.label<i[1]){s.label=i[1],i=o;break}if(i&&s.label<i[2]){s.label=i[2],s.ops.push(o);break}i[2]&&s.ops.pop(),s.trys.pop();continue}o=e.call(t,s)}catch(a){o=[6,a],r=0}finally{n=i=0}if(5&o[0])throw o[1];return{value:o[0]?o[1]:void 0,done:!0}}([o,a])}}}function u(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}function c(t,e){var n="function"==typeof Symbol&&t[Symbol.iterator];if(!n)return t;var r,i,o=n.call(t),s=[];try{for(;(void 0===e||e-- >0)&&!(r=o.next()).done;)s.push(r.value)}catch(a){i={error:a}}finally{try{r&&!r.done&&(n=o.return)&&n.call(o)}finally{if(i)throw i.error}}return s}function l(t,e){for(var n=0,r=e.length,i=t.length;n<r;n++,i++)t[i]=e[n];return t}},n6bG:function(t,e,n){"use strict";function r(t){return"function"==typeof t}n.d(e,"a",function(){return r})},ngJS:function(t,e,n){"use strict";n.d(e,"a",function(){return r});const r=t=>e=>{for(let n=0,r=t.length;n<r&&!e.closed;n++)e.next(t[n]);e.complete()}},pxpQ:function(t,e,n){"use strict";n.d(e,"b",function(){return u}),n.d(e,"a",function(){return l});var r=n("7o/Q"),i=n("EY2u"),o=n("LRne"),s=n("HDdC");let a=(()=>{class t{constructor(t,e,n){this.kind=t,this.value=e,this.error=n,this.hasValue="N"===t}observe(t){switch(this.kind){case"N":return t.next&&t.next(this.value);case"E":return t.error&&t.error(this.error);case"C":return t.complete&&t.complete()}}do(t,e,n){switch(this.kind){case"N":return t&&t(this.value);case"E":return e&&e(this.error);case"C":return n&&n()}}accept(t,e,n){return t&&"function"==typeof t.next?this.observe(t):this.do(t,e,n)}toObservable(){switch(this.kind){case"N":return Object(o.a)(this.value);case"E":return t=this.error,new s.a(e=>e.error(t));case"C":return Object(i.b)()}var t;throw new Error("unexpected notification kind value")}static createNext(e){return void 0!==e?new t("N",e):t.undefinedValueNotification}static createError(e){return new t("E",void 0,e)}static createComplete(){return t.completeNotification}}return t.completeNotification=new t("C"),t.undefinedValueNotification=new t("N",void 0),t})();function u(t,e=0){return function(n){return n.lift(new c(t,e))}}class c{constructor(t,e=0){this.scheduler=t,this.delay=e}call(t,e){return e.subscribe(new l(t,this.scheduler,this.delay))}}class l extends r.a{constructor(t,e,n=0){super(t),this.scheduler=e,this.delay=n}static dispatch(t){const{notification:e,destination:n}=t;e.observe(n),this.unsubscribe()}scheduleMessage(t){this.destination.add(this.scheduler.schedule(l.dispatch,this.delay,new h(t,this.destination)))}_next(t){this.scheduleMessage(a.createNext(t))}_error(t){this.scheduleMessage(a.createError(t)),this.unsubscribe()}_complete(){this.scheduleMessage(a.createComplete()),this.unsubscribe()}}class h{constructor(t,e){this.notification=t,this.destination=e}}},"q/0M":function(t,e,n){"use strict";function r(){for(var t=0,e=0,n=arguments.length;e<n;e++)t+=arguments[e].length;var r=Array(t),i=0;for(e=0;e<n;e++)for(var o=arguments[e],s=0,a=o.length;s<a;s++,i++)r[i]=o[s];return r}var i;n.d(e,"a",function(){return s}),n.d(e,"b",function(){return h}),n.d(e,"c",function(){return f}),n.d(e,"d",function(){return d});var o=[],s=function(t){return t[t.DEBUG=0]="DEBUG",t[t.VERBOSE=1]="VERBOSE",t[t.INFO=2]="INFO",t[t.WARN=3]="WARN",t[t.ERROR=4]="ERROR",t[t.SILENT=5]="SILENT",t}({}),a={debug:s.DEBUG,verbose:s.VERBOSE,info:s.INFO,warn:s.WARN,error:s.ERROR,silent:s.SILENT},u=s.INFO,c=((i={})[s.DEBUG]="log",i[s.VERBOSE]="log",i[s.INFO]="info",i[s.WARN]="warn",i[s.ERROR]="error",i),l=function(t,e){for(var n=[],i=2;i<arguments.length;i++)n[i-2]=arguments[i];if(!(e<t.logLevel)){var o=(new Date).toISOString(),s=c[e];if(!s)throw new Error("Attempted to log a message with an invalid logType (value: "+e+")");console[s].apply(console,r(["["+o+"]  "+t.name+":"],n))}},h=function(){function t(t){this.name=t,this._logLevel=u,this._logHandler=l,this._userLogHandler=null,o.push(this)}return Object.defineProperty(t.prototype,"logLevel",{get:function(){return this._logLevel},set:function(t){if(!(t in s))throw new TypeError('Invalid value "'+t+'" assigned to `logLevel`');this._logLevel=t},enumerable:!1,configurable:!0}),t.prototype.setLogLevel=function(t){this._logLevel="string"==typeof t?a[t]:t},Object.defineProperty(t.prototype,"logHandler",{get:function(){return this._logHandler},set:function(t){if("function"!=typeof t)throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"userLogHandler",{get:function(){return this._userLogHandler},set:function(t){this._userLogHandler=t},enumerable:!1,configurable:!0}),t.prototype.debug=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.DEBUG],t)),this._logHandler.apply(this,r([this,s.DEBUG],t))},t.prototype.log=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.VERBOSE],t)),this._logHandler.apply(this,r([this,s.VERBOSE],t))},t.prototype.info=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.INFO],t)),this._logHandler.apply(this,r([this,s.INFO],t))},t.prototype.warn=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.WARN],t)),this._logHandler.apply(this,r([this,s.WARN],t))},t.prototype.error=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];this._userLogHandler&&this._userLogHandler.apply(this,r([this,s.ERROR],t)),this._logHandler.apply(this,r([this,s.ERROR],t))},t}();function f(t){o.forEach(function(e){e.setLogLevel(t)})}function d(t,e){for(var n=function(n){var r=null;e&&e.level&&(r=a[e.level]),n.userLogHandler=null===t?null:function(e,n){for(var i=[],o=2;o<arguments.length;o++)i[o-2]=arguments[o];var a=i.map(function(t){if(null==t)return null;if("string"==typeof t)return t;if("number"==typeof t||"boolean"==typeof t)return t.toString();if(t instanceof Error)return t.message;try{return JSON.stringify(t)}catch(e){return null}}).filter(function(t){return t}).join(" ");n>=(null!=r?r:e.logLevel)&&t({level:s[n].toLowerCase(),message:a,args:i,type:e.name})}},r=0,i=o;r<i.length;r++)n(i[r])}},qOnz:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return y}),n.d(e,"c",function(){return w}),n.d(e,"d",function(){return _}),n.d(e,"e",function(){return i}),n.d(e,"f",function(){return o}),n.d(e,"g",function(){return a}),n.d(e,"h",function(){return l}),n.d(e,"i",function(){return h}),n.d(e,"j",function(){return d}),n.d(e,"k",function(){return p}),n.d(e,"l",function(){return u}),n.d(e,"m",function(){return c}),n.d(e,"n",function(){return f}),n.d(e,"o",function(){return g});var r=n("mrSG");function i(t){return o(void 0,t)}function o(t,e){if(!(e instanceof Object))return e;switch(e.constructor){case Date:return new Date(e.getTime());case Object:void 0===t&&(t={});break;case Array:t=[];break;default:return e}for(var n in e)e.hasOwnProperty(n)&&"__proto__"!==n&&(t[n]=o(t[n],e[n]));return t}var s=function(){function t(){var t=this;this.reject=function(){},this.resolve=function(){},this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})}return t.prototype.wrapCallback=function(t){var e=this;return function(n,r){n?e.reject(n):e.resolve(r),"function"==typeof t&&(e.promise.catch(function(){}),1===t.length?t(n):t(n,r))}},t}();function a(){return"undefined"!=typeof navigator&&"string"==typeof navigator.userAgent?navigator.userAgent:""}function u(){return"undefined"!=typeof window&&!!(window.cordova||window.phonegap||window.PhoneGap)&&/ios|iphone|ipod|ipad|android|blackberry|iemobile/i.test(a())}function c(){try{return"[object process]"===Object.prototype.toString.call(global.process)}catch(t){return!1}}function l(){return"object"==typeof self&&self.self===self}function h(){var t="object"==typeof chrome?chrome.runtime:"object"==typeof browser?browser.runtime:void 0;return"object"==typeof t&&void 0!==t.id}function f(){return"object"==typeof navigator&&"ReactNative"===navigator.product}function d(){return a().indexOf("Electron/")>=0}function p(){var t=a();return t.indexOf("MSIE ")>=0||t.indexOf("Trident/")>=0}function g(){return a().indexOf("MSAppHost/")>=0}var m=function(t){function e(n,r,i){var o=t.call(this,r)||this;return o.code=n,o.customData=i,o.name="FirebaseError",Object.setPrototypeOf(o,e.prototype),Error.captureStackTrace&&Error.captureStackTrace(o,y.prototype.create),o}return Object(r.c)(e,t),e}(Error),y=function(){function t(t,e,n){this.service=t,this.serviceName=e,this.errors=n}return t.prototype.create=function(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];var r=e[0]||{},i=this.service+"/"+t,o=this.errors[t],s=o?v(o,r):"Error",a=this.serviceName+": "+s+" ("+i+").",u=new m(i,a,r);return u},t}();function v(t,e){return t.replace(b,function(t,n){var r=e[n];return null!=r?String(r):"<"+n+"?>"})}var b=/\{\$([^}]+)}/g;function w(t,e){return Object.prototype.hasOwnProperty.call(t,e)}function _(t,e){var n=new I(t,e);return n.subscribe.bind(n)}var I=function(){function t(t,e){var n=this;this.observers=[],this.unsubscribes=[],this.observerCount=0,this.task=Promise.resolve(),this.finalized=!1,this.onNoObservers=e,this.task.then(function(){t(n)}).catch(function(t){n.error(t)})}return t.prototype.next=function(t){this.forEachObserver(function(e){e.next(t)})},t.prototype.error=function(t){this.forEachObserver(function(e){e.error(t)}),this.close(t)},t.prototype.complete=function(){this.forEachObserver(function(t){t.complete()}),this.close()},t.prototype.subscribe=function(t,e,n){var r,i=this;if(void 0===t&&void 0===e&&void 0===n)throw new Error("Missing Observer.");void 0===(r=function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=0,r=["next","error","complete"];n<r.length;n++){var i=r[n];if(i in t&&"function"==typeof t[i])return!0}return!1}(t)?t:{next:t,error:e,complete:n}).next&&(r.next=E),void 0===r.error&&(r.error=E),void 0===r.complete&&(r.complete=E);var o=this.unsubscribeOne.bind(this,this.observers.length);return this.finalized&&this.task.then(function(){try{i.finalError?r.error(i.finalError):r.complete()}catch(t){}}),this.observers.push(r),o},t.prototype.unsubscribeOne=function(t){void 0!==this.observers&&void 0!==this.observers[t]&&(delete this.observers[t],this.observerCount-=1,0===this.observerCount&&void 0!==this.onNoObservers&&this.onNoObservers(this))},t.prototype.forEachObserver=function(t){if(!this.finalized)for(var e=0;e<this.observers.length;e++)this.sendOne(e,t)},t.prototype.sendOne=function(t,e){var n=this;this.task.then(function(){if(void 0!==n.observers&&void 0!==n.observers[t])try{e(n.observers[t])}catch(r){"undefined"!=typeof console&&console.error&&console.error(r)}})},t.prototype.close=function(t){var e=this;this.finalized||(this.finalized=!0,void 0!==t&&(this.finalError=t),this.task.then(function(){e.observers=void 0,e.onNoObservers=void 0}))},t}();function E(){}},qgXg:function(t,e,n){"use strict";n.d(e,"b",function(){return a}),n.d(e,"a",function(){return u});var r=n("3N8a");class i extends r.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}schedule(t,e=0){return e>0?super.schedule(t,e):(this.delay=e,this.state=t,this.scheduler.flush(this),this)}execute(t,e){return e>0||this.closed?super.execute(t,e):this._execute(t,e)}requestAsyncId(t,e,n=0){return null!==n&&n>0||null===n&&this.delay>0?super.requestAsyncId(t,e,n):t.flush(this)}}var o=n("IjjT");class s extends o.a{}const a=new s(i),u=a},quSY:function(t,e,n){"use strict";n.d(e,"a",function(){return a});var r=n("DH7j"),i=n("XoHu"),o=n("n6bG");const s=(()=>{function t(t){return Error.call(this),this.message=t?`${t.length} errors occurred during unsubscription:\n${t.map((t,e)=>`${e+1}) ${t.toString()}`).join("\n  ")}`:"",this.name="UnsubscriptionError",this.errors=t,this}return t.prototype=Object.create(Error.prototype),t})();let a=(()=>{class t{constructor(t){this.closed=!1,this._parentOrParents=null,this._subscriptions=null,t&&(this._ctorUnsubscribe=!0,this._unsubscribe=t)}unsubscribe(){let e;if(this.closed)return;let{_parentOrParents:n,_ctorUnsubscribe:a,_unsubscribe:c,_subscriptions:l}=this;if(this.closed=!0,this._parentOrParents=null,this._subscriptions=null,n instanceof t)n.remove(this);else if(null!==n)for(let t=0;t<n.length;++t)n[t].remove(this);if(Object(o.a)(c)){a&&(this._unsubscribe=void 0);try{c.call(this)}catch(h){e=h instanceof s?u(h.errors):[h]}}if(Object(r.a)(l)){let t=-1,n=l.length;for(;++t<n;){const n=l[t];if(Object(i.a)(n))try{n.unsubscribe()}catch(h){e=e||[],h instanceof s?e=e.concat(u(h.errors)):e.push(h)}}}if(e)throw new s(e)}add(e){let n=e;if(!e)return t.EMPTY;switch(typeof e){case"function":n=new t(e);case"object":if(n===this||n.closed||"function"!=typeof n.unsubscribe)return n;if(this.closed)return n.unsubscribe(),n;if(!(n instanceof t)){const e=n;n=new t,n._subscriptions=[e]}break;default:throw new Error("unrecognized teardown "+e+" added to Subscription.")}let{_parentOrParents:r}=n;if(null===r)n._parentOrParents=this;else if(r instanceof t){if(r===this)return n;n._parentOrParents=[r,this]}else{if(-1!==r.indexOf(this))return n;r.push(this)}const i=this._subscriptions;return null===i?this._subscriptions=[n]:i.push(n),n}remove(t){const e=this._subscriptions;if(e){const n=e.indexOf(t);-1!==n&&e.splice(n,1)}}}var e;return t.EMPTY=((e=new t).closed=!0,e),t})();function u(t){return t.reduce((t,e)=>t.concat(e instanceof s?e.errors:e),[])}},spgP:function(t,e,n){"use strict";(function(t){n.d(e,"a",function(){return T}),n.d(e,"b",function(){return b}),n.d(e,"c",function(){return v}),n.d(e,"d",function(){return d}),n.d(e,"e",function(){return y}),n.d(e,"f",function(){return S}),n.d(e,"g",function(){return _}),n.d(e,"h",function(){return p}),n.d(e,"i",function(){return m}),n.d(e,"j",function(){return I});var r=n("qgXg"),i=n("D0XW"),o=n("vkgz"),s=n("tf+s"),a=n("pxpQ"),u=n("fXoL"),c=n("Jgta");function l(){}class h{constructor(t,e=r.b){this.zone=t,this.delegate=e}now(){return this.delegate.now()}schedule(t,e,n){const r=this.zone;return this.delegate.schedule(function(e){r.runGuarded(()=>{t.apply(this,[e])})},e,n)}}class f{constructor(t){this.zone=t,this.task=null}call(t,e){const n=this.unscheduleTask.bind(this);return this.task=this.zone.run(()=>Zone.current.scheduleMacroTask("firebaseZoneBlock",l,{},l,l)),e.pipe(Object(o.a)({next:n,complete:n,error:n})).subscribe(t).add(n)}unscheduleTask(){setTimeout(()=>{null!=this.task&&"scheduled"===this.task.state&&(this.task.invoke(),this.task=null)},10)}}class d{constructor(t){this.ngZone=t,this.outsideAngular=t.runOutsideAngular(()=>new h(Zone.current)),this.insideAngular=t.run(()=>new h(Zone.current,i.a))}}function p(t){return function(e){return(e=e.lift(new f(t.ngZone))).pipe(Object(s.a)(t.outsideAngular),Object(a.b)(t.insideAngular))}}const g=["ngOnDestroy"],m=(t,e,n,r={})=>new Proxy(t,{get:(i,o)=>n.runOutsideAngular(()=>{var i;if(t[o])return(null===(i=null==r?void 0:r.spy)||void 0===i?void 0:i.get)&&r.spy.get(o,t[o]),t[o];if(g.indexOf(o)>-1)return()=>{};const s=e.toPromise().then(t=>{const e=t&&t[o];return"function"==typeof e?e.bind(t):e&&e.then?e.then(t=>n.run(()=>t)):n.run(()=>e)});return new Proxy(()=>{},{get:(t,e)=>s[e],apply:(t,e,n)=>s.then(t=>{var e;const i=t&&t(...n);return(null===(e=null==r?void 0:r.spy)||void 0===e?void 0:e.apply)&&r.spy.apply(o,n,i),i})})})}),y=(t,e)=>{e.forEach(e=>{Object.getOwnPropertyNames(e.prototype||e).forEach(n=>{Object.defineProperty(t.prototype,n,Object.getOwnPropertyDescriptor(e.prototype||e,n))})})},v=new u.r("angularfire2.app.options"),b=new u.r("angularfire2.app.nameOrConfig"),w=new u.P("6.1.4");function _(e,n,r){const i="object"==typeof r&&r||{};i.name=i.name||"string"==typeof r&&r||"[DEFAULT]";const o=c.a.apps.filter(t=>t&&t.name===i.name)[0]||n.runOutsideAngular(()=>c.a.initializeApp(e,i));try{JSON.stringify(e)!==JSON.stringify(o.options)&&E("error",`${o.name} Firebase App already initialized with different options${t.hot?", you may need to reload as Firebase is not HMR aware.":"."}`)}catch(s){}return o}const I=()=>{E("warn","You may need to import 'firebase/auth' manually in your component rather than rely on AngularFireAuth's dynamic import, when using the emulator suite https://github.com/angular/angularfire/issues/2656")},E=(t,...e)=>{Object(u.U)()&&"undefined"!=typeof console&&console[t](...e)};function S(e,n,r,i,o){const[s,...a]=globalThis.\u0275AngularfireInstanceCache.get(e)||[];if(s){try{o.some((t,e)=>{const n=a[e];return t&&"object"==typeof t?JSON.stringify(t)!==JSON.stringify(n):t!==n})&&E("error",`${n} was already initialized on the ${r.name} Firebase App instance with different settings.${t.hot?" You may need to reload as Firebase is not HMR aware.":""}`)}catch(u){}return s}{const t=i();return globalThis.\u0275AngularfireInstanceCache.set(e,[t,...o]),t}}globalThis.\u0275AngularfireInstanceCache||(globalThis.\u0275AngularfireInstanceCache=new Map);const O={provide:class{},useFactory:_,deps:[v,u.A,[new u.B,b]]};let T=(()=>{class t{constructor(t){c.a.registerVersion("angularfire",w.full,t.toString()),c.a.registerVersion("angular",u.O.full)}static initializeApp(e,n){return{ngModule:t,providers:[{provide:v,useValue:e},{provide:b,useValue:n}]}}}return t.\u0275fac=function(e){return new(e||t)(u.Mb(u.C))},t.\u0275mod=u.Eb({type:t}),t.\u0275inj=u.Db({providers:[O]}),t})()}).call(this,n("3UD+")(t))},"tf+s":function(t,e,n){"use strict";n.d(e,"a",function(){return m});var r=n("HDdC");let i=1;const o=(()=>Promise.resolve())(),s={};function a(t){return t in s&&(delete s[t],!0)}const u={setImmediate(t){const e=i++;return s[e]=!0,o.then(()=>a(e)&&t()),e},clearImmediate(t){a(t)}};var c=n("3N8a");class l extends c.a{constructor(t,e){super(t,e),this.scheduler=t,this.work=e}requestAsyncId(t,e,n=0){return null!==n&&n>0?super.requestAsyncId(t,e,n):(t.actions.push(this),t.scheduled||(t.scheduled=u.setImmediate(t.flush.bind(t,null))))}recycleAsyncId(t,e,n=0){if(null!==n&&n>0||null===n&&this.delay>0)return super.recycleAsyncId(t,e,n);0===t.actions.length&&(u.clearImmediate(e),t.scheduled=void 0)}}var h=n("IjjT");class f extends h.a{flush(t){this.active=!0,this.scheduled=void 0;const{actions:e}=this;let n,r=-1,i=e.length;t=t||e.shift();do{if(n=t.execute(t.state,t.delay))break}while(++r<i&&(t=e.shift()));if(this.active=!1,n){for(;++r<i&&(t=e.shift());)t.unsubscribe();throw n}}}const d=new f(l);var p=n("DH7j");class g extends r.a{constructor(t,e=0,n=d){var r;super(),this.source=t,this.delayTime=e,this.scheduler=n,r=e,(Object(p.a)(r)||!(r-parseFloat(r)+1>=0)||e<0)&&(this.delayTime=0),n&&"function"==typeof n.schedule||(this.scheduler=d)}static create(t,e=0,n=d){return new g(t,e,n)}static dispatch(t){const{source:e,subscriber:n}=t;return this.add(e.subscribe(n))}_subscribe(t){return this.scheduler.schedule(g.dispatch,this.delayTime,{source:this.source,subscriber:t})}}function m(t,e=0){return function(n){return n.lift(new y(t,e))}}class y{constructor(t,e){this.scheduler=t,this.delay=e}call(t,e){return new g(e,this.delay,this.scheduler).subscribe(t)}}},vkgz:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("7o/Q");function i(){}var o=n("n6bG");function s(t,e,n){return function(r){return r.lift(new a(t,e,n))}}class a{constructor(t,e,n){this.nextOrObserver=t,this.error=e,this.complete=n}call(t,e){return e.subscribe(new u(t,this.nextOrObserver,this.error,this.complete))}}class u extends r.a{constructor(t,e,n,r){super(t),this._tapNext=i,this._tapError=i,this._tapComplete=i,this._tapError=n||i,this._tapComplete=r||i,Object(o.a)(e)?(this._context=this,this._tapNext=e):e&&(this._context=e,this._tapNext=e.next||i,this._tapError=e.error||i,this._tapComplete=e.complete||i)}_next(t){try{this._tapNext.call(this._context,t)}catch(e){return void this.destination.error(e)}this.destination.next(t)}_error(t){try{this._tapError.call(this._context,t)}catch(t){return void this.destination.error(t)}this.destination.error(t)}_complete(){try{this._tapComplete.call(this._context)}catch(t){return void this.destination.error(t)}return this.destination.complete()}}},"x+ZX":function(t,e,n){"use strict";n.d(e,"a",function(){return i});var r=n("7o/Q");function i(){return function(t){return t.lift(new o(t))}}class o{constructor(t){this.connectable=t}call(t,e){const{connectable:n}=this;n._refCount++;const r=new s(t,n),i=e.subscribe(r);return r.closed||(r.connection=n.connect()),i}}class s extends r.a{constructor(t,e){super(t),this.connectable=e}_unsubscribe(){const{connectable:t}=this;if(!t)return void(this.connection=null);this.connectable=null;const e=t._refCount;if(e<=0)return void(this.connection=null);if(t._refCount=e-1,e>1)return void(this.connection=null);const{connection:n}=this,r=t._connection;this.connection=null,!r||n&&r!==n||r.unsubscribe()}}},yCtX:function(t,e,n){"use strict";n.d(e,"a",function(){return s});var r=n("HDdC"),i=n("ngJS"),o=n("jZKg");function s(t,e){return e?Object(o.a)(t,e):new r.a(Object(i.a)(t))}},"z+Ro":function(t,e,n){"use strict";function r(t){return t&&"function"==typeof t.schedule}n.d(e,"a",function(){return r})},zIRd:function(t,e,n){"use strict";var r,i,o=n("mrSG"),s=n("qOnz"),a=n("/6Yf"),u=n("q/0M"),c=((r={})["no-app"]="No Firebase App '{$appName}' has been created - call Firebase App.initializeApp()",r["bad-app-name"]="Illegal App name: '{$appName}",r["duplicate-app"]="Firebase App named '{$appName}' already exists",r["app-deleted"]="Firebase App named '{$appName}' already deleted",r["invalid-app-argument"]="firebase.{$appName}() takes either no argument or a Firebase App instance.",r["invalid-log-argument"]="First argument to `onLog` must be null or a function.",r),l=new s.b("app","Firebase",c),h="@firebase/app",f="[DEFAULT]",d=((i={})[h]="fire-core",i["@firebase/analytics"]="fire-analytics",i["@firebase/auth"]="fire-auth",i["@firebase/database"]="fire-rtdb",i["@firebase/functions"]="fire-fn",i["@firebase/installations"]="fire-iid",i["@firebase/messaging"]="fire-fcm",i["@firebase/performance"]="fire-perf",i["@firebase/remote-config"]="fire-rc",i["@firebase/storage"]="fire-gcs",i["@firebase/firestore"]="fire-fst",i["fire-js"]="fire-js",i["firebase-wrapper"]="fire-js-all",i),p=new u.b("@firebase/app"),g=function(){function t(t,e,n){var r=this;this.firebase_=n,this.isDeleted_=!1,this.name_=e.name,this.automaticDataCollectionEnabled_=e.automaticDataCollectionEnabled||!1,this.options_=Object(s.e)(t),this.container=new a.b(e.name),this._addComponent(new a.a("app",function(){return r},"PUBLIC")),this.firebase_.INTERNAL.components.forEach(function(t){return r._addComponent(t)})}return Object.defineProperty(t.prototype,"automaticDataCollectionEnabled",{get:function(){return this.checkDestroyed_(),this.automaticDataCollectionEnabled_},set:function(t){this.checkDestroyed_(),this.automaticDataCollectionEnabled_=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"name",{get:function(){return this.checkDestroyed_(),this.name_},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"options",{get:function(){return this.checkDestroyed_(),this.options_},enumerable:!1,configurable:!0}),t.prototype.delete=function(){var t=this;return new Promise(function(e){t.checkDestroyed_(),e()}).then(function(){return t.firebase_.INTERNAL.removeApp(t.name_),Promise.all(t.container.getProviders().map(function(t){return t.delete()}))}).then(function(){t.isDeleted_=!0})},t.prototype._getService=function(t,e){return void 0===e&&(e=f),this.checkDestroyed_(),this.container.getProvider(t).getImmediate({identifier:e})},t.prototype._removeServiceInstance=function(t,e){void 0===e&&(e=f),this.container.getProvider(t).clearInstance(e)},t.prototype._addComponent=function(t){try{this.container.addComponent(t)}catch(e){p.debug("Component "+t.name+" failed to register with FirebaseApp "+this.name,e)}},t.prototype._addOrOverwriteComponent=function(t){this.container.addOrOverwriteComponent(t)},t.prototype.toJSON=function(){return{name:this.name,automaticDataCollectionEnabled:this.automaticDataCollectionEnabled,options:this.options}},t.prototype.checkDestroyed_=function(){if(this.isDeleted_)throw l.create("app-deleted",{appName:this.name_})},t}();g.prototype.name&&g.prototype.options||g.prototype.delete||console.log("dc");var m=function t(){var e=function(t){var e={},n=new Map,r={__esModule:!0,initializeApp:function(n,i){void 0===i&&(i={}),"object"==typeof i&&null!==i||(i={name:i});var o=i;void 0===o.name&&(o.name=f);var a=o.name;if("string"!=typeof a||!a)throw l.create("bad-app-name",{appName:String(a)});if(Object(s.c)(e,a))throw l.create("duplicate-app",{appName:a});var u=new t(n,o,r);return e[a]=u,u},app:i,registerVersion:function(t,e,n){var r,i=null!==(r=d[t])&&void 0!==r?r:t;n&&(i+="-"+n);var s=i.match(/\s|\//),u=e.match(/\s|\//);if(s||u){var c=['Unable to register library "'+i+'" with version "'+e+'":'];return s&&c.push('library name "'+i+'" contains illegal characters (whitespace or "/")'),s&&u&&c.push("and"),u&&c.push('version name "'+e+'" contains illegal characters (whitespace or "/")'),void p.warn(c.join(" "))}o(new a.a(i+"-version",function(){return{library:i,version:e}},"VERSION"))},setLogLevel:u.c,onLog:function(t,e){if(null!==t&&"function"!=typeof t)throw l.create("invalid-log-argument");Object(u.d)(t,e)},apps:null,SDK_VERSION:"8.3.1",INTERNAL:{registerComponent:o,removeApp:function(t){delete e[t]},components:n,useAsService:function(t,e){return"serverAuth"===e?null:e}}};function i(t){if(t=t||f,!Object(s.c)(e,t))throw l.create("no-app",{appName:t});return e[t]}function o(o){var a=o.name;if(n.has(a))return p.debug("There were multiple attempts to register component "+a+"."),"PUBLIC"===o.type?r[a]:null;if(n.set(a,o),"PUBLIC"===o.type){var u=function(t){if(void 0===t&&(t=i()),"function"!=typeof t[a])throw l.create("invalid-app-argument",{appName:a});return t[a]()};void 0!==o.serviceProps&&Object(s.f)(u,o.serviceProps),r[a]=u,t.prototype[a]=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return this._getService.bind(this,a).apply(this,o.multipleInstances?t:[])}}for(var c=0,h=Object.keys(e);c<h.length;c++)e[h[c]]._addComponent(o);return"PUBLIC"===o.type?r[a]:null}return r.default=r,Object.defineProperty(r,"apps",{get:function(){return Object.keys(e).map(function(t){return e[t]})}}),i.App=t,r}(g);return e.INTERNAL=Object(o.a)(Object(o.a)({},e.INTERNAL),{createFirebaseNamespace:t,extendNamespace:function(t){Object(s.f)(e,t)},createSubscribe:s.d,ErrorFactory:s.b,deepExtend:s.f}),e}(),y=function(){function t(t){this.container=t}return t.prototype.getPlatformInfoString=function(){return this.container.getProviders().map(function(t){if(function(t){var e=t.getComponent();return"VERSION"===(null==e?void 0:e.type)}(t)){var e=t.getImmediate();return e.library+"/"+e.version}return null}).filter(function(t){return t}).join(" ")},t}();if(Object(s.h)()&&void 0!==self.firebase){p.warn("\n    Warning: Firebase is already defined in the global scope. Please make sure\n    Firebase library is only loaded once.\n  ");var v=self.firebase.SDK_VERSION;v&&v.indexOf("LITE")>=0&&p.warn("\n    Warning: You are trying to load Firebase while using Firebase Performance standalone script.\n    You should load Firebase Performance with this instance of Firebase to avoid loading duplicate code.\n    ")}var b=m.initializeApp;m.initializeApp=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return Object(s.m)()&&p.warn('\n      Warning: This is a browser-targeted Firebase bundle but it appears it is being\n      run in a Node environment.  If running in a Node environment, make sure you\n      are using the bundle specified by the "main" field in package.json.\n      \n      If you are using Webpack, you can specify "main" as the first item in\n      "resolve.mainFields":\n      https://webpack.js.org/configuration/resolve/#resolvemainfields\n      \n      If using Rollup, use the @rollup/plugin-node-resolve plugin and specify "main"\n      as the first item in "mainFields", e.g. [\'main\', \'module\'].\n      https://github.com/rollup/@rollup/plugin-node-resolve\n      '),b.apply(void 0,t)};var w=m;!function(t,e){t.INTERNAL.registerComponent(new a.a("platform-logger",function(t){return new y(t)},"PRIVATE")),t.registerVersion(h,"0.6.17",void 0),t.registerVersion("fire-js","")}(w),e.a=w},zUnb:function(t,e,n){"use strict";n.r(e);var r=n("fXoL");let i=null;function o(){return i}const s=new r.r("DocumentToken");let a=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Cb)({factory:u,token:t,providedIn:"platform"}),t})();function u(){return Object(r.Mb)(l)}const c=new r.r("Location Initialized");let l=(()=>{class t extends a{constructor(t){super(),this._doc=t,this._init()}_init(){this.location=o().getLocation(),this._history=o().getHistory()}getBaseHrefFromDOM(){return o().getBaseHref(this._doc)}onPopState(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("popstate",t,!1)}onHashChange(t){o().getGlobalEventTarget(this._doc,"window").addEventListener("hashchange",t,!1)}get href(){return this.location.href}get protocol(){return this.location.protocol}get hostname(){return this.location.hostname}get port(){return this.location.port}get pathname(){return this.location.pathname}get search(){return this.location.search}get hash(){return this.location.hash}set pathname(t){this.location.pathname=t}pushState(t,e,n){h()?this._history.pushState(t,e,n):this.location.hash=n}replaceState(t,e,n){h()?this._history.replaceState(t,e,n):this.location.hash=n}forward(){this._history.forward()}back(){this._history.back()}getState(){return this._history.state}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=Object(r.Cb)({factory:f,token:t,providedIn:"platform"}),t})();function h(){return!!window.history.pushState}function f(){return new l(Object(r.Mb)(s))}function d(t,e){if(0==t.length)return e;if(0==e.length)return t;let n=0;return t.endsWith("/")&&n++,e.startsWith("/")&&n++,2==n?t+e.substring(1):1==n?t+e:t+"/"+e}function p(t){const e=t.match(/#|\?|$/),n=e&&e.index||t.length;return t.slice(0,n-("/"===t[n-1]?1:0))+t.slice(n)}function g(t){return t&&"?"!==t[0]?"?"+t:t}let m=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=Object(r.Cb)({factory:y,token:t,providedIn:"root"}),t})();function y(t){const e=Object(r.Mb)(s).location;return new b(Object(r.Mb)(a),e&&e.origin||"")}const v=new r.r("appBaseHref");let b=(()=>{class t extends m{constructor(t,e){if(super(),this._platformLocation=t,null==e&&(e=this._platformLocation.getBaseHrefFromDOM()),null==e)throw new Error("No base href set. Please provide a value for the APP_BASE_HREF token or add a base element to the document.");this._baseHref=e}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}prepareExternalUrl(t){return d(this._baseHref,t)}path(t=!1){const e=this._platformLocation.pathname+g(this._platformLocation.search),n=this._platformLocation.hash;return n&&t?`${e}${n}`:e}pushState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){const i=this.prepareExternalUrl(n+g(r));this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(a),r.Mb(v,8))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),w=(()=>{class t extends m{constructor(t,e){super(),this._platformLocation=t,this._baseHref="",null!=e&&(this._baseHref=e)}onPopState(t){this._platformLocation.onPopState(t),this._platformLocation.onHashChange(t)}getBaseHref(){return this._baseHref}path(t=!1){let e=this._platformLocation.hash;return null==e&&(e="#"),e.length>0?e.substring(1):e}prepareExternalUrl(t){const e=d(this._baseHref,t);return e.length>0?"#"+e:e}pushState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.pushState(t,e,i)}replaceState(t,e,n,r){let i=this.prepareExternalUrl(n+g(r));0==i.length&&(i=this._platformLocation.pathname),this._platformLocation.replaceState(t,e,i)}forward(){this._platformLocation.forward()}back(){this._platformLocation.back()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(a),r.Mb(v,8))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),_=(()=>{class t{constructor(t,e){this._subject=new r.n,this._urlChangeListeners=[],this._platformStrategy=t;const n=this._platformStrategy.getBaseHref();this._platformLocation=e,this._baseHref=p(E(n)),this._platformStrategy.onPopState(t=>{this._subject.emit({url:this.path(!0),pop:!0,state:t.state,type:t.type})})}path(t=!1){return this.normalize(this._platformStrategy.path(t))}getState(){return this._platformLocation.getState()}isCurrentPathEqualTo(t,e=""){return this.path()==this.normalize(t+g(e))}normalize(e){return t.stripTrailingSlash(function(t,e){return t&&e.startsWith(t)?e.substring(t.length):e}(this._baseHref,E(e)))}prepareExternalUrl(t){return t&&"/"!==t[0]&&(t="/"+t),this._platformStrategy.prepareExternalUrl(t)}go(t,e="",n=null){this._platformStrategy.pushState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}replaceState(t,e="",n=null){this._platformStrategy.replaceState(n,"",t,e),this._notifyUrlChangeListeners(this.prepareExternalUrl(t+g(e)),n)}forward(){this._platformStrategy.forward()}back(){this._platformStrategy.back()}onUrlChange(t){this._urlChangeListeners.push(t),this._urlChangeSubscription||(this._urlChangeSubscription=this.subscribe(t=>{this._notifyUrlChangeListeners(t.url,t.state)}))}_notifyUrlChangeListeners(t="",e){this._urlChangeListeners.forEach(n=>n(t,e))}subscribe(t,e,n){return this._subject.subscribe({next:t,error:e,complete:n})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(m),r.Mb(a))},t.normalizeQueryParams=g,t.joinWithSlash=d,t.stripTrailingSlash=p,t.\u0275prov=Object(r.Cb)({factory:I,token:t,providedIn:"root"}),t})();function I(){return new _(Object(r.Mb)(m),Object(r.Mb)(a))}function E(t){return t.replace(/\/index.html$/,"")}var S=function(t){return t[t.Zero=0]="Zero",t[t.One=1]="One",t[t.Two=2]="Two",t[t.Few=3]="Few",t[t.Many=4]="Many",t[t.Other=5]="Other",t}({});const O=r.lb;class T{}let C=(()=>{class t extends T{constructor(t){super(),this.locale=t}getPluralCategory(t,e){switch(O(e||this.locale)(t)){case S.Zero:return"zero";case S.One:return"one";case S.Two:return"two";case S.Few:return"few";case S.Many:return"many";default:return"other"}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.v))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),x=(()=>{class t{constructor(t,e){this._viewContainer=t,this._context=new A,this._thenTemplateRef=null,this._elseTemplateRef=null,this._thenViewRef=null,this._elseViewRef=null,this._thenTemplateRef=e}set ngIf(t){this._context.$implicit=this._context.ngIf=t,this._updateView()}set ngIfThen(t){j("ngIfThen",t),this._thenTemplateRef=t,this._thenViewRef=null,this._updateView()}set ngIfElse(t){j("ngIfElse",t),this._elseTemplateRef=t,this._elseViewRef=null,this._updateView()}_updateView(){this._context.$implicit?this._thenViewRef||(this._viewContainer.clear(),this._elseViewRef=null,this._thenTemplateRef&&(this._thenViewRef=this._viewContainer.createEmbeddedView(this._thenTemplateRef,this._context))):this._elseViewRef||(this._viewContainer.clear(),this._thenViewRef=null,this._elseTemplateRef&&(this._elseViewRef=this._viewContainer.createEmbeddedView(this._elseTemplateRef,this._context)))}static ngTemplateContextGuard(t,e){return!0}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(r.Q),r.Gb(r.L))},t.\u0275dir=r.Bb({type:t,selectors:[["","ngIf",""]],inputs:{ngIf:"ngIf",ngIfThen:"ngIfThen",ngIfElse:"ngIfElse"}}),t})();class A{constructor(){this.$implicit=null,this.ngIf=null}}function j(t,e){if(e&&!e.createEmbeddedView)throw new Error(`${t} must be a TemplateRef, but received '${Object(r.ub)(e)}'.`)}let k=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[{provide:T,useClass:C}]}),t})();function N(t){return"server"===t}let D=(()=>{class t{}return t.\u0275prov=Object(r.Cb)({token:t,providedIn:"root",factory:()=>new R(Object(r.Mb)(s),window)}),t})();class R{constructor(t,e){this.document=t,this.window=e,this.offset=()=>[0,0]}setOffset(t){this.offset=Array.isArray(t)?()=>t:t}getScrollPosition(){return this.supportsScrolling()?[this.window.pageXOffset,this.window.pageYOffset]:[0,0]}scrollToPosition(t){this.supportsScrolling()&&this.window.scrollTo(t[0],t[1])}scrollToAnchor(t){var e;if(!this.supportsScrolling())return;const n=null!==(e=this.document.getElementById(t))&&void 0!==e?e:this.document.getElementsByName(t)[0];void 0!==n&&(this.scrollToElement(n),this.attemptFocus(n))}setHistoryScrollRestoration(t){if(this.supportScrollRestoration()){const e=this.window.history;e&&e.scrollRestoration&&(e.scrollRestoration=t)}}scrollToElement(t){const e=t.getBoundingClientRect(),n=e.left+this.window.pageXOffset,r=e.top+this.window.pageYOffset,i=this.offset();this.window.scrollTo(n-i[0],r-i[1])}attemptFocus(t){return t.focus(),this.document.activeElement===t}supportScrollRestoration(){try{if(!this.supportsScrolling())return!1;const t=P(this.window.history)||P(Object.getPrototypeOf(this.window.history));return!(!t||!t.writable&&!t.set)}catch(t){return!1}}supportsScrolling(){try{return!!this.window&&!!this.window.scrollTo&&"pageXOffset"in this.window}catch(t){return!1}}}function P(t){return Object.getOwnPropertyDescriptor(t,"scrollRestoration")}class L extends class extends class{}{constructor(){super()}supportsDOMEvents(){return!0}}{static makeCurrent(){var t;t=new L,i||(i=t)}getProperty(t,e){return t[e]}log(t){window.console&&window.console.log&&window.console.log(t)}logGroup(t){window.console&&window.console.group&&window.console.group(t)}logGroupEnd(){window.console&&window.console.groupEnd&&window.console.groupEnd()}onAndCancel(t,e,n){return t.addEventListener(e,n,!1),()=>{t.removeEventListener(e,n,!1)}}dispatchEvent(t,e){t.dispatchEvent(e)}remove(t){return t.parentNode&&t.parentNode.removeChild(t),t}getValue(t){return t.value}createElement(t,e){return(e=e||this.getDefaultDocument()).createElement(t)}createHtmlDocument(){return document.implementation.createHTMLDocument("fakeTitle")}getDefaultDocument(){return document}isElementNode(t){return t.nodeType===Node.ELEMENT_NODE}isShadowRoot(t){return t instanceof DocumentFragment}getGlobalEventTarget(t,e){return"window"===e?window:"document"===e?t:"body"===e?t.body:null}getHistory(){return window.history}getLocation(){return window.location}getBaseHref(t){const e=U||(U=document.querySelector("base"),U)?U.getAttribute("href"):null;return null==e?null:(n=e,M||(M=document.createElement("a")),M.setAttribute("href",n),"/"===M.pathname.charAt(0)?M.pathname:"/"+M.pathname);var n}resetBaseElement(){U=null}getUserAgent(){return window.navigator.userAgent}performanceNow(){return window.performance&&window.performance.now?window.performance.now():(new Date).getTime()}supportsCookies(){return!0}getCookie(t){return function(t,e){e=encodeURIComponent(e);for(const n of t.split(";")){const t=n.indexOf("="),[r,i]=-1==t?[n,""]:[n.slice(0,t),n.slice(t+1)];if(r.trim()===e)return decodeURIComponent(i)}return null}(document.cookie,t)}}let M,U=null;const F=new r.r("TRANSITION_ID"),V=[{provide:r.d,useFactory:function(t,e,n){return()=>{n.get(r.e).donePromise.then(()=>{const n=o();Array.prototype.slice.apply(e.querySelectorAll("style[ng-transition]")).filter(e=>e.getAttribute("ng-transition")===t).forEach(t=>n.remove(t))})}},deps:[F,s,r.s],multi:!0}];class q{static init(){Object(r.W)(new q)}addToWindow(t){r.nb.getAngularTestability=(e,n=!0)=>{const r=t.findTestabilityInTree(e,n);if(null==r)throw new Error("Could not find testability for element.");return r},r.nb.getAllAngularTestabilities=()=>t.getAllTestabilities(),r.nb.getAllAngularRootElements=()=>t.getAllRootElements(),r.nb.frameworkStabilizers||(r.nb.frameworkStabilizers=[]),r.nb.frameworkStabilizers.push(t=>{const e=r.nb.getAllAngularTestabilities();let n=e.length,i=!1;const o=function(e){i=i||e,n--,0==n&&t(i)};e.forEach(function(t){t.whenStable(o)})})}findTestabilityInTree(t,e,n){if(null==e)return null;const r=t.getTestability(e);return null!=r?r:n?o().isShadowRoot(e)?this.findTestabilityInTree(t,e.host,!0):this.findTestabilityInTree(t,e.parentElement,!0):null}}const B=new r.r("EventManagerPlugins");let H=(()=>{class t{constructor(t,e){this._zone=e,this._eventNameToPlugin=new Map,t.forEach(t=>t.manager=this),this._plugins=t.slice().reverse()}addEventListener(t,e,n){return this._findPluginFor(e).addEventListener(t,e,n)}addGlobalEventListener(t,e,n){return this._findPluginFor(e).addGlobalEventListener(t,e,n)}getZone(){return this._zone}_findPluginFor(t){const e=this._eventNameToPlugin.get(t);if(e)return e;const n=this._plugins;for(let r=0;r<n.length;r++){const e=n[r];if(e.supports(t))return this._eventNameToPlugin.set(t,e),e}throw new Error(`No event manager plugin found for event ${t}`)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(B),r.Mb(r.A))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class z{constructor(t){this._doc=t}addGlobalEventListener(t,e,n){const r=o().getGlobalEventTarget(this._doc,t);if(!r)throw new Error(`Unsupported event target ${r} for event ${e}`);return this.addEventListener(r,e,n)}}let G=(()=>{class t{constructor(){this._stylesSet=new Set}addStyles(t){const e=new Set;t.forEach(t=>{this._stylesSet.has(t)||(this._stylesSet.add(t),e.add(t))}),this.onStylesAdded(e)}onStylesAdded(t){}getAllStyles(){return Array.from(this._stylesSet)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),K=(()=>{class t extends G{constructor(t){super(),this._doc=t,this._hostNodes=new Set,this._styleNodes=new Set,this._hostNodes.add(t.head)}_addStylesToHost(t,e){t.forEach(t=>{const n=this._doc.createElement("style");n.textContent=t,this._styleNodes.add(e.appendChild(n))})}addHost(t){this._addStylesToHost(this._stylesSet,t),this._hostNodes.add(t)}removeHost(t){this._hostNodes.delete(t)}onStylesAdded(t){this._hostNodes.forEach(e=>this._addStylesToHost(t,e))}ngOnDestroy(){this._styleNodes.forEach(t=>o().remove(t))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const J={svg:"http://www.w3.org/2000/svg",xhtml:"http://www.w3.org/1999/xhtml",xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"},$=/%COMP%/g;function W(t,e,n){for(let r=0;r<e.length;r++){let i=e[r];Array.isArray(i)?W(t,i,n):(i=i.replace($,t),n.push(i))}return n}function Q(t){return e=>{if("__ngUnwrap__"===e)return t;!1===t(e)&&(e.preventDefault(),e.returnValue=!1)}}let Y=(()=>{class t{constructor(t,e,n){this.eventManager=t,this.sharedStylesHost=e,this.appId=n,this.rendererByCompId=new Map,this.defaultRenderer=new X(t)}createRenderer(t,e){if(!t||!e)return this.defaultRenderer;switch(e.encapsulation){case r.R.Emulated:{let n=this.rendererByCompId.get(e.id);return n||(n=new Z(this.eventManager,this.sharedStylesHost,e,this.appId),this.rendererByCompId.set(e.id,n)),n.applyToHost(t),n}case 1:case r.R.ShadowDom:return new tt(this.eventManager,this.sharedStylesHost,t,e);default:if(!this.rendererByCompId.has(e.id)){const t=W(e.id,e.styles,[]);this.sharedStylesHost.addStyles(t),this.rendererByCompId.set(e.id,this.defaultRenderer)}return this.defaultRenderer}}begin(){}end(){}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(H),r.Mb(K),r.Mb(r.c))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();class X{constructor(t){this.eventManager=t,this.data=Object.create(null)}destroy(){}createElement(t,e){return e?document.createElementNS(J[e]||e,t):document.createElement(t)}createComment(t){return document.createComment(t)}createText(t){return document.createTextNode(t)}appendChild(t,e){t.appendChild(e)}insertBefore(t,e,n){t&&t.insertBefore(e,n)}removeChild(t,e){t&&t.removeChild(e)}selectRootElement(t,e){let n="string"==typeof t?document.querySelector(t):t;if(!n)throw new Error(`The selector "${t}" did not match any elements`);return e||(n.textContent=""),n}parentNode(t){return t.parentNode}nextSibling(t){return t.nextSibling}setAttribute(t,e,n,r){if(r){e=r+":"+e;const i=J[r];i?t.setAttributeNS(i,e,n):t.setAttribute(e,n)}else t.setAttribute(e,n)}removeAttribute(t,e,n){if(n){const r=J[n];r?t.removeAttributeNS(r,e):t.removeAttribute(`${n}:${e}`)}else t.removeAttribute(e)}addClass(t,e){t.classList.add(e)}removeClass(t,e){t.classList.remove(e)}setStyle(t,e,n,i){i&(r.G.DashCase|r.G.Important)?t.style.setProperty(e,n,i&r.G.Important?"important":""):t.style[e]=n}removeStyle(t,e,n){n&r.G.DashCase?t.style.removeProperty(e):t.style[e]=""}setProperty(t,e,n){t[e]=n}setValue(t,e){t.nodeValue=e}listen(t,e,n){return"string"==typeof t?this.eventManager.addGlobalEventListener(t,e,Q(n)):this.eventManager.addEventListener(t,e,Q(n))}}class Z extends X{constructor(t,e,n,r){super(t),this.component=n;const i=W(r+"-"+n.id,n.styles,[]);e.addStyles(i),this.contentAttr="_ngcontent-%COMP%".replace($,r+"-"+n.id),this.hostAttr="_nghost-%COMP%".replace($,r+"-"+n.id)}applyToHost(t){super.setAttribute(t,this.hostAttr,"")}createElement(t,e){const n=super.createElement(t,e);return super.setAttribute(n,this.contentAttr,""),n}}class tt extends X{constructor(t,e,n,r){super(t),this.sharedStylesHost=e,this.hostEl=n,this.shadowRoot=n.attachShadow({mode:"open"}),this.sharedStylesHost.addHost(this.shadowRoot);const i=W(r.id,r.styles,[]);for(let o=0;o<i.length;o++){const t=document.createElement("style");t.textContent=i[o],this.shadowRoot.appendChild(t)}}nodeOrShadowRoot(t){return t===this.hostEl?this.shadowRoot:t}destroy(){this.sharedStylesHost.removeHost(this.shadowRoot)}appendChild(t,e){return super.appendChild(this.nodeOrShadowRoot(t),e)}insertBefore(t,e,n){return super.insertBefore(this.nodeOrShadowRoot(t),e,n)}removeChild(t,e){return super.removeChild(this.nodeOrShadowRoot(t),e)}parentNode(t){return this.nodeOrShadowRoot(super.parentNode(this.nodeOrShadowRoot(t)))}}let et=(()=>{class t extends z{constructor(t){super(t)}supports(t){return!0}addEventListener(t,e,n){return t.addEventListener(e,n,!1),()=>this.removeEventListener(t,e,n)}removeEventListener(t,e,n){return t.removeEventListener(e,n)}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const nt=["alt","control","meta","shift"],rt={"\b":"Backspace","\t":"Tab","\x7f":"Delete","\x1b":"Escape",Del:"Delete",Esc:"Escape",Left:"ArrowLeft",Right:"ArrowRight",Up:"ArrowUp",Down:"ArrowDown",Menu:"ContextMenu",Scroll:"ScrollLock",Win:"OS"},it={A:"1",B:"2",C:"3",D:"4",E:"5",F:"6",G:"7",H:"8",I:"9",J:"*",K:"+",M:"-",N:".",O:"/","`":"0","\x90":"NumLock"},ot={alt:t=>t.altKey,control:t=>t.ctrlKey,meta:t=>t.metaKey,shift:t=>t.shiftKey};let st=(()=>{class t extends z{constructor(t){super(t)}supports(e){return null!=t.parseEventName(e)}addEventListener(e,n,r){const i=t.parseEventName(n),s=t.eventCallback(i.fullKey,r,this.manager.getZone());return this.manager.getZone().runOutsideAngular(()=>o().onAndCancel(e,i.domEventName,s))}static parseEventName(e){const n=e.toLowerCase().split("."),r=n.shift();if(0===n.length||"keydown"!==r&&"keyup"!==r)return null;const i=t._normalizeKey(n.pop());let o="";if(nt.forEach(t=>{const e=n.indexOf(t);e>-1&&(n.splice(e,1),o+=t+".")}),o+=i,0!=n.length||0===i.length)return null;const s={};return s.domEventName=r,s.fullKey=o,s}static getEventFullKey(t){let e="",n=function(t){let e=t.key;if(null==e){if(e=t.keyIdentifier,null==e)return"Unidentified";e.startsWith("U+")&&(e=String.fromCharCode(parseInt(e.substring(2),16)),3===t.location&&it.hasOwnProperty(e)&&(e=it[e]))}return rt[e]||e}(t);return n=n.toLowerCase()," "===n?n="space":"."===n&&(n="dot"),nt.forEach(r=>{r!=n&&(0,ot[r])(t)&&(e+=r+".")}),e+=n,e}static eventCallback(e,n,r){return i=>{t.getEventFullKey(i)===e&&r.runGuarded(()=>n(i))}}static _normalizeKey(t){switch(t){case"esc":return"escape";default:return t}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const at=[{provide:r.C,useValue:"browser"},{provide:r.D,useValue:function(){L.makeCurrent(),q.init()},multi:!0},{provide:s,useFactory:function(){return Object(r.tb)(document),document},deps:[]}],ut=Object(r.S)(r.V,"browser",at),ct=[[],{provide:r.Y,useValue:"root"},{provide:r.m,useFactory:function(){return new r.m},deps:[]},{provide:B,useClass:et,multi:!0,deps:[s,r.A,r.C]},{provide:B,useClass:st,multi:!0,deps:[s]},[],{provide:Y,useClass:Y,deps:[H,K,r.c]},{provide:r.F,useExisting:Y},{provide:G,useExisting:K},{provide:K,useClass:K,deps:[s]},{provide:r.M,useClass:r.M,deps:[r.A]},{provide:H,useClass:H,deps:[B,r.A]},[]];let lt=(()=>{class t{constructor(t){if(t)throw new Error("BrowserModule has already been loaded. If you need access to common directives such as NgIf and NgFor from a lazy loaded module, import CommonModule instead.")}static withServerTransition(e){return{ngModule:t,providers:[{provide:r.c,useValue:e.appId},{provide:F,useExisting:r.c},V]}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(t,12))},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:ct,imports:[k,r.f]}),t})();"undefined"!=typeof window&&window;var ht=n("Cfvw"),ft=n("LRne"),dt=n("XNiG"),pt=n("9ppp");class gt extends dt.a{constructor(t){super(),this._value=t}get value(){return this.getValue()}_subscribe(t){const e=super._subscribe(t);return e&&!e.closed&&t.next(this._value),e}getValue(){if(this.hasError)throw this.thrownError;if(this.closed)throw new pt.a;return this._value}next(t){super.next(this._value=t)}}var mt=n("z+Ro"),yt=n("DH7j"),vt=n("7o/Q");class bt extends vt.a{notifyNext(t,e,n,r,i){this.destination.next(e)}notifyError(t,e){this.destination.error(t)}notifyComplete(t){this.destination.complete()}}class wt extends vt.a{constructor(t,e,n){super(),this.parent=t,this.outerValue=e,this.outerIndex=n,this.index=0}_next(t){this.parent.notifyNext(this.outerValue,t,this.outerIndex,this.index++,this)}_error(t){this.parent.notifyError(t,this),this.unsubscribe()}_complete(){this.parent.notifyComplete(this),this.unsubscribe()}}var _t=n("SeVD"),It=n("HDdC");function Et(t,e,n,r,i=new wt(t,n,r)){if(!i.closed)return e instanceof It.a?e.subscribe(i):Object(_t.a)(e)(i)}var St=n("yCtX");const Ot={};class Tt{constructor(t){this.resultSelector=t}call(t,e){return e.subscribe(new Ct(t,this.resultSelector))}}class Ct extends bt{constructor(t,e){super(t),this.resultSelector=e,this.active=0,this.values=[],this.observables=[]}_next(t){this.values.push(Ot),this.observables.push(t)}_complete(){const t=this.observables,e=t.length;if(0===e)this.destination.complete();else{this.active=e,this.toRespond=e;for(let n=0;n<e;n++)this.add(Et(this,t[n],void 0,n))}}notifyComplete(t){0==(this.active-=1)&&this.destination.complete()}notifyNext(t,e,n){const r=this.values,i=this.toRespond?r[n]===Ot?--this.toRespond:this.toRespond:0;r[n]=e,0===i&&(this.resultSelector?this._tryResultSelector(r):this.destination.next(r.slice()))}_tryResultSelector(t){let e;try{e=this.resultSelector.apply(this,t)}catch(n){return void this.destination.error(n)}this.destination.next(e)}}const xt=(()=>{function t(){return Error.call(this),this.message="no elements in sequence",this.name="EmptyError",this}return t.prototype=Object.create(Error.prototype),t})();var At=n("bHdf");function jt(...t){return Object(At.a)(1)(Object(ft.a)(...t))}var kt=n("EY2u");function Nt(t){return new It.a(e=>{let n;try{n=t()}catch(r){return void e.error(r)}return(n?Object(ht.a)(n):Object(kt.b)()).subscribe(e)})}var Dt=n("EQ5u"),Rt=n("lJxs"),Pt=n("zx2A");function Lt(t,e){return"function"==typeof e?n=>n.pipe(Lt((n,r)=>Object(ht.a)(t(n,r)).pipe(Object(Rt.a)((t,i)=>e(n,t,r,i))))):e=>e.lift(new Mt(t))}class Mt{constructor(t){this.project=t}call(t,e){return e.subscribe(new Ut(t,this.project))}}class Ut extends Pt.b{constructor(t,e){super(t),this.project=e,this.index=0}_next(t){let e;const n=this.index++;try{e=this.project(t,n)}catch(r){return void this.destination.error(r)}this._innerSub(e)}_innerSub(t){const e=this.innerSubscription;e&&e.unsubscribe();const n=new Pt.a(this),r=this.destination;r.add(n),this.innerSubscription=Object(Pt.c)(t,n),this.innerSubscription!==n&&r.add(this.innerSubscription)}_complete(){const{innerSubscription:t}=this;t&&!t.closed||super._complete(),this.unsubscribe()}_unsubscribe(){this.innerSubscription=void 0}notifyComplete(){this.innerSubscription=void 0,this.isStopped&&super._complete()}notifyNext(t){this.destination.next(t)}}const Ft=(()=>{function t(){return Error.call(this),this.message="argument out of range",this.name="ArgumentOutOfRangeError",this}return t.prototype=Object.create(Error.prototype),t})();function Vt(t){return e=>0===t?Object(kt.b)():e.lift(new qt(t))}class qt{constructor(t){if(this.total=t,this.total<0)throw new Ft}call(t,e){return e.subscribe(new Bt(t,this.total))}}class Bt extends vt.a{constructor(t,e){super(t),this.total=e,this.count=0}_next(t){const e=this.total,n=++this.count;n<=e&&(this.destination.next(t),n===e&&(this.destination.complete(),this.unsubscribe()))}}function Ht(...t){const e=t[t.length-1];return Object(mt.a)(e)?(t.pop(),n=>jt(t,n,e)):e=>jt(t,e)}function zt(t,e){let n=!1;return arguments.length>=2&&(n=!0),function(r){return r.lift(new Gt(t,e,n))}}class Gt{constructor(t,e,n=!1){this.accumulator=t,this.seed=e,this.hasSeed=n}call(t,e){return e.subscribe(new Kt(t,this.accumulator,this.seed,this.hasSeed))}}class Kt extends vt.a{constructor(t,e,n,r){super(t),this.accumulator=e,this._seed=n,this.hasSeed=r,this.index=0}get seed(){return this._seed}set seed(t){this.hasSeed=!0,this._seed=t}_next(t){if(this.hasSeed)return this._tryNext(t);this.seed=t,this.destination.next(t)}_tryNext(t){const e=this.index++;let n;try{n=this.accumulator(this.seed,t,e)}catch(r){this.destination.error(r)}this.seed=n,this.destination.next(n)}}function Jt(t,e){return function(n){return n.lift(new $t(t,e))}}class $t{constructor(t,e){this.predicate=t,this.thisArg=e}call(t,e){return e.subscribe(new Wt(t,this.predicate,this.thisArg))}}class Wt extends vt.a{constructor(t,e,n){super(t),this.predicate=e,this.thisArg=n,this.count=0}_next(t){let e;try{e=this.predicate.call(this.thisArg,t,this.count++)}catch(n){return void this.destination.error(n)}e&&this.destination.next(t)}}function Qt(t){return function(e){const n=new Yt(t),r=e.lift(n);return n.caught=r}}class Yt{constructor(t){this.selector=t}call(t,e){return e.subscribe(new Xt(t,this.selector,this.caught))}}class Xt extends Pt.b{constructor(t,e,n){super(t),this.selector=e,this.caught=n}error(t){if(!this.isStopped){let n;try{n=this.selector(t,this.caught)}catch(e){return void super.error(e)}this._unsubscribeAndRecycle();const r=new Pt.a(this);this.add(r);const i=Object(Pt.c)(n,r);i!==r&&this.add(i)}}}var Zt=n("5+tZ");function te(t,e){return Object(Zt.a)(t,e,1)}function ee(t){return function(e){return 0===t?Object(kt.b)():e.lift(new ne(t))}}class ne{constructor(t){if(this.total=t,this.total<0)throw new Ft}call(t,e){return e.subscribe(new re(t,this.total))}}class re extends vt.a{constructor(t,e){super(t),this.total=e,this.ring=new Array,this.count=0}_next(t){const e=this.ring,n=this.total,r=this.count++;e.length<n?e.push(t):e[r%n]=t}_complete(){const t=this.destination;let e=this.count;if(e>0){const n=this.count>=this.total?this.total:this.count,r=this.ring;for(let i=0;i<n;i++){const i=e++%n;t.next(r[i])}}t.complete()}}function ie(t=ae){return e=>e.lift(new oe(t))}class oe{constructor(t){this.errorFactory=t}call(t,e){return e.subscribe(new se(t,this.errorFactory))}}class se extends vt.a{constructor(t,e){super(t),this.errorFactory=e,this.hasValue=!1}_next(t){this.hasValue=!0,this.destination.next(t)}_complete(){if(this.hasValue)return this.destination.complete();{let t;try{t=this.errorFactory()}catch(Fv){t=Fv}this.destination.error(t)}}}function ae(){return new xt}function ue(t=null){return e=>e.lift(new ce(t))}class ce{constructor(t){this.defaultValue=t}call(t,e){return e.subscribe(new le(t,this.defaultValue))}}class le extends vt.a{constructor(t,e){super(t),this.defaultValue=e,this.isEmpty=!0}_next(t){this.isEmpty=!1,this.destination.next(t)}_complete(){this.isEmpty&&this.destination.next(this.defaultValue),this.destination.complete()}}var he=n("SpAZ");function fe(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Jt((e,n)=>t(e,n,r)):he.a,Vt(1),n?ue(e):ie(()=>new xt))}var de=n("vkgz"),pe=n("x+ZX"),ge=n("quSY");class me{constructor(t){this.callback=t}call(t,e){return e.subscribe(new ye(t,this.callback))}}class ye extends vt.a{constructor(t,e){super(t),this.add(new ge.a(e))}}class ve{constructor(t,e){this.id=t,this.url=e}}class be extends ve{constructor(t,e,n="imperative",r=null){super(t,e),this.navigationTrigger=n,this.restoredState=r}toString(){return`NavigationStart(id: ${this.id}, url: '${this.url}')`}}class we extends ve{constructor(t,e,n){super(t,e),this.urlAfterRedirects=n}toString(){return`NavigationEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}')`}}class _e extends ve{constructor(t,e,n){super(t,e),this.reason=n}toString(){return`NavigationCancel(id: ${this.id}, url: '${this.url}')`}}class Ie extends ve{constructor(t,e,n){super(t,e),this.error=n}toString(){return`NavigationError(id: ${this.id}, url: '${this.url}', error: ${this.error})`}}class Ee extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`RoutesRecognized(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Se extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`GuardsCheckStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Oe extends ve{constructor(t,e,n,r,i){super(t,e),this.urlAfterRedirects=n,this.state=r,this.shouldActivate=i}toString(){return`GuardsCheckEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state}, shouldActivate: ${this.shouldActivate})`}}class Te extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveStart(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class Ce extends ve{constructor(t,e,n,r){super(t,e),this.urlAfterRedirects=n,this.state=r}toString(){return`ResolveEnd(id: ${this.id}, url: '${this.url}', urlAfterRedirects: '${this.urlAfterRedirects}', state: ${this.state})`}}class xe{constructor(t){this.route=t}toString(){return`RouteConfigLoadStart(path: ${this.route.path})`}}class Ae{constructor(t){this.route=t}toString(){return`RouteConfigLoadEnd(path: ${this.route.path})`}}class je{constructor(t){this.snapshot=t}toString(){return`ChildActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class ke{constructor(t){this.snapshot=t}toString(){return`ChildActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Ne{constructor(t){this.snapshot=t}toString(){return`ActivationStart(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class De{constructor(t){this.snapshot=t}toString(){return`ActivationEnd(path: '${this.snapshot.routeConfig&&this.snapshot.routeConfig.path||""}')`}}class Re{constructor(t,e,n){this.routerEvent=t,this.position=e,this.anchor=n}toString(){return`Scroll(anchor: '${this.anchor}', position: '${this.position?`${this.position[0]}, ${this.position[1]}`:null}')`}}const Pe="primary";class Le{constructor(t){this.params=t||{}}has(t){return Object.prototype.hasOwnProperty.call(this.params,t)}get(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e[0]:e}return null}getAll(t){if(this.has(t)){const e=this.params[t];return Array.isArray(e)?e:[e]}return[]}get keys(){return Object.keys(this.params)}}function Me(t){return new Le(t)}function Ue(t){const e=Error("NavigationCancelingError: "+t);return e.ngNavigationCancelingError=!0,e}function Fe(t,e,n){const r=n.path.split("/");if(r.length>t.length)return null;if("full"===n.pathMatch&&(e.hasChildren()||r.length<t.length))return null;const i={};for(let o=0;o<r.length;o++){const e=r[o],n=t[o];if(e.startsWith(":"))i[e.substring(1)]=n;else if(e!==n.path)return null}return{consumed:t.slice(0,r.length),posParams:i}}function Ve(t,e){const n=t?Object.keys(t):void 0,r=e?Object.keys(e):void 0;if(!n||!r||n.length!=r.length)return!1;let i;for(let o=0;o<n.length;o++)if(i=n[o],!qe(t[i],e[i]))return!1;return!0}function qe(t,e){if(Array.isArray(t)&&Array.isArray(e)){if(t.length!==e.length)return!1;const n=[...t].sort(),r=[...e].sort();return n.every((t,e)=>r[e]===t)}return t===e}function Be(t){return Array.prototype.concat.apply([],t)}function He(t){return t.length>0?t[t.length-1]:null}function ze(t,e){for(const n in t)t.hasOwnProperty(n)&&e(t[n],n)}function Ge(t){return Object(r.pb)(t)?t:Object(r.qb)(t)?Object(ht.a)(Promise.resolve(t)):Object(ft.a)(t)}function Ke(t,e,n){return n?function(t,e){return Ve(t,e)}(t.queryParams,e.queryParams)&&Je(t.root,e.root):function(t,e){return Object.keys(e).length<=Object.keys(t).length&&Object.keys(e).every(n=>qe(t[n],e[n]))}(t.queryParams,e.queryParams)&&$e(t.root,e.root)}function Je(t,e){if(!Ze(t.segments,e.segments))return!1;if(t.numberOfChildren!==e.numberOfChildren)return!1;for(const n in e.children){if(!t.children[n])return!1;if(!Je(t.children[n],e.children[n]))return!1}return!0}function $e(t,e){return We(t,e,e.segments)}function We(t,e,n){if(t.segments.length>n.length)return!!Ze(t.segments.slice(0,n.length),n)&&!e.hasChildren();if(t.segments.length===n.length){if(!Ze(t.segments,n))return!1;for(const n in e.children){if(!t.children[n])return!1;if(!$e(t.children[n],e.children[n]))return!1}return!0}{const r=n.slice(0,t.segments.length),i=n.slice(t.segments.length);return!!Ze(t.segments,r)&&!!t.children.primary&&We(t.children.primary,e,i)}}class Qe{constructor(t,e,n){this.root=t,this.queryParams=e,this.fragment=n}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return nn.serialize(this)}}class Ye{constructor(t,e){this.segments=t,this.children=e,this.parent=null,ze(e,(t,e)=>t.parent=this)}hasChildren(){return this.numberOfChildren>0}get numberOfChildren(){return Object.keys(this.children).length}toString(){return rn(this)}}class Xe{constructor(t,e){this.path=t,this.parameters=e}get parameterMap(){return this._parameterMap||(this._parameterMap=Me(this.parameters)),this._parameterMap}toString(){return hn(this)}}function Ze(t,e){return t.length===e.length&&t.every((t,n)=>t.path===e[n].path)}class tn{}class en{parse(t){const e=new mn(t);return new Qe(e.parseRootSegment(),e.parseQueryParams(),e.parseFragment())}serialize(t){var e;return`/${on(t.root,!0)}${function(t){const e=Object.keys(t).map(e=>{const n=t[e];return Array.isArray(n)?n.map(t=>`${an(e)}=${an(t)}`).join("&"):`${an(e)}=${an(n)}`});return e.length?`?${e.join("&")}`:""}(t.queryParams)}${"string"==typeof t.fragment?`#${e=t.fragment,encodeURI(e)}`:""}`}}const nn=new en;function rn(t){return t.segments.map(t=>hn(t)).join("/")}function on(t,e){if(!t.hasChildren())return rn(t);if(e){const e=t.children.primary?on(t.children.primary,!1):"",n=[];return ze(t.children,(t,e)=>{e!==Pe&&n.push(`${e}:${on(t,!1)}`)}),n.length>0?`${e}(${n.join("//")})`:e}{const e=function(t,e){let n=[];return ze(t.children,(t,r)=>{r===Pe&&(n=n.concat(e(t,r)))}),ze(t.children,(t,r)=>{r!==Pe&&(n=n.concat(e(t,r)))}),n}(t,(e,n)=>n===Pe?[on(t.children.primary,!1)]:[`${n}:${on(e,!1)}`]);return 1===Object.keys(t.children).length&&null!=t.children.primary?`${rn(t)}/${e[0]}`:`${rn(t)}/(${e.join("//")})`}}function sn(t){return encodeURIComponent(t).replace(/%40/g,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",")}function an(t){return sn(t).replace(/%3B/gi,";")}function un(t){return sn(t).replace(/\(/g,"%28").replace(/\)/g,"%29").replace(/%26/gi,"&")}function cn(t){return decodeURIComponent(t)}function ln(t){return cn(t.replace(/\+/g,"%20"))}function hn(t){return`${un(t.path)}${e=t.parameters,Object.keys(e).map(t=>`;${un(t)}=${un(e[t])}`).join("")}`;var e}const fn=/^[^\/()?;=#]+/;function dn(t){const e=t.match(fn);return e?e[0]:""}const pn=/^[^=?&#]+/,gn=/^[^?&#]+/;class mn{constructor(t){this.url=t,this.remaining=t}parseRootSegment(){return this.consumeOptional("/"),""===this.remaining||this.peekStartsWith("?")||this.peekStartsWith("#")?new Ye([],{}):new Ye([],this.parseChildren())}parseQueryParams(){const t={};if(this.consumeOptional("?"))do{this.parseQueryParam(t)}while(this.consumeOptional("&"));return t}parseFragment(){return this.consumeOptional("#")?decodeURIComponent(this.remaining):null}parseChildren(){if(""===this.remaining)return{};this.consumeOptional("/");const t=[];for(this.peekStartsWith("(")||t.push(this.parseSegment());this.peekStartsWith("/")&&!this.peekStartsWith("//")&&!this.peekStartsWith("/(");)this.capture("/"),t.push(this.parseSegment());let e={};this.peekStartsWith("/(")&&(this.capture("/"),e=this.parseParens(!0));let n={};return this.peekStartsWith("(")&&(n=this.parseParens(!1)),(t.length>0||Object.keys(e).length>0)&&(n.primary=new Ye(t,e)),n}parseSegment(){const t=dn(this.remaining);if(""===t&&this.peekStartsWith(";"))throw new Error(`Empty path url segment cannot have parameters: '${this.remaining}'.`);return this.capture(t),new Xe(cn(t),this.parseMatrixParams())}parseMatrixParams(){const t={};for(;this.consumeOptional(";");)this.parseParam(t);return t}parseParam(t){const e=dn(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=dn(this.remaining);t&&(n=t,this.capture(n))}t[cn(e)]=cn(n)}parseQueryParam(t){const e=function(t){const e=t.match(pn);return e?e[0]:""}(this.remaining);if(!e)return;this.capture(e);let n="";if(this.consumeOptional("=")){const t=function(t){const e=t.match(gn);return e?e[0]:""}(this.remaining);t&&(n=t,this.capture(n))}const r=ln(e),i=ln(n);if(t.hasOwnProperty(r)){let e=t[r];Array.isArray(e)||(e=[e],t[r]=e),e.push(i)}else t[r]=i}parseParens(t){const e={};for(this.capture("(");!this.consumeOptional(")")&&this.remaining.length>0;){const n=dn(this.remaining),r=this.remaining[n.length];if("/"!==r&&")"!==r&&";"!==r)throw new Error(`Cannot parse url '${this.url}'`);let i;n.indexOf(":")>-1?(i=n.substr(0,n.indexOf(":")),this.capture(i),this.capture(":")):t&&(i=Pe);const o=this.parseChildren();e[i]=1===Object.keys(o).length?o.primary:new Ye([],o),this.consumeOptional("//")}return e}peekStartsWith(t){return this.remaining.startsWith(t)}consumeOptional(t){return!!this.peekStartsWith(t)&&(this.remaining=this.remaining.substring(t.length),!0)}capture(t){if(!this.consumeOptional(t))throw new Error(`Expected "${t}".`)}}class yn{constructor(t){this._root=t}get root(){return this._root.value}parent(t){const e=this.pathFromRoot(t);return e.length>1?e[e.length-2]:null}children(t){const e=vn(t,this._root);return e?e.children.map(t=>t.value):[]}firstChild(t){const e=vn(t,this._root);return e&&e.children.length>0?e.children[0].value:null}siblings(t){const e=bn(t,this._root);return e.length<2?[]:e[e.length-2].children.map(t=>t.value).filter(e=>e!==t)}pathFromRoot(t){return bn(t,this._root).map(t=>t.value)}}function vn(t,e){if(t===e.value)return e;for(const n of e.children){const e=vn(t,n);if(e)return e}return null}function bn(t,e){if(t===e.value)return[e];for(const n of e.children){const r=bn(t,n);if(r.length)return r.unshift(e),r}return[]}class wn{constructor(t,e){this.value=t,this.children=e}toString(){return`TreeNode(${this.value})`}}function _n(t){const e={};return t&&t.children.forEach(t=>e[t.value.outlet]=t),e}class In extends yn{constructor(t,e){super(t),this.snapshot=e,xn(this,t)}toString(){return this.snapshot.toString()}}function En(t,e){const n=function(t,e){const n=new Tn([],{},{},"",{},Pe,e,null,t.root,-1,{});return new Cn("",new wn(n,[]))}(t,e),r=new gt([new Xe("",{})]),i=new gt({}),o=new gt({}),s=new gt({}),a=new gt(""),u=new Sn(r,i,s,a,o,Pe,e,n.root);return u.snapshot=n.root,new In(new wn(u,[]),n)}class Sn{constructor(t,e,n,r,i,o,s,a){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this._futureSnapshot=a}get routeConfig(){return this._futureSnapshot.routeConfig}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=this.params.pipe(Object(Rt.a)(t=>Me(t)))),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=this.queryParams.pipe(Object(Rt.a)(t=>Me(t)))),this._queryParamMap}toString(){return this.snapshot?this.snapshot.toString():`Future(${this._futureSnapshot})`}}function On(t,e="emptyOnly"){const n=t.pathFromRoot;let r=0;if("always"!==e)for(r=n.length-1;r>=1;){const t=n[r],e=n[r-1];if(t.routeConfig&&""===t.routeConfig.path)r--;else{if(e.component)break;r--}}return function(t){return t.reduce((t,e)=>({params:Object.assign(Object.assign({},t.params),e.params),data:Object.assign(Object.assign({},t.data),e.data),resolve:Object.assign(Object.assign({},t.resolve),e._resolvedData)}),{params:{},data:{},resolve:{}})}(n.slice(r))}class Tn{constructor(t,e,n,r,i,o,s,a,u,c,l){this.url=t,this.params=e,this.queryParams=n,this.fragment=r,this.data=i,this.outlet=o,this.component=s,this.routeConfig=a,this._urlSegment=u,this._lastPathIndex=c,this._resolve=l}get root(){return this._routerState.root}get parent(){return this._routerState.parent(this)}get firstChild(){return this._routerState.firstChild(this)}get children(){return this._routerState.children(this)}get pathFromRoot(){return this._routerState.pathFromRoot(this)}get paramMap(){return this._paramMap||(this._paramMap=Me(this.params)),this._paramMap}get queryParamMap(){return this._queryParamMap||(this._queryParamMap=Me(this.queryParams)),this._queryParamMap}toString(){return`Route(url:'${this.url.map(t=>t.toString()).join("/")}', path:'${this.routeConfig?this.routeConfig.path:""}')`}}class Cn extends yn{constructor(t,e){super(e),this.url=t,xn(this,e)}toString(){return An(this._root)}}function xn(t,e){e.value._routerState=t,e.children.forEach(e=>xn(t,e))}function An(t){const e=t.children.length>0?` { ${t.children.map(An).join(", ")} } `:"";return`${t.value}${e}`}function jn(t){if(t.snapshot){const e=t.snapshot,n=t._futureSnapshot;t.snapshot=n,Ve(e.queryParams,n.queryParams)||t.queryParams.next(n.queryParams),e.fragment!==n.fragment&&t.fragment.next(n.fragment),Ve(e.params,n.params)||t.params.next(n.params),function(t,e){if(t.length!==e.length)return!1;for(let n=0;n<t.length;++n)if(!Ve(t[n],e[n]))return!1;return!0}(e.url,n.url)||t.url.next(n.url),Ve(e.data,n.data)||t.data.next(n.data)}else t.snapshot=t._futureSnapshot,t.data.next(t._futureSnapshot.data)}function kn(t,e){return Ve(t.params,e.params)&&function(t,e){return Ze(t,e)&&t.every((t,n)=>Ve(t.parameters,e[n].parameters))}(t.url,e.url)&&!(!t.parent!=!e.parent)&&(!t.parent||kn(t.parent,e.parent))}function Nn(t,e,n){if(n&&t.shouldReuseRoute(e.value,n.value.snapshot)){const r=n.value;r._futureSnapshot=e.value;const i=function(t,e,n){return e.children.map(e=>{for(const r of n.children)if(t.shouldReuseRoute(e.value,r.value.snapshot))return Nn(t,e,r);return Nn(t,e)})}(t,e,n);return new wn(r,i)}{const n=t.retrieve(e.value);if(n){const t=n.route;return Dn(e,t),t}{const n=new Sn(new gt((r=e.value).url),new gt(r.params),new gt(r.queryParams),new gt(r.fragment),new gt(r.data),r.outlet,r.component,r),i=e.children.map(e=>Nn(t,e));return new wn(n,i)}}var r}function Dn(t,e){if(t.value.routeConfig!==e.value.routeConfig)throw new Error("Cannot reattach ActivatedRouteSnapshot created from a different route");if(t.children.length!==e.children.length)throw new Error("Cannot reattach ActivatedRouteSnapshot with a different number of children");e.value._futureSnapshot=t.value;for(let n=0;n<t.children.length;++n)Dn(t.children[n],e.children[n])}function Rn(t){return"object"==typeof t&&null!=t&&!t.outlets&&!t.segmentPath}function Pn(t){return"object"==typeof t&&null!=t&&t.outlets}function Ln(t,e,n,r,i){let o={};return r&&ze(r,(t,e)=>{o[e]=Array.isArray(t)?t.map(t=>`${t}`):`${t}`}),new Qe(n.root===t?e:Mn(n.root,t,e),o,i)}function Mn(t,e,n){const r={};return ze(t.children,(t,i)=>{r[i]=t===e?n:Mn(t,e,n)}),new Ye(t.segments,r)}class Un{constructor(t,e,n){if(this.isAbsolute=t,this.numberOfDoubleDots=e,this.commands=n,t&&n.length>0&&Rn(n[0]))throw new Error("Root segment cannot have matrix parameters");const r=n.find(Pn);if(r&&r!==He(n))throw new Error("{outlets:{}} has to be the last command")}toRoot(){return this.isAbsolute&&1===this.commands.length&&"/"==this.commands[0]}}class Fn{constructor(t,e,n){this.segmentGroup=t,this.processChildren=e,this.index=n}}function Vn(t,e,n){if(t||(t=new Ye([],{})),0===t.segments.length&&t.hasChildren())return qn(t,e,n);const r=function(t,e,n){let r=0,i=e;const o={match:!1,pathIndex:0,commandIndex:0};for(;i<t.segments.length;){if(r>=n.length)return o;const e=t.segments[i],s=n[r];if(Pn(s))break;const a=`${s}`,u=r<n.length-1?n[r+1]:null;if(i>0&&void 0===a)break;if(a&&u&&"object"==typeof u&&void 0===u.outlets){if(!Gn(a,u,e))return o;r+=2}else{if(!Gn(a,{},e))return o;r++}i++}return{match:!0,pathIndex:i,commandIndex:r}}(t,e,n),i=n.slice(r.commandIndex);if(r.match&&r.pathIndex<t.segments.length){const e=new Ye(t.segments.slice(0,r.pathIndex),{});return e.children.primary=new Ye(t.segments.slice(r.pathIndex),t.children),qn(e,0,i)}return r.match&&0===i.length?new Ye(t.segments,{}):r.match&&!t.hasChildren()?Bn(t,e,n):r.match?qn(t,0,i):Bn(t,e,n)}function qn(t,e,n){if(0===n.length)return new Ye(t.segments,{});{const r=function(t){return Pn(t[0])?t[0].outlets:{[Pe]:t}}(n),i={};return ze(r,(n,r)=>{"string"==typeof n&&(n=[n]),null!==n&&(i[r]=Vn(t.children[r],e,n))}),ze(t.children,(t,e)=>{void 0===r[e]&&(i[e]=t)}),new Ye(t.segments,i)}}function Bn(t,e,n){const r=t.segments.slice(0,e);let i=0;for(;i<n.length;){const o=n[i];if(Pn(o)){const t=Hn(o.outlets);return new Ye(r,t)}if(0===i&&Rn(n[0])){r.push(new Xe(t.segments[e].path,zn(n[0]))),i++;continue}const s=Pn(o)?o.outlets.primary:`${o}`,a=i<n.length-1?n[i+1]:null;s&&a&&Rn(a)?(r.push(new Xe(s,zn(a))),i+=2):(r.push(new Xe(s,{})),i++)}return new Ye(r,{})}function Hn(t){const e={};return ze(t,(t,n)=>{"string"==typeof t&&(t=[t]),null!==t&&(e[n]=Bn(new Ye([],{}),0,t))}),e}function zn(t){const e={};return ze(t,(t,n)=>e[n]=`${t}`),e}function Gn(t,e,n){return t==n.path&&Ve(e,n.parameters)}class Kn{constructor(t,e,n,r){this.routeReuseStrategy=t,this.futureState=e,this.currState=n,this.forwardEvent=r}activate(t){const e=this.futureState._root,n=this.currState?this.currState._root:null;this.deactivateChildRoutes(e,n,t),jn(this.futureState.root),this.activateChildRoutes(e,n,t)}deactivateChildRoutes(t,e,n){const r=_n(e);t.children.forEach(t=>{const e=t.value.outlet;this.deactivateRoutes(t,r[e],n),delete r[e]}),ze(r,(t,e)=>{this.deactivateRouteAndItsChildren(t,n)})}deactivateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(r===i)if(r.component){const i=n.getContext(r.outlet);i&&this.deactivateChildRoutes(t,e,i.children)}else this.deactivateChildRoutes(t,e,n);else i&&this.deactivateRouteAndItsChildren(e,n)}deactivateRouteAndItsChildren(t,e){this.routeReuseStrategy.shouldDetach(t.value.snapshot)?this.detachAndStoreRouteSubtree(t,e):this.deactivateRouteAndOutlet(t,e)}detachAndStoreRouteSubtree(t,e){const n=e.getContext(t.value.outlet);if(n&&n.outlet){const e=n.outlet.detach(),r=n.children.onOutletDeactivated();this.routeReuseStrategy.store(t.value.snapshot,{componentRef:e,route:t,contexts:r})}}deactivateRouteAndOutlet(t,e){const n=e.getContext(t.value.outlet),r=n&&t.value.component?n.children:e,i=_n(t);for(const o of Object.keys(i))this.deactivateRouteAndItsChildren(i[o],r);n&&n.outlet&&(n.outlet.deactivate(),n.children.onOutletDeactivated())}activateChildRoutes(t,e,n){const r=_n(e);t.children.forEach(t=>{this.activateRoutes(t,r[t.value.outlet],n),this.forwardEvent(new De(t.value.snapshot))}),t.children.length&&this.forwardEvent(new ke(t.value.snapshot))}activateRoutes(t,e,n){const r=t.value,i=e?e.value:null;if(jn(r),r===i)if(r.component){const i=n.getOrCreateContext(r.outlet);this.activateChildRoutes(t,e,i.children)}else this.activateChildRoutes(t,e,n);else if(r.component){const e=n.getOrCreateContext(r.outlet);if(this.routeReuseStrategy.shouldAttach(r.snapshot)){const t=this.routeReuseStrategy.retrieve(r.snapshot);this.routeReuseStrategy.store(r.snapshot,null),e.children.onOutletReAttached(t.contexts),e.attachRef=t.componentRef,e.route=t.route.value,e.outlet&&e.outlet.attach(t.componentRef,t.route.value),Jn(t.route)}else{const n=function(t){for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig;if(t&&t.component)return null}return null}(r.snapshot),i=n?n.module.componentFactoryResolver:null;e.attachRef=null,e.route=r,e.resolver=i,e.outlet&&e.outlet.activateWith(r,i),this.activateChildRoutes(t,null,e.children)}}else this.activateChildRoutes(t,null,n)}}function Jn(t){jn(t.value),t.children.forEach(Jn)}class $n{constructor(t,e){this.routes=t,this.module=e}}function Wn(t){return"function"==typeof t}function Qn(t){return t instanceof Qe}const Yn=Symbol("INITIAL_VALUE");function Xn(){return Lt(t=>function(...t){let e,n;return Object(mt.a)(t[t.length-1])&&(n=t.pop()),"function"==typeof t[t.length-1]&&(e=t.pop()),1===t.length&&Object(yt.a)(t[0])&&(t=t[0]),Object(St.a)(t,n).lift(new Tt(e))}(t.map(t=>t.pipe(Vt(1),Ht(Yn)))).pipe(zt((t,e)=>{let n=!1;return e.reduce((t,r,i)=>{if(t!==Yn)return t;if(r===Yn&&(n=!0),!n){if(!1===r)return r;if(i===e.length-1||Qn(r))return r}return t},t)},Yn),Jt(t=>t!==Yn),Object(Rt.a)(t=>Qn(t)?t:!0===t),Vt(1)))}let Zn=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["ng-component"]],decls:1,vars:0,template:function(t,e){1&t&&r.Hb(0,"router-outlet")},directives:function(){return[Jr]},encapsulation:2}),t})();function tr(t,e=""){for(let n=0;n<t.length;n++){const r=t[n];er(r,nr(e,r))}}function er(t,e){t.children&&tr(t.children,e)}function nr(t,e){return e?t||e.path?t&&!e.path?`${t}/`:!t&&e.path?e.path:`${t}/${e.path}`:"":t}function rr(t){const e=t.children&&t.children.map(rr),n=e?Object.assign(Object.assign({},t),{children:e}):Object.assign({},t);return!n.component&&(e||n.loadChildren)&&n.outlet&&n.outlet!==Pe&&(n.component=Zn),n}function ir(t){return t.outlet||Pe}function or(t,e){const n=t.filter(t=>ir(t)===e);return n.push(...t.filter(t=>ir(t)!==e)),n}const sr={matched:!1,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};function ar(t,e,n){var r;if(""===e.path)return"full"===e.pathMatch&&(t.hasChildren()||n.length>0)?Object.assign({},sr):{matched:!0,consumedSegments:[],lastChild:0,parameters:{},positionalParamSegments:{}};const i=(e.matcher||Fe)(n,t,e);if(!i)return Object.assign({},sr);const o={};ze(i.posParams,(t,e)=>{o[e]=t.path});const s=i.consumed.length>0?Object.assign(Object.assign({},o),i.consumed[i.consumed.length-1].parameters):o;return{matched:!0,consumedSegments:i.consumed,lastChild:i.consumed.length,parameters:s,positionalParamSegments:null!==(r=i.posParams)&&void 0!==r?r:{}}}function ur(t,e,n,r,i="corrected"){if(n.length>0&&function(t,e,n){return n.some(n=>cr(t,e,n)&&ir(n)!==Pe)}(t,n,r)){const i=new Ye(e,function(t,e,n,r){const i={};i.primary=r,r._sourceSegment=t,r._segmentIndexShift=e.length;for(const o of n)if(""===o.path&&ir(o)!==Pe){const n=new Ye([],{});n._sourceSegment=t,n._segmentIndexShift=e.length,i[ir(o)]=n}return i}(t,e,r,new Ye(n,t.children)));return i._sourceSegment=t,i._segmentIndexShift=e.length,{segmentGroup:i,slicedSegments:[]}}if(0===n.length&&function(t,e,n){return n.some(n=>cr(t,e,n))}(t,n,r)){const o=new Ye(t.segments,function(t,e,n,r,i,o){const s={};for(const a of r)if(cr(t,n,a)&&!i[ir(a)]){const n=new Ye([],{});n._sourceSegment=t,n._segmentIndexShift="legacy"===o?t.segments.length:e.length,s[ir(a)]=n}return Object.assign(Object.assign({},i),s)}(t,e,n,r,t.children,i));return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}const o=new Ye(t.segments,t.children);return o._sourceSegment=t,o._segmentIndexShift=e.length,{segmentGroup:o,slicedSegments:n}}function cr(t,e,n){return(!(t.hasChildren()||e.length>0)||"full"!==n.pathMatch)&&""===n.path}function lr(t,e,n,r){return!!(ir(t)===r||r!==Pe&&cr(e,n,t))&&("**"===t.path||ar(e,t,n).matched)}function hr(t,e,n){return 0===e.length&&!t.children[n]}class fr{constructor(t){this.segmentGroup=t||null}}class dr{constructor(t){this.urlTree=t}}function pr(t){return new It.a(e=>e.error(new fr(t)))}function gr(t){return new It.a(e=>e.error(new dr(t)))}function mr(t){return new It.a(e=>e.error(new Error(`Only absolute redirects can have named outlets. redirectTo: '${t}'`)))}class yr{constructor(t,e,n,i,o){this.configLoader=e,this.urlSerializer=n,this.urlTree=i,this.config=o,this.allowRedirects=!0,this.ngModule=t.get(r.y)}apply(){const t=ur(this.urlTree.root,[],[],this.config).segmentGroup,e=new Ye(t.segments,t.children);return this.expandSegmentGroup(this.ngModule,this.config,e,Pe).pipe(Object(Rt.a)(t=>this.createUrlTree(vr(t),this.urlTree.queryParams,this.urlTree.fragment))).pipe(Qt(t=>{if(t instanceof dr)return this.allowRedirects=!1,this.match(t.urlTree);if(t instanceof fr)throw this.noMatchError(t);throw t}))}match(t){return this.expandSegmentGroup(this.ngModule,this.config,t.root,Pe).pipe(Object(Rt.a)(e=>this.createUrlTree(vr(e),t.queryParams,t.fragment))).pipe(Qt(t=>{if(t instanceof fr)throw this.noMatchError(t);throw t}))}noMatchError(t){return new Error(`Cannot match any routes. URL Segment: '${t.segmentGroup}'`)}createUrlTree(t,e,n){const r=t.segments.length>0?new Ye([],{[Pe]:t}):t;return new Qe(r,e,n)}expandSegmentGroup(t,e,n,r){return 0===n.segments.length&&n.hasChildren()?this.expandChildren(t,e,n).pipe(Object(Rt.a)(t=>new Ye([],t))):this.expandSegment(t,n,e,n.segments,r,!0)}expandChildren(t,e,n){const r=[];for(const i of Object.keys(n.children))"primary"===i?r.unshift(i):r.push(i);return Object(ht.a)(r).pipe(te(r=>{const i=n.children[r],o=or(e,r);return this.expandSegmentGroup(t,o,i,r).pipe(Object(Rt.a)(t=>({segment:t,outlet:r})))}),zt((t,e)=>(t[e.outlet]=e.segment,t),{}),function(t,e){const n=arguments.length>=2;return r=>r.pipe(t?Jt((e,n)=>t(e,n,r)):he.a,ee(1),n?ue(e):ie(()=>new xt))}())}expandSegment(t,e,n,r,i,o){return Object(ht.a)(n).pipe(te(s=>this.expandSegmentAgainstRoute(t,e,n,s,r,i,o).pipe(Qt(t=>{if(t instanceof fr)return Object(ft.a)(null);throw t}))),fe(t=>!!t),Qt((t,n)=>{if(t instanceof xt||"EmptyError"===t.name){if(hr(e,r,i))return Object(ft.a)(new Ye([],{}));throw new fr(e)}throw t}))}expandSegmentAgainstRoute(t,e,n,r,i,o,s){return lr(r,e,i,o)?void 0===r.redirectTo?this.matchSegmentAgainstRoute(t,e,r,i,o):s&&this.allowRedirects?this.expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o):pr(e):pr(e)}expandSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){return"**"===r.path?this.expandWildCardWithParamsAgainstRouteUsingRedirect(t,n,r,o):this.expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o)}expandWildCardWithParamsAgainstRouteUsingRedirect(t,e,n,r){const i=this.applyRedirectCommands([],n.redirectTo,{});return n.redirectTo.startsWith("/")?gr(i):this.lineralizeSegments(n,i).pipe(Object(Zt.a)(n=>{const i=new Ye(n,{});return this.expandSegment(t,i,e,n,r,!1)}))}expandRegularSegmentAgainstRouteUsingRedirect(t,e,n,r,i,o){const{matched:s,consumedSegments:a,lastChild:u,positionalParamSegments:c}=ar(e,r,i);if(!s)return pr(e);const l=this.applyRedirectCommands(a,r.redirectTo,c);return r.redirectTo.startsWith("/")?gr(l):this.lineralizeSegments(r,l).pipe(Object(Zt.a)(r=>this.expandSegment(t,e,n,r.concat(i.slice(u)),o,!1)))}matchSegmentAgainstRoute(t,e,n,r,i){if("**"===n.path)return n.loadChildren?(n._loadedConfig?Object(ft.a)(n._loadedConfig):this.configLoader.load(t.injector,n)).pipe(Object(Rt.a)(t=>(n._loadedConfig=t,new Ye(r,{})))):Object(ft.a)(new Ye(r,{}));const{matched:o,consumedSegments:s,lastChild:a}=ar(e,n,r);if(!o)return pr(e);const u=r.slice(a);return this.getChildConfig(t,n,r).pipe(Object(Zt.a)(t=>{const r=t.module,o=t.routes,{segmentGroup:a,slicedSegments:c}=ur(e,s,u,o),l=new Ye(a.segments,a.children);if(0===c.length&&l.hasChildren())return this.expandChildren(r,o,l).pipe(Object(Rt.a)(t=>new Ye(s,t)));if(0===o.length&&0===c.length)return Object(ft.a)(new Ye(s,{}));const h=ir(n)===i;return this.expandSegment(r,l,o,c,h?Pe:i,!0).pipe(Object(Rt.a)(t=>new Ye(s.concat(t.segments),t.children)))}))}getChildConfig(t,e,n){return e.children?Object(ft.a)(new $n(e.children,t)):e.loadChildren?void 0!==e._loadedConfig?Object(ft.a)(e._loadedConfig):this.runCanLoadGuards(t.injector,e,n).pipe(Object(Zt.a)(n=>n?this.configLoader.load(t.injector,e).pipe(Object(Rt.a)(t=>(e._loadedConfig=t,t))):function(t){return new It.a(e=>e.error(Ue(`Cannot load children because the guard of the route "path: '${t.path}'" returned false`)))}(e))):Object(ft.a)(new $n([],t))}runCanLoadGuards(t,e,n){const r=e.canLoad;if(!r||0===r.length)return Object(ft.a)(!0);const i=r.map(r=>{const i=t.get(r);let o;if(function(t){return t&&Wn(t.canLoad)}(i))o=i.canLoad(e,n);else{if(!Wn(i))throw new Error("Invalid CanLoad guard");o=i(e,n)}return Ge(o)});return Object(ft.a)(i).pipe(Xn(),Object(de.a)(t=>{if(!Qn(t))return;const e=Ue(`Redirecting to "${this.urlSerializer.serialize(t)}"`);throw e.url=t,e}),Object(Rt.a)(t=>!0===t))}lineralizeSegments(t,e){let n=[],r=e.root;for(;;){if(n=n.concat(r.segments),0===r.numberOfChildren)return Object(ft.a)(n);if(r.numberOfChildren>1||!r.children.primary)return mr(t.redirectTo);r=r.children.primary}}applyRedirectCommands(t,e,n){return this.applyRedirectCreatreUrlTree(e,this.urlSerializer.parse(e),t,n)}applyRedirectCreatreUrlTree(t,e,n,r){const i=this.createSegmentGroup(t,e.root,n,r);return new Qe(i,this.createQueryParams(e.queryParams,this.urlTree.queryParams),e.fragment)}createQueryParams(t,e){const n={};return ze(t,(t,r)=>{if("string"==typeof t&&t.startsWith(":")){const i=t.substring(1);n[r]=e[i]}else n[r]=t}),n}createSegmentGroup(t,e,n,r){const i=this.createSegments(t,e.segments,n,r);let o={};return ze(e.children,(e,i)=>{o[i]=this.createSegmentGroup(t,e,n,r)}),new Ye(i,o)}createSegments(t,e,n,r){return e.map(e=>e.path.startsWith(":")?this.findPosParam(t,e,r):this.findOrReturn(e,n))}findPosParam(t,e,n){const r=n[e.path.substring(1)];if(!r)throw new Error(`Cannot redirect to '${t}'. Cannot find '${e.path}'.`);return r}findOrReturn(t,e){let n=0;for(const r of e){if(r.path===t.path)return e.splice(n),r;n++}return t}}function vr(t){const e={};for(const n of Object.keys(t.children)){const r=vr(t.children[n]);(r.segments.length>0||r.hasChildren())&&(e[n]=r)}return function(t){if(1===t.numberOfChildren&&t.children.primary){const e=t.children.primary;return new Ye(t.segments.concat(e.segments),e.children)}return t}(new Ye(t.segments,e))}class br{constructor(t){this.path=t,this.route=this.path[this.path.length-1]}}class wr{constructor(t,e){this.component=t,this.route=e}}function _r(t,e,n){const r=t._root;return Er(r,e?e._root:null,n,[r.value])}function Ir(t,e,n){const r=function(t){if(!t)return null;for(let e=t.parent;e;e=e.parent){const t=e.routeConfig;if(t&&t._loadedConfig)return t._loadedConfig}return null}(e);return(r?r.module.injector:n).get(t)}function Er(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=_n(e);return t.children.forEach(t=>{!function(t,e,n,r,i={canDeactivateChecks:[],canActivateChecks:[]}){const o=t.value,s=e?e.value:null,a=n?n.getContext(t.value.outlet):null;if(s&&o.routeConfig===s.routeConfig){const u=function(t,e,n){if("function"==typeof n)return n(t,e);switch(n){case"pathParamsChange":return!Ze(t.url,e.url);case"pathParamsOrQueryParamsChange":return!Ze(t.url,e.url)||!Ve(t.queryParams,e.queryParams);case"always":return!0;case"paramsOrQueryParamsChange":return!kn(t,e)||!Ve(t.queryParams,e.queryParams);case"paramsChange":default:return!kn(t,e)}}(s,o,o.routeConfig.runGuardsAndResolvers);u?i.canActivateChecks.push(new br(r)):(o.data=s.data,o._resolvedData=s._resolvedData),Er(t,e,o.component?a?a.children:null:n,r,i),u&&a&&a.outlet&&a.outlet.isActivated&&i.canDeactivateChecks.push(new wr(a.outlet.component,s))}else s&&Sr(e,a,i),i.canActivateChecks.push(new br(r)),Er(t,null,o.component?a?a.children:null:n,r,i)}(t,o[t.value.outlet],n,r.concat([t.value]),i),delete o[t.value.outlet]}),ze(o,(t,e)=>Sr(t,n.getContext(e),i)),i}function Sr(t,e,n){const r=_n(t),i=t.value;ze(r,(t,r)=>{Sr(t,i.component?e?e.children.getContext(r):null:e,n)}),n.canDeactivateChecks.push(new wr(i.component&&e&&e.outlet&&e.outlet.isActivated?e.outlet.component:null,i))}class Or{}function Tr(t){return new It.a(e=>e.error(t))}class Cr{constructor(t,e,n,r,i,o){this.rootComponentType=t,this.config=e,this.urlTree=n,this.url=r,this.paramsInheritanceStrategy=i,this.relativeLinkResolution=o}recognize(){const t=ur(this.urlTree.root,[],[],this.config.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution).segmentGroup,e=this.processSegmentGroup(this.config,t,Pe);if(null===e)return null;const n=new Tn([],Object.freeze({}),Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,{},Pe,this.rootComponentType,null,this.urlTree.root,-1,{}),r=new wn(n,e),i=new Cn(this.url,r);return this.inheritParamsAndData(i._root),i}inheritParamsAndData(t){const e=t.value,n=On(e,this.paramsInheritanceStrategy);e.params=Object.freeze(n.params),e.data=Object.freeze(n.data),t.children.forEach(t=>this.inheritParamsAndData(t))}processSegmentGroup(t,e,n){return 0===e.segments.length&&e.hasChildren()?this.processChildren(t,e):this.processSegment(t,e,e.segments,n)}processChildren(t,e){const n=[];for(const i of Object.keys(e.children)){const r=e.children[i],o=or(t,i),s=this.processSegmentGroup(o,r,i);if(null===s)return null;n.push(...s)}const r=function(t){const e=[];for(const n of t){if(!xr(n)){e.push(n);continue}const t=e.find(t=>n.value.routeConfig===t.value.routeConfig);void 0!==t?t.children.push(...n.children):e.push(n)}return e}(n);return r.sort((t,e)=>t.value.outlet===Pe?-1:e.value.outlet===Pe?1:t.value.outlet.localeCompare(e.value.outlet)),r}processSegment(t,e,n,r){for(const i of t){const t=this.processSegmentAgainstRoute(i,e,n,r);if(null!==t)return t}return hr(e,n,r)?[]:null}processSegmentAgainstRoute(t,e,n,r){if(t.redirectTo||!lr(t,e,n,r))return null;let i,o=[],s=[];if("**"===t.path){const r=n.length>0?He(n).parameters:{};i=new Tn(n,r,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kr(t),ir(t),t.component,t,Ar(e),jr(e)+n.length,Nr(t))}else{const r=ar(e,t,n);if(!r.matched)return null;o=r.consumedSegments,s=n.slice(r.lastChild),i=new Tn(o,r.parameters,Object.freeze(Object.assign({},this.urlTree.queryParams)),this.urlTree.fragment,kr(t),ir(t),t.component,t,Ar(e),jr(e)+o.length,Nr(t))}const a=function(t){return t.children?t.children:t.loadChildren?t._loadedConfig.routes:[]}(t),{segmentGroup:u,slicedSegments:c}=ur(e,o,s,a.filter(t=>void 0===t.redirectTo),this.relativeLinkResolution);if(0===c.length&&u.hasChildren()){const t=this.processChildren(a,u);return null===t?null:[new wn(i,t)]}if(0===a.length&&0===c.length)return[new wn(i,[])];const l=ir(t)===r,h=this.processSegment(a,u,c,l?Pe:r);return null===h?null:[new wn(i,h)]}}function xr(t){const e=t.value.routeConfig;return e&&""===e.path&&void 0===e.redirectTo}function Ar(t){let e=t;for(;e._sourceSegment;)e=e._sourceSegment;return e}function jr(t){let e=t,n=e._segmentIndexShift?e._segmentIndexShift:0;for(;e._sourceSegment;)e=e._sourceSegment,n+=e._segmentIndexShift?e._segmentIndexShift:0;return n-1}function kr(t){return t.data||{}}function Nr(t){return t.resolve||{}}function Dr(t){return Lt(e=>{const n=t(e);return n?Object(ht.a)(n).pipe(Object(Rt.a)(()=>e)):Object(ft.a)(e)})}class Rr extends class{shouldDetach(t){return!1}store(t,e){}shouldAttach(t){return!1}retrieve(t){return null}shouldReuseRoute(t,e){return t.routeConfig===e.routeConfig}}{}const Pr=new r.r("ROUTES");class Lr{constructor(t,e,n,r){this.loader=t,this.compiler=e,this.onLoadStartListener=n,this.onLoadEndListener=r}load(t,e){if(e._loader$)return e._loader$;this.onLoadStartListener&&this.onLoadStartListener(e);const n=this.loadModuleFactory(e.loadChildren).pipe(Object(Rt.a)(n=>{this.onLoadEndListener&&this.onLoadEndListener(e);const i=n.create(t);return new $n(Be(i.injector.get(Pr,void 0,r.q.Self|r.q.Optional)).map(rr),i)}),Qt(t=>{throw e._loader$=void 0,t}));return e._loader$=new Dt.a(n,()=>new dt.a).pipe(Object(pe.a)()),e._loader$}loadModuleFactory(t){return"string"==typeof t?Object(ht.a)(this.loader.load(t)):Ge(t()).pipe(Object(Zt.a)(t=>t instanceof r.w?Object(ft.a)(t):Object(ht.a)(this.compiler.compileModuleAsync(t))))}}class Mr{constructor(){this.outlet=null,this.route=null,this.resolver=null,this.children=new Ur,this.attachRef=null}}class Ur{constructor(){this.contexts=new Map}onChildOutletCreated(t,e){const n=this.getOrCreateContext(t);n.outlet=e,this.contexts.set(t,n)}onChildOutletDestroyed(t){const e=this.getContext(t);e&&(e.outlet=null)}onOutletDeactivated(){const t=this.contexts;return this.contexts=new Map,t}onOutletReAttached(t){this.contexts=t}getOrCreateContext(t){let e=this.getContext(t);return e||(e=new Mr,this.contexts.set(t,e)),e}getContext(t){return this.contexts.get(t)||null}}class Fr{shouldProcessUrl(t){return!0}extract(t){return t}merge(t,e){return t}}function Vr(t){throw t}function qr(t,e,n){return e.parse("/")}function Br(t,e){return Object(ft.a)(null)}let Hr=(()=>{class t{constructor(t,e,n,i,o,s,a,u){this.rootComponentType=t,this.urlSerializer=e,this.rootContexts=n,this.location=i,this.config=u,this.lastSuccessfulNavigation=null,this.currentNavigation=null,this.disposed=!1,this.lastLocationChangeInfo=null,this.navigationId=0,this.isNgZoneEnabled=!1,this.events=new dt.a,this.errorHandler=Vr,this.malformedUriErrorHandler=qr,this.navigated=!1,this.lastSuccessfulId=-1,this.hooks={beforePreactivation:Br,afterPreactivation:Br},this.urlHandlingStrategy=new Fr,this.routeReuseStrategy=new Rr,this.onSameUrlNavigation="ignore",this.paramsInheritanceStrategy="emptyOnly",this.urlUpdateStrategy="deferred",this.relativeLinkResolution="corrected",this.ngModule=o.get(r.y),this.console=o.get(r.X);const c=o.get(r.A);this.isNgZoneEnabled=c instanceof r.A&&r.A.isInAngularZone(),this.resetConfig(u),this.currentUrlTree=new Qe(new Ye([],{}),{},null),this.rawUrlTree=this.currentUrlTree,this.browserUrlTree=this.currentUrlTree,this.configLoader=new Lr(s,a,t=>this.triggerEvent(new xe(t)),t=>this.triggerEvent(new Ae(t))),this.routerState=En(this.currentUrlTree,this.rootComponentType),this.transitions=new gt({id:0,currentUrlTree:this.currentUrlTree,currentRawUrl:this.currentUrlTree,extractedUrl:this.urlHandlingStrategy.extract(this.currentUrlTree),urlAfterRedirects:this.urlHandlingStrategy.extract(this.currentUrlTree),rawUrl:this.currentUrlTree,extras:{},resolve:null,reject:null,promise:Promise.resolve(!0),source:"imperative",restoredState:null,currentSnapshot:this.routerState.snapshot,targetSnapshot:null,currentRouterState:this.routerState,targetRouterState:null,guards:{canActivateChecks:[],canDeactivateChecks:[]},guardsResult:null}),this.navigations=this.setupNavigations(this.transitions),this.processNavigations()}setupNavigations(t){const e=this.events;return t.pipe(Jt(t=>0!==t.id),Object(Rt.a)(t=>Object.assign(Object.assign({},t),{extractedUrl:this.urlHandlingStrategy.extract(t.rawUrl)})),Lt(t=>{let n=!1,r=!1;return Object(ft.a)(t).pipe(Object(de.a)(t=>{this.currentNavigation={id:t.id,initialUrl:t.currentRawUrl,extractedUrl:t.extractedUrl,trigger:t.source,extras:t.extras,previousNavigation:this.lastSuccessfulNavigation?Object.assign(Object.assign({},this.lastSuccessfulNavigation),{previousNavigation:null}):null}}),Lt(t=>{const n=!this.navigated||t.extractedUrl.toString()!==this.browserUrlTree.toString();if(("reload"===this.onSameUrlNavigation||n)&&this.urlHandlingStrategy.shouldProcessUrl(t.rawUrl))return Object(ft.a)(t).pipe(Lt(t=>{const n=this.transitions.getValue();return e.next(new be(t.id,this.serializeUrl(t.extractedUrl),t.source,t.restoredState)),n!==this.transitions.getValue()?kt.a:Promise.resolve(t)}),(r=this.ngModule.injector,i=this.configLoader,o=this.urlSerializer,s=this.config,Lt(t=>function(t,e,n,r,i){return new yr(t,e,n,r,i).apply()}(r,i,o,t.extractedUrl,s).pipe(Object(Rt.a)(e=>Object.assign(Object.assign({},t),{urlAfterRedirects:e}))))),Object(de.a)(t=>{this.currentNavigation=Object.assign(Object.assign({},this.currentNavigation),{finalUrl:t.urlAfterRedirects})}),function(t,e,n,r,i){return Object(Zt.a)(o=>function(t,e,n,r,i="emptyOnly",o="legacy"){try{const s=new Cr(t,e,n,r,i,o).recognize();return null===s?Tr(new Or):Object(ft.a)(s)}catch(Fv){return Tr(Fv)}}(t,e,o.urlAfterRedirects,n(o.urlAfterRedirects),r,i).pipe(Object(Rt.a)(t=>Object.assign(Object.assign({},o),{targetSnapshot:t}))))}(this.rootComponentType,this.config,t=>this.serializeUrl(t),this.paramsInheritanceStrategy,this.relativeLinkResolution),Object(de.a)(t=>{"eager"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(t.urlAfterRedirects,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects);const n=new Ee(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);e.next(n)}));var r,i,o,s;if(n&&this.rawUrlTree&&this.urlHandlingStrategy.shouldProcessUrl(this.rawUrlTree)){const{id:n,extractedUrl:r,source:i,restoredState:o,extras:s}=t,a=new be(n,this.serializeUrl(r),i,o);e.next(a);const u=En(r,this.rootComponentType).snapshot;return Object(ft.a)(Object.assign(Object.assign({},t),{targetSnapshot:u,urlAfterRedirects:r,extras:Object.assign(Object.assign({},s),{skipLocationChange:!1,replaceUrl:!1})}))}return this.rawUrlTree=t.rawUrl,this.browserUrlTree=t.urlAfterRedirects,t.resolve(null),kt.a}),Dr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.beforePreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(de.a)(t=>{const e=new Se(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Object(Rt.a)(t=>Object.assign(Object.assign({},t),{guards:_r(t.targetSnapshot,t.currentSnapshot,this.rootContexts)})),function(t,e){return Object(Zt.a)(n=>{const{targetSnapshot:r,currentSnapshot:i,guards:{canActivateChecks:o,canDeactivateChecks:s}}=n;return 0===s.length&&0===o.length?Object(ft.a)(Object.assign(Object.assign({},n),{guardsResult:!0})):function(t,e,n,r){return Object(ht.a)(t).pipe(Object(Zt.a)(t=>function(t,e,n,r,i){const o=e&&e.routeConfig?e.routeConfig.canDeactivate:null;if(!o||0===o.length)return Object(ft.a)(!0);const s=o.map(o=>{const s=Ir(o,e,i);let a;if(function(t){return t&&Wn(t.canDeactivate)}(s))a=Ge(s.canDeactivate(t,e,n,r));else{if(!Wn(s))throw new Error("Invalid CanDeactivate guard");a=Ge(s(t,e,n,r))}return a.pipe(fe())});return Object(ft.a)(s).pipe(Xn())}(t.component,t.route,n,e,r)),fe(t=>!0!==t,!0))}(s,r,i,t).pipe(Object(Zt.a)(n=>n&&"boolean"==typeof n?function(t,e,n,r){return Object(ht.a)(e).pipe(te(e=>jt(function(t,e){return null!==t&&e&&e(new je(t)),Object(ft.a)(!0)}(e.route.parent,r),function(t,e){return null!==t&&e&&e(new Ne(t)),Object(ft.a)(!0)}(e.route,r),function(t,e,n){const r=e[e.length-1],i=e.slice(0,e.length-1).reverse().map(t=>function(t){const e=t.routeConfig?t.routeConfig.canActivateChild:null;return e&&0!==e.length?{node:t,guards:e}:null}(t)).filter(t=>null!==t).map(e=>Nt(()=>{const i=e.guards.map(i=>{const o=Ir(i,e.node,n);let s;if(function(t){return t&&Wn(t.canActivateChild)}(o))s=Ge(o.canActivateChild(r,t));else{if(!Wn(o))throw new Error("Invalid CanActivateChild guard");s=Ge(o(r,t))}return s.pipe(fe())});return Object(ft.a)(i).pipe(Xn())}));return Object(ft.a)(i).pipe(Xn())}(t,e.path,n),function(t,e,n){const r=e.routeConfig?e.routeConfig.canActivate:null;if(!r||0===r.length)return Object(ft.a)(!0);const i=r.map(r=>Nt(()=>{const i=Ir(r,e,n);let o;if(function(t){return t&&Wn(t.canActivate)}(i))o=Ge(i.canActivate(e,t));else{if(!Wn(i))throw new Error("Invalid CanActivate guard");o=Ge(i(e,t))}return o.pipe(fe())}));return Object(ft.a)(i).pipe(Xn())}(t,e.route,n))),fe(t=>!0!==t,!0))}(r,o,t,e):Object(ft.a)(n)),Object(Rt.a)(t=>Object.assign(Object.assign({},n),{guardsResult:t})))})}(this.ngModule.injector,t=>this.triggerEvent(t)),Object(de.a)(t=>{if(Qn(t.guardsResult)){const e=Ue(`Redirecting to "${this.serializeUrl(t.guardsResult)}"`);throw e.url=t.guardsResult,e}const e=new Oe(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot,!!t.guardsResult);this.triggerEvent(e)}),Jt(t=>{if(!t.guardsResult){this.resetUrlToCurrentUrlTree();const n=new _e(t.id,this.serializeUrl(t.extractedUrl),"");return e.next(n),t.resolve(!1),!1}return!0}),Dr(t=>{if(t.guards.canActivateChecks.length)return Object(ft.a)(t).pipe(Object(de.a)(t=>{const e=new Te(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}),Lt(t=>{let n=!1;return Object(ft.a)(t).pipe((r=this.paramsInheritanceStrategy,i=this.ngModule.injector,Object(Zt.a)(t=>{const{targetSnapshot:e,guards:{canActivateChecks:n}}=t;if(!n.length)return Object(ft.a)(t);let o=0;return Object(ht.a)(n).pipe(te(t=>function(t,e,n,r){return function(t,e,n,r){const i=Object.keys(t);if(0===i.length)return Object(ft.a)({});const o={};return Object(ht.a)(i).pipe(Object(Zt.a)(i=>function(t,e,n,r){const i=Ir(t,e,r);return Ge(i.resolve?i.resolve(e,n):i(e,n))}(t[i],e,n,r).pipe(Object(de.a)(t=>{o[i]=t}))),ee(1),Object(Zt.a)(()=>Object.keys(o).length===i.length?Object(ft.a)(o):kt.a))}(t._resolve,t,e,r).pipe(Object(Rt.a)(e=>(t._resolvedData=e,t.data=Object.assign(Object.assign({},t.data),On(t,n).resolve),null)))}(t.route,e,r,i)),Object(de.a)(()=>o++),ee(1),Object(Zt.a)(e=>o===n.length?Object(ft.a)(t):kt.a))})),Object(de.a)({next:()=>n=!0,complete:()=>{if(!n){const n=new _e(t.id,this.serializeUrl(t.extractedUrl),"At least one route resolver didn't emit any value.");e.next(n),t.resolve(!1)}}}));var r,i}),Object(de.a)(t=>{const e=new Ce(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(t.urlAfterRedirects),t.targetSnapshot);this.triggerEvent(e)}))}),Dr(t=>{const{targetSnapshot:e,id:n,extractedUrl:r,rawUrl:i,extras:{skipLocationChange:o,replaceUrl:s}}=t;return this.hooks.afterPreactivation(e,{navigationId:n,appliedUrlTree:r,rawUrlTree:i,skipLocationChange:!!o,replaceUrl:!!s})}),Object(Rt.a)(t=>{const e=function(t,e,n){const r=Nn(t,e._root,n?n._root:void 0);return new In(r,e)}(this.routeReuseStrategy,t.targetSnapshot,t.currentRouterState);return Object.assign(Object.assign({},t),{targetRouterState:e})}),Object(de.a)(t=>{this.currentUrlTree=t.urlAfterRedirects,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,t.rawUrl),this.routerState=t.targetRouterState,"deferred"===this.urlUpdateStrategy&&(t.extras.skipLocationChange||this.setBrowserUrl(this.rawUrlTree,!!t.extras.replaceUrl,t.id,t.extras.state),this.browserUrlTree=t.urlAfterRedirects)}),(o=this.rootContexts,s=this.routeReuseStrategy,a=t=>this.triggerEvent(t),Object(Rt.a)(t=>(new Kn(s,t.targetRouterState,t.currentRouterState,a).activate(o),t))),Object(de.a)({next(){n=!0},complete(){n=!0}}),(i=()=>{if(!n&&!r){this.resetUrlToCurrentUrlTree();const n=new _e(t.id,this.serializeUrl(t.extractedUrl),`Navigation ID ${t.id} is not equal to the current navigation id ${this.navigationId}`);e.next(n),t.resolve(!1)}this.currentNavigation=null},t=>t.lift(new me(i))),Qt(n=>{if(r=!0,(i=n)&&i.ngNavigationCancelingError){const r=Qn(n.url);r||(this.navigated=!0,this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl));const i=new _e(t.id,this.serializeUrl(t.extractedUrl),n.message);e.next(i),r?setTimeout(()=>{const e=this.urlHandlingStrategy.merge(n.url,this.rawUrlTree);this.scheduleNavigation(e,"imperative",null,{skipLocationChange:t.extras.skipLocationChange,replaceUrl:"eager"===this.urlUpdateStrategy},{resolve:t.resolve,reject:t.reject,promise:t.promise})},0):t.resolve(!1)}else{this.resetStateAndUrl(t.currentRouterState,t.currentUrlTree,t.rawUrl);const r=new Ie(t.id,this.serializeUrl(t.extractedUrl),n);e.next(r);try{t.resolve(this.errorHandler(n))}catch(al){t.reject(al)}}var i;return kt.a}));var i,o,s,a}))}resetRootComponentType(t){this.rootComponentType=t,this.routerState.root.component=this.rootComponentType}getTransition(){const t=this.transitions.value;return t.urlAfterRedirects=this.browserUrlTree,t}setTransition(t){this.transitions.next(Object.assign(Object.assign({},this.getTransition()),t))}initialNavigation(){this.setUpLocationChangeListener(),0===this.navigationId&&this.navigateByUrl(this.location.path(!0),{replaceUrl:!0})}setUpLocationChangeListener(){this.locationSubscription||(this.locationSubscription=this.location.subscribe(t=>{const e=this.extractLocationChangeInfoFromEvent(t);this.shouldScheduleNavigation(this.lastLocationChangeInfo,e)&&setTimeout(()=>{const{source:t,state:n,urlTree:r}=e,i={replaceUrl:!0};if(n){const t=Object.assign({},n);delete t.navigationId,0!==Object.keys(t).length&&(i.state=t)}this.scheduleNavigation(r,t,n,i)},0),this.lastLocationChangeInfo=e}))}extractLocationChangeInfoFromEvent(t){var e;return{source:"popstate"===t.type?"popstate":"hashchange",urlTree:this.parseUrl(t.url),state:(null===(e=t.state)||void 0===e?void 0:e.navigationId)?t.state:null,transitionId:this.getTransition().id}}shouldScheduleNavigation(t,e){if(!t)return!0;const n=e.urlTree.toString()===t.urlTree.toString();return!(e.transitionId===t.transitionId&&n&&("hashchange"===e.source&&"popstate"===t.source||"popstate"===e.source&&"hashchange"===t.source))}get url(){return this.serializeUrl(this.currentUrlTree)}getCurrentNavigation(){return this.currentNavigation}triggerEvent(t){this.events.next(t)}resetConfig(t){tr(t),this.config=t.map(rr),this.navigated=!1,this.lastSuccessfulId=-1}ngOnDestroy(){this.dispose()}dispose(){this.transitions.complete(),this.locationSubscription&&(this.locationSubscription.unsubscribe(),this.locationSubscription=void 0),this.disposed=!0}createUrlTree(t,e={}){const{relativeTo:n,queryParams:r,fragment:i,queryParamsHandling:o,preserveFragment:s}=e,a=n||this.routerState.root,u=s?this.currentUrlTree.fragment:i;let c=null;switch(o){case"merge":c=Object.assign(Object.assign({},this.currentUrlTree.queryParams),r);break;case"preserve":c=this.currentUrlTree.queryParams;break;default:c=r||null}return null!==c&&(c=this.removeEmptyProps(c)),function(t,e,n,r,i){if(0===n.length)return Ln(e.root,e.root,e,r,i);const o=function(t){if("string"==typeof t[0]&&1===t.length&&"/"===t[0])return new Un(!0,0,t);let e=0,n=!1;const r=t.reduce((t,r,i)=>{if("object"==typeof r&&null!=r){if(r.outlets){const e={};return ze(r.outlets,(t,n)=>{e[n]="string"==typeof t?t.split("/"):t}),[...t,{outlets:e}]}if(r.segmentPath)return[...t,r.segmentPath]}return"string"!=typeof r?[...t,r]:0===i?(r.split("/").forEach((r,i)=>{0==i&&"."===r||(0==i&&""===r?n=!0:".."===r?e++:""!=r&&t.push(r))}),t):[...t,r]},[]);return new Un(n,e,r)}(n);if(o.toRoot())return Ln(e.root,new Ye([],{}),e,r,i);const s=function(t,e,n){if(t.isAbsolute)return new Fn(e.root,!0,0);if(-1===n.snapshot._lastPathIndex){const t=n.snapshot._urlSegment;return new Fn(t,t===e.root,0)}const r=Rn(t.commands[0])?0:1;return function(t,e,n){let r=t,i=e,o=n;for(;o>i;){if(o-=i,r=r.parent,!r)throw new Error("Invalid number of '../'");i=r.segments.length}return new Fn(r,!1,i-o)}(n.snapshot._urlSegment,n.snapshot._lastPathIndex+r,t.numberOfDoubleDots)}(o,e,t),a=s.processChildren?qn(s.segmentGroup,s.index,o.commands):Vn(s.segmentGroup,s.index,o.commands);return Ln(s.segmentGroup,a,e,r,i)}(a,this.currentUrlTree,t,c,u)}navigateByUrl(t,e={skipLocationChange:!1}){const n=Qn(t)?t:this.parseUrl(t),r=this.urlHandlingStrategy.merge(n,this.rawUrlTree);return this.scheduleNavigation(r,"imperative",null,e)}navigate(t,e={skipLocationChange:!1}){return function(t){for(let e=0;e<t.length;e++){const n=t[e];if(null==n)throw new Error(`The requested path contains ${n} segment at index ${e}`)}}(t),this.navigateByUrl(this.createUrlTree(t,e),e)}serializeUrl(t){return this.urlSerializer.serialize(t)}parseUrl(t){let e;try{e=this.urlSerializer.parse(t)}catch(Fv){e=this.malformedUriErrorHandler(Fv,this.urlSerializer,t)}return e}isActive(t,e){if(Qn(t))return Ke(this.currentUrlTree,t,e);const n=this.parseUrl(t);return Ke(this.currentUrlTree,n,e)}removeEmptyProps(t){return Object.keys(t).reduce((e,n)=>{const r=t[n];return null!=r&&(e[n]=r),e},{})}processNavigations(){this.navigations.subscribe(t=>{this.navigated=!0,this.lastSuccessfulId=t.id,this.events.next(new we(t.id,this.serializeUrl(t.extractedUrl),this.serializeUrl(this.currentUrlTree))),this.lastSuccessfulNavigation=this.currentNavigation,this.currentNavigation=null,t.resolve(!0)},t=>{this.console.warn("Unhandled Navigation Error: ")})}scheduleNavigation(t,e,n,r,i){if(this.disposed)return Promise.resolve(!1);const o=this.getTransition(),s="imperative"!==e&&"imperative"===(null==o?void 0:o.source),a=(this.lastSuccessfulId===o.id||this.currentNavigation?o.rawUrl:o.urlAfterRedirects).toString()===t.toString();if(s&&a)return Promise.resolve(!0);let u,c,l;i?(u=i.resolve,c=i.reject,l=i.promise):l=new Promise((t,e)=>{u=t,c=e});const h=++this.navigationId;return this.setTransition({id:h,source:e,restoredState:n,currentUrlTree:this.currentUrlTree,currentRawUrl:this.rawUrlTree,rawUrl:t,extras:r,resolve:u,reject:c,promise:l,currentSnapshot:this.routerState.snapshot,currentRouterState:this.routerState}),l.catch(t=>Promise.reject(t))}setBrowserUrl(t,e,n,r){const i=this.urlSerializer.serialize(t);r=r||{},this.location.isCurrentPathEqualTo(i)||e?this.location.replaceState(i,"",Object.assign(Object.assign({},r),{navigationId:n})):this.location.go(i,"",Object.assign(Object.assign({},r),{navigationId:n}))}resetStateAndUrl(t,e,n){this.routerState=t,this.currentUrlTree=e,this.rawUrlTree=this.urlHandlingStrategy.merge(this.currentUrlTree,n),this.resetUrlToCurrentUrlTree()}resetUrlToCurrentUrlTree(){this.location.replaceState(this.urlSerializer.serialize(this.rawUrlTree),"",{navigationId:this.lastSuccessfulId})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.N),r.Mb(tn),r.Mb(Ur),r.Mb(_),r.Mb(r.s),r.Mb(r.x),r.Mb(r.i),r.Mb(void 0))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),zr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.route=e,this.commands=[],this.onChanges=new dt.a,null==n&&r.setAttribute(i.nativeElement,"tabindex","0")}ngOnChanges(t){this.onChanges.next(this)}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}onClick(){const t={skipLocationChange:Kr(this.skipLocationChange),replaceUrl:Kr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,t),!0}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Hr),r.Gb(Sn),r.Nb("tabindex"),r.Gb(r.E),r.Gb(r.l))},t.\u0275dir=r.Bb({type:t,selectors:[["","routerLink","",5,"a",5,"area"]],hostBindings:function(t,e){1&t&&r.Pb("click",function(){return e.onClick()})},inputs:{routerLink:"routerLink",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.wb]}),t})(),Gr=(()=>{class t{constructor(t,e,n){this.router=t,this.route=e,this.locationStrategy=n,this.commands=[],this.onChanges=new dt.a,this.subscription=t.events.subscribe(t=>{t instanceof we&&this.updateTargetUrlAndHref()})}set routerLink(t){this.commands=null!=t?Array.isArray(t)?t:[t]:[]}ngOnChanges(t){this.updateTargetUrlAndHref(),this.onChanges.next(this)}ngOnDestroy(){this.subscription.unsubscribe()}onClick(t,e,n,r,i){if(0!==t||e||n||r||i)return!0;if("string"==typeof this.target&&"_self"!=this.target)return!0;const o={skipLocationChange:Kr(this.skipLocationChange),replaceUrl:Kr(this.replaceUrl),state:this.state};return this.router.navigateByUrl(this.urlTree,o),!1}updateTargetUrlAndHref(){this.href=this.locationStrategy.prepareExternalUrl(this.router.serializeUrl(this.urlTree))}get urlTree(){return this.router.createUrlTree(this.commands,{relativeTo:void 0!==this.relativeTo?this.relativeTo:this.route,queryParams:this.queryParams,fragment:this.fragment,queryParamsHandling:this.queryParamsHandling,preserveFragment:Kr(this.preserveFragment)})}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Hr),r.Gb(Sn),r.Gb(m))},t.\u0275dir=r.Bb({type:t,selectors:[["a","routerLink",""],["area","routerLink",""]],hostVars:2,hostBindings:function(t,e){1&t&&r.Pb("click",function(t){return e.onClick(t.button,t.ctrlKey,t.shiftKey,t.altKey,t.metaKey)}),2&t&&(r.Lb("href",e.href,r.Vb),r.yb("target",e.target))},inputs:{routerLink:"routerLink",target:"target",queryParams:"queryParams",fragment:"fragment",queryParamsHandling:"queryParamsHandling",preserveFragment:"preserveFragment",skipLocationChange:"skipLocationChange",replaceUrl:"replaceUrl",state:"state",relativeTo:"relativeTo"},features:[r.wb]}),t})();function Kr(t){return""===t||!!t}let Jr=(()=>{class t{constructor(t,e,n,i,o){this.parentContexts=t,this.location=e,this.resolver=n,this.changeDetector=o,this.activated=null,this._activatedRoute=null,this.activateEvents=new r.n,this.deactivateEvents=new r.n,this.name=i||Pe,t.onChildOutletCreated(this.name,this)}ngOnDestroy(){this.parentContexts.onChildOutletDestroyed(this.name)}ngOnInit(){if(!this.activated){const t=this.parentContexts.getContext(this.name);t&&t.route&&(t.attachRef?this.attach(t.attachRef,t.route):this.activateWith(t.route,t.resolver||null))}}get isActivated(){return!!this.activated}get component(){if(!this.activated)throw new Error("Outlet is not activated");return this.activated.instance}get activatedRoute(){if(!this.activated)throw new Error("Outlet is not activated");return this._activatedRoute}get activatedRouteData(){return this._activatedRoute?this._activatedRoute.snapshot.data:{}}detach(){if(!this.activated)throw new Error("Outlet is not activated");this.location.detach();const t=this.activated;return this.activated=null,this._activatedRoute=null,t}attach(t,e){this.activated=t,this._activatedRoute=e,this.location.insert(t.hostView)}deactivate(){if(this.activated){const t=this.component;this.activated.destroy(),this.activated=null,this._activatedRoute=null,this.deactivateEvents.emit(t)}}activateWith(t,e){if(this.isActivated)throw new Error("Cannot activate an already activated outlet");this._activatedRoute=t;const n=(e=e||this.resolver).resolveComponentFactory(t._futureSnapshot.routeConfig.component),r=this.parentContexts.getOrCreateContext(this.name).children,i=new $r(t,r,this.location.injector);this.activated=this.location.createComponent(n,this.location.length,i),this.changeDetector.markForCheck(),this.activateEvents.emit(this.activated.instance)}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ur),r.Gb(r.Q),r.Gb(r.j),r.Nb("name"),r.Gb(r.h))},t.\u0275dir=r.Bb({type:t,selectors:[["router-outlet"]],outputs:{activateEvents:"activate",deactivateEvents:"deactivate"},exportAs:["outlet"]}),t})();class $r{constructor(t,e,n){this.route=t,this.childContexts=e,this.parent=n}get(t,e){return t===Sn?this.route:t===Ur?this.childContexts:this.parent.get(t,e)}}class Wr{}class Qr{preload(t,e){return Object(ft.a)(null)}}let Yr=(()=>{class t{constructor(t,e,n,r,i){this.router=t,this.injector=r,this.preloadingStrategy=i,this.loader=new Lr(e,n,e=>t.triggerEvent(new xe(e)),e=>t.triggerEvent(new Ae(e)))}setUpPreloading(){this.subscription=this.router.events.pipe(Jt(t=>t instanceof we),te(()=>this.preload())).subscribe(()=>{})}preload(){const t=this.injector.get(r.y);return this.processRoutes(t,this.router.config)}ngOnDestroy(){this.subscription&&this.subscription.unsubscribe()}processRoutes(t,e){const n=[];for(const r of e)if(r.loadChildren&&!r.canLoad&&r._loadedConfig){const t=r._loadedConfig;n.push(this.processRoutes(t.module,t.routes))}else r.loadChildren&&!r.canLoad?n.push(this.preloadConfig(t,r)):r.children&&n.push(this.processRoutes(t,r.children));return Object(ht.a)(n).pipe(Object(At.a)(),Object(Rt.a)(t=>{}))}preloadConfig(t,e){return this.preloadingStrategy.preload(e,()=>(e._loadedConfig?Object(ft.a)(e._loadedConfig):this.loader.load(t.injector,e)).pipe(Object(Zt.a)(t=>(e._loadedConfig=t,this.processRoutes(t.module,t.routes)))))}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Hr),r.Mb(r.x),r.Mb(r.i),r.Mb(r.s),r.Mb(Wr))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})(),Xr=(()=>{class t{constructor(t,e,n={}){this.router=t,this.viewportScroller=e,this.options=n,this.lastId=0,this.lastSource="imperative",this.restoredId=0,this.store={},n.scrollPositionRestoration=n.scrollPositionRestoration||"disabled",n.anchorScrolling=n.anchorScrolling||"disabled"}init(){"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.setHistoryScrollRestoration("manual"),this.routerEventsSubscription=this.createScrollEvents(),this.scrollEventsSubscription=this.consumeScrollEvents()}createScrollEvents(){return this.router.events.subscribe(t=>{t instanceof be?(this.store[this.lastId]=this.viewportScroller.getScrollPosition(),this.lastSource=t.navigationTrigger,this.restoredId=t.restoredState?t.restoredState.navigationId:0):t instanceof we&&(this.lastId=t.id,this.scheduleScrollEvent(t,this.router.parseUrl(t.urlAfterRedirects).fragment))})}consumeScrollEvents(){return this.router.events.subscribe(t=>{t instanceof Re&&(t.position?"top"===this.options.scrollPositionRestoration?this.viewportScroller.scrollToPosition([0,0]):"enabled"===this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition(t.position):t.anchor&&"enabled"===this.options.anchorScrolling?this.viewportScroller.scrollToAnchor(t.anchor):"disabled"!==this.options.scrollPositionRestoration&&this.viewportScroller.scrollToPosition([0,0]))})}scheduleScrollEvent(t,e){this.router.triggerEvent(new Re(t,"popstate"===this.lastSource?this.store[this.restoredId]:null,e))}ngOnDestroy(){this.routerEventsSubscription&&this.routerEventsSubscription.unsubscribe(),this.scrollEventsSubscription&&this.scrollEventsSubscription.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Hr),r.Mb(D),r.Mb(void 0))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();const Zr=new r.r("ROUTER_CONFIGURATION"),ti=new r.r("ROUTER_FORROOT_GUARD"),ei=[_,{provide:tn,useClass:en},{provide:Hr,useFactory:function(t,e,n,r,i,s,a,u={},c,l){const h=new Hr(null,t,e,n,r,i,s,Be(a));if(c&&(h.urlHandlingStrategy=c),l&&(h.routeReuseStrategy=l),function(t,e){t.errorHandler&&(e.errorHandler=t.errorHandler),t.malformedUriErrorHandler&&(e.malformedUriErrorHandler=t.malformedUriErrorHandler),t.onSameUrlNavigation&&(e.onSameUrlNavigation=t.onSameUrlNavigation),t.paramsInheritanceStrategy&&(e.paramsInheritanceStrategy=t.paramsInheritanceStrategy),t.relativeLinkResolution&&(e.relativeLinkResolution=t.relativeLinkResolution),t.urlUpdateStrategy&&(e.urlUpdateStrategy=t.urlUpdateStrategy)}(u,h),u.enableTracing){const t=o();h.events.subscribe(e=>{t.logGroup(`Router Event: ${e.constructor.name}`),t.log(e.toString()),t.log(e),t.logGroupEnd()})}return h},deps:[tn,Ur,_,r.s,r.x,r.i,Pr,Zr,[class{},new r.B],[class{},new r.B]]},Ur,{provide:Sn,useFactory:function(t){return t.routerState.root},deps:[Hr]},{provide:r.x,useClass:r.K},Yr,Qr,class{preload(t,e){return e().pipe(Qt(()=>Object(ft.a)(null)))}},{provide:Zr,useValue:{enableTracing:!1}}];function ni(){return new r.z("Router",Hr)}let ri=(()=>{class t{constructor(t,e){}static forRoot(e,n){return{ngModule:t,providers:[ei,ai(e),{provide:ti,useFactory:si,deps:[[Hr,new r.B,new r.J]]},{provide:Zr,useValue:n||{}},{provide:m,useFactory:oi,deps:[a,[new r.p(v),new r.B],Zr]},{provide:Xr,useFactory:ii,deps:[Hr,D,Zr]},{provide:Wr,useExisting:n&&n.preloadingStrategy?n.preloadingStrategy:Qr},{provide:r.z,multi:!0,useFactory:ni},[ui,{provide:r.d,multi:!0,useFactory:ci,deps:[ui]},{provide:hi,useFactory:li,deps:[ui]},{provide:r.b,multi:!0,useExisting:hi}]]}}static forChild(e){return{ngModule:t,providers:[ai(e)]}}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(ti,8),r.Mb(Hr,8))},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({}),t})();function ii(t,e,n){return n.scrollOffset&&e.setOffset(n.scrollOffset),new Xr(t,e,n)}function oi(t,e,n={}){return n.useHash?new w(t,e):new b(t,e)}function si(t){return"guarded"}function ai(t){return[{provide:r.a,multi:!0,useValue:t},{provide:Pr,multi:!0,useValue:t}]}let ui=(()=>{class t{constructor(t){this.injector=t,this.initNavigation=!1,this.resultOfPreactivationDone=new dt.a}appInitializer(){return this.injector.get(c,Promise.resolve(null)).then(()=>{let t=null;const e=new Promise(e=>t=e),n=this.injector.get(Hr),r=this.injector.get(Zr);return"disabled"===r.initialNavigation?(n.setUpLocationChangeListener(),t(!0)):"enabled"===r.initialNavigation||"enabledBlocking"===r.initialNavigation?(n.hooks.afterPreactivation=()=>this.initNavigation?Object(ft.a)(null):(this.initNavigation=!0,t(!0),this.resultOfPreactivationDone),n.initialNavigation()):t(!0),e})}bootstrapListener(t){const e=this.injector.get(Zr),n=this.injector.get(Yr),i=this.injector.get(Xr),o=this.injector.get(Hr),s=this.injector.get(r.g);t===s.components[0]&&("enabledNonBlocking"!==e.initialNavigation&&void 0!==e.initialNavigation||o.initialNavigation(),n.setUpPreloading(),i.init(),o.resetRootComponentType(s.componentTypes[0]),this.resultOfPreactivationDone.next(null),this.resultOfPreactivationDone.complete())}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(r.s))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac}),t})();function ci(t){return t.appInitializer.bind(t)}function li(t){return t.bootstrapListener.bind(t)}const hi=new r.r("Router Initializer");var fi=n("D0XW");function di(){return t=>t.lift(new pi)}class pi{call(t,e){return e.subscribe(new gi(t))}}class gi extends vt.a{constructor(t){super(t),this.hasPrev=!1}_next(t){let e;this.hasPrev?e=[this.prev,t]:this.hasPrev=!0,this.prev=t,e&&this.destination.next(e)}}class mi{constructor(t,e){this.compare=t,this.keySelector=e}call(t,e){return e.subscribe(new yi(t,this.compare,this.keySelector))}}class yi extends vt.a{constructor(t,e,n){super(t),this.keySelector=n,this.hasKey=!1,"function"==typeof e&&(this.compare=e)}compare(t,e){return t===e}_next(t){let e;try{const{keySelector:n}=this;e=n?n(t):t}catch(r){return this.destination.error(r)}let n=!1;if(this.hasKey)try{const{compare:t}=this;n=t(this.key,e)}catch(r){return this.destination.error(r)}else this.hasKey=!0;n||(this.key=e,this.destination.next(t))}}var vi=n("pxpQ"),bi=n("spgP"),wi=n("Jgta"),_i=n("zIRd"),Ii=n("q/0M"),Ei=n("qOnz"),Si=function(t,e){return(Si=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(t,e){t.__proto__=e}||function(t,e){for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n])})(t,e)};function Oi(t){var e="function"==typeof Symbol&&Symbol.iterator,n=e&&t[e],r=0;if(n)return n.call(t);if(t&&"number"==typeof t.length)return{next:function(){return t&&r>=t.length&&(t=void 0),{value:t&&t[r++],done:!t}}};throw new TypeError(e?"Object is not iterable.":"Symbol.iterator is not defined.")}var Ti,Ci="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},xi=xi||{},Ai=Ci||self;function ji(){}function ki(t){var e=typeof t;return"array"==(e="object"!=e?e:t?Array.isArray(t)?"array":e:"null")||"object"==e&&"number"==typeof t.length}function Ni(t){var e=typeof t;return"object"==e&&null!=t||"function"==e}var Di="closure_uid_"+(1e9*Math.random()>>>0),Ri=0;function Pi(t,e,n){return t.call.apply(t.bind,arguments)}function Li(t,e,n){if(!t)throw Error();if(2<arguments.length){var r=Array.prototype.slice.call(arguments,2);return function(){var n=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(n,r),t.apply(e,n)}}return function(){return t.apply(e,arguments)}}function Mi(t,e,n){return(Mi=Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?Pi:Li).apply(null,arguments)}function Ui(t,e){var n=Array.prototype.slice.call(arguments,1);return function(){var e=n.slice();return e.push.apply(e,arguments),t.apply(this,e)}}function Fi(){return Date.now()}function Vi(t,e){function n(){}n.prototype=e.prototype,t.X=e.prototype,t.prototype=new n,t.prototype.constructor=t,t.Kb=function(t,n,r){for(var i=Array(arguments.length-2),o=2;o<arguments.length;o++)i[o-2]=arguments[o];return e.prototype[n].apply(t,i)}}function qi(){this.j=this.j,this.i=this.i}qi.prototype.j=!1,qi.prototype.ja=function(){!this.j&&(this.j=!0,this.G(),0)&&function(t){Object.prototype.hasOwnProperty.call(t,Di)&&t[Di]||(t[Di]=++Ri)}(this)},qi.prototype.G=function(){if(this.i)for(;this.i.length;)this.i.shift()()};var Bi=Array.prototype.indexOf?function(t,e){return Array.prototype.indexOf.call(t,e,void 0)}:function(t,e){if("string"==typeof t)return"string"!=typeof e||1!=e.length?-1:t.indexOf(e,0);for(var n=0;n<t.length;n++)if(n in t&&t[n]===e)return n;return-1},Hi=Array.prototype.forEach?function(t,e,n){Array.prototype.forEach.call(t,e,n)}:function(t,e,n){for(var r=t.length,i="string"==typeof t?t.split(""):t,o=0;o<r;o++)o in i&&e.call(n,i[o],o,t)};function zi(t){return Array.prototype.concat.apply([],arguments)}function Gi(t){var e=t.length;if(0<e){for(var n=Array(e),r=0;r<e;r++)n[r]=t[r];return n}return[]}function Ki(t){return/^[\s\xa0]*$/.test(t)}var Ji,$i=String.prototype.trim?function(t){return t.trim()}:function(t){return/^[\s\xa0]*([\s\S]*?)[\s\xa0]*$/.exec(t)[1]};function Wi(t,e){return-1!=t.indexOf(e)}function Qi(t,e){return t<e?-1:t>e?1:0}t:{var Yi=Ai.navigator;if(Yi){var Xi=Yi.userAgent;if(Xi){Ji=Xi;break t}}Ji=""}function Zi(t,e,n){for(var r in t)e.call(n,t[r],r,t)}function to(t){var e={};for(var n in t)e[n]=t[n];return e}var eo="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function no(t,e){for(var n,r,i=1;i<arguments.length;i++){for(n in r=arguments[i])t[n]=r[n];for(var o=0;o<eo.length;o++)n=eo[o],Object.prototype.hasOwnProperty.call(r,n)&&(t[n]=r[n])}}function ro(t){return ro[" "](t),t}ro[" "]=ji;var io,oo,so=Wi(Ji,"Opera"),ao=Wi(Ji,"Trident")||Wi(Ji,"MSIE"),uo=Wi(Ji,"Edge"),co=uo||ao,lo=Wi(Ji,"Gecko")&&!(Wi(Ji.toLowerCase(),"webkit")&&!Wi(Ji,"Edge"))&&!(Wi(Ji,"Trident")||Wi(Ji,"MSIE"))&&!Wi(Ji,"Edge"),ho=Wi(Ji.toLowerCase(),"webkit")&&!Wi(Ji,"Edge");function fo(){var t=Ai.document;return t?t.documentMode:void 0}t:{var po="",go=(oo=Ji,lo?/rv:([^\);]+)(\)|;)/.exec(oo):uo?/Edge\/([\d\.]+)/.exec(oo):ao?/\b(?:MSIE|rv)[: ]([^\);]+)(\)|;)/.exec(oo):ho?/WebKit\/(\S+)/.exec(oo):so?/(?:Version)[ \/]?(\S+)/.exec(oo):void 0);if(go&&(po=go?go[1]:""),ao){var mo=fo();if(null!=mo&&mo>parseFloat(po)){io=String(mo);break t}}io=po}var yo={};function vo(t){return function(t,e){var n=yo;return Object.prototype.hasOwnProperty.call(n,t)?n[t]:n[t]=e()}(t,function(){for(var e=0,n=$i(String(io)).split("."),r=$i(String(t)).split("."),i=Math.max(n.length,r.length),o=0;0==e&&o<i;o++){var s=n[o]||"",a=r[o]||"";do{if(s=/(\d*)(\D*)(.*)/.exec(s)||["","","",""],a=/(\d*)(\D*)(.*)/.exec(a)||["","","",""],0==s[0].length&&0==a[0].length)break;e=Qi(0==s[1].length?0:parseInt(s[1],10),0==a[1].length?0:parseInt(a[1],10))||Qi(0==s[2].length,0==a[2].length)||Qi(s[2],a[2]),s=s[3],a=a[3]}while(0==e)}return 0<=e})}var bo=Ai.document&&ao&&(fo()||parseInt(io,10))||void 0,wo=!ao||9<=Number(bo),_o=ao&&!vo("9"),Io=function(){if(!Ai.addEventListener||!Object.defineProperty)return!1;var t=!1,e=Object.defineProperty({},"passive",{get:function(){t=!0}});try{Ai.addEventListener("test",ji,e),Ai.removeEventListener("test",ji,e)}catch(n){}return t}();function Eo(t,e){this.type=t,this.a=this.target=e,this.defaultPrevented=!1}function So(t,e){if(Eo.call(this,t?t.type:""),this.relatedTarget=this.a=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.pointerId=0,this.pointerType="",this.c=null,t){var n=this.type=t.type,r=t.changedTouches&&t.changedTouches.length?t.changedTouches[0]:null;if(this.target=t.target||t.srcElement,this.a=e,e=t.relatedTarget){if(lo){t:{try{ro(e.nodeName);var i=!0;break t}catch(o){}i=!1}i||(e=null)}}else"mouseover"==n?e=t.fromElement:"mouseout"==n&&(e=t.toElement);this.relatedTarget=e,r?(this.clientX=void 0!==r.clientX?r.clientX:r.pageX,this.clientY=void 0!==r.clientY?r.clientY:r.pageY,this.screenX=r.screenX||0,this.screenY=r.screenY||0):(this.clientX=void 0!==t.clientX?t.clientX:t.pageX,this.clientY=void 0!==t.clientY?t.clientY:t.pageY,this.screenX=t.screenX||0,this.screenY=t.screenY||0),this.button=t.button,this.key=t.key||"",this.ctrlKey=t.ctrlKey,this.altKey=t.altKey,this.shiftKey=t.shiftKey,this.metaKey=t.metaKey,this.pointerId=t.pointerId||0,this.pointerType="string"==typeof t.pointerType?t.pointerType:Oo[t.pointerType]||"",this.c=t,t.defaultPrevented&&this.b()}}Eo.prototype.b=function(){this.defaultPrevented=!0},Vi(So,Eo);var Oo={2:"touch",3:"pen",4:"mouse"};So.prototype.b=function(){So.X.b.call(this);var t=this.c;if(t.preventDefault)t.preventDefault();else if(t.returnValue=!1,_o)try{(t.ctrlKey||112<=t.keyCode&&123>=t.keyCode)&&(t.keyCode=-1)}catch(e){}};var To="closure_listenable_"+(1e6*Math.random()|0),Co=0;function xo(t,e,n,r,i){this.listener=t,this.proxy=null,this.src=e,this.type=n,this.capture=!!r,this.ca=i,this.key=++Co,this.Y=this.Z=!1}function Ao(t){t.Y=!0,t.listener=null,t.proxy=null,t.src=null,t.ca=null}function jo(t){this.src=t,this.a={},this.b=0}function ko(t,e){var n=e.type;if(n in t.a){var r,i=t.a[n],o=Bi(i,e);(r=0<=o)&&Array.prototype.splice.call(i,o,1),r&&(Ao(e),0==t.a[n].length&&(delete t.a[n],t.b--))}}function No(t,e,n,r){for(var i=0;i<t.length;++i){var o=t[i];if(!o.Y&&o.listener==e&&o.capture==!!n&&o.ca==r)return i}return-1}jo.prototype.add=function(t,e,n,r,i){var o=t.toString();(t=this.a[o])||(t=this.a[o]=[],this.b++);var s=No(t,e,r,i);return-1<s?(e=t[s],n||(e.Z=!1)):((e=new xo(e,this.src,o,!!r,i)).Z=n,t.push(e)),e};var Do="closure_lm_"+(1e6*Math.random()|0),Ro={};function Po(t,e,n,r,i){if(r&&r.once)return Mo(t,e,n,r,i);if(Array.isArray(e)){for(var o=0;o<e.length;o++)Po(t,e[o],n,r,i);return null}return n=Go(n),t&&t[To]?t.va(e,n,Ni(r)?!!r.capture:!!r,i):Lo(t,e,n,!1,r,i)}function Lo(t,e,n,r,i,o){if(!e)throw Error("Invalid event type");var s=Ni(i)?!!i.capture:!!i;if(s&&!wo)return null;var a=Ho(t);if(a||(t[Do]=a=new jo(t)),(n=a.add(e,n,r,s,o)).proxy)return n;if(r=function(){var t=Bo,e=wo?function(n){return t.call(e.src,e.listener,n)}:function(n){if(!(n=t.call(e.src,e.listener,n)))return n};return e}(),n.proxy=r,r.src=t,r.listener=n,t.addEventListener)Io||(i=s),void 0===i&&(i=!1),t.addEventListener(e.toString(),r,i);else if(t.attachEvent)t.attachEvent(Vo(e.toString()),r);else{if(!t.addListener||!t.removeListener)throw Error("addEventListener and attachEvent are unavailable.");t.addListener(r)}return n}function Mo(t,e,n,r,i){if(Array.isArray(e)){for(var o=0;o<e.length;o++)Mo(t,e[o],n,r,i);return null}return n=Go(n),t&&t[To]?t.wa(e,n,Ni(r)?!!r.capture:!!r,i):Lo(t,e,n,!0,r,i)}function Uo(t,e,n,r,i){if(Array.isArray(e))for(var o=0;o<e.length;o++)Uo(t,e[o],n,r,i);else r=Ni(r)?!!r.capture:!!r,n=Go(n),t&&t[To]?(t=t.c,(e=String(e).toString())in t.a&&-1<(n=No(o=t.a[e],n,r,i))&&(Ao(o[n]),Array.prototype.splice.call(o,n,1),0==o.length&&(delete t.a[e],t.b--))):t&&(t=Ho(t))&&(e=t.a[e.toString()],t=-1,e&&(t=No(e,n,r,i)),(n=-1<t?e[t]:null)&&Fo(n))}function Fo(t){if("number"!=typeof t&&t&&!t.Y){var e=t.src;if(e&&e[To])ko(e.c,t);else{var n=t.type,r=t.proxy;e.removeEventListener?e.removeEventListener(n,r,t.capture):e.detachEvent?e.detachEvent(Vo(n),r):e.addListener&&e.removeListener&&e.removeListener(r),(n=Ho(e))?(ko(n,t),0==n.b&&(n.src=null,e[Do]=null)):Ao(t)}}}function Vo(t){return t in Ro?Ro[t]:Ro[t]="on"+t}function qo(t,e){var n=t.listener,r=t.ca||t.src;return t.Z&&Fo(t),n.call(r,e)}function Bo(t,e){if(t.Y)return!0;if(!wo){if(!e)t:{e=["window","event"];for(var n=Ai,r=0;r<e.length;r++)if(null==(n=n[e[r]])){e=null;break t}e=n}return qo(t,e=new So(e,this))}return qo(t,new So(e,this))}function Ho(t){return(t=t[Do])instanceof jo?t:null}var zo="__closure_events_fn_"+(1e9*Math.random()>>>0);function Go(t){return"function"==typeof t?t:(t[zo]||(t[zo]=function(e){return t.handleEvent(e)}),t[zo])}function Ko(){qi.call(this),this.c=new jo(this),this.J=this,this.C=null}function Jo(t,e){var n,r=t.C;if(r)for(n=[];r;r=r.C)n.push(r);if(t=t.J,r=e.type||e,"string"==typeof e)e=new Eo(e,t);else if(e instanceof Eo)e.target=e.target||t;else{var i=e;no(e=new Eo(r,t),i)}if(i=!0,n)for(var o=n.length-1;0<=o;o--){var s=e.a=n[o];i=$o(s,r,!0,e)&&i}if(i=$o(s=e.a=t,r,!0,e)&&i,i=$o(s,r,!1,e)&&i,n)for(o=0;o<n.length;o++)i=$o(s=e.a=n[o],r,!1,e)&&i}function $o(t,e,n,r){if(!(e=t.c.a[String(e)]))return!0;e=e.concat();for(var i=!0,o=0;o<e.length;++o){var s=e[o];if(s&&!s.Y&&s.capture==n){var a=s.listener,u=s.ca||s.src;s.Z&&ko(t.c,s),i=!1!==a.call(u,r)&&i}}return i&&!r.defaultPrevented}Vi(Ko,qi),Ko.prototype[To]=!0,(Ti=Ko.prototype).addEventListener=function(t,e,n,r){Po(this,t,e,n,r)},Ti.removeEventListener=function(t,e,n,r){Uo(this,t,e,n,r)},Ti.G=function(){if(Ko.X.G.call(this),this.c){var t,e=this.c;for(t in e.a){for(var n=e.a[t],r=0;r<n.length;r++)Ao(n[r]);delete e.a[t],e.b--}}this.C=null},Ti.va=function(t,e,n,r){return this.c.add(String(t),e,!1,n,r)},Ti.wa=function(t,e,n,r){return this.c.add(String(t),e,!0,n,r)};var Wo=Ai.JSON.stringify;function Qo(){this.b=this.a=null}var Yo,Xo=new(function(){function t(t,e){this.c=t,this.f=e,this.b=0,this.a=null}return t.prototype.get=function(){var t;return 0<this.b?(this.b--,this.a=(t=this.a).next,t.next=null):t=this.c(),t},t}())(function(){return new ts},function(t){t.reset()});function Zo(){var t=is,e=null;return t.a&&(e=t.a,t.a=t.a.next,t.a||(t.b=null),e.next=null),e}function ts(){this.next=this.b=this.a=null}function es(t){Ai.setTimeout(function(){throw t},0)}function ns(t,e){Yo||function(){var t=Ai.Promise.resolve(void 0);Yo=function(){t.then(os)}}(),rs||(Yo(),rs=!0),is.add(t,e)}Qo.prototype.add=function(t,e){var n=Xo.get();n.set(t,e),this.b?this.b.next=n:this.a=n,this.b=n},ts.prototype.set=function(t,e){this.a=t,this.b=e,this.next=null},ts.prototype.reset=function(){this.next=this.b=this.a=null};var rs=!1,is=new Qo;function os(){for(var t;t=Zo();){try{t.a.call(t.b)}catch(n){es(n)}var e=Xo;e.f(t),100>e.b&&(e.b++,t.next=e.a,e.a=t)}rs=!1}function ss(t,e){Ko.call(this),this.b=t||1,this.a=e||Ai,this.f=Mi(this.Za,this),this.g=Fi()}function as(t){t.aa=!1,t.M&&(t.a.clearTimeout(t.M),t.M=null)}function us(t,e,n){if("function"==typeof t)n&&(t=Mi(t,n));else{if(!t||"function"!=typeof t.handleEvent)throw Error("Invalid listener argument");t=Mi(t.handleEvent,t)}return 2147483647<Number(e)?-1:Ai.setTimeout(t,e||0)}function cs(t){t.a=us(function(){t.a=null,t.c&&(t.c=!1,cs(t))},t.h);var e=t.b;t.b=null,t.g.apply(null,e)}Vi(ss,Ko),(Ti=ss.prototype).aa=!1,Ti.M=null,Ti.Za=function(){if(this.aa){var t=Fi()-this.g;0<t&&t<.8*this.b?this.M=this.a.setTimeout(this.f,this.b-t):(this.M&&(this.a.clearTimeout(this.M),this.M=null),Jo(this,"tick"),this.aa&&(as(this),this.start()))}},Ti.start=function(){this.aa=!0,this.M||(this.M=this.a.setTimeout(this.f,this.b),this.g=Fi())},Ti.G=function(){ss.X.G.call(this),as(this),delete this.a};var ls=function(t){function e(e,n){var r=t.call(this)||this;return r.g=e,r.h=n,r.b=null,r.c=!1,r.a=null,r}return function(t,e){function n(){this.constructor=t}Si(t,e),t.prototype=null===e?Object.create(e):(n.prototype=e.prototype,new n)}(e,t),e.prototype.f=function(t){this.b=arguments,this.a?this.c=!0:cs(this)},e.prototype.G=function(){t.prototype.G.call(this),this.a&&(Ai.clearTimeout(this.a),this.a=null,this.c=!1,this.b=null)},e}(qi);function hs(t){qi.call(this),this.b=t,this.a={}}Vi(hs,qi);var fs=[];function ds(t,e,n,r){Array.isArray(n)||(n&&(fs[0]=n.toString()),n=fs);for(var i=0;i<n.length;i++){var o=Po(e,n[i],r||t.handleEvent,!1,t.b||t);if(!o)break;t.a[o.key]=o}}function ps(t){Zi(t.a,function(t,e){this.a.hasOwnProperty(e)&&Fo(t)},t),t.a={}}function gs(){this.a=!0}function ms(t,e,n,r){t.info(function(){return"XMLHTTP TEXT ("+e+"): "+function(t,e){if(!t.a)return e;if(!e)return null;try{var n=JSON.parse(e);if(n)for(t=0;t<n.length;t++)if(Array.isArray(n[t])){var r=n[t];if(!(2>r.length)){var i=r[1];if(Array.isArray(i)&&!(1>i.length)){var o=i[0];if("noop"!=o&&"stop"!=o&&"close"!=o)for(var s=1;s<i.length;s++)i[s]=""}}}return Wo(n)}catch(a){return e}}(t,n)+(r?" "+r:"")})}hs.prototype.G=function(){hs.X.G.call(this),ps(this)},hs.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")},gs.prototype.info=function(){};var ys={},vs=null;function bs(){return vs=vs||new Ko}function ws(t){Eo.call(this,ys.Fa,t)}function _s(t){var e=bs();Jo(e,new ws(e,t))}function Is(t,e){Eo.call(this,ys.STAT_EVENT,t),this.stat=e}function Es(t){var e=bs();Jo(e,new Is(e,t))}function Ss(t){Eo.call(this,ys.Ga,t)}function Os(t,e){if("function"!=typeof t)throw Error("Fn must not be null and must be a function");return Ai.setTimeout(function(){t()},e)}ys.Fa="serverreachability",Vi(ws,Eo),ys.STAT_EVENT="statevent",Vi(Is,Eo),ys.Ga="timingevent",Vi(Ss,Eo);var Ts={NO_ERROR:0,$a:1,nb:2,mb:3,hb:4,lb:5,ob:6,Da:7,TIMEOUT:8,rb:9},Cs={fb:"complete",Bb:"success",Ea:"error",Da:"abort",tb:"ready",ub:"readystatechange",TIMEOUT:"timeout",pb:"incrementaldata",sb:"progress",ib:"downloadprogress",Jb:"uploadprogress"};function xs(){}function As(){}xs.prototype.a=null;var js,ks={OPEN:"a",eb:"b",Ea:"c",qb:"d"};function Ns(){Eo.call(this,"d")}function Ds(){Eo.call(this,"c")}function Rs(){}function Ps(t,e,n,r){this.g=t,this.c=e,this.f=n,this.S=r||1,this.J=new hs(this),this.P=Ls,this.R=new ss(t=co?125:void 0),this.B=null,this.b=!1,this.j=this.l=this.i=this.H=this.u=this.T=this.o=null,this.s=[],this.a=null,this.D=0,this.h=this.m=null,this.N=-1,this.A=!1,this.O=0,this.F=null,this.V=this.C=this.U=this.I=!1}Vi(Ns,Eo),Vi(Ds,Eo),Vi(Rs,xs),js=new Rs;var Ls=45e3,Ms={},Us={};function Fs(t,e,n){t.H=1,t.i=aa(ea(e)),t.j=n,t.I=!0,Vs(t,null)}function Vs(t,e){t.u=Fi(),Hs(t),t.l=ea(t.i);var n=t.l,r=t.S;Array.isArray(r)||(r=[String(r)]),wa(n.b,"t",r),t.D=0,t.a=pu(t.g,t.g.C?e:null),0<t.O&&(t.F=new ls(Mi(t.Ca,t,t.a),t.O)),ds(t.J,t.a,"readystatechange",t.Xa),e=t.B?to(t.B):{},t.j?(t.m||(t.m="POST"),e["Content-Type"]="application/x-www-form-urlencoded",t.a.ba(t.l,t.m,t.j,e)):(t.m="GET",t.a.ba(t.l,t.m,null,e)),_s(1),function(t,e,n,r,i,o){t.info(function(){if(t.a)if(o)for(var s="",a=o.split("&"),u=0;u<a.length;u++){var c=a[u].split("=");if(1<c.length){var l=c[0];c=c[1];var h=l.split("_");s=2<=h.length&&"type"==h[1]?s+(l+"=")+c+"&":s+(l+"=redacted&")}}else s=null;else s=o;return"XMLHTTP REQ ("+r+") [attempt "+i+"]: "+e+"\n"+n+"\n"+s})}(t.c,t.m,t.l,t.f,t.S,t.j)}function qs(t,e,n){for(var r=!0;!t.A&&t.D<n.length;){var i=Bs(t,n);if(i==Us){4==e&&(t.h=4,Es(14),r=!1),ms(t.c,t.f,null,"[Incomplete Response]");break}if(i==Ms){t.h=4,Es(15),ms(t.c,t.f,n,"[Invalid Chunk]"),r=!1;break}ms(t.c,t.f,i,null),$s(t,i)}4==e&&0==n.length&&(t.h=1,Es(16),r=!1),t.b=t.b&&r,r?0<n.length&&!t.V&&(t.V=!0,(e=t.g).a==t&&e.U&&!e.F&&(e.c.info("Great, no buffering proxy detected. Bytes received: "+n.length),su(e),e.F=!0,Es(11))):(ms(t.c,t.f,n,"[Invalid Chunked Response]"),Js(t),Ks(t))}function Bs(t,e){var n=t.D,r=e.indexOf("\n",n);return-1==r?Us:(n=Number(e.substring(n,r)),isNaN(n)?Ms:(r+=1)+n>e.length?Us:(e=e.substr(r,n),t.D=r+n,e))}function Hs(t){t.T=Fi()+t.P,zs(t,t.P)}function zs(t,e){if(null!=t.o)throw Error("WatchDog timer not null");t.o=Os(Mi(t.Va,t),e)}function Gs(t){t.o&&(Ai.clearTimeout(t.o),t.o=null)}function Ks(t){0==t.g.v||t.A||cu(t.g,t)}function Js(t){Gs(t);var e=t.F;e&&"function"==typeof e.ja&&e.ja(),t.F=null,as(t.R),ps(t.J),t.a&&(e=t.a,t.a=null,e.abort(),e.ja())}function $s(t,e){try{var n=t.g;if(0!=n.v&&(n.a==t||Ca(n.b,t)))if(n.I=t.N,!t.C&&Ca(n.b,t)&&3==n.v){try{var r=n.ka.a.parse(e)}catch(Xy){r=null}if(Array.isArray(r)&&3==r.length){var i=r;if(0==i[0]){t:if(!n.j){if(n.a){if(!(n.a.u+3e3<t.u))break t;uu(n),Ya(n)}ou(n),Es(18)}}else n.oa=i[1],0<n.oa-n.P&&37500>i[2]&&n.H&&0==n.o&&!n.m&&(n.m=Os(Mi(n.Sa,n),6e3));if(1>=Ta(n.b)&&n.ea){try{n.ea()}catch(Xy){}n.ea=void 0}}else hu(n,11)}else if((t.C||n.a==t)&&uu(n),!Ki(e))for(e=r=n.ka.a.parse(e),r=0;r<e.length;r++)if(n.P=(i=e[r])[0],i=i[1],2==n.v)if("c"==i[0]){n.J=i[1],n.ga=i[2];var o=i[3];null!=o&&(n.ha=o,n.c.info("VER="+n.ha));var s=i[4];null!=s&&(n.pa=s,n.c.info("SVER="+n.pa));var a=i[5];if(null!=a&&"number"==typeof a&&0<a){var u=1.5*a;n.D=u,n.c.info("backChannelRequestTimeoutMs_="+u)}u=n;var c=t.a;if(c){var l=c.a?c.a.getResponseHeader("X-Client-Wire-Protocol"):null;if(l){var h=u.b;!h.a&&(Wi(l,"spdy")||Wi(l,"quic")||Wi(l,"h2"))&&(h.f=h.g,h.a=new Set,h.b&&(xa(h,h.b),h.b=null))}if(u.A){var f=c.a?c.a.getResponseHeader("X-HTTP-Session-Id"):null;f&&(u.na=f,sa(u.B,u.A,f))}}n.v=3,n.f&&n.f.ta(),n.U&&(n.N=Fi()-t.u,n.c.info("Handshake RTT: "+n.N+"ms"));var d=t;if((u=n).la=du(u,u.C?u.ga:null,u.fa),d.C){Aa(u.b,d);var p=d,g=u.D;g&&p.setTimeout(g),p.o&&(Gs(p),Hs(p)),u.a=d}else iu(u);0<n.g.length&&tu(n)}else"stop"!=i[0]&&"close"!=i[0]||hu(n,7);else 3==n.v&&("stop"==i[0]||"close"==i[0]?"stop"==i[0]?hu(n,7):Qa(n):"noop"!=i[0]&&n.f&&n.f.sa(i),n.o=0);_s(4)}catch(Xy){}}function Ws(t,e){if(t.forEach&&"function"==typeof t.forEach)t.forEach(e,void 0);else if(ki(t)||"string"==typeof t)Hi(t,e,void 0);else{if(t.L&&"function"==typeof t.L)var n=t.L();else if(t.K&&"function"==typeof t.K)n=void 0;else if(ki(t)||"string"==typeof t){n=[];for(var r=t.length,i=0;i<r;i++)n.push(i)}else for(i in n=[],r=0,t)n[r++]=i;i=(r=function(t){if(t.K&&"function"==typeof t.K)return t.K();if("string"==typeof t)return t.split("");if(ki(t)){for(var e=[],n=t.length,r=0;r<n;r++)e.push(t[r]);return e}for(r in e=[],n=0,t)e[n++]=t[r];return e}(t)).length;for(var o=0;o<i;o++)e.call(void 0,r[o],n&&n[o],t)}}function Qs(t,e){this.b={},this.a=[],this.c=0;var n=arguments.length;if(1<n){if(n%2)throw Error("Uneven number of arguments");for(var r=0;r<n;r+=2)this.set(arguments[r],arguments[r+1])}else if(t)if(t instanceof Qs)for(n=t.L(),r=0;r<n.length;r++)this.set(n[r],t.get(n[r]));else for(r in t)this.set(r,t[r])}function Ys(t){if(t.c!=t.a.length){for(var e=0,n=0;e<t.a.length;){var r=t.a[e];Xs(t.b,r)&&(t.a[n++]=r),e++}t.a.length=n}if(t.c!=t.a.length){var i={};for(n=e=0;e<t.a.length;)Xs(i,r=t.a[e])||(t.a[n++]=r,i[r]=1),e++;t.a.length=n}}function Xs(t,e){return Object.prototype.hasOwnProperty.call(t,e)}(Ti=Ps.prototype).setTimeout=function(t){this.P=t},Ti.Xa=function(t){t=t.target;var e=this.F;e&&3==Ka(t)?e.f():this.Ca(t)},Ti.Ca=function(t){try{if(t==this.a)t:{var e=Ka(this.a),n=this.a.ua(),r=this.a.W();if(!(3>e||3==e&&!co&&!this.a.$())){this.A||4!=e||7==n||_s(8==n||0>=r?3:2),Gs(this);var i=this.a.W();this.N=i;var o=this.a.$();if(this.b=200==i,function(t,e,n,r,i,o,s){t.info(function(){return"XMLHTTP RESP ("+r+") [ attempt "+i+"]: "+e+"\n"+n+"\n"+o+" "+s})}(this.c,this.m,this.l,this.f,this.S,e,i),this.b){if(this.U&&!this.C){e:{if(this.a){var s,a=this.a;if((s=a.a?a.a.getResponseHeader("X-HTTP-Initial-Response"):null)&&!Ki(s)){var u=s;break e}}u=null}if(!u){this.b=!1,this.h=3,Es(12),Js(this),Ks(this);break t}ms(this.c,this.f,u,"Initial handshake response via X-HTTP-Initial-Response"),this.C=!0,$s(this,u)}this.I?(qs(this,e,o),co&&this.b&&3==e&&(ds(this.J,this.R,"tick",this.Wa),this.R.start())):(ms(this.c,this.f,o,null),$s(this,o)),4==e&&Js(this),this.b&&!this.A&&(4==e?cu(this.g,this):(this.b=!1,Hs(this)))}else 400==i&&0<o.indexOf("Unknown SID")?(this.h=3,Es(12)):(this.h=0,Es(13)),Js(this),Ks(this)}}}catch(c){}},Ti.Wa=function(){if(this.a){var t=Ka(this.a),e=this.a.$();this.D<e.length&&(Gs(this),qs(this,t,e),this.b&&4!=t&&Hs(this))}},Ti.cancel=function(){this.A=!0,Js(this)},Ti.Va=function(){this.o=null;var t=Fi();0<=t-this.T?(function(t,e){t.info(function(){return"TIMEOUT: "+e})}(this.c,this.l),2!=this.H&&(_s(3),Es(17)),Js(this),this.h=2,Ks(this)):zs(this,this.T-t)},(Ti=Qs.prototype).K=function(){Ys(this);for(var t=[],e=0;e<this.a.length;e++)t.push(this.b[this.a[e]]);return t},Ti.L=function(){return Ys(this),this.a.concat()},Ti.get=function(t,e){return Xs(this.b,t)?this.b[t]:e},Ti.set=function(t,e){Xs(this.b,t)||(this.c++,this.a.push(t)),this.b[t]=e},Ti.forEach=function(t,e){for(var n=this.L(),r=0;r<n.length;r++){var i=n[r],o=this.get(i);t.call(e,o,i,this)}};var Zs=/^(?:([^:/?#.]+):)?(?:\/\/(?:([^\\/?#]*)@)?([^\\/?#]*?)(?::([0-9]+))?(?=[\\/?#]|$))?([^?#]+)?(?:\?([^#]*))?(?:#([\s\S]*))?$/;function ta(t,e){if(this.c=this.j=this.f="",this.h=null,this.i=this.g="",this.a=!1,t instanceof ta){this.a=void 0!==e?e:t.a,na(this,t.f),this.j=t.j,ra(this,t.c),ia(this,t.h),this.g=t.g,e=t.b;var n=new ma;n.c=e.c,e.a&&(n.a=new Qs(e.a),n.b=e.b),oa(this,n),this.i=t.i}else t&&(n=String(t).match(Zs))?(this.a=!!e,na(this,n[1]||"",!0),this.j=ua(n[2]||""),ra(this,n[3]||"",!0),ia(this,n[4]),this.g=ua(n[5]||"",!0),oa(this,n[6]||"",!0),this.i=ua(n[7]||"")):(this.a=!!e,this.b=new ma(null,this.a))}function ea(t){return new ta(t)}function na(t,e,n){t.f=n?ua(e,!0):e,t.f&&(t.f=t.f.replace(/:$/,""))}function ra(t,e,n){t.c=n?ua(e,!0):e}function ia(t,e){if(e){if(e=Number(e),isNaN(e)||0>e)throw Error("Bad port number "+e);t.h=e}else t.h=null}function oa(t,e,n){e instanceof ma?(t.b=e,function(t,e){e&&!t.f&&(ya(t),t.c=null,t.a.forEach(function(t,e){var n=e.toLowerCase();e!=n&&(va(this,e),wa(this,n,t))},t)),t.f=e}(t.b,t.a)):(n||(e=ca(e,pa)),t.b=new ma(e,t.a))}function sa(t,e,n){t.b.set(e,n)}function aa(t){return sa(t,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Fi()).toString(36)),t}function ua(t,e){return t?e?decodeURI(t.replace(/%25/g,"%2525")):decodeURIComponent(t):""}function ca(t,e,n){return"string"==typeof t?(t=encodeURI(t).replace(e,la),n&&(t=t.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),t):null}function la(t){return"%"+((t=t.charCodeAt(0))>>4&15).toString(16)+(15&t).toString(16)}ta.prototype.toString=function(){var t=[],e=this.f;e&&t.push(ca(e,ha,!0),":");var n=this.c;return(n||"file"==e)&&(t.push("//"),(e=this.j)&&t.push(ca(e,ha,!0),"@"),t.push(encodeURIComponent(String(n)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),null!=(n=this.h)&&t.push(":",String(n))),(n=this.g)&&(this.c&&"/"!=n.charAt(0)&&t.push("/"),t.push(ca(n,"/"==n.charAt(0)?da:fa,!0))),(n=this.b.toString())&&t.push("?",n),(n=this.i)&&t.push("#",ca(n,ga)),t.join("")};var ha=/[#\/\?@]/g,fa=/[#\?:]/g,da=/[#\?]/g,pa=/[#\?@]/g,ga=/#/g;function ma(t,e){this.b=this.a=null,this.c=t||null,this.f=!!e}function ya(t){t.a||(t.a=new Qs,t.b=0,t.c&&function(t,e){if(t){t=t.split("&");for(var n=0;n<t.length;n++){var r=t[n].indexOf("="),i=null;if(0<=r){var o=t[n].substring(0,r);i=t[n].substring(r+1)}else o=t[n];e(o,i?decodeURIComponent(i.replace(/\+/g," ")):"")}}}(t.c,function(e,n){t.add(decodeURIComponent(e.replace(/\+/g," ")),n)}))}function va(t,e){ya(t),e=_a(t,e),Xs(t.a.b,e)&&(t.c=null,t.b-=t.a.get(e).length,Xs((t=t.a).b,e)&&(delete t.b[e],t.c--,t.a.length>2*t.c&&Ys(t)))}function ba(t,e){return ya(t),e=_a(t,e),Xs(t.a.b,e)}function wa(t,e,n){va(t,e),0<n.length&&(t.c=null,t.a.set(_a(t,e),Gi(n)),t.b+=n.length)}function _a(t,e){return e=String(e),t.f&&(e=e.toLowerCase()),e}(Ti=ma.prototype).add=function(t,e){ya(this),this.c=null,t=_a(this,t);var n=this.a.get(t);return n||this.a.set(t,n=[]),n.push(e),this.b+=1,this},Ti.forEach=function(t,e){ya(this),this.a.forEach(function(n,r){Hi(n,function(n){t.call(e,n,r,this)},this)},this)},Ti.L=function(){ya(this);for(var t=this.a.K(),e=this.a.L(),n=[],r=0;r<e.length;r++)for(var i=t[r],o=0;o<i.length;o++)n.push(e[r]);return n},Ti.K=function(t){ya(this);var e=[];if("string"==typeof t)ba(this,t)&&(e=zi(e,this.a.get(_a(this,t))));else{t=this.a.K();for(var n=0;n<t.length;n++)e=zi(e,t[n])}return e},Ti.set=function(t,e){return ya(this),this.c=null,ba(this,t=_a(this,t))&&(this.b-=this.a.get(t).length),this.a.set(t,[e]),this.b+=1,this},Ti.get=function(t,e){return t&&0<(t=this.K(t)).length?String(t[0]):e},Ti.toString=function(){if(this.c)return this.c;if(!this.a)return"";for(var t=[],e=this.a.L(),n=0;n<e.length;n++){var r=e[n],i=encodeURIComponent(String(r));r=this.K(r);for(var o=0;o<r.length;o++){var s=i;""!==r[o]&&(s+="="+encodeURIComponent(String(r[o]))),t.push(s)}}return this.c=t.join("&")};var Ia=function(){return function(t,e){this.b=t,this.a=e}}();function Ea(t){this.g=t||Sa,t=Ai.PerformanceNavigationTiming?0<(t=Ai.performance.getEntriesByType("navigation")).length&&("hq"==t[0].nextHopProtocol||"h2"==t[0].nextHopProtocol):!!(Ai.ia&&Ai.ia.ya&&Ai.ia.ya()&&Ai.ia.ya().Lb),this.f=t?this.g:1,this.a=null,1<this.f&&(this.a=new Set),this.b=null,this.c=[]}var Sa=10;function Oa(t){return!!t.b||!!t.a&&t.a.size>=t.f}function Ta(t){return t.b?1:t.a?t.a.size:0}function Ca(t,e){return t.b?t.b==e:!!t.a&&t.a.has(e)}function xa(t,e){t.a?t.a.add(e):t.b=e}function Aa(t,e){t.b&&t.b==e?t.b=null:t.a&&t.a.has(e)&&t.a.delete(e)}function ja(t){var e,n;if(null!=t.b)return t.c.concat(t.b.s);if(null!=t.a&&0!==t.a.size){var r=t.c;try{for(var i=Oi(t.a.values()),o=i.next();!o.done;o=i.next())r=r.concat(o.value.s)}catch(s){e={error:s}}finally{try{o&&!o.done&&(n=i.return)&&n.call(i)}finally{if(e)throw e.error}}return r}return Gi(t.c)}function ka(){}function Na(){this.a=new ka}function Da(t,e,n){var r=n||"";try{Ws(t,function(t,n){var i=t;Ni(t)&&(i=Wo(t)),e.push(r+n+"="+encodeURIComponent(i))})}catch(Fv){throw e.push(r+"type="+encodeURIComponent("_badmap")),Fv}}function Ra(t,e,n,r,i){try{e.onload=null,e.onerror=null,e.onabort=null,e.ontimeout=null,i(r)}catch(o){}}Ea.prototype.cancel=function(){var t,e;if(this.c=ja(this),this.b)this.b.cancel(),this.b=null;else if(this.a&&0!==this.a.size){try{for(var n=Oi(this.a.values()),r=n.next();!r.done;r=n.next())r.value.cancel()}catch(i){t={error:i}}finally{try{r&&!r.done&&(e=n.return)&&e.call(n)}finally{if(t)throw t.error}}this.a.clear()}},ka.prototype.stringify=function(t){return Ai.JSON.stringify(t,void 0)},ka.prototype.parse=function(t){return Ai.JSON.parse(t,void 0)};var Pa=Ai.JSON.parse;function La(t){Ko.call(this),this.headers=new Qs,this.H=t||null,this.b=!1,this.s=this.a=null,this.B="",this.h=0,this.f="",this.g=this.A=this.l=this.u=!1,this.o=0,this.m=null,this.I=Ma,this.D=this.F=!1}Vi(La,Ko);var Ma="",Ua=/^https?$/i,Fa=["POST","PUT"];function Va(t){return"content-type"==t.toLowerCase()}function qa(t,e){t.b=!1,t.a&&(t.g=!0,t.a.abort(),t.g=!1),t.f=e,t.h=5,Ba(t),za(t)}function Ba(t){t.u||(t.u=!0,Jo(t,"complete"),Jo(t,"error"))}function Ha(t){if(t.b&&void 0!==xi&&(!t.s[1]||4!=Ka(t)||2!=t.W()))if(t.l&&4==Ka(t))us(t.za,0,t);else if(Jo(t,"readystatechange"),4==Ka(t)){t.b=!1;try{var e,n=t.W();t:switch(n){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var r=!0;break t;default:r=!1}if(!(e=r)){var i;if(i=0===n){var o=String(t.B).match(Zs)[1]||null;if(!o&&Ai.self&&Ai.self.location){var s=Ai.self.location.protocol;o=s.substr(0,s.length-1)}i=!Ua.test(o?o.toLowerCase():"")}e=i}if(e)Jo(t,"complete"),Jo(t,"success");else{t.h=6;try{var a=2<Ka(t)?t.a.statusText:""}catch(n){a=""}t.f=a+" ["+t.W()+"]",Ba(t)}}finally{za(t)}}}function za(t,e){if(t.a){Ga(t);var n=t.a,r=t.s[0]?ji:null;t.a=null,t.s=null,e||Jo(t,"ready");try{n.onreadystatechange=r}catch(Fv){}}}function Ga(t){t.a&&t.D&&(t.a.ontimeout=null),t.m&&(Ai.clearTimeout(t.m),t.m=null)}function Ka(t){return t.a?t.a.readyState:0}function Ja(t,e,n){t:{for(r in n){var r=!1;break t}r=!0}r||(n=function(t){var e="";return Zi(t,function(t,n){e+=n,e+=":",e+=t,e+="\r\n"}),e}(n),"string"==typeof t?null!=n&&encodeURIComponent(String(n)):sa(t,e,n))}function $a(t,e,n){return n&&n.internalChannelParams&&n.internalChannelParams[t]||e}function Wa(t){this.pa=0,this.g=[],this.c=new gs,this.ga=this.la=this.B=this.fa=this.a=this.na=this.A=this.V=this.i=this.O=this.l=null,this.Oa=this.R=0,this.La=$a("failFast",!1,t),this.H=this.m=this.j=this.h=this.f=null,this.S=!0,this.I=this.oa=this.P=-1,this.T=this.o=this.u=0,this.Ha=$a("baseRetryDelayMs",5e3,t),this.Ra=$a("retryDelaySeedMs",1e4,t),this.Ma=$a("forwardChannelMaxRetries",2,t),this.ma=$a("forwardChannelRequestTimeoutMs",2e4,t),this.Na=t&&t.g||void 0,this.D=void 0,this.C=t&&t.supportsCrossDomainXhr||!1,this.J="",this.b=new Ea(t&&t.concurrentRequestLimit),this.ka=new Na,this.da=t&&t.fastHandshake||!1,this.Ia=t&&t.b||!1,t&&t.f&&(this.c.a=!1),t&&t.forceLongPolling&&(this.S=!1),this.U=!this.da&&this.S&&t&&t.detectBufferingProxy||!1,this.ea=void 0,this.N=0,this.F=!1,this.s=null,(this.Ka=t&&t.c||!1)&&this.c.info("Opt-in to enable Chrome Origin Trials.")}function Qa(t){if(Xa(t),3==t.v){var e=t.R++,n=ea(t.B);sa(n,"SID",t.J),sa(n,"RID",e),sa(n,"TYPE","terminate"),nu(t,n),(e=new Ps(t,t.c,e,void 0)).H=2,e.i=aa(ea(n)),n=!1,Ai.navigator&&Ai.navigator.sendBeacon&&(n=Ai.navigator.sendBeacon(e.i.toString(),"")),!n&&Ai.Image&&((new Image).src=e.i,n=!0),n||(e.a=pu(e.g,null),e.a.ba(e.i)),e.u=Fi(),Hs(e)}fu(t)}function Ya(t){t.a&&(su(t),t.a.cancel(),t.a=null)}function Xa(t){Ya(t),t.j&&(Ai.clearTimeout(t.j),t.j=null),uu(t),t.b.cancel(),t.h&&("number"==typeof t.h&&Ai.clearTimeout(t.h),t.h=null)}function Za(t,e){t.g.push(new Ia(t.Oa++,e)),3==t.v&&tu(t)}function tu(t){Oa(t.b)||t.h||(t.h=!0,ns(t.Ba,t),t.u=0)}function eu(t,e){var n;n=e?e.f:t.R++;var r=ea(t.B);sa(r,"SID",t.J),sa(r,"RID",n),sa(r,"AID",t.P),nu(t,r),t.i&&t.l&&Ja(r,t.i,t.l),n=new Ps(t,t.c,n,t.u+1),null===t.i&&(n.B=t.l),e&&(t.g=e.s.concat(t.g)),e=ru(t,n,1e3),n.setTimeout(Math.round(.5*t.ma)+Math.round(.5*t.ma*Math.random())),xa(t.b,n),Fs(n,r,e)}function nu(t,e){t.f&&Ws({},function(t,n){sa(e,n,t)})}function ru(t,e,n){n=Math.min(t.g.length,n);var r=t.f?Mi(t.f.Ja,t.f,t):null;t:for(var i=t.g,o=-1;;){var s=["count="+n];-1==o?0<n?s.push("ofs="+(o=i[0].b)):o=0:s.push("ofs="+o);for(var a=!0,u=0;u<n;u++){var c=i[u].b,l=i[u].a;if(0>(c-=o))o=Math.max(0,i[u].b-100),a=!1;else try{Da(l,s,"req"+c+"_")}catch(Ju){r&&r(l)}}if(a){r=s.join("&");break t}}return t=t.g.splice(0,n),e.s=t,r}function iu(t){t.a||t.j||(t.T=1,ns(t.Aa,t),t.o=0)}function ou(t){return!(t.a||t.j||3<=t.o||(t.T++,t.j=Os(Mi(t.Aa,t),lu(t,t.o)),t.o++,0))}function su(t){null!=t.s&&(Ai.clearTimeout(t.s),t.s=null)}function au(t){t.a=new Ps(t,t.c,"rpc",t.T),null===t.i&&(t.a.B=t.l),t.a.O=0;var e=ea(t.la);sa(e,"RID","rpc"),sa(e,"SID",t.J),sa(e,"CI",t.H?"0":"1"),sa(e,"AID",t.P),nu(t,e),sa(e,"TYPE","xmlhttp"),t.i&&t.l&&Ja(e,t.i,t.l),t.D&&t.a.setTimeout(t.D);var n=t.a;t=t.ga,n.H=1,n.i=aa(ea(e)),n.j=null,n.I=!0,Vs(n,t)}function uu(t){null!=t.m&&(Ai.clearTimeout(t.m),t.m=null)}function cu(t,e){var n=null;if(t.a==e){uu(t),su(t),t.a=null;var r=2}else{if(!Ca(t.b,e))return;n=e.s,Aa(t.b,e),r=1}if(t.I=e.N,0!=t.v)if(e.b)if(1==r){n=e.j?e.j.length:0,e=Fi()-e.u;var i=t.u;Jo(r=bs(),new Ss(r,n,e,i)),tu(t)}else iu(t);else if(3==(i=e.h)||0==i&&0<t.I||!(1==r&&function(t,e){return!(Ta(t.b)>=t.b.f-(t.h?1:0)||(t.h?(t.g=e.s.concat(t.g),0):1==t.v||2==t.v||t.u>=(t.La?0:t.Ma)||(t.h=Os(Mi(t.Ba,t,e),lu(t,t.u)),t.u++,0)))}(t,e)||2==r&&ou(t)))switch(n&&0<n.length&&(e=t.b,e.c=e.c.concat(n)),i){case 1:hu(t,5);break;case 4:hu(t,10);break;case 3:hu(t,6);break;default:hu(t,2)}}function lu(t,e){var n=t.Ha+Math.floor(Math.random()*t.Ra);return t.f||(n*=2),n*e}function hu(t,e){if(t.c.info("Error code "+e),2==e){var n=null;t.f&&(n=null);var r=Mi(t.Ya,t);n||(n=new ta("//www.google.com/images/cleardot.gif"),Ai.location&&"http"==Ai.location.protocol||na(n,"https"),aa(n)),function(t,e){var n=new gs;if(Ai.Image){var r=new Image;r.onload=Ui(Ra,n,r,"TestLoadImage: loaded",!0,e),r.onerror=Ui(Ra,n,r,"TestLoadImage: error",!1,e),r.onabort=Ui(Ra,n,r,"TestLoadImage: abort",!1,e),r.ontimeout=Ui(Ra,n,r,"TestLoadImage: timeout",!1,e),Ai.setTimeout(function(){r.ontimeout&&r.ontimeout()},1e4),r.src=t}else e(!1)}(n.toString(),r)}else Es(2);t.v=0,t.f&&t.f.ra(e),fu(t),Xa(t)}function fu(t){t.v=0,t.I=-1,t.f&&(0==ja(t.b).length&&0==t.g.length||(t.b.c.length=0,Gi(t.g),t.g.length=0),t.f.qa())}function du(t,e,n){var r=function(t){return t instanceof ta?ea(t):new ta(t,void 0)}(n);if(""!=r.c)e&&ra(r,e+"."+r.c),ia(r,r.h);else{var i=Ai.location;r=function(t,e,n,r){var i=new ta(null,void 0);return t&&na(i,t),e&&ra(i,e),n&&ia(i,n),r&&(i.g=r),i}(i.protocol,e?e+"."+i.hostname:i.hostname,+i.port,n)}return t.V&&Zi(t.V,function(t,e){sa(r,e,t)}),n=t.na,(e=t.A)&&n&&sa(r,e,n),sa(r,"VER",t.ha),nu(t,r),r}function pu(t,e){if(e&&!t.C)throw Error("Can't create secondary domain capable XhrIo object.");return(e=new La(t.Na)).F=t.C,e}function gu(){}function mu(){if(ao&&!(10<=Number(bo)))throw Error("Environmental error: no available transport.")}function yu(t,e){Ko.call(this),this.a=new Wa(e),this.o=t,this.b=e&&e.messageUrlParams||null,t=e&&e.messageHeaders||null,e&&e.clientProtocolHeaderRequired&&(t?t["X-Client-Protocol"]="webchannel":t={"X-Client-Protocol":"webchannel"}),this.a.l=t,t=e&&e.initMessageHeaders||null,e&&e.messageContentType&&(t?t["X-WebChannel-Content-Type"]=e.messageContentType:t={"X-WebChannel-Content-Type":e.messageContentType}),e&&e.a&&(t?t["X-WebChannel-Client-Profile"]=e.a:t={"X-WebChannel-Client-Profile":e.a}),this.a.O=t,(t=e&&e.httpHeadersOverwriteParam)&&!Ki(t)&&(this.a.i=t),this.m=e&&e.supportsCrossDomainXhr||!1,this.l=e&&e.sendRawJson||!1,(e=e&&e.httpSessionIdParam)&&!Ki(e)&&(this.a.A=e,null!==(t=this.b)&&e in t&&e in(t=this.b)&&delete t[e]),this.f=new wu(this)}function vu(t){Ns.call(this);var e=t.__sm__;if(e){t:{for(var n in e){t=n;break t}t=void 0}(this.c=t)?(t=this.c,this.data=null!==e&&t in e?e[t]:void 0):this.data=e}else this.data=t}function bu(){Ds.call(this),this.status=1}function wu(t){this.a=t}(Ti=La.prototype).ba=function(t,e,n,r){if(this.a)throw Error("[goog.net.XhrIo] Object is active with another request="+this.B+"; newUri="+t);e=e?e.toUpperCase():"GET",this.B=t,this.f="",this.h=0,this.u=!1,this.b=!0,this.a=new XMLHttpRequest,this.s=function(t){var e;return(e=t.a)||(e=t.a={}),e}(this.H?this.H:js),this.a.onreadystatechange=Mi(this.za,this);try{this.A=!0,this.a.open(e,String(t),!0),this.A=!1}catch(o){return void qa(this,o)}t=n||"";var i=new Qs(this.headers);r&&Ws(r,function(t,e){i.set(e,t)}),r=function(t){t:{for(var e=Va,n=t.length,r="string"==typeof t?t.split(""):t,i=0;i<n;i++)if(i in r&&e.call(void 0,r[i],i,t)){e=i;break t}e=-1}return 0>e?null:"string"==typeof t?t.charAt(e):t[e]}(i.L()),n=Ai.FormData&&t instanceof Ai.FormData,!(0<=Bi(Fa,e))||r||n||i.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8"),i.forEach(function(t,e){this.a.setRequestHeader(e,t)},this),this.I&&(this.a.responseType=this.I),"withCredentials"in this.a&&this.a.withCredentials!==this.F&&(this.a.withCredentials=this.F);try{Ga(this),0<this.o&&((this.D=function(t){return ao&&vo(9)&&"number"==typeof t.timeout&&void 0!==t.ontimeout}(this.a))?(this.a.timeout=this.o,this.a.ontimeout=Mi(this.xa,this)):this.m=us(this.xa,this.o,this)),this.l=!0,this.a.send(t),this.l=!1}catch(o){qa(this,o)}},Ti.xa=function(){void 0!==xi&&this.a&&(this.f="Timed out after "+this.o+"ms, aborting",this.h=8,Jo(this,"timeout"),this.abort(8))},Ti.abort=function(t){this.a&&this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1,this.h=t||7,Jo(this,"complete"),Jo(this,"abort"),za(this))},Ti.G=function(){this.a&&(this.b&&(this.b=!1,this.g=!0,this.a.abort(),this.g=!1),za(this,!0)),La.X.G.call(this)},Ti.za=function(){this.j||(this.A||this.l||this.g?Ha(this):this.Ua())},Ti.Ua=function(){Ha(this)},Ti.W=function(){try{return 2<Ka(this)?this.a.status:-1}catch(oo){return-1}},Ti.$=function(){try{return this.a?this.a.responseText:""}catch(oo){return""}},Ti.Pa=function(t){if(this.a){var e=this.a.responseText;return t&&0==e.indexOf(t)&&(e=e.substring(t.length)),Pa(e)}},Ti.ua=function(){return this.h},Ti.Qa=function(){return"string"==typeof this.f?this.f:String(this.f)},(Ti=Wa.prototype).ha=8,Ti.v=1,Ti.Ba=function(t){if(this.h)if(this.h=null,1==this.v){if(!t){this.R=Math.floor(1e5*Math.random()),t=this.R++;var e,n=new Ps(this,this.c,t,void 0),r=this.l;if(this.O&&(r?no(r=to(r),this.O):r=this.O),null===this.i&&(n.B=r),this.da)t:{for(var i=e=0;i<this.g.length;i++){var o=this.g[i];if(void 0===(o="__data__"in o.a&&"string"==typeof(o=o.a.__data__)?o.length:void 0))break;if(4096<(e+=o)){e=i;break t}if(4096===e||i===this.g.length-1){e=i+1;break t}}e=1e3}else e=1e3;e=ru(this,n,e),sa(i=ea(this.B),"RID",t),sa(i,"CVER",22),this.A&&sa(i,"X-HTTP-Session-Id",this.A),nu(this,i),this.i&&r&&Ja(i,this.i,r),xa(this.b,n),this.Ia&&sa(i,"TYPE","init"),this.da?(sa(i,"$req",e),sa(i,"SID","null"),n.U=!0,Fs(n,i,null)):Fs(n,i,e),this.v=2}}else 3==this.v&&(t?eu(this,t):0==this.g.length||Oa(this.b)||eu(this))},Ti.Aa=function(){if(this.j=null,au(this),this.U&&!(this.F||null==this.a||0>=this.N)){var t=2*this.N;this.c.info("BP detection timer enabled: "+t),this.s=Os(Mi(this.Ta,this),t)}},Ti.Ta=function(){this.s&&(this.s=null,this.c.info("BP detection timeout reached."),this.c.info("Buffering proxy detected and switch to long-polling!"),this.H=!1,this.F=!0,Es(10),Ya(this),au(this))},Ti.Sa=function(){null!=this.m&&(this.m=null,Ya(this),ou(this),Es(19))},Ti.Ya=function(t){t?(this.c.info("Successfully pinged google.com"),Es(2)):(this.c.info("Failed to ping google.com"),Es(1))},(Ti=gu.prototype).ta=function(){},Ti.sa=function(){},Ti.ra=function(){},Ti.qa=function(){},Ti.Ja=function(){},mu.prototype.a=function(t,e){return new yu(t,e)},Vi(yu,Ko),yu.prototype.g=function(){this.a.f=this.f,this.m&&(this.a.C=!0);var t=this.a,e=this.o,n=this.b||void 0;Es(0),t.fa=e,t.V=n||{},t.H=t.S,t.B=du(t,null,t.fa),tu(t)},yu.prototype.close=function(){Qa(this.a)},yu.prototype.h=function(t){if("string"==typeof t){var e={};e.__data__=t,Za(this.a,e)}else this.l?((e={}).__data__=Wo(t),Za(this.a,e)):Za(this.a,t)},yu.prototype.G=function(){this.a.f=null,delete this.f,Qa(this.a),delete this.a,yu.X.G.call(this)},Vi(vu,Ns),Vi(bu,Ds),Vi(wu,gu),wu.prototype.ta=function(){Jo(this.a,"a")},wu.prototype.sa=function(t){Jo(this.a,new vu(t))},wu.prototype.ra=function(t){Jo(this.a,new bu(t))},wu.prototype.qa=function(){Jo(this.a,"b")},mu.prototype.createWebChannel=mu.prototype.a,yu.prototype.send=yu.prototype.h,yu.prototype.open=yu.prototype.g,yu.prototype.close=yu.prototype.close,Ts.NO_ERROR=0,Ts.TIMEOUT=8,Ts.HTTP_ERROR=6,Cs.COMPLETE="complete",As.EventType=ks,ks.OPEN="a",ks.CLOSE="b",ks.ERROR="c",ks.MESSAGE="d",Ko.prototype.listen=Ko.prototype.va,La.prototype.listenOnce=La.prototype.wa,La.prototype.getLastError=La.prototype.Qa,La.prototype.getLastErrorCode=La.prototype.ua,La.prototype.getStatus=La.prototype.W,La.prototype.getResponseJson=La.prototype.Pa,La.prototype.getResponseText=La.prototype.$,La.prototype.send=La.prototype.ba;var _u=Ts,Iu=Cs,Eu=ys,Su=As,Ou=La,Tu=n("mrSG"),Cu=function(){function t(t,e){var n=this;this.previousValue=t,e&&(e.sequenceNumberHandler=function(t){return n.t(t)},this.i=function(t){return e.writeSequenceNumber(t)})}return t.prototype.t=function(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue},t.prototype.next=function(){var t=++this.previousValue;return this.i&&this.i(t),t},t}();Cu.o=-1;var xu=new Ii.b("@firebase/firestore");function Au(){return xu.logLevel}function ju(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xu.logLevel<=Ii.a.DEBUG){var r=e.map(Du);xu.debug.apply(xu,Object(Tu.f)(["Firestore (8.3.1): "+t],r))}}function ku(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xu.logLevel<=Ii.a.ERROR){var r=e.map(Du);xu.error.apply(xu,Object(Tu.f)(["Firestore (8.3.1): "+t],r))}}function Nu(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];if(xu.logLevel<=Ii.a.WARN){var r=e.map(Du);xu.warn.apply(xu,Object(Tu.f)(["Firestore (8.3.1): "+t],r))}}function Du(t){if("string"==typeof t)return t;try{return JSON.stringify(t)}catch(Fv){return t}}function Ru(t){void 0===t&&(t="Unexpected state");var e="FIRESTORE (8.3.1) INTERNAL ASSERTION FAILED: "+t;throw ku(e),new Error(e)}function Pu(t,e){t||Ru()}function Lu(t,e){return t}function Mu(t){var e="undefined"!=typeof self&&(self.crypto||self.msCrypto),n=new Uint8Array(t);if(e&&"function"==typeof e.getRandomValues)e.getRandomValues(n);else for(var r=0;r<t;r++)n[r]=Math.floor(256*Math.random());return n}var Uu=function(){function t(){}return t.u=function(){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=Math.floor(256/t.length)*t.length,n="";n.length<20;)for(var r=Mu(40),i=0;i<r.length;++i)n.length<20&&r[i]<e&&(n+=t.charAt(r[i]%t.length));return n},t}();function Fu(t,e){return t<e?-1:t>e?1:0}function Vu(t,e,n){return t.length===e.length&&t.every(function(t,r){return n(t,e[r])})}function qu(t){return t+"\0"}function Bu(t){var e=0;for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e++;return e}function Hu(t,e){for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e(n,t[n])}function zu(t){for(var e in t)if(Object.prototype.hasOwnProperty.call(t,e))return!1;return!0}function Gu(t){return null==t}function Ku(t){return 0===t&&1/t==-1/0}function Ju(t){return"number"==typeof t&&Number.isInteger(t)&&!Ku(t)&&t<=Number.MAX_SAFE_INTEGER&&t>=Number.MIN_SAFE_INTEGER}var $u={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"},Wu=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).code=e,r.message=n,r.name="FirebaseError",r.toString=function(){return r.name+": [code="+r.code+"]: "+r.message},r}return Object(Tu.c)(e,t),e}(Error),Qu=function(){function t(t,e,n){void 0===e?e=0:e>t.length&&Ru(),void 0===n?n=t.length-e:n>t.length-e&&Ru(),this.segments=t,this.offset=e,this.len=n}return Object.defineProperty(t.prototype,"length",{get:function(){return this.len},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return 0===t.comparator(this,e)},t.prototype.child=function(e){var n=this.segments.slice(this.offset,this.limit());return e instanceof t?e.forEach(function(t){n.push(t)}):n.push(e),this.construct(n)},t.prototype.limit=function(){return this.offset+this.length},t.prototype.popFirst=function(t){return this.construct(this.segments,this.offset+(t=void 0===t?1:t),this.length-t)},t.prototype.popLast=function(){return this.construct(this.segments,this.offset,this.length-1)},t.prototype.firstSegment=function(){return this.segments[this.offset]},t.prototype.lastSegment=function(){return this.get(this.length-1)},t.prototype.get=function(t){return this.segments[this.offset+t]},t.prototype.isEmpty=function(){return 0===this.length},t.prototype.isPrefixOf=function(t){if(t.length<this.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.isImmediateParentOf=function(t){if(this.length+1!==t.length)return!1;for(var e=0;e<this.length;e++)if(this.get(e)!==t.get(e))return!1;return!0},t.prototype.forEach=function(t){for(var e=this.offset,n=this.limit();e<n;e++)t(this.segments[e])},t.prototype.toArray=function(){return this.segments.slice(this.offset,this.limit())},t.comparator=function(t,e){for(var n=Math.min(t.length,e.length),r=0;r<n;r++){var i=t.get(r),o=e.get(r);if(i<o)return-1;if(i>o)return 1}return t.length<e.length?-1:t.length>e.length?1:0},t}(),Yu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.prototype.canonicalString=function(){return this.toArray().join("/")},e.prototype.toString=function(){return this.canonicalString()},e.fromString=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i];if(s.indexOf("//")>=0)throw new Wu($u.INVALID_ARGUMENT,"Invalid segment ("+s+"). Paths must not contain // in them.");r.push.apply(r,s.split("/").filter(function(t){return t.length>0}))}return new e(r)},e.emptyPath=function(){return new e([])},e}(Qu),Xu=/^[_a-zA-Z][_a-zA-Z0-9]*$/,Zu=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.construct=function(t,n,r){return new e(t,n,r)},e.isValidIdentifier=function(t){return Xu.test(t)},e.prototype.canonicalString=function(){return this.toArray().map(function(t){return t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),e.isValidIdentifier(t)||(t="`"+t+"`"),t}).join(".")},e.prototype.toString=function(){return this.canonicalString()},e.prototype.isKeyField=function(){return 1===this.length&&"__name__"===this.get(0)},e.keyField=function(){return new e(["__name__"])},e.fromServerFormat=function(t){for(var n=[],r="",i=0,o=function(){if(0===r.length)throw new Wu($u.INVALID_ARGUMENT,"Invalid field path ("+t+"). Paths must not be empty, begin with '.', end with '.', or contain '..'");n.push(r),r=""},s=!1;i<t.length;){var a=t[i];if("\\"===a){if(i+1===t.length)throw new Wu($u.INVALID_ARGUMENT,"Path has trailing escape character: "+t);var u=t[i+1];if("\\"!==u&&"."!==u&&"`"!==u)throw new Wu($u.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=u,i+=2}else"`"===a?(s=!s,i++):"."!==a||s?(r+=a,i++):(o(),i++)}if(o(),s)throw new Wu($u.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new e(n)},e.emptyPath=function(){return new e([])},e}(Qu),tc=function(){function t(t){this.path=t}return t.fromPath=function(e){return new t(Yu.fromString(e))},t.fromName=function(e){return new t(Yu.fromString(e).popFirst(5))},t.prototype.hasCollectionId=function(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t},t.prototype.isEqual=function(t){return null!==t&&0===Yu.comparator(this.path,t.path)},t.prototype.toString=function(){return this.path.toString()},t.comparator=function(t,e){return Yu.comparator(t.path,e.path)},t.isDocumentKey=function(t){return t.length%2==0},t.fromSegments=function(e){return new t(new Yu(e.slice()))},t}(),ec=function(){function t(t){this.binaryString=t}return t.fromBase64String=function(e){return new t(atob(e))},t.fromUint8Array=function(e){return new t(function(t){for(var e="",n=0;n<t.length;++n)e+=String.fromCharCode(t[n]);return e}(e))},t.prototype.toBase64=function(){return btoa(this.binaryString)},t.prototype.toUint8Array=function(){return function(t){for(var e=new Uint8Array(t.length),n=0;n<t.length;n++)e[n]=t.charCodeAt(n);return e}(this.binaryString)},t.prototype.approximateByteSize=function(){return 2*this.binaryString.length},t.prototype.compareTo=function(t){return Fu(this.binaryString,t.binaryString)},t.prototype.isEqual=function(t){return this.binaryString===t.binaryString},t}();ec.EMPTY_BYTE_STRING=new ec("");var nc=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function rc(t){if(Pu(!!t),"string"==typeof t){var e=0,n=nc.exec(t);if(Pu(!!n),n[1]){var r=n[1];r=(r+"000000000").substr(0,9),e=Number(r)}var i=new Date(t);return{seconds:Math.floor(i.getTime()/1e3),nanos:e}}return{seconds:ic(t.seconds),nanos:ic(t.nanos)}}function ic(t){return"number"==typeof t?t:"string"==typeof t?Number(t):0}function oc(t){return"string"==typeof t?ec.fromBase64String(t):ec.fromUint8Array(t)}var sc=function(){function t(t,e){if(this.seconds=t,this.nanoseconds=e,e<0)throw new Wu($u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(e>=1e9)throw new Wu($u.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+e);if(t<-62135596800)throw new Wu($u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Wu($u.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}return t.now=function(){return t.fromMillis(Date.now())},t.fromDate=function(e){return t.fromMillis(e.getTime())},t.fromMillis=function(e){var n=Math.floor(e/1e3);return new t(n,1e6*(e-1e3*n))},t.prototype.toDate=function(){return new Date(this.toMillis())},t.prototype.toMillis=function(){return 1e3*this.seconds+this.nanoseconds/1e6},t.prototype._compareTo=function(t){return this.seconds===t.seconds?Fu(this.nanoseconds,t.nanoseconds):Fu(this.seconds,t.seconds)},t.prototype.isEqual=function(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds},t.prototype.toString=function(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"},t.prototype.toJSON=function(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}},t.prototype.valueOf=function(){return String(this.seconds- -62135596800).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")},t}();function ac(t){var e,n;return"server_timestamp"===(null===(n=((null===(e=null==t?void 0:t.mapValue)||void 0===e?void 0:e.fields)||{}).__type__)||void 0===n?void 0:n.stringValue)}function uc(t){var e=t.mapValue.fields.__previous_value__;return ac(e)?uc(e):e}function cc(t){var e=rc(t.mapValue.fields.__local_write_time__.timestampValue);return new sc(e.seconds,e.nanos)}function lc(t){return"nullValue"in t?0:"booleanValue"in t?1:"integerValue"in t||"doubleValue"in t?2:"timestampValue"in t?3:"stringValue"in t?5:"bytesValue"in t?6:"referenceValue"in t?7:"geoPointValue"in t?8:"arrayValue"in t?9:"mapValue"in t?ac(t)?4:10:Ru()}function hc(t,e){var n=lc(t);if(n!==lc(e))return!1;switch(n){case 0:return!0;case 1:return t.booleanValue===e.booleanValue;case 4:return cc(t).isEqual(cc(e));case 3:return function(t,e){if("string"==typeof t.timestampValue&&"string"==typeof e.timestampValue&&t.timestampValue.length===e.timestampValue.length)return t.timestampValue===e.timestampValue;var n=rc(t.timestampValue),r=rc(e.timestampValue);return n.seconds===r.seconds&&n.nanos===r.nanos}(t,e);case 5:return t.stringValue===e.stringValue;case 6:return function(t,e){return oc(t.bytesValue).isEqual(oc(e.bytesValue))}(t,e);case 7:return t.referenceValue===e.referenceValue;case 8:return function(t,e){return ic(t.geoPointValue.latitude)===ic(e.geoPointValue.latitude)&&ic(t.geoPointValue.longitude)===ic(e.geoPointValue.longitude)}(t,e);case 2:return function(t,e){if("integerValue"in t&&"integerValue"in e)return ic(t.integerValue)===ic(e.integerValue);if("doubleValue"in t&&"doubleValue"in e){var n=ic(t.doubleValue),r=ic(e.doubleValue);return n===r?Ku(n)===Ku(r):isNaN(n)&&isNaN(r)}return!1}(t,e);case 9:return Vu(t.arrayValue.values||[],e.arrayValue.values||[],hc);case 10:return function(t,e){var n=t.mapValue.fields||{},r=e.mapValue.fields||{};if(Bu(n)!==Bu(r))return!1;for(var i in n)if(n.hasOwnProperty(i)&&(void 0===r[i]||!hc(n[i],r[i])))return!1;return!0}(t,e);default:return Ru()}}function fc(t,e){return void 0!==(t.values||[]).find(function(t){return hc(t,e)})}function dc(t,e){var n=lc(t),r=lc(e);if(n!==r)return Fu(n,r);switch(n){case 0:return 0;case 1:return Fu(t.booleanValue,e.booleanValue);case 2:return function(t,e){var n=ic(t.integerValue||t.doubleValue),r=ic(e.integerValue||e.doubleValue);return n<r?-1:n>r?1:n===r?0:isNaN(n)?isNaN(r)?0:-1:1}(t,e);case 3:return pc(t.timestampValue,e.timestampValue);case 4:return pc(cc(t),cc(e));case 5:return Fu(t.stringValue,e.stringValue);case 6:return function(t,e){var n=oc(t),r=oc(e);return n.compareTo(r)}(t.bytesValue,e.bytesValue);case 7:return function(t,e){for(var n=t.split("/"),r=e.split("/"),i=0;i<n.length&&i<r.length;i++){var o=Fu(n[i],r[i]);if(0!==o)return o}return Fu(n.length,r.length)}(t.referenceValue,e.referenceValue);case 8:return function(t,e){var n=Fu(ic(t.latitude),ic(e.latitude));return 0!==n?n:Fu(ic(t.longitude),ic(e.longitude))}(t.geoPointValue,e.geoPointValue);case 9:return function(t,e){for(var n=t.values||[],r=e.values||[],i=0;i<n.length&&i<r.length;++i){var o=dc(n[i],r[i]);if(o)return o}return Fu(n.length,r.length)}(t.arrayValue,e.arrayValue);case 10:return function(t,e){var n=t.fields||{},r=Object.keys(n),i=e.fields||{},o=Object.keys(i);r.sort(),o.sort();for(var s=0;s<r.length&&s<o.length;++s){var a=Fu(r[s],o[s]);if(0!==a)return a;var u=dc(n[r[s]],i[o[s]]);if(0!==u)return u}return Fu(r.length,o.length)}(t.mapValue,e.mapValue);default:throw Ru()}}function pc(t,e){if("string"==typeof t&&"string"==typeof e&&t.length===e.length)return Fu(t,e);var n=rc(t),r=rc(e),i=Fu(n.seconds,r.seconds);return 0!==i?i:Fu(n.nanos,r.nanos)}function gc(t){return mc(t)}function mc(t){return"nullValue"in t?"null":"booleanValue"in t?""+t.booleanValue:"integerValue"in t?""+t.integerValue:"doubleValue"in t?""+t.doubleValue:"timestampValue"in t?function(t){var e=rc(t);return"time("+e.seconds+","+e.nanos+")"}(t.timestampValue):"stringValue"in t?t.stringValue:"bytesValue"in t?oc(t.bytesValue).toBase64():"referenceValue"in t?tc.fromName(t.referenceValue).toString():"geoPointValue"in t?"geo("+(e=t.geoPointValue).latitude+","+e.longitude+")":"arrayValue"in t?function(t){for(var e="[",n=!0,r=0,i=t.values||[];r<i.length;r++)n?n=!1:e+=",",e+=mc(i[r]);return e+"]"}(t.arrayValue):"mapValue"in t?function(t){for(var e="{",n=!0,r=0,i=Object.keys(t.fields||{}).sort();r<i.length;r++){var o=i[r];n?n=!1:e+=",",e+=o+":"+mc(t.fields[o])}return e+"}"}(t.mapValue):Ru();var e}function yc(t,e){return{referenceValue:"projects/"+t.projectId+"/databases/"+t.database+"/documents/"+e.path.canonicalString()}}function vc(t){return!!t&&"integerValue"in t}function bc(t){return!!t&&"arrayValue"in t}function wc(t){return!!t&&"nullValue"in t}function _c(t){return!!t&&"doubleValue"in t&&isNaN(Number(t.doubleValue))}function Ic(t){return!!t&&"mapValue"in t}var Ec=function(t,e){this.key=t,this.version=e},Sc=function(t){function e(e,n,r,i){var o=this;return(o=t.call(this,e,n)||this).objectValue=r,o.hasLocalMutations=!!i.hasLocalMutations,o.hasCommittedMutations=!!i.hasCommittedMutations,o}return Object(Tu.c)(e,t),e.prototype.field=function(t){return this.objectValue.field(t)},e.prototype.data=function(){return this.objectValue},e.prototype.toProto=function(){return this.objectValue.proto},e.prototype.isEqual=function(t){return t instanceof e&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.hasLocalMutations===t.hasLocalMutations&&this.hasCommittedMutations===t.hasCommittedMutations&&this.objectValue.isEqual(t.objectValue)},e.prototype.toString=function(){return"Document("+this.key+", "+this.version+", "+this.objectValue.toString()+", {hasLocalMutations: "+this.hasLocalMutations+"}), {hasCommittedMutations: "+this.hasCommittedMutations+"})"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasLocalMutations||this.hasCommittedMutations},enumerable:!1,configurable:!0}),e}(Ec),Oc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n)||this).hasCommittedMutations=!(!r||!r.hasCommittedMutations),i}return Object(Tu.c)(e,t),e.prototype.toString=function(){return"NoDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return this.hasCommittedMutations},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.hasCommittedMutations===this.hasCommittedMutations&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ec),Tc=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.toString=function(){return"UnknownDocument("+this.key+", "+this.version+")"},Object.defineProperty(e.prototype,"hasPendingWrites",{get:function(){return!0},enumerable:!1,configurable:!0}),e.prototype.isEqual=function(t){return t instanceof e&&t.version.isEqual(this.version)&&t.key.isEqual(this.key)},e}(Ec),Cc=function(t,e,n,r,i,o,s){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),this.path=t,this.collectionGroup=e,this.orderBy=n,this.filters=r,this.limit=i,this.startAt=o,this.endAt=s,this.h=null};function xc(t,e,n,r,i,o,s){return void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o=null),void 0===s&&(s=null),new Cc(t,e,n,r,i,o,s)}function Ac(t){var e=Lu(t);if(null===e.h){var n=e.path.canonicalString();null!==e.collectionGroup&&(n+="|cg:"+e.collectionGroup),n+="|f:",n+=e.filters.map(function(t){return function(t){return t.field.canonicalString()+t.op.toString()+gc(t.value)}(t)}).join(","),n+="|ob:",n+=e.orderBy.map(function(t){return function(t){return t.field.canonicalString()+t.dir}(t)}).join(","),Gu(e.limit)||(n+="|l:",n+=e.limit),e.startAt&&(n+="|lb:",n+=Bc(e.startAt)),e.endAt&&(n+="|ub:",n+=Bc(e.endAt)),e.h=n}return e.h}function jc(t,e){if(t.limit!==e.limit)return!1;if(t.orderBy.length!==e.orderBy.length)return!1;for(var n=0;n<t.orderBy.length;n++)if(!zc(t.orderBy[n],e.orderBy[n]))return!1;if(t.filters.length!==e.filters.length)return!1;for(var r=0;r<t.filters.length;r++)if((i=t.filters[r]).op!==(o=e.filters[r]).op||!i.field.isEqual(o.field)||!hc(i.value,o.value))return!1;var i,o;return t.collectionGroup===e.collectionGroup&&!!t.path.isEqual(e.path)&&!!Kc(t.startAt,e.startAt)&&Kc(t.endAt,e.endAt)}function kc(t){return tc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}var Nc=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).field=e,i.op=n,i.value=r,i}return Object(Tu.c)(e,t),e.create=function(t,n,r){return t.isKeyField()?"in"===n||"not-in"===n?this.l(t,n,r):new Dc(t,n,r):"array-contains"===n?new Mc(t,r):"in"===n?new Uc(t,r):"not-in"===n?new Fc(t,r):"array-contains-any"===n?new Vc(t,r):new e(t,n,r)},e.l=function(t,e,n){return"in"===e?new Rc(t,n):new Pc(t,n)},e.prototype.matches=function(t){var e=t.field(this.field);return"!="===this.op?null!==e&&this.m(dc(e,this.value)):null!==e&&lc(this.value)===lc(e)&&this.m(dc(e,this.value))},e.prototype.m=function(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return 0===t;case"!=":return 0!==t;case">":return t>0;case">=":return t>=0;default:return Ru()}},e.prototype.g=function(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0},e}(function(){}),Dc=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,r)||this).key=tc.fromName(r.referenceValue),i}return Object(Tu.c)(e,t),e.prototype.matches=function(t){var e=tc.comparator(t.key,this.key);return this.m(e)},e}(Nc),Rc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"in",n)||this).keys=Lc(0,n),r}return Object(Tu.c)(e,t),e.prototype.matches=function(t){return this.keys.some(function(e){return e.isEqual(t.key)})},e}(Nc),Pc=function(t){function e(e,n){var r=this;return(r=t.call(this,e,"not-in",n)||this).keys=Lc(0,n),r}return Object(Tu.c)(e,t),e.prototype.matches=function(t){return!this.keys.some(function(e){return e.isEqual(t.key)})},e}(Nc);function Lc(t,e){var n;return((null===(n=e.arrayValue)||void 0===n?void 0:n.values)||[]).map(function(t){return tc.fromName(t.referenceValue)})}var Mc=function(t){function e(e,n){return t.call(this,e,"array-contains",n)||this}return Object(Tu.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return bc(e)&&fc(e.arrayValue,this.value)},e}(Nc),Uc=function(t){function e(e,n){return t.call(this,e,"in",n)||this}return Object(Tu.c)(e,t),e.prototype.matches=function(t){var e=t.field(this.field);return null!==e&&fc(this.value.arrayValue,e)},e}(Nc),Fc=function(t){function e(e,n){return t.call(this,e,"not-in",n)||this}return Object(Tu.c)(e,t),e.prototype.matches=function(t){if(fc(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;var e=t.field(this.field);return null!==e&&!fc(this.value.arrayValue,e)},e}(Nc),Vc=function(t){function e(e,n){return t.call(this,e,"array-contains-any",n)||this}return Object(Tu.c)(e,t),e.prototype.matches=function(t){var e=this,n=t.field(this.field);return!(!bc(n)||!n.arrayValue.values)&&n.arrayValue.values.some(function(t){return fc(e.value.arrayValue,t)})},e}(Nc),qc=function(t,e){this.position=t,this.before=e};function Bc(t){return(t.before?"b":"a")+":"+t.position.map(function(t){return gc(t)}).join(",")}var Hc=function(t,e){void 0===e&&(e="asc"),this.field=t,this.dir=e};function zc(t,e){return t.dir===e.dir&&t.field.isEqual(e.field)}function Gc(t,e,n){for(var r=0,i=0;i<t.position.length;i++){var o=e[i],s=t.position[i];if(r=o.field.isKeyField()?tc.comparator(tc.fromName(s.referenceValue),n.key):dc(s,n.field(o.field)),"desc"===o.dir&&(r*=-1),0!==r)break}return t.before?r<=0:r<0}function Kc(t,e){if(null===t)return null===e;if(null===e)return!1;if(t.before!==e.before||t.position.length!==e.position.length)return!1;for(var n=0;n<t.position.length;n++)if(!hc(t.position[n],e.position[n]))return!1;return!0}var Jc=function(t,e,n,r,i,o,s,a){void 0===e&&(e=null),void 0===n&&(n=[]),void 0===r&&(r=[]),void 0===i&&(i=null),void 0===o&&(o="F"),void 0===s&&(s=null),void 0===a&&(a=null),this.path=t,this.collectionGroup=e,this.explicitOrderBy=n,this.filters=r,this.limit=i,this.limitType=o,this.startAt=s,this.endAt=a,this.p=null,this.T=null};function $c(t,e,n,r,i,o,s,a){return new Jc(t,e,n,r,i,o,s,a)}function Wc(t){return new Jc(t)}function Qc(t){return!Gu(t.limit)&&"F"===t.limitType}function Yc(t){return!Gu(t.limit)&&"L"===t.limitType}function Xc(t){return t.explicitOrderBy.length>0?t.explicitOrderBy[0].field:null}function Zc(t){for(var e=0,n=t.filters;e<n.length;e++){var r=n[e];if(r.g())return r.field}return null}function tl(t){return null!==t.collectionGroup}function el(t){var e=Lu(t);if(null===e.p){e.p=[];var n=Zc(e),r=Xc(e);if(null!==n&&null===r)n.isKeyField()||e.p.push(new Hc(n)),e.p.push(new Hc(Zu.keyField(),"asc"));else{for(var i=!1,o=0,s=e.explicitOrderBy;o<s.length;o++){var a=s[o];e.p.push(a),a.field.isKeyField()&&(i=!0)}if(!i){var u=e.explicitOrderBy.length>0?e.explicitOrderBy[e.explicitOrderBy.length-1].dir:"asc";e.p.push(new Hc(Zu.keyField(),u))}}}return e.p}function nl(t){var e=Lu(t);if(!e.T)if("F"===e.limitType)e.T=xc(e.path,e.collectionGroup,el(e),e.filters,e.limit,e.startAt,e.endAt);else{for(var n=[],r=0,i=el(e);r<i.length;r++){var o=i[r];n.push(new Hc(o.field,"desc"===o.dir?"asc":"desc"))}var s=e.endAt?new qc(e.endAt.position,!e.endAt.before):null,a=e.startAt?new qc(e.startAt.position,!e.startAt.before):null;e.T=xc(e.path,e.collectionGroup,n,e.filters,e.limit,s,a)}return e.T}function rl(t,e,n){return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),e,n,t.startAt,t.endAt)}function il(t,e){return jc(nl(t),nl(e))&&t.limitType===e.limitType}function ol(t){return Ac(nl(t))+"|lt:"+t.limitType}function sl(t){return"Query(target="+function(t){var e=t.path.canonicalString();return null!==t.collectionGroup&&(e+=" collectionGroup="+t.collectionGroup),t.filters.length>0&&(e+=", filters: ["+t.filters.map(function(t){return(e=t).field.canonicalString()+" "+e.op+" "+gc(e.value);var e}).join(", ")+"]"),Gu(t.limit)||(e+=", limit: "+t.limit),t.orderBy.length>0&&(e+=", orderBy: ["+t.orderBy.map(function(t){return function(t){return t.field.canonicalString()+" ("+t.dir+")"}(t)}).join(", ")+"]"),t.startAt&&(e+=", startAt: "+Bc(t.startAt)),t.endAt&&(e+=", endAt: "+Bc(t.endAt)),"Target("+e+")"}(nl(t))+"; limitType="+t.limitType+")"}function al(t,e){return function(t,e){var n=e.key.path;return null!==t.collectionGroup?e.key.hasCollectionId(t.collectionGroup)&&t.path.isPrefixOf(n):tc.isDocumentKey(t.path)?t.path.isEqual(n):t.path.isImmediateParentOf(n)}(t,e)&&function(t,e){for(var n=0,r=t.explicitOrderBy;n<r.length;n++){var i=r[n];if(!i.field.isKeyField()&&null===e.field(i.field))return!1}return!0}(t,e)&&function(t,e){for(var n=0,r=t.filters;n<r.length;n++)if(!r[n].matches(e))return!1;return!0}(t,e)&&function(t,e){return!(t.startAt&&!Gc(t.startAt,el(t),e)||t.endAt&&Gc(t.endAt,el(t),e))}(t,e)}function ul(t){return function(e,n){for(var r=!1,i=0,o=el(t);i<o.length;i++){var s=o[i],a=cl(s,e,n);if(0!==a)return a;r=r||s.field.isKeyField()}return 0}}function cl(t,e,n){var r=t.field.isKeyField()?tc.comparator(e.key,n.key):function(t,e,n){var r=e.field(t),i=n.field(t);return null!==r&&null!==i?dc(r,i):Ru()}(t.field,e,n);switch(t.dir){case"asc":return r;case"desc":return-1*r;default:return Ru()}}var ll=function(){function t(t){this.timestamp=t}return t.fromTimestamp=function(e){return new t(e)},t.min=function(){return new t(new sc(0,0))},t.prototype.compareTo=function(t){return this.timestamp._compareTo(t.timestamp)},t.prototype.isEqual=function(t){return this.timestamp.isEqual(t.timestamp)},t.prototype.toMicroseconds=function(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3},t.prototype.toString=function(){return"SnapshotVersion("+this.timestamp.toString()+")"},t.prototype.toTimestamp=function(){return this.timestamp},t}(),hl=function(){function t(t){this.fields=t,t.sort(Zu.comparator)}return t.prototype.covers=function(t){for(var e=0,n=this.fields;e<n.length;e++)if(n[e].isPrefixOf(t))return!0;return!1},t.prototype.isEqual=function(t){return Vu(this.fields,t.fields,function(t,e){return t.isEqual(e)})},t}(),fl=function(){function t(t){this.proto=t}return t.empty=function(){return new t({mapValue:{}})},t.prototype.field=function(t){if(t.isEmpty())return this.proto;for(var e=this.proto,n=0;n<t.length-1;++n){if(!e.mapValue.fields)return null;if(!Ic(e=e.mapValue.fields[t.get(n)]))return null}return(e=(e.mapValue.fields||{})[t.lastSegment()])||null},t.prototype.isEqual=function(t){return hc(this.proto,t.proto)},t}(),dl=function(){function t(t){void 0===t&&(t=fl.empty()),this.I=t,this.A=new Map}return t.prototype.set=function(t,e){return this.R(t,e),this},t.prototype.delete=function(t){return this.R(t,null),this},t.prototype.R=function(t,e){for(var n=this.A,r=0;r<t.length-1;++r){var i=t.get(r),o=n.get(i);o instanceof Map?n=o:o&&10===lc(o)?(o=new Map(Object.entries(o.mapValue.fields||{})),n.set(i,o),n=o):(o=new Map,n.set(i,o),n=o)}n.set(t.lastSegment(),e)},t.prototype.v=function(){var t=this.P(Zu.emptyPath(),this.A);return null!=t?new fl(t):this.I},t.prototype.P=function(t,e){var n=this,r=!1,i=this.I.field(t),o=Ic(i)?Object.assign({},i.mapValue.fields):{};return e.forEach(function(e,i){if(e instanceof Map){var s=n.P(t.child(i),e);null!=s&&(o[i]=s,r=!0)}else null!==e?(o[i]=e,r=!0):o.hasOwnProperty(i)&&(delete o[i],r=!0)}),r?{mapValue:{fields:o}}:null},t}();function pl(t){var e=[];return Hu(t.fields||{},function(t,n){var r=new Zu([t]);if(Ic(n)){var i=pl(n.mapValue).fields;if(0===i.length)e.push(r);else for(var o=0,s=i;o<s.length;o++)e.push(r.child(s[o]))}else e.push(r)}),new hl(e)}function gl(t,e){if(t.V){if(isNaN(e))return{doubleValue:"NaN"};if(e===1/0)return{doubleValue:"Infinity"};if(e===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Ku(e)?"-0":e}}function ml(t){return{integerValue:""+t}}function yl(t,e){return Ju(e)?ml(e):gl(t,e)}var vl=function(){this._=void 0};function bl(t,e,n){return t instanceof Il?function(t,e){var n={fields:{__type__:{stringValue:"server_timestamp"},__local_write_time__:{timestampValue:{seconds:t.seconds,nanos:t.nanoseconds}}}};return e&&(n.fields.__previous_value__=e),{mapValue:n}}(n,e):t instanceof El?Sl(t,e):t instanceof Ol?Tl(t,e):function(t,e){var n=_l(t,e),r=xl(n)+xl(t.S);return vc(n)&&vc(t.S)?ml(r):gl(t.D,r)}(t,e)}function wl(t,e,n){return t instanceof El?Sl(t,e):t instanceof Ol?Tl(t,e):n}function _l(t,e){return t instanceof Cl?vc(n=e)||function(t){return!!t&&"doubleValue"in t}(n)?e:{integerValue:0}:null;var n}var Il=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e}(vl),El=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Tu.c)(e,t),e}(vl);function Sl(t,e){for(var n=Al(e),r=function(t){n.some(function(e){return hc(e,t)})||n.push(t)},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Ol=function(t){function e(e){var n=this;return(n=t.call(this)||this).elements=e,n}return Object(Tu.c)(e,t),e}(vl);function Tl(t,e){for(var n=Al(e),r=function(t){n=n.filter(function(e){return!hc(e,t)})},i=0,o=t.elements;i<o.length;i++)r(o[i]);return{arrayValue:{values:n}}}var Cl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).D=e,r.S=n,r}return Object(Tu.c)(e,t),e}(vl);function xl(t){return ic(t.integerValue||t.doubleValue)}function Al(t){return bc(t)&&t.arrayValue.values?t.arrayValue.values.slice():[]}var jl=function(t,e){this.field=t,this.transform=e},kl=function(t,e){this.version=t,this.transformResults=e},Nl=function(){function t(t,e){this.updateTime=t,this.exists=e}return t.none=function(){return new t},t.exists=function(e){return new t(void 0,e)},t.updateTime=function(e){return new t(e)},Object.defineProperty(t.prototype,"isNone",{get:function(){return void 0===this.updateTime&&void 0===this.exists},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)},t}();function Dl(t,e){return void 0!==t.updateTime?e instanceof Sc&&e.version.isEqual(t.updateTime):void 0===t.exists||t.exists===e instanceof Sc}var Rl=function(){};function Pl(t,e,n){return t instanceof Vl?function(t,e,n){var r=t.value,i=Hl(t.fieldTransforms,e,n.transformResults);return r=Gl(t.fieldTransforms,r,i),new Sc(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):t instanceof ql?function(t,e,n){if(!Dl(t.precondition,e))return new Tc(t.key,n.version);var r=Bl(t,e,Hl(t.fieldTransforms,e,n.transformResults));return new Sc(t.key,n.version,r,{hasCommittedMutations:!0})}(t,e,n):function(t,e,n){return new Oc(t.key,n.version,{hasCommittedMutations:!0})}(t,0,n)}function Ll(t,e,n){return t instanceof Vl?function(t,e,n){if(!Dl(t.precondition,e))return e;var r=t.value,i=zl(t.fieldTransforms,n,e);r=Gl(t.fieldTransforms,r,i);var o=Fl(e);return new Sc(t.key,o,r,{hasLocalMutations:!0})}(t,e,n):t instanceof ql?function(t,e,n){if(!Dl(t.precondition,e))return e;var r=Fl(e),i=Bl(t,e,zl(t.fieldTransforms,n,e));return new Sc(t.key,r,i,{hasLocalMutations:!0})}(t,e,n):function(t,e){return Dl(t.precondition,e)?new Oc(t.key,ll.min()):e}(t,e)}function Ml(t,e){return function(t,e){for(var n=null,r=0,i=t;r<i.length;r++){var o=i[r],s=e instanceof Sc?e.field(o.field):void 0,a=_l(o.transform,s||null);null!=a&&(n=null==n?(new dl).set(o.field,a):n.set(o.field,a))}return n?n.v():null}(t.fieldTransforms,e)}function Ul(t,e){return t.type===e.type&&!!t.key.isEqual(e.key)&&!!t.precondition.isEqual(e.precondition)&&!!function(t,e){return void 0===t&&void 0===e||!(!t||!e)&&Vu(t,e,function(t,e){return function(t,e){return t.field.isEqual(e.field)&&function(t,e){return t instanceof El&&e instanceof El||t instanceof Ol&&e instanceof Ol?Vu(t.elements,e.elements,hc):t instanceof Cl&&e instanceof Cl?hc(t.S,e.S):t instanceof Il&&e instanceof Il}(t.transform,e.transform)}(t,e)})}(t.fieldTransforms,e.fieldTransforms)&&(0===t.type?t.value.isEqual(e.value):1!==t.type||t.data.isEqual(e.data)&&t.fieldMask.isEqual(e.fieldMask))}function Fl(t){return t instanceof Sc?t.version:ll.min()}var Vl=function(t){function e(e,n,r,i){void 0===i&&(i=[]);var o=this;return(o=t.call(this)||this).key=e,o.value=n,o.precondition=r,o.fieldTransforms=i,o.type=0,o}return Object(Tu.c)(e,t),e}(Rl),ql=function(t){function e(e,n,r,i,o){void 0===o&&(o=[]);var s=this;return(s=t.call(this)||this).key=e,s.data=n,s.fieldMask=r,s.precondition=i,s.fieldTransforms=o,s.type=1,s}return Object(Tu.c)(e,t),e}(Rl);function Bl(t,e,n){var r;return r=function(t,e){var n=new dl(e);return t.fieldMask.fields.forEach(function(e){if(!e.isEmpty()){var r=t.data.field(e);null!==r?n.set(e,r):n.delete(e)}}),n.v()}(t,r=e instanceof Sc?e.data():fl.empty()),Gl(t.fieldTransforms,r,n)}function Hl(t,e,n){var r=[];Pu(t.length===n.length);for(var i=0;i<n.length;i++){var o=t[i],s=o.transform,a=null;e instanceof Sc&&(a=e.field(o.field)),r.push(wl(s,a,n[i]))}return r}function zl(t,e,n){for(var r=[],i=0,o=t;i<o.length;i++){var s=o[i],a=s.transform,u=null;n instanceof Sc&&(u=n.field(s.field)),r.push(bl(a,u,e))}return r}function Gl(t,e,n){for(var r=new dl(e),i=0;i<t.length;i++)r.set(t[i].field,n[i]);return r.v()}var Kl,Jl,$l=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=2,r.fieldTransforms=[],r}return Object(Tu.c)(e,t),e}(Rl),Wl=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).key=e,r.precondition=n,r.type=3,r.fieldTransforms=[],r}return Object(Tu.c)(e,t),e}(Rl),Ql=function(t){this.count=t};function Yl(t){switch(t){case $u.OK:return Ru();case $u.CANCELLED:case $u.UNKNOWN:case $u.DEADLINE_EXCEEDED:case $u.RESOURCE_EXHAUSTED:case $u.INTERNAL:case $u.UNAVAILABLE:case $u.UNAUTHENTICATED:return!1;case $u.INVALID_ARGUMENT:case $u.NOT_FOUND:case $u.ALREADY_EXISTS:case $u.PERMISSION_DENIED:case $u.FAILED_PRECONDITION:case $u.ABORTED:case $u.OUT_OF_RANGE:case $u.UNIMPLEMENTED:case $u.DATA_LOSS:return!0;default:return Ru()}}function Xl(t){if(void 0===t)return ku("GRPC error has no .code"),$u.UNKNOWN;switch(t){case Kl.OK:return $u.OK;case Kl.CANCELLED:return $u.CANCELLED;case Kl.UNKNOWN:return $u.UNKNOWN;case Kl.DEADLINE_EXCEEDED:return $u.DEADLINE_EXCEEDED;case Kl.RESOURCE_EXHAUSTED:return $u.RESOURCE_EXHAUSTED;case Kl.INTERNAL:return $u.INTERNAL;case Kl.UNAVAILABLE:return $u.UNAVAILABLE;case Kl.UNAUTHENTICATED:return $u.UNAUTHENTICATED;case Kl.INVALID_ARGUMENT:return $u.INVALID_ARGUMENT;case Kl.NOT_FOUND:return $u.NOT_FOUND;case Kl.ALREADY_EXISTS:return $u.ALREADY_EXISTS;case Kl.PERMISSION_DENIED:return $u.PERMISSION_DENIED;case Kl.FAILED_PRECONDITION:return $u.FAILED_PRECONDITION;case Kl.ABORTED:return $u.ABORTED;case Kl.OUT_OF_RANGE:return $u.OUT_OF_RANGE;case Kl.UNIMPLEMENTED:return $u.UNIMPLEMENTED;case Kl.DATA_LOSS:return $u.DATA_LOSS;default:return Ru()}}(Jl=Kl||(Kl={}))[Jl.OK=0]="OK",Jl[Jl.CANCELLED=1]="CANCELLED",Jl[Jl.UNKNOWN=2]="UNKNOWN",Jl[Jl.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",Jl[Jl.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",Jl[Jl.NOT_FOUND=5]="NOT_FOUND",Jl[Jl.ALREADY_EXISTS=6]="ALREADY_EXISTS",Jl[Jl.PERMISSION_DENIED=7]="PERMISSION_DENIED",Jl[Jl.UNAUTHENTICATED=16]="UNAUTHENTICATED",Jl[Jl.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",Jl[Jl.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",Jl[Jl.ABORTED=10]="ABORTED",Jl[Jl.OUT_OF_RANGE=11]="OUT_OF_RANGE",Jl[Jl.UNIMPLEMENTED=12]="UNIMPLEMENTED",Jl[Jl.INTERNAL=13]="INTERNAL",Jl[Jl.UNAVAILABLE=14]="UNAVAILABLE",Jl[Jl.DATA_LOSS=15]="DATA_LOSS";var Zl=function(){function t(t,e){this.comparator=t,this.root=e||eh.EMPTY}return t.prototype.insert=function(e,n){return new t(this.comparator,this.root.insert(e,n,this.comparator).copy(null,null,eh.BLACK,null,null))},t.prototype.remove=function(e){return new t(this.comparator,this.root.remove(e,this.comparator).copy(null,null,eh.BLACK,null,null))},t.prototype.get=function(t){for(var e=this.root;!e.isEmpty();){var n=this.comparator(t,e.key);if(0===n)return e.value;n<0?e=e.left:n>0&&(e=e.right)}return null},t.prototype.indexOf=function(t){for(var e=0,n=this.root;!n.isEmpty();){var r=this.comparator(t,n.key);if(0===r)return e+n.left.size;r<0?n=n.left:(e+=n.left.size+1,n=n.right)}return-1},t.prototype.isEmpty=function(){return this.root.isEmpty()},Object.defineProperty(t.prototype,"size",{get:function(){return this.root.size},enumerable:!1,configurable:!0}),t.prototype.minKey=function(){return this.root.minKey()},t.prototype.maxKey=function(){return this.root.maxKey()},t.prototype.inorderTraversal=function(t){return this.root.inorderTraversal(t)},t.prototype.forEach=function(t){this.inorderTraversal(function(e,n){return t(e,n),!1})},t.prototype.toString=function(){var t=[];return this.inorderTraversal(function(e,n){return t.push(e+":"+n),!1}),"{"+t.join(", ")+"}"},t.prototype.reverseTraversal=function(t){return this.root.reverseTraversal(t)},t.prototype.getIterator=function(){return new th(this.root,null,this.comparator,!1)},t.prototype.getIteratorFrom=function(t){return new th(this.root,t,this.comparator,!1)},t.prototype.getReverseIterator=function(){return new th(this.root,null,this.comparator,!0)},t.prototype.getReverseIteratorFrom=function(t){return new th(this.root,t,this.comparator,!0)},t}(),th=function(){function t(t,e,n,r){this.isReverse=r,this.nodeStack=[];for(var i=1;!t.isEmpty();)if(i=e?n(t.key,e):1,r&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(0===i){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}return t.prototype.getNext=function(){var t=this.nodeStack.pop(),e={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return e},t.prototype.hasNext=function(){return this.nodeStack.length>0},t.prototype.peek=function(){if(0===this.nodeStack.length)return null;var t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}},t}(),eh=function(){function t(e,n,r,i,o){this.key=e,this.value=n,this.color=null!=r?r:t.RED,this.left=null!=i?i:t.EMPTY,this.right=null!=o?o:t.EMPTY,this.size=this.left.size+1+this.right.size}return t.prototype.copy=function(e,n,r,i,o){return new t(null!=e?e:this.key,null!=n?n:this.value,null!=r?r:this.color,null!=i?i:this.left,null!=o?o:this.right)},t.prototype.isEmpty=function(){return!1},t.prototype.inorderTraversal=function(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)},t.prototype.reverseTraversal=function(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)},t.prototype.min=function(){return this.left.isEmpty()?this:this.left.min()},t.prototype.minKey=function(){return this.min().key},t.prototype.maxKey=function(){return this.right.isEmpty()?this.key:this.right.maxKey()},t.prototype.insert=function(t,e,n){var r=this,i=n(t,r.key);return(r=i<0?r.copy(null,null,null,r.left.insert(t,e,n),null):0===i?r.copy(null,e,null,null,null):r.copy(null,null,null,null,r.right.insert(t,e,n))).fixUp()},t.prototype.removeMin=function(){if(this.left.isEmpty())return t.EMPTY;var e=this;return e.left.isRed()||e.left.left.isRed()||(e=e.moveRedLeft()),(e=e.copy(null,null,null,e.left.removeMin(),null)).fixUp()},t.prototype.remove=function(e,n){var r,i=this;if(n(e,i.key)<0)i.left.isEmpty()||i.left.isRed()||i.left.left.isRed()||(i=i.moveRedLeft()),i=i.copy(null,null,null,i.left.remove(e,n),null);else{if(i.left.isRed()&&(i=i.rotateRight()),i.right.isEmpty()||i.right.isRed()||i.right.left.isRed()||(i=i.moveRedRight()),0===n(e,i.key)){if(i.right.isEmpty())return t.EMPTY;r=i.right.min(),i=i.copy(r.key,r.value,null,null,i.right.removeMin())}i=i.copy(null,null,null,null,i.right.remove(e,n))}return i.fixUp()},t.prototype.isRed=function(){return this.color},t.prototype.fixUp=function(){var t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t},t.prototype.moveRedLeft=function(){var t=this.colorFlip();return t.right.left.isRed()&&(t=(t=(t=t.copy(null,null,null,null,t.right.rotateRight())).rotateLeft()).colorFlip()),t},t.prototype.moveRedRight=function(){var t=this.colorFlip();return t.left.left.isRed()&&(t=(t=t.rotateRight()).colorFlip()),t},t.prototype.rotateLeft=function(){var e=this.copy(null,null,t.RED,null,this.right.left);return this.right.copy(null,null,this.color,e,null)},t.prototype.rotateRight=function(){var e=this.copy(null,null,t.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,e)},t.prototype.colorFlip=function(){var t=this.left.copy(null,null,!this.left.color,null,null),e=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,e)},t.prototype.checkMaxDepth=function(){var t=this.check();return Math.pow(2,t)<=this.size+1},t.prototype.check=function(){if(this.isRed()&&this.left.isRed())throw Ru();if(this.right.isRed())throw Ru();var t=this.left.check();if(t!==this.right.check())throw Ru();return t+(this.isRed()?0:1)},t}();eh.EMPTY=null,eh.RED=!0,eh.BLACK=!1,eh.EMPTY=new(function(){function t(){this.size=0}return Object.defineProperty(t.prototype,"key",{get:function(){throw Ru()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"value",{get:function(){throw Ru()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"color",{get:function(){throw Ru()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"left",{get:function(){throw Ru()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"right",{get:function(){throw Ru()},enumerable:!1,configurable:!0}),t.prototype.copy=function(t,e,n,r,i){return this},t.prototype.insert=function(t,e,n){return new eh(t,e)},t.prototype.remove=function(t,e){return this},t.prototype.isEmpty=function(){return!0},t.prototype.inorderTraversal=function(t){return!1},t.prototype.reverseTraversal=function(t){return!1},t.prototype.minKey=function(){return null},t.prototype.maxKey=function(){return null},t.prototype.isRed=function(){return!1},t.prototype.checkMaxDepth=function(){return!0},t.prototype.check=function(){return 0},t}());var nh=function(){function t(t){this.comparator=t,this.data=new Zl(this.comparator)}return t.prototype.has=function(t){return null!==this.data.get(t)},t.prototype.first=function(){return this.data.minKey()},t.prototype.last=function(){return this.data.maxKey()},Object.defineProperty(t.prototype,"size",{get:function(){return this.data.size},enumerable:!1,configurable:!0}),t.prototype.indexOf=function(t){return this.data.indexOf(t)},t.prototype.forEach=function(t){this.data.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.forEachInRange=function(t,e){for(var n=this.data.getIteratorFrom(t[0]);n.hasNext();){var r=n.getNext();if(this.comparator(r.key,t[1])>=0)return;e(r.key)}},t.prototype.forEachWhile=function(t,e){var n;for(n=void 0!==e?this.data.getIteratorFrom(e):this.data.getIterator();n.hasNext();)if(!t(n.getNext().key))return},t.prototype.firstAfterOrEqual=function(t){var e=this.data.getIteratorFrom(t);return e.hasNext()?e.getNext().key:null},t.prototype.getIterator=function(){return new rh(this.data.getIterator())},t.prototype.getIteratorFrom=function(t){return new rh(this.data.getIteratorFrom(t))},t.prototype.add=function(t){return this.copy(this.data.remove(t).insert(t,!0))},t.prototype.delete=function(t){return this.has(t)?this.copy(this.data.remove(t)):this},t.prototype.isEmpty=function(){return this.data.isEmpty()},t.prototype.unionWith=function(t){var e=this;return e.size<t.size&&(e=t,t=this),t.forEach(function(t){e=e.add(t)}),e},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.data.getIterator(),r=e.data.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(0!==this.comparator(i,o))return!1}return!0},t.prototype.toArray=function(){var t=[];return this.forEach(function(e){t.push(e)}),t},t.prototype.toString=function(){var t=[];return this.forEach(function(e){return t.push(e)}),"SortedSet("+t.toString()+")"},t.prototype.copy=function(e){var n=new t(this.comparator);return n.data=e,n},t}(),rh=function(){function t(t){this.iter=t}return t.prototype.getNext=function(){return this.iter.getNext().key},t.prototype.hasNext=function(){return this.iter.hasNext()},t}(),ih=new Zl(tc.comparator);function oh(){return ih}function sh(){return oh()}var ah=new Zl(tc.comparator);function uh(){return ah}var ch=new Zl(tc.comparator);function lh(){return ch}var hh=new nh(tc.comparator);function fh(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=hh,r=0,i=t;r<i.length;r++){var o=i[r];n=n.add(o)}return n}var dh=new nh(Fu);function ph(){return dh}var gh=function(){function t(t,e,n,r,i){this.snapshotVersion=t,this.targetChanges=e,this.targetMismatches=n,this.documentUpdates=r,this.resolvedLimboDocuments=i}return t.createSynthesizedRemoteEventForCurrentChange=function(e,n){var r=new Map;return r.set(e,mh.createSynthesizedTargetChangeForCurrentChange(e,n)),new t(ll.min(),r,ph(),oh(),fh())},t}(),mh=function(){function t(t,e,n,r,i){this.resumeToken=t,this.current=e,this.addedDocuments=n,this.modifiedDocuments=r,this.removedDocuments=i}return t.createSynthesizedTargetChangeForCurrentChange=function(e,n){return new t(ec.EMPTY_BYTE_STRING,n,fh(),fh(),fh())},t}(),yh=function(t,e,n,r){this.C=t,this.removedTargetIds=e,this.key=n,this.N=r},vh=function(t,e){this.targetId=t,this.$=e},bh=function(t,e,n,r){void 0===n&&(n=ec.EMPTY_BYTE_STRING),void 0===r&&(r=null),this.state=t,this.targetIds=e,this.resumeToken=n,this.cause=r},wh=function(){function t(){this.F=0,this.O=Eh(),this.k=ec.EMPTY_BYTE_STRING,this.M=!1,this.L=!0}return Object.defineProperty(t.prototype,"current",{get:function(){return this.M},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"resumeToken",{get:function(){return this.k},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"B",{get:function(){return 0!==this.F},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"q",{get:function(){return this.L},enumerable:!1,configurable:!0}),t.prototype.U=function(t){t.approximateByteSize()>0&&(this.L=!0,this.k=t)},t.prototype.K=function(){var t=fh(),e=fh(),n=fh();return this.O.forEach(function(r,i){switch(i){case 0:t=t.add(r);break;case 2:e=e.add(r);break;case 1:n=n.add(r);break;default:Ru()}}),new mh(this.k,this.M,t,e,n)},t.prototype.W=function(){this.L=!1,this.O=Eh()},t.prototype.j=function(t,e){this.L=!0,this.O=this.O.insert(t,e)},t.prototype.G=function(t){this.L=!0,this.O=this.O.remove(t)},t.prototype.H=function(){this.F+=1},t.prototype.J=function(){this.F-=1},t.prototype.Y=function(){this.L=!0,this.M=!0},t}(),_h=function(){function t(t){this.X=t,this.Z=new Map,this.tt=oh(),this.et=Ih(),this.nt=new nh(Fu)}return t.prototype.st=function(t){for(var e=0,n=t.C;e<n.length;e++){var r=n[e];t.N instanceof Sc?this.it(r,t.N):t.N instanceof Oc&&this.rt(r,t.key,t.N)}for(var i=0,o=t.removedTargetIds;i<o.length;i++)this.rt(r=o[i],t.key,t.N)},t.prototype.ot=function(t){var e=this;this.forEachTarget(t,function(n){var r=e.ct(n);switch(t.state){case 0:e.at(n)&&r.U(t.resumeToken);break;case 1:r.J(),r.B||r.W(),r.U(t.resumeToken);break;case 2:r.J(),r.B||e.removeTarget(n);break;case 3:e.at(n)&&(r.Y(),r.U(t.resumeToken));break;case 4:e.at(n)&&(e.ut(n),r.U(t.resumeToken));break;default:Ru()}})},t.prototype.forEachTarget=function(t,e){var n=this;t.targetIds.length>0?t.targetIds.forEach(e):this.Z.forEach(function(t,r){n.at(r)&&e(r)})},t.prototype.ht=function(t){var e=t.targetId,n=t.$.count,r=this.lt(e);if(r){var i=r.target;if(kc(i))if(0===n){var o=new tc(i.path);this.rt(e,o,new Oc(o,ll.min()))}else Pu(1===n);else this.ft(e)!==n&&(this.ut(e),this.nt=this.nt.add(e))}},t.prototype.dt=function(t){var e=this,n=new Map;this.Z.forEach(function(r,i){var o=e.lt(i);if(o){if(r.current&&kc(o.target)){var s=new tc(o.target.path);null!==e.tt.get(s)||e.wt(i,s)||e.rt(i,s,new Oc(s,t))}r.q&&(n.set(i,r.K()),r.W())}});var r=fh();this.et.forEach(function(t,n){var i=!0;n.forEachWhile(function(t){var n=e.lt(t);return!n||2===n.purpose||(i=!1,!1)}),i&&(r=r.add(t))});var i=new gh(t,n,this.nt,this.tt,r);return this.tt=oh(),this.et=Ih(),this.nt=new nh(Fu),i},t.prototype.it=function(t,e){if(this.at(t)){var n=this.wt(t,e.key)?2:0;this.ct(t).j(e.key,n),this.tt=this.tt.insert(e.key,e),this.et=this.et.insert(e.key,this._t(e.key).add(t))}},t.prototype.rt=function(t,e,n){if(this.at(t)){var r=this.ct(t);this.wt(t,e)?r.j(e,1):r.G(e),this.et=this.et.insert(e,this._t(e).delete(t)),n&&(this.tt=this.tt.insert(e,n))}},t.prototype.removeTarget=function(t){this.Z.delete(t)},t.prototype.ft=function(t){var e=this.ct(t).K();return this.X.getRemoteKeysForTarget(t).size+e.addedDocuments.size-e.removedDocuments.size},t.prototype.H=function(t){this.ct(t).H()},t.prototype.ct=function(t){var e=this.Z.get(t);return e||(e=new wh,this.Z.set(t,e)),e},t.prototype._t=function(t){var e=this.et.get(t);return e||(e=new nh(Fu),this.et=this.et.insert(t,e)),e},t.prototype.at=function(t){var e=null!==this.lt(t);return e||ju("WatchChangeAggregator","Detected inactive target",t),e},t.prototype.lt=function(t){var e=this.Z.get(t);return e&&e.B?null:this.X.yt(t)},t.prototype.ut=function(t){var e=this;this.Z.set(t,new wh),this.X.getRemoteKeysForTarget(t).forEach(function(n){e.rt(t,n,null)})},t.prototype.wt=function(t,e){return this.X.getRemoteKeysForTarget(t).has(e)},t}();function Ih(){return new Zl(tc.comparator)}function Eh(){return new Zl(tc.comparator)}var Sh={asc:"ASCENDING",desc:"DESCENDING"},Oh={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},Th=function(t,e){this.databaseId=t,this.V=e};function Ch(t,e){return t.V?new Date(1e3*e.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")+"."+("000000000"+e.nanoseconds).slice(-9)+"Z":{seconds:""+e.seconds,nanos:e.nanoseconds}}function xh(t,e){return t.V?e.toBase64():e.toUint8Array()}function Ah(t,e){return Ch(t,e.toTimestamp())}function jh(t){return Pu(!!t),ll.fromTimestamp(function(t){var e=rc(t);return new sc(e.seconds,e.nanos)}(t))}function kh(t,e){return function(t){return new Yu(["projects",t.projectId,"databases",t.database])}(t).child("documents").child(e).canonicalString()}function Nh(t){var e=Yu.fromString(t);return Pu(nf(e)),e}function Dh(t,e){return kh(t.databaseId,e.path)}function Rh(t,e){var n=Nh(e);if(n.get(1)!==t.databaseId.projectId)throw new Wu($u.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+t.databaseId.projectId);if(n.get(3)!==t.databaseId.database)throw new Wu($u.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+t.databaseId.database);return new tc(Uh(n))}function Ph(t,e){return kh(t.databaseId,e)}function Lh(t){var e=Nh(t);return 4===e.length?Yu.emptyPath():Uh(e)}function Mh(t){return new Yu(["projects",t.databaseId.projectId,"databases",t.databaseId.database]).canonicalString()}function Uh(t){return Pu(t.length>4&&"documents"===t.get(4)),t.popFirst(5)}function Fh(t,e,n){return{name:Dh(t,e),fields:n.proto.mapValue.fields}}function Vh(t,e,n){var r=Rh(t,e.name),i=jh(e.updateTime),o=new fl({mapValue:{fields:e.fields}});return new Sc(r,i,o,{hasCommittedMutations:!!n})}function qh(t,e){var n;if(e instanceof Vl)n={update:Fh(t,e.key,e.value)};else if(e instanceof $l)n={delete:Dh(t,e.key)};else if(e instanceof ql)n={update:Fh(t,e.key,e.data),updateMask:ef(e.fieldMask)};else{if(!(e instanceof Wl))return Ru();n={verify:Dh(t,e.key)}}return e.fieldTransforms.length>0&&(n.updateTransforms=e.fieldTransforms.map(function(t){return function(t,e){var n=e.transform;if(n instanceof Il)return{fieldPath:e.field.canonicalString(),setToServerValue:"REQUEST_TIME"};if(n instanceof El)return{fieldPath:e.field.canonicalString(),appendMissingElements:{values:n.elements}};if(n instanceof Ol)return{fieldPath:e.field.canonicalString(),removeAllFromArray:{values:n.elements}};if(n instanceof Cl)return{fieldPath:e.field.canonicalString(),increment:n.S};throw Ru()}(0,t)})),e.precondition.isNone||(n.currentDocument=function(t,e){return void 0!==e.updateTime?{updateTime:Ah(t,e.updateTime)}:void 0!==e.exists?{exists:e.exists}:Ru()}(t,e.precondition)),n}function Bh(t,e){var n=e.currentDocument?function(t){return void 0!==t.updateTime?Nl.updateTime(jh(t.updateTime)):void 0!==t.exists?Nl.exists(t.exists):Nl.none()}(e.currentDocument):Nl.none(),r=e.updateTransforms?e.updateTransforms.map(function(e){return function(t,e){var n=null;"setToServerValue"in e?(Pu("REQUEST_TIME"===e.setToServerValue),n=new Il):"appendMissingElements"in e?n=new El(e.appendMissingElements.values||[]):"removeAllFromArray"in e?n=new Ol(e.removeAllFromArray.values||[]):"increment"in e?n=new Cl(t,e.increment):Ru();var r=Zu.fromServerFormat(e.fieldPath);return new jl(r,n)}(t,e)}):[];if(e.update){var i=Rh(t,e.update.name),o=new fl({mapValue:{fields:e.update.fields}});if(e.updateMask){var s=function(t){return new hl((t.fieldPaths||[]).map(function(t){return Zu.fromServerFormat(t)}))}(e.updateMask);return new ql(i,o,s,n,r)}return new Vl(i,o,n,r)}if(e.delete){var a=Rh(t,e.delete);return new $l(a,n)}if(e.verify){var u=Rh(t,e.verify);return new Wl(u,n)}return Ru()}function Hh(t,e){return{documents:[Ph(t,e.path)]}}function zh(t,e){var n={structuredQuery:{}},r=e.path;null!==e.collectionGroup?(n.parent=Ph(t,r),n.structuredQuery.from=[{collectionId:e.collectionGroup,allDescendants:!0}]):(n.parent=Ph(t,r.popLast()),n.structuredQuery.from=[{collectionId:r.lastSegment()}]);var i=function(t){if(0!==t.length){var e=t.map(function(t){return function(t){if("=="===t.op){if(_c(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NAN"}};if(wc(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NULL"}}}else if("!="===t.op){if(_c(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NOT_NAN"}};if(wc(t.value))return{unaryFilter:{field:Yh(t.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:Yh(t.field),op:Qh(t.op),value:t.value}}}(t)});return 1===e.length?e[0]:{compositeFilter:{op:"AND",filters:e}}}}(e.filters);i&&(n.structuredQuery.where=i);var o=function(t){if(0!==t.length)return t.map(function(t){return function(t){return{field:Yh(t.field),direction:Wh(t.dir)}}(t)})}(e.orderBy);o&&(n.structuredQuery.orderBy=o);var s=function(t,e){return t.V||Gu(e)?e:{value:e}}(t,e.limit);return null!==s&&(n.structuredQuery.limit=s),e.startAt&&(n.structuredQuery.startAt=Jh(e.startAt)),e.endAt&&(n.structuredQuery.endAt=Jh(e.endAt)),n}function Gh(t){var e=Lh(t.parent),n=t.structuredQuery,r=n.from?n.from.length:0,i=null;if(r>0){Pu(1===r);var o=n.from[0];o.allDescendants?i=o.collectionId:e=e.child(o.collectionId)}var s=[];n.where&&(s=Kh(n.where));var a=[];n.orderBy&&(a=n.orderBy.map(function(t){return function(t){return new Hc(Xh(t.field),function(t){switch(t){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(t.direction))}(t)}));var u=null;n.limit&&(u=function(t){var e;return Gu(e="object"==typeof t?t.value:t)?null:e}(n.limit));var c=null;n.startAt&&(c=$h(n.startAt));var l=null;return n.endAt&&(l=$h(n.endAt)),$c(e,i,a,s,u,"F",c,l)}function Kh(t){return t?void 0!==t.unaryFilter?[tf(t)]:void 0!==t.fieldFilter?[Zh(t)]:void 0!==t.compositeFilter?t.compositeFilter.filters.map(function(t){return Kh(t)}).reduce(function(t,e){return t.concat(e)}):Ru():[]}function Jh(t){return{before:t.before,values:t.position}}function $h(t){return new qc(t.values||[],!!t.before)}function Wh(t){return Sh[t]}function Qh(t){return Oh[t]}function Yh(t){return{fieldPath:t.canonicalString()}}function Xh(t){return Zu.fromServerFormat(t.fieldPath)}function Zh(t){return Nc.create(Xh(t.fieldFilter.field),function(t){switch(t){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":default:return Ru()}}(t.fieldFilter.op),t.fieldFilter.value)}function tf(t){switch(t.unaryFilter.op){case"IS_NAN":var e=Xh(t.unaryFilter.field);return Nc.create(e,"==",{doubleValue:NaN});case"IS_NULL":var n=Xh(t.unaryFilter.field);return Nc.create(n,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":var r=Xh(t.unaryFilter.field);return Nc.create(r,"!=",{doubleValue:NaN});case"IS_NOT_NULL":var i=Xh(t.unaryFilter.field);return Nc.create(i,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":default:return Ru()}}function ef(t){var e=[];return t.fields.forEach(function(t){return e.push(t.canonicalString())}),{fieldPaths:e}}function nf(t){return t.length>=4&&"projects"===t.get(0)&&"databases"===t.get(2)}function rf(t){for(var e="",n=0;n<t.length;n++)e.length>0&&(e=sf(e)),e=of(t.get(n),e);return sf(e)}function of(t,e){for(var n=e,r=t.length,i=0;i<r;i++){var o=t.charAt(i);switch(o){case"\0":n+="\x01\x10";break;case"\x01":n+="\x01\x11";break;default:n+=o}}return n}function sf(t){return t+"\x01\x01"}function af(t){var e=t.length;if(Pu(e>=2),2===e)return Pu("\x01"===t.charAt(0)&&"\x01"===t.charAt(1)),Yu.emptyPath();for(var n=e-2,r=[],i="",o=0;o<e;){var s=t.indexOf("\x01",o);switch((s<0||s>n)&&Ru(),t.charAt(s+1)){case"\x01":var a=t.substring(o,s),u=void 0;0===i.length?u=a:(u=i+=a,i=""),r.push(u);break;case"\x10":i+=t.substring(o,s),i+="\0";break;case"\x11":i+=t.substring(o,s+1);break;default:Ru()}o=s+2}return new Yu(r)}var uf=function(t,e){this.seconds=t,this.nanoseconds=e},cf=function(t,e,n){this.ownerId=t,this.allowTabSynchronization=e,this.leaseTimestampMs=n};cf.store="owner",cf.key="owner";var lf=function(t,e,n){this.userId=t,this.lastAcknowledgedBatchId=e,this.lastStreamToken=n};lf.store="mutationQueues",lf.keyPath="userId";var hf=function(t,e,n,r,i){this.userId=t,this.batchId=e,this.localWriteTimeMs=n,this.baseMutations=r,this.mutations=i};hf.store="mutations",hf.keyPath="batchId",hf.userMutationsIndex="userMutationsIndex",hf.userMutationsKeyPath=["userId","batchId"];var ff=function(){function t(){}return t.prefixForUser=function(t){return[t]},t.prefixForPath=function(t,e){return[t,rf(e)]},t.key=function(t,e,n){return[t,rf(e),n]},t}();ff.store="documentMutations",ff.PLACEHOLDER=new ff;var df=function(t,e){this.path=t,this.readTime=e},pf=function(t,e){this.path=t,this.version=e},gf=function(t,e,n,r,i,o){this.unknownDocument=t,this.noDocument=e,this.document=n,this.hasCommittedMutations=r,this.readTime=i,this.parentPath=o};gf.store="remoteDocuments",gf.readTimeIndex="readTimeIndex",gf.readTimeIndexPath="readTime",gf.collectionReadTimeIndex="collectionReadTimeIndex",gf.collectionReadTimeIndexPath=["parentPath","readTime"];var mf=function(t){this.byteSize=t};mf.store="remoteDocumentGlobal",mf.key="remoteDocumentGlobalKey";var yf=function(t,e,n,r,i,o,s){this.targetId=t,this.canonicalId=e,this.readTime=n,this.resumeToken=r,this.lastListenSequenceNumber=i,this.lastLimboFreeSnapshotVersion=o,this.query=s};yf.store="targets",yf.keyPath="targetId",yf.queryTargetsIndexName="queryTargetsIndex",yf.queryTargetsKeyPath=["canonicalId","targetId"];var vf=function(t,e,n){this.targetId=t,this.path=e,this.sequenceNumber=n};vf.store="targetDocuments",vf.keyPath=["targetId","path"],vf.documentTargetsIndex="documentTargetsIndex",vf.documentTargetsKeyPath=["path","targetId"];var bf=function(t,e,n,r){this.highestTargetId=t,this.highestListenSequenceNumber=e,this.lastRemoteSnapshotVersion=n,this.targetCount=r};bf.key="targetGlobalKey",bf.store="targetGlobal";var wf=function(t,e){this.collectionId=t,this.parent=e};wf.store="collectionParents",wf.keyPath=["collectionId","parent"];var _f=function(t,e,n,r){this.clientId=t,this.updateTimeMs=e,this.networkEnabled=n,this.inForeground=r};_f.store="clientMetadata",_f.keyPath="clientId";var If=function(t,e,n){this.bundleId=t,this.createTime=e,this.version=n};If.store="bundles",If.keyPath="bundleId";var Ef=function(t,e,n){this.name=t,this.readTime=e,this.bundledQuery=n};Ef.store="namedQueries",Ef.keyPath="name";var Sf=Object(Tu.f)(Object(Tu.f)([],Object(Tu.f)(Object(Tu.f)([],Object(Tu.f)(Object(Tu.f)([],Object(Tu.f)(Object(Tu.f)([],[lf.store,hf.store,ff.store,gf.store,yf.store,cf.store,bf.store,vf.store]),[_f.store])),[mf.store])),[wf.store])),[If.store,Ef.store]),Of="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.",Tf=function(){function t(){this.onCommittedListeners=[]}return t.prototype.addOnCommittedListener=function(t){this.onCommittedListeners.push(t)},t.prototype.raiseOnCommittedEvent=function(){this.onCommittedListeners.forEach(function(t){return t()})},t}(),Cf=function(){var t=this;this.promise=new Promise(function(e,n){t.resolve=e,t.reject=n})},xf=function(){function t(t){var e=this;this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(function(t){e.isDone=!0,e.result=t,e.nextCallback&&e.nextCallback(t)},function(t){e.isDone=!0,e.error=t,e.catchCallback&&e.catchCallback(t)})}return t.prototype.catch=function(t){return this.next(void 0,t)},t.prototype.next=function(e,n){var r=this;return this.callbackAttached&&Ru(),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(e,this.result):new t(function(t,i){r.nextCallback=function(n){r.wrapSuccess(e,n).next(t,i)},r.catchCallback=function(e){r.wrapFailure(n,e).next(t,i)}})},t.prototype.toPromise=function(){var t=this;return new Promise(function(e,n){t.next(e,n)})},t.prototype.wrapUserFunction=function(e){try{var n=e();return n instanceof t?n:t.resolve(n)}catch(e){return t.reject(e)}},t.prototype.wrapSuccess=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.resolve(n)},t.prototype.wrapFailure=function(e,n){return e?this.wrapUserFunction(function(){return e(n)}):t.reject(n)},t.resolve=function(e){return new t(function(t,n){t(e)})},t.reject=function(e){return new t(function(t,n){n(e)})},t.waitFor=function(e){return new t(function(t,n){var r=0,i=0,o=!1;e.forEach(function(e){++r,e.next(function(){++i,o&&i===r&&t()},function(t){return n(t)})}),o=!0,i===r&&t()})},t.or=function(e){for(var n=t.resolve(!1),r=function(e){n=n.next(function(n){return n?t.resolve(n):e()})},i=0,o=e;i<o.length;i++)r(o[i]);return n},t.forEach=function(t,e){var n=this,r=[];return t.forEach(function(t,i){r.push(e.call(n,t,i))}),this.waitFor(r)},t}(),Af=function(){function t(t,e){var n=this;this.action=t,this.transaction=e,this.aborted=!1,this.gt=new Cf,this.transaction.oncomplete=function(){n.gt.resolve()},this.transaction.onabort=function(){e.error?n.gt.reject(new Nf(t,e.error)):n.gt.resolve()},this.transaction.onerror=function(e){var r=Mf(e.target.error);n.gt.reject(new Nf(t,r))}}return t.open=function(e,n,r,i){try{return new t(n,e.transaction(i,r))}catch(e){throw new Nf(n,e)}},Object.defineProperty(t.prototype,"Et",{get:function(){return this.gt.promise},enumerable:!1,configurable:!0}),t.prototype.abort=function(t){t&&this.gt.reject(t),this.aborted||(ju("SimpleDb","Aborting transaction:",t?t.message:"Client-initiated abort"),this.aborted=!0,this.transaction.abort())},t.prototype.store=function(t){var e=this.transaction.objectStore(t);return new Rf(e)},t}(),jf=function(){function t(e,n,r){this.name=e,this.version=n,this.Tt=r,12.2===t.It(Object(Ei.g)())&&ku("Firestore persistence suffers from a bug in iOS 12.2 Safari that may cause your app to stop working. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.")}return t.delete=function(t){return ju("SimpleDb","Removing database:",t),Pf(window.indexedDB.deleteDatabase(t)).toPromise()},t.At=function(){if("undefined"==typeof indexedDB)return!1;if(t.Rt())return!0;var e=Object(Ei.g)(),n=t.It(e),r=0<n&&n<10,i=t.bt(e),o=0<i&&i<4.5;return!(e.indexOf("MSIE ")>0||e.indexOf("Trident/")>0||e.indexOf("Edge/")>0||r||o)},t.Rt=function(){var t;return"undefined"!=typeof process&&"YES"===(null===(t=process.env)||void 0===t?void 0:t.vt)},t.Pt=function(t,e){return t.store(e)},t.It=function(t){var e=t.match(/i(?:phone|pad|pod) os ([\d_]+)/i),n=e?e[1].split("_").slice(0,2).join("."):"-1";return Number(n)},t.bt=function(t){var e=t.match(/Android ([\d.]+)/i),n=e?e[1].split(".").slice(0,2).join("."):"-1";return Number(n)},t.prototype.Vt=function(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return this.db?[3,2]:(ju("SimpleDb","Opening database:",this.name),e=this,[4,new Promise(function(e,r){var i=indexedDB.open(n.name,n.version);i.onsuccess=function(t){e(t.target.result)},i.onblocked=function(){r(new Nf(t,"Cannot upgrade IndexedDB schema while another tab is open. Close all tabs that access Firestore and reload this page to proceed."))},i.onerror=function(e){var n=e.target.error;r("VersionError"===n.name?new Wu($u.FAILED_PRECONDITION,"A newer version of the Firestore SDK was previously used and so the persisted data is not compatible with the version of the SDK you are now using. The SDK will operate with persistence disabled. If you need persistence, please re-upgrade to a newer version of the SDK or else clear the persisted IndexedDB data for your app to start fresh."):new Nf(t,n))},i.onupgradeneeded=function(t){ju("SimpleDb",'Database "'+n.name+'" requires upgrade from version:',t.oldVersion),n.Tt.St(t.target.result,i.transaction,t.oldVersion,n.version).next(function(){ju("SimpleDb","Database upgrade to version "+n.version+" complete")})}})]);case 1:e.db=r.sent(),r.label=2;case 2:return[2,(this.Dt&&(this.db.onversionchange=function(t){return n.Dt(t)}),this.db)]}})})},t.prototype.Ct=function(t){this.Dt=t,this.db&&(this.db.onversionchange=function(e){return t(e)})},t.prototype.runTransaction=function(t,e,n,r){return Object(Tu.b)(this,void 0,void 0,function(){var i,o,s,a,u;return Object(Tu.d)(this,function(c){switch(c.label){case 0:i="readonly"===e,o=0,s=function(){var e,s,u,c,l;return Object(Tu.d)(this,function(h){switch(h.label){case 0:++o,h.label=1;case 1:return h.trys.push([1,4,,5]),[4,a.Vt(t)];case 2:return a.db=h.sent(),e=Af.open(a.db,t,i?"readonly":"readwrite",n),s=r(e).catch(function(t){return e.abort(t),xf.reject(t)}).toPromise(),u={},s.catch(function(){}),[4,e.Et];case 3:return[2,(u.value=(h.sent(),s),u)];case 4:return ju("SimpleDb","Transaction failed with error:",(c=h.sent()).message,"Retrying:",l="FirebaseError"!==c.name&&o<3),a.close(),l?[3,5]:[2,{value:Promise.reject(c)}];case 5:return[2]}})},a=this,c.label=1;case 1:return[5,s()];case 2:if("object"==typeof(u=c.sent()))return[2,u.value];c.label=3;case 3:return[3,1];case 4:return[2]}})})},t.prototype.close=function(){this.db&&this.db.close(),this.db=void 0},t}(),kf=function(){function t(t){this.xt=t,this.Nt=!1,this.$t=null}return Object.defineProperty(t.prototype,"isDone",{get:function(){return this.Nt},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Ft",{get:function(){return this.$t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"cursor",{set:function(t){this.xt=t},enumerable:!1,configurable:!0}),t.prototype.done=function(){this.Nt=!0},t.prototype.Ot=function(t){this.$t=t},t.prototype.delete=function(){return Pf(this.xt.delete())},t}(),Nf=function(t){function e(e,n){var r=this;return(r=t.call(this,$u.UNAVAILABLE,"IndexedDB transaction '"+e+"' failed: "+n)||this).name="IndexedDbTransactionError",r}return Object(Tu.c)(e,t),e}(Wu);function Df(t){return"IndexedDbTransactionError"===t.name}var Rf=function(){function t(t){this.store=t}return t.prototype.put=function(t,e){var n;return void 0!==e?(ju("SimpleDb","PUT",this.store.name,t,e),n=this.store.put(e,t)):(ju("SimpleDb","PUT",this.store.name,"<auto-key>",t),n=this.store.put(t)),Pf(n)},t.prototype.add=function(t){return ju("SimpleDb","ADD",this.store.name,t,t),Pf(this.store.add(t))},t.prototype.get=function(t){var e=this;return Pf(this.store.get(t)).next(function(n){return void 0===n&&(n=null),ju("SimpleDb","GET",e.store.name,t,n),n})},t.prototype.delete=function(t){return ju("SimpleDb","DELETE",this.store.name,t),Pf(this.store.delete(t))},t.prototype.count=function(){return ju("SimpleDb","COUNT",this.store.name),Pf(this.store.count())},t.prototype.kt=function(t,e){var n=this.cursor(this.options(t,e)),r=[];return this.Mt(n,function(t,e){r.push(e)}).next(function(){return r})},t.prototype.Lt=function(t,e){ju("SimpleDb","DELETE ALL",this.store.name);var n=this.options(t,e);n.Bt=!1;var r=this.cursor(n);return this.Mt(r,function(t,e,n){return n.delete()})},t.prototype.qt=function(t,e){var n;e?n=t:(n={},e=t);var r=this.cursor(n);return this.Mt(r,e)},t.prototype.Ut=function(t){var e=this.cursor({});return new xf(function(n,r){e.onerror=function(t){var e=Mf(t.target.error);r(e)},e.onsuccess=function(e){var r=e.target.result;r?t(r.primaryKey,r.value).next(function(t){t?r.continue():n()}):n()}})},t.prototype.Mt=function(t,e){var n=[];return new xf(function(r,i){t.onerror=function(t){i(t.target.error)},t.onsuccess=function(t){var i=t.target.result;if(i){var o=new kf(i),s=e(i.primaryKey,i.value,o);if(s instanceof xf){var a=s.catch(function(t){return o.done(),xf.reject(t)});n.push(a)}o.isDone?r():null===o.Ft?i.continue():i.continue(o.Ft)}else r()}}).next(function(){return xf.waitFor(n)})},t.prototype.options=function(t,e){var n;return void 0!==t&&("string"==typeof t?n=t:e=t),{index:n,range:e}},t.prototype.cursor=function(t){var e="next";if(t.reverse&&(e="prev"),t.index){var n=this.store.index(t.index);return t.Bt?n.openKeyCursor(t.range,e):n.openCursor(t.range,e)}return this.store.openCursor(t.range,e)},t}();function Pf(t){return new xf(function(e,n){t.onsuccess=function(t){e(t.target.result)},t.onerror=function(t){var e=Mf(t.target.error);n(e)}})}var Lf=!1;function Mf(t){var e=jf.It(Object(Ei.g)());if(e>=12.2&&e<13){var n="An internal error was encountered in the Indexed Database server";if(t.message.indexOf(n)>=0){var r=new Wu("internal","IOS_INDEXEDDB_BUG1: IndexedDb has thrown '"+n+"'. This is likely due to an unavoidable bug in iOS. See https://stackoverflow.com/q/56496296/110915 for details and a potential workaround.");return Lf||(Lf=!0,setTimeout(function(){throw r},0)),r}}return t}var Uf=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Qt=e,r.currentSequenceNumber=n,r}return Object(Tu.c)(e,t),e}(Tf);function Ff(t,e){var n=Lu(t);return jf.Pt(n.Qt,e)}var Vf=function(){function t(t,e,n,r){this.batchId=t,this.localWriteTime=e,this.baseMutations=n,this.mutations=r}return t.prototype.applyToRemoteDocument=function(t,e,n){for(var r=n.mutationResults,i=0;i<this.mutations.length;i++){var o=this.mutations[i];o.key.isEqual(t)&&(e=Pl(o,e,r[i]))}return e},t.prototype.applyToLocalView=function(t,e){for(var n=0,r=this.baseMutations;n<r.length;n++)(s=r[n]).key.isEqual(t)&&(e=Ll(s,e,this.localWriteTime));for(var i=0,o=this.mutations;i<o.length;i++){var s;(s=o[i]).key.isEqual(t)&&(e=Ll(s,e,this.localWriteTime))}return e},t.prototype.applyToLocalDocumentSet=function(t){var e=this,n=t;return this.mutations.forEach(function(r){var i=e.applyToLocalView(r.key,t.get(r.key));i&&(n=n.insert(r.key,i))}),n},t.prototype.keys=function(){return this.mutations.reduce(function(t,e){return t.add(e.key)},fh())},t.prototype.isEqual=function(t){return this.batchId===t.batchId&&Vu(this.mutations,t.mutations,function(t,e){return Ul(t,e)})&&Vu(this.baseMutations,t.baseMutations,function(t,e){return Ul(t,e)})},t}(),qf=function(){function t(t,e,n,r){this.batch=t,this.commitVersion=e,this.mutationResults=n,this.docVersions=r}return t.from=function(e,n,r){Pu(e.mutations.length===r.length);for(var i=lh(),o=e.mutations,s=0;s<o.length;s++)i=i.insert(o[s].key,r[s].version);return new t(e,n,r,i)},t}(),Bf=function(){function t(t,e,n,r,i,o,s){void 0===i&&(i=ll.min()),void 0===o&&(o=ll.min()),void 0===s&&(s=ec.EMPTY_BYTE_STRING),this.target=t,this.targetId=e,this.purpose=n,this.sequenceNumber=r,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=o,this.resumeToken=s}return t.prototype.withSequenceNumber=function(e){return new t(this.target,this.targetId,this.purpose,e,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken)},t.prototype.withResumeToken=function(e,n){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,e)},t.prototype.withLastLimboFreeSnapshotVersion=function(e){return new t(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,e,this.resumeToken)},t}(),Hf=function(t){this.Kt=t};function zf(t,e){if(e.document)return Vh(t.Kt,e.document,!!e.hasCommittedMutations);if(e.noDocument){var n=tc.fromSegments(e.noDocument.path),r=Wf(e.noDocument.readTime);return new Oc(n,r,{hasCommittedMutations:!!e.hasCommittedMutations})}if(e.unknownDocument){var i=tc.fromSegments(e.unknownDocument.path);return r=Wf(e.unknownDocument.version),new Tc(i,r)}return Ru()}function Gf(t,e,n){var r=Kf(n),i=e.key.path.popLast().toArray();if(e instanceof Sc){var o=function(t,e){return{name:Dh(t,e.key),fields:e.toProto().mapValue.fields,updateTime:Ch(t,e.version.toTimestamp())}}(t.Kt,e),s=e.hasCommittedMutations;return new gf(null,null,o,s,r,i)}if(e instanceof Oc){var a=e.key.path.toArray(),u=$f(e.version);return s=e.hasCommittedMutations,new gf(null,new df(a,u),null,s,r,i)}if(e instanceof Tc){var c=e.key.path.toArray(),l=$f(e.version);return new gf(new pf(c,l),null,null,!0,r,i)}return Ru()}function Kf(t){var e=t.toTimestamp();return[e.seconds,e.nanoseconds]}function Jf(t){var e=new sc(t[0],t[1]);return ll.fromTimestamp(e)}function $f(t){var e=t.toTimestamp();return new uf(e.seconds,e.nanoseconds)}function Wf(t){var e=new sc(t.seconds,t.nanoseconds);return ll.fromTimestamp(e)}function Qf(t,e){for(var n=(e.baseMutations||[]).map(function(e){return Bh(t.Kt,e)}),r=0;r<e.mutations.length-1;++r)r+1<e.mutations.length&&void 0!==e.mutations[r+1].transform&&(e.mutations[r].updateTransforms=e.mutations[r+1].transform.fieldTransforms,e.mutations.splice(r+1,1),++r);var i=e.mutations.map(function(e){return Bh(t.Kt,e)}),o=sc.fromMillis(e.localWriteTimeMs);return new Vf(e.batchId,o,n,i)}function Yf(t){var e,n,r=Wf(t.readTime),i=void 0!==t.lastLimboFreeSnapshotVersion?Wf(t.lastLimboFreeSnapshotVersion):ll.min();return void 0!==t.query.documents?(Pu(1===(n=t.query).documents.length),e=nl(Wc(Lh(n.documents[0])))):e=function(t){return nl(Gh(t))}(t.query),new Bf(e,t.targetId,0,t.lastListenSequenceNumber,r,i,ec.fromBase64String(t.resumeToken))}function Xf(t,e){var n,r=$f(e.snapshotVersion),i=$f(e.lastLimboFreeSnapshotVersion);n=kc(e.target)?Hh(t.Kt,e.target):zh(t.Kt,e.target);var o=e.resumeToken.toBase64();return new yf(e.targetId,Ac(e.target),r,o,e.sequenceNumber,i,n)}function Zf(t){var e=Gh({parent:t.parent,structuredQuery:t.structuredQuery});return"LAST"===t.limitType?rl(e,e.limit,"L"):e}var td=function(){function t(){}return t.prototype.getBundleMetadata=function(t,e){return ed(t).get(e).next(function(t){if(t)return{id:(e=t).bundleId,createTime:Wf(e.createTime),version:e.version};var e})},t.prototype.saveBundleMetadata=function(t,e){return ed(t).put({bundleId:(n=e).id,createTime:$f(jh(n.createTime)),version:n.version});var n},t.prototype.getNamedQuery=function(t,e){return nd(t).get(e).next(function(t){if(t)return{name:(e=t).name,query:Zf(e.bundledQuery),readTime:Wf(e.readTime)};var e})},t.prototype.saveNamedQuery=function(t,e){return nd(t).put(function(t){return{name:t.name,readTime:$f(jh(t.readTime)),bundledQuery:t.bundledQuery}}(e))},t}();function ed(t){return Ff(t,If.store)}function nd(t){return Ff(t,Ef.store)}var rd=function(){function t(){this.Wt=new id}return t.prototype.addToCollectionParentIndex=function(t,e){return this.Wt.add(e),xf.resolve()},t.prototype.getCollectionParents=function(t,e){return xf.resolve(this.Wt.getEntries(e))},t}(),id=function(){function t(){this.index={}}return t.prototype.add=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e]||new nh(Yu.comparator),i=!r.has(n);return this.index[e]=r.add(n),i},t.prototype.has=function(t){var e=t.lastSegment(),n=t.popLast(),r=this.index[e];return r&&r.has(n)},t.prototype.getEntries=function(t){return(this.index[t]||new nh(Yu.comparator)).toArray()},t}(),od=function(){function t(){this.jt=new id}return t.prototype.addToCollectionParentIndex=function(t,e){var n=this;if(!this.jt.has(e)){var r=e.lastSegment(),i=e.popLast();t.addOnCommittedListener(function(){n.jt.add(e)});var o={collectionId:r,parent:rf(i)};return sd(t).put(o)}return xf.resolve()},t.prototype.getCollectionParents=function(t,e){var n=[],r=IDBKeyRange.bound([e,""],[qu(e),""],!1,!0);return sd(t).kt(r).next(function(t){for(var r=0,i=t;r<i.length;r++){var o=i[r];if(o.collectionId!==e)break;n.push(af(o.parent))}return n})},t}();function sd(t){return Ff(t,wf.store)}var ad={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ud=function(){function t(t,e,n){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=e,this.maximumSequenceNumbersToCollect=n}return t.withCacheSize=function(e){return new t(e,t.DEFAULT_COLLECTION_PERCENTILE,t.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)},t}();function cd(t,e,n){var r=t.store(hf.store),i=t.store(ff.store),o=[],s=IDBKeyRange.only(n.batchId),a=0,u=r.qt({range:s},function(t,e,n){return a++,n.delete()});o.push(u.next(function(){Pu(1===a)}));for(var c=[],l=0,h=n.mutations;l<h.length;l++){var f=h[l],d=ff.key(e,f.key.path,n.batchId);o.push(i.delete(d)),c.push(f.key)}return xf.waitFor(o).next(function(){return c})}function ld(t){var e;if(t.document)e=t.document;else if(t.unknownDocument)e=t.unknownDocument;else{if(!t.noDocument)throw Ru();e=t.noDocument}return JSON.stringify(e).length}ud.DEFAULT_COLLECTION_PERCENTILE=10,ud.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ud.DEFAULT=new ud(41943040,ud.DEFAULT_COLLECTION_PERCENTILE,ud.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ud.DISABLED=new ud(-1,0,0);var hd=function(){function t(t,e,n,r){this.userId=t,this.D=e,this.Gt=n,this.referenceDelegate=r,this.zt={}}return t.Ht=function(e,n,r,i){return Pu(""!==e.uid),new t(e.isAuthenticated()?e.uid:"",n,r,i)},t.prototype.checkEmpty=function(t){var e=!0,n=IDBKeyRange.bound([this.userId,Number.NEGATIVE_INFINITY],[this.userId,Number.POSITIVE_INFINITY]);return dd(t).qt({index:hf.userMutationsIndex,range:n},function(t,n,r){e=!1,r.done()}).next(function(){return e})},t.prototype.addMutationBatch=function(t,e,n,r){var i=this,o=pd(t),s=dd(t);return s.add({}).next(function(a){Pu("number"==typeof a);for(var u=new Vf(a,e,n,r),c=function(t,e,n){var r=n.baseMutations.map(function(e){return qh(t.Kt,e)}),i=n.mutations.map(function(e){return qh(t.Kt,e)});return new hf(e,n.batchId,n.localWriteTime.toMillis(),r,i)}(i.D,i.userId,u),l=[],h=new nh(function(t,e){return Fu(t.canonicalString(),e.canonicalString())}),f=0,d=r;f<d.length;f++){var p=d[f],g=ff.key(i.userId,p.key.path,a);h=h.add(p.key.path.popLast()),l.push(s.put(c)),l.push(o.put(g,ff.PLACEHOLDER))}return h.forEach(function(e){l.push(i.Gt.addToCollectionParentIndex(t,e))}),t.addOnCommittedListener(function(){i.zt[a]=u.keys()}),xf.waitFor(l).next(function(){return u})})},t.prototype.lookupMutationBatch=function(t,e){var n=this;return dd(t).get(e).next(function(t){return t?(Pu(t.userId===n.userId),Qf(n.D,t)):null})},t.prototype.Jt=function(t,e){var n=this;return this.zt[e]?xf.resolve(this.zt[e]):this.lookupMutationBatch(t,e).next(function(t){if(t){var r=t.keys();return n.zt[e]=r,r}return null})},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this,r=e+1,i=IDBKeyRange.lowerBound([this.userId,r]),o=null;return dd(t).qt({index:hf.userMutationsIndex,range:i},function(t,e,i){e.userId===n.userId&&(Pu(e.batchId>=r),o=Qf(n.D,e)),i.done()}).next(function(){return o})},t.prototype.getHighestUnacknowledgedBatchId=function(t){var e=IDBKeyRange.upperBound([this.userId,Number.POSITIVE_INFINITY]),n=-1;return dd(t).qt({index:hf.userMutationsIndex,range:e,reverse:!0},function(t,e,r){n=e.batchId,r.done()}).next(function(){return n})},t.prototype.getAllMutationBatches=function(t){var e=this,n=IDBKeyRange.bound([this.userId,-1],[this.userId,Number.POSITIVE_INFINITY]);return dd(t).kt(hf.userMutationsIndex,n).next(function(t){return t.map(function(t){return Qf(e.D,t)})})},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=ff.prefixForPath(this.userId,e.path),i=IDBKeyRange.lowerBound(r),o=[];return pd(t).qt({range:i},function(r,i,s){var a=r[0],u=r[2],c=af(r[1]);if(a===n.userId&&e.path.isEqual(c))return dd(t).get(u).next(function(t){if(!t)throw Ru();Pu(t.userId===n.userId),o.push(Qf(n.D,t))});s.done()}).next(function(){return o})},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new nh(Fu),i=[];return e.forEach(function(e){var o=ff.prefixForPath(n.userId,e.path),s=IDBKeyRange.lowerBound(o),a=pd(t).qt({range:s},function(t,i,o){var s=t[0],a=t[2],u=af(t[1]);s===n.userId&&e.path.isEqual(u)?r=r.add(a):o.done()});i.push(a)}),xf.waitFor(i).next(function(){return n.Yt(t,r)})},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=this,r=e.path,i=r.length+1,o=ff.prefixForPath(this.userId,r),s=IDBKeyRange.lowerBound(o),a=new nh(Fu);return pd(t).qt({range:s},function(t,e,o){var s=t[0],u=t[2],c=af(t[1]);s===n.userId&&r.isPrefixOf(c)?c.length===i&&(a=a.add(u)):o.done()}).next(function(){return n.Yt(t,a)})},t.prototype.Yt=function(t,e){var n=this,r=[],i=[];return e.forEach(function(e){i.push(dd(t).get(e).next(function(t){if(null===t)throw Ru();Pu(t.userId===n.userId),r.push(Qf(n.D,t))}))}),xf.waitFor(i).next(function(){return r})},t.prototype.removeMutationBatch=function(t,e){var n=this;return cd(t.Qt,this.userId,e).next(function(r){return t.addOnCommittedListener(function(){n.Xt(e.batchId)}),xf.forEach(r,function(e){return n.referenceDelegate.markPotentiallyOrphaned(t,e)})})},t.prototype.Xt=function(t){delete this.zt[t]},t.prototype.performConsistencyCheck=function(t){var e=this;return this.checkEmpty(t).next(function(n){if(!n)return xf.resolve();var r=IDBKeyRange.lowerBound(ff.prefixForUser(e.userId)),i=[];return pd(t).qt({range:r},function(t,n,r){if(t[0]===e.userId){var o=af(t[1]);i.push(o)}else r.done()}).next(function(){Pu(0===i.length)})})},t.prototype.containsKey=function(t,e){return fd(t,this.userId,e)},t.prototype.Zt=function(t){var e=this;return gd(t).get(this.userId).next(function(t){return t||new lf(e.userId,-1,"")})},t}();function fd(t,e,n){var r=ff.prefixForPath(e,n.path),i=r[1],o=IDBKeyRange.lowerBound(r),s=!1;return pd(t).qt({range:o,Bt:!0},function(t,n,r){t[0]===e&&t[1]===i&&(s=!0),r.done()}).next(function(){return s})}function dd(t){return Ff(t,hf.store)}function pd(t){return Ff(t,ff.store)}function gd(t){return Ff(t,lf.store)}var md=function(){function t(t){this.te=t}return t.prototype.next=function(){return this.te+=2,this.te},t.ee=function(){return new t(0)},t.ne=function(){return new t(-1)},t}(),yd=function(){function t(t,e){this.referenceDelegate=t,this.D=e}return t.prototype.allocateTargetId=function(t){var e=this;return this.se(t).next(function(n){var r=new md(n.highestTargetId);return n.highestTargetId=r.next(),e.ie(t,n).next(function(){return n.highestTargetId})})},t.prototype.getLastRemoteSnapshotVersion=function(t){return this.se(t).next(function(t){return ll.fromTimestamp(new sc(t.lastRemoteSnapshotVersion.seconds,t.lastRemoteSnapshotVersion.nanoseconds))})},t.prototype.getHighestSequenceNumber=function(t){return this.se(t).next(function(t){return t.highestListenSequenceNumber})},t.prototype.setTargetsMetadata=function(t,e,n){var r=this;return this.se(t).next(function(i){return i.highestListenSequenceNumber=e,n&&(i.lastRemoteSnapshotVersion=n.toTimestamp()),e>i.highestListenSequenceNumber&&(i.highestListenSequenceNumber=e),r.ie(t,i)})},t.prototype.addTargetData=function(t,e){var n=this;return this.re(t,e).next(function(){return n.se(t).next(function(r){return r.targetCount+=1,n.oe(e,r),n.ie(t,r)})})},t.prototype.updateTargetData=function(t,e){return this.re(t,e)},t.prototype.removeTargetData=function(t,e){var n=this;return this.removeMatchingKeysForTargetId(t,e.targetId).next(function(){return vd(t).delete(e.targetId)}).next(function(){return n.se(t)}).next(function(e){return Pu(e.targetCount>0),e.targetCount-=1,n.ie(t,e)})},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return vd(t).qt(function(s,a){var u=Yf(a);u.sequenceNumber<=e&&null===n.get(u.targetId)&&(i++,o.push(r.removeTargetData(t,u)))}).next(function(){return xf.waitFor(o)}).next(function(){return i})},t.prototype.forEachTarget=function(t,e){return vd(t).qt(function(t,n){var r=Yf(n);e(r)})},t.prototype.se=function(t){return bd(t).get(bf.key).next(function(t){return Pu(null!==t),t})},t.prototype.ie=function(t,e){return bd(t).put(bf.key,e)},t.prototype.re=function(t,e){return vd(t).put(Xf(this.D,e))},t.prototype.oe=function(t,e){var n=!1;return t.targetId>e.highestTargetId&&(e.highestTargetId=t.targetId,n=!0),t.sequenceNumber>e.highestListenSequenceNumber&&(e.highestListenSequenceNumber=t.sequenceNumber,n=!0),n},t.prototype.getTargetCount=function(t){return this.se(t).next(function(t){return t.targetCount})},t.prototype.getTargetData=function(t,e){var n=Ac(e),r=IDBKeyRange.bound([n,Number.NEGATIVE_INFINITY],[n,Number.POSITIVE_INFINITY]),i=null;return vd(t).qt({range:r,index:yf.queryTargetsIndexName},function(t,n,r){var o=Yf(n);jc(e,o.target)&&(i=o,r.done())}).next(function(){return i})},t.prototype.addMatchingKeys=function(t,e,n){var r=this,i=[],o=wd(t);return e.forEach(function(e){var s=rf(e.path);i.push(o.put(new vf(n,s))),i.push(r.referenceDelegate.addReference(t,n,e))}),xf.waitFor(i)},t.prototype.removeMatchingKeys=function(t,e,n){var r=this,i=wd(t);return xf.forEach(e,function(e){var o=rf(e.path);return xf.waitFor([i.delete([n,o]),r.referenceDelegate.removeReference(t,n,e)])})},t.prototype.removeMatchingKeysForTargetId=function(t,e){var n=wd(t),r=IDBKeyRange.bound([e],[e+1],!1,!0);return n.delete(r)},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=IDBKeyRange.bound([e],[e+1],!1,!0),r=wd(t),i=fh();return r.qt({range:n,Bt:!0},function(t,e,n){var r=af(t[1]),o=new tc(r);i=i.add(o)}).next(function(){return i})},t.prototype.containsKey=function(t,e){var n=rf(e.path),r=IDBKeyRange.bound([n],[qu(n)],!1,!0),i=0;return wd(t).qt({index:vf.documentTargetsIndex,Bt:!0,range:r},function(t,e,n){0!==t[0]&&(i++,n.done())}).next(function(){return i>0})},t.prototype.yt=function(t,e){return vd(t).get(e).next(function(t){return t?Yf(t):null})},t}();function vd(t){return Ff(t,yf.store)}function bd(t){return Ff(t,bf.store)}function wd(t){return Ff(t,vf.store)}function _d(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){if(t.code!==$u.FAILED_PRECONDITION||t.message!==Of)throw t;return ju("LocalStore","Unexpectedly lost primary lease"),[2]})})}function Id(t,e){var n=t[1],r=e[1],i=Fu(t[0],e[0]);return 0===i?Fu(n,r):i}var Ed=function(){function t(t){this.ce=t,this.buffer=new nh(Id),this.ae=0}return t.prototype.ue=function(){return++this.ae},t.prototype.he=function(t){var e=[t,this.ue()];if(this.buffer.size<this.ce)this.buffer=this.buffer.add(e);else{var n=this.buffer.last();Id(e,n)<0&&(this.buffer=this.buffer.delete(n).add(e))}},Object.defineProperty(t.prototype,"maxValue",{get:function(){return this.buffer.last()[0]},enumerable:!1,configurable:!0}),t}(),Sd=function(){function t(t,e){this.garbageCollector=t,this.asyncQueue=e,this.le=!1,this.fe=null}return t.prototype.start=function(t){-1!==this.garbageCollector.params.cacheSizeCollectionThreshold&&this.de(t)},t.prototype.stop=function(){this.fe&&(this.fe.cancel(),this.fe=null)},Object.defineProperty(t.prototype,"started",{get:function(){return null!==this.fe},enumerable:!1,configurable:!0}),t.prototype.de=function(t){var e=this,n=this.le?3e5:6e4;ju("LruGarbageCollector","Garbage collection scheduled in "+n+"ms"),this.fe=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",n,function(){return Object(Tu.b)(e,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:this.fe=null,this.le=!0,n.label=1;case 1:return n.trys.push([1,3,,7]),[4,t.collectGarbage(this.garbageCollector)];case 2:return n.sent(),[3,7];case 3:return Df(e=n.sent())?(ju("LruGarbageCollector","Ignoring IndexedDB error during garbage collection: ",e),[3,6]):[3,4];case 4:return[4,_d(e)];case 5:n.sent(),n.label=6;case 6:return[3,7];case 7:return[4,this.de(t)];case 8:return n.sent(),[2]}})})})},t}(),Od=function(){function t(t,e){this.we=t,this.params=e}return t.prototype.calculateTargetCount=function(t,e){return this.we._e(t).next(function(t){return Math.floor(e/100*t)})},t.prototype.nthSequenceNumber=function(t,e){var n=this;if(0===e)return xf.resolve(Cu.o);var r=new Ed(e);return this.we.forEachTarget(t,function(t){return r.he(t.sequenceNumber)}).next(function(){return n.we.me(t,function(t){return r.he(t)})}).next(function(){return r.maxValue})},t.prototype.removeTargets=function(t,e,n){return this.we.removeTargets(t,e,n)},t.prototype.removeOrphanedDocuments=function(t,e){return this.we.removeOrphanedDocuments(t,e)},t.prototype.collect=function(t,e){var n=this;return-1===this.params.cacheSizeCollectionThreshold?(ju("LruGarbageCollector","Garbage collection skipped; disabled"),xf.resolve(ad)):this.getCacheSize(t).next(function(r){return r<n.params.cacheSizeCollectionThreshold?(ju("LruGarbageCollector","Garbage collection skipped; Cache size "+r+" is lower than threshold "+n.params.cacheSizeCollectionThreshold),ad):n.ye(t,e)})},t.prototype.getCacheSize=function(t){return this.we.getCacheSize(t)},t.prototype.ye=function(t,e){var n,r,i,o,s,a,u,c=this,l=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(function(e){return e>c.params.maximumSequenceNumbersToCollect?(ju("LruGarbageCollector","Capping sequence numbers to collect down to the maximum of "+c.params.maximumSequenceNumbersToCollect+" from "+e),r=c.params.maximumSequenceNumbersToCollect):r=e,o=Date.now(),c.nthSequenceNumber(t,r)}).next(function(r){return n=r,s=Date.now(),c.removeTargets(t,n,e)}).next(function(e){return i=e,a=Date.now(),c.removeOrphanedDocuments(t,n)}).next(function(t){return u=Date.now(),Au()<=Ii.a.DEBUG&&ju("LruGarbageCollector","LRU Garbage Collection\n\tCounted targets in "+(o-l)+"ms\n\tDetermined least recently used "+r+" in "+(s-o)+"ms\n\tRemoved "+i+" targets in "+(a-s)+"ms\n\tRemoved "+t+" documents in "+(u-a)+"ms\nTotal Duration: "+(u-l)+"ms"),xf.resolve({didRun:!0,sequenceNumbersCollected:r,targetsRemoved:i,documentsRemoved:t})})},t}(),Td=function(){function t(t,e){this.db=t,this.garbageCollector=function(t,e){return new Od(t,e)}(this,e)}return t.prototype._e=function(t){var e=this.ge(t);return this.db.getTargetCache().getTargetCount(t).next(function(t){return e.next(function(e){return t+e})})},t.prototype.ge=function(t){var e=0;return this.me(t,function(t){e++}).next(function(){return e})},t.prototype.forEachTarget=function(t,e){return this.db.getTargetCache().forEachTarget(t,e)},t.prototype.me=function(t,e){return this.pe(t,function(t,n){return e(n)})},t.prototype.addReference=function(t,e,n){return Cd(t,n)},t.prototype.removeReference=function(t,e,n){return Cd(t,n)},t.prototype.removeTargets=function(t,e,n){return this.db.getTargetCache().removeTargets(t,e,n)},t.prototype.markPotentiallyOrphaned=function(t,e){return Cd(t,e)},t.prototype.Ee=function(t,e){return function(t,e){var n=!1;return gd(t).Ut(function(r){return fd(t,r,e).next(function(t){return t&&(n=!0),xf.resolve(!t)})}).next(function(){return n})}(t,e)},t.prototype.removeOrphanedDocuments=function(t,e){var n=this,r=this.db.getRemoteDocumentCache().newChangeBuffer(),i=[],o=0;return this.pe(t,function(s,a){if(a<=e){var u=n.Ee(t,s).next(function(e){if(!e)return o++,r.getEntry(t,s).next(function(){return r.removeEntry(s),wd(t).delete([0,rf(s.path)])})});i.push(u)}}).next(function(){return xf.waitFor(i)}).next(function(){return r.apply(t)}).next(function(){return o})},t.prototype.removeTarget=function(t,e){var n=e.withSequenceNumber(t.currentSequenceNumber);return this.db.getTargetCache().updateTargetData(t,n)},t.prototype.updateLimboDocument=function(t,e){return Cd(t,e)},t.prototype.pe=function(t,e){var n,r=wd(t),i=Cu.o;return r.qt({index:vf.documentTargetsIndex},function(t,r){var o=r.path,s=r.sequenceNumber;0===t[0]?(i!==Cu.o&&e(new tc(af(n)),i),i=s,n=o):i=Cu.o}).next(function(){i!==Cu.o&&e(new tc(af(n)),i)})},t.prototype.getCacheSize=function(t){return this.db.getRemoteDocumentCache().getSize(t)},t}();function Cd(t,e){return wd(t).put(function(t,e){return new vf(0,rf(t.path),e)}(e,t.currentSequenceNumber))}var xd=function(){function t(t,e){this.mapKeyFn=t,this.equalsFn=e,this.inner={}}return t.prototype.get=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0!==n)for(var r=0,i=n;r<i.length;r++){var o=i[r],s=o[1];if(this.equalsFn(o[0],t))return s}},t.prototype.has=function(t){return void 0!==this.get(t)},t.prototype.set=function(t,e){var n=this.mapKeyFn(t),r=this.inner[n];if(void 0!==r){for(var i=0;i<r.length;i++)if(this.equalsFn(r[i][0],t))return void(r[i]=[t,e]);r.push([t,e])}else this.inner[n]=[[t,e]]},t.prototype.delete=function(t){var e=this.mapKeyFn(t),n=this.inner[e];if(void 0===n)return!1;for(var r=0;r<n.length;r++)if(this.equalsFn(n[r][0],t))return 1===n.length?delete this.inner[e]:n.splice(r,1),!0;return!1},t.prototype.forEach=function(t){Hu(this.inner,function(e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];t(o[0],o[1])}})},t.prototype.isEmpty=function(){return zu(this.inner)},t}(),Ad=function(){function t(){this.changes=new xd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),this.changesApplied=!1}return t.prototype.getReadTime=function(t){var e=this.changes.get(t);return e?e.readTime:ll.min()},t.prototype.addEntry=function(t,e){this.assertNotApplied(),this.changes.set(t.key,{maybeDocument:t,readTime:e})},t.prototype.removeEntry=function(t,e){void 0===e&&(e=null),this.assertNotApplied(),this.changes.set(t,{maybeDocument:null,readTime:e})},t.prototype.getEntry=function(t,e){this.assertNotApplied();var n=this.changes.get(e);return void 0!==n?xf.resolve(n.maybeDocument):this.getFromCache(t,e)},t.prototype.getEntries=function(t,e){return this.getAllFromCache(t,e)},t.prototype.apply=function(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)},t.prototype.assertNotApplied=function(){},t}(),jd=function(){function t(t,e){this.D=t,this.Gt=e}return t.prototype.addEntry=function(t,e,n){return Dd(t).put(Rd(e),n)},t.prototype.removeEntry=function(t,e){var n=Dd(t),r=Rd(e);return n.delete(r)},t.prototype.updateMetadata=function(t,e){var n=this;return this.getMetadata(t).next(function(r){return r.byteSize+=e,n.Te(t,r)})},t.prototype.getEntry=function(t,e){var n=this;return Dd(t).get(Rd(e)).next(function(t){return n.Ie(t)})},t.prototype.Ae=function(t,e){var n=this;return Dd(t).get(Rd(e)).next(function(t){var e=n.Ie(t);return e?{maybeDocument:e,size:ld(t)}:null})},t.prototype.getEntries=function(t,e){var n=this,r=sh();return this.Re(t,e,function(t,e){var i=n.Ie(e);r=r.insert(t,i)}).next(function(){return r})},t.prototype.be=function(t,e){var n=this,r=sh(),i=new Zl(tc.comparator);return this.Re(t,e,function(t,e){var o=n.Ie(e);o?(r=r.insert(t,o),i=i.insert(t,ld(e))):(r=r.insert(t,null),i=i.insert(t,0))}).next(function(){return{ve:r,Pe:i}})},t.prototype.Re=function(t,e,n){if(e.isEmpty())return xf.resolve();var r=IDBKeyRange.bound(e.first().path.toArray(),e.last().path.toArray()),i=e.getIterator(),o=i.getNext();return Dd(t).qt({range:r},function(t,e,r){for(var s=tc.fromSegments(t);o&&tc.comparator(o,s)<0;)n(o,null),o=i.getNext();o&&o.isEqual(s)&&(n(o,e),o=i.hasNext()?i.getNext():null),o?r.Ot(o.path.toArray()):r.done()}).next(function(){for(;o;)n(o,null),o=i.hasNext()?i.getNext():null})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){var r=this,i=uh(),o=e.path.length+1,s={};if(n.isEqual(ll.min())){var a=e.path.toArray();s.range=IDBKeyRange.lowerBound(a)}else{var u=e.path.toArray(),c=Kf(n);s.range=IDBKeyRange.lowerBound([u,c],!0),s.index=gf.collectionReadTimeIndex}return Dd(t).qt(s,function(t,n,s){if(t.length===o){var a=zf(r.D,n);e.path.isPrefixOf(a.key.path)?a instanceof Sc&&al(e,a)&&(i=i.insert(a.key,a)):s.done()}}).next(function(){return i})},t.prototype.newChangeBuffer=function(t){return new kd(this,!!t&&t.trackRemovals)},t.prototype.getSize=function(t){return this.getMetadata(t).next(function(t){return t.byteSize})},t.prototype.getMetadata=function(t){return Nd(t).get(mf.key).next(function(t){return Pu(!!t),t})},t.prototype.Te=function(t,e){return Nd(t).put(mf.key,e)},t.prototype.Ie=function(t){if(t){var e=zf(this.D,t);return e instanceof Oc&&e.version.isEqual(ll.min())?null:e}return null},t}(),kd=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).Ve=e,r.trackRemovals=n,r.Se=new xd(function(t){return t.toString()},function(t,e){return t.isEqual(e)}),r}return Object(Tu.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[],r=0,i=new nh(function(t,e){return Fu(t.canonicalString(),e.canonicalString())});return this.changes.forEach(function(o,s){var a=e.Se.get(o);if(s.maybeDocument){var u=Gf(e.Ve.D,s.maybeDocument,e.getReadTime(o));i=i.add(o.path.popLast());var c=ld(u);r+=c-a,n.push(e.Ve.addEntry(t,o,u))}else if(r-=a,e.trackRemovals){var l=Gf(e.Ve.D,new Oc(o,ll.min()),e.getReadTime(o));n.push(e.Ve.addEntry(t,o,l))}else n.push(e.Ve.removeEntry(t,o))}),i.forEach(function(r){n.push(e.Ve.Gt.addToCollectionParentIndex(t,r))}),n.push(this.Ve.updateMetadata(t,r)),xf.waitFor(n)},e.prototype.getFromCache=function(t,e){var n=this;return this.Ve.Ae(t,e).next(function(t){return null===t?(n.Se.set(e,0),null):(n.Se.set(e,t.size),t.maybeDocument)})},e.prototype.getAllFromCache=function(t,e){var n=this;return this.Ve.be(t,e).next(function(t){var e=t.ve;return t.Pe.forEach(function(t,e){n.Se.set(t,e)}),e})},e}(Ad);function Nd(t){return Ff(t,mf.store)}function Dd(t){return Ff(t,gf.store)}function Rd(t){return t.path.toArray()}var Pd=function(){function t(t){this.D=t}return t.prototype.St=function(t,e,n,r){var i=this;Pu(n<r&&n>=0&&r<=11);var o=new Af("createOrUpgrade",e);n<1&&r>=1&&(function(t){t.createObjectStore(cf.store)}(t),function(t){t.createObjectStore(lf.store,{keyPath:lf.keyPath}),t.createObjectStore(hf.store,{keyPath:hf.keyPath,autoIncrement:!0}).createIndex(hf.userMutationsIndex,hf.userMutationsKeyPath,{unique:!0}),t.createObjectStore(ff.store)}(t),Ld(t),function(t){t.createObjectStore(gf.store)}(t));var s=xf.resolve();return n<3&&r>=3&&(0!==n&&(function(t){t.deleteObjectStore(vf.store),t.deleteObjectStore(yf.store),t.deleteObjectStore(bf.store)}(t),Ld(t)),s=s.next(function(){return function(t){var e=t.store(bf.store),n=new bf(0,0,ll.min().toTimestamp(),0);return e.put(bf.key,n)}(o)})),n<4&&r>=4&&(0!==n&&(s=s.next(function(){return function(t,e){return e.store(hf.store).kt().next(function(n){t.deleteObjectStore(hf.store),t.createObjectStore(hf.store,{keyPath:hf.keyPath,autoIncrement:!0}).createIndex(hf.userMutationsIndex,hf.userMutationsKeyPath,{unique:!0});var r=e.store(hf.store),i=n.map(function(t){return r.put(t)});return xf.waitFor(i)})}(t,o)})),s=s.next(function(){!function(t){t.createObjectStore(_f.store,{keyPath:_f.keyPath})}(t)})),n<5&&r>=5&&(s=s.next(function(){return i.De(o)})),n<6&&r>=6&&(s=s.next(function(){return function(t){t.createObjectStore(mf.store)}(t),i.Ce(o)})),n<7&&r>=7&&(s=s.next(function(){return i.xe(o)})),n<8&&r>=8&&(s=s.next(function(){return i.Ne(t,o)})),n<9&&r>=9&&(s=s.next(function(){!function(t){t.objectStoreNames.contains("remoteDocumentChanges")&&t.deleteObjectStore("remoteDocumentChanges")}(t),function(t){var e=t.objectStore(gf.store);e.createIndex(gf.readTimeIndex,gf.readTimeIndexPath,{unique:!1}),e.createIndex(gf.collectionReadTimeIndex,gf.collectionReadTimeIndexPath,{unique:!1})}(e)})),n<10&&r>=10&&(s=s.next(function(){return i.$e(o)})),n<11&&r>=11&&(s=s.next(function(){!function(t){t.createObjectStore(If.store,{keyPath:If.keyPath})}(t),function(t){t.createObjectStore(Ef.store,{keyPath:Ef.keyPath})}(t)})),s},t.prototype.Ce=function(t){var e=0;return t.store(gf.store).qt(function(t,n){e+=ld(n)}).next(function(){var n=new mf(e);return t.store(mf.store).put(mf.key,n)})},t.prototype.De=function(t){var e=this,n=t.store(lf.store),r=t.store(hf.store);return n.kt().next(function(n){return xf.forEach(n,function(n){var i=IDBKeyRange.bound([n.userId,-1],[n.userId,n.lastAcknowledgedBatchId]);return r.kt(hf.userMutationsIndex,i).next(function(r){return xf.forEach(r,function(r){Pu(r.userId===n.userId);var i=Qf(e.D,r);return cd(t,n.userId,i).next(function(){})})})})})},t.prototype.xe=function(t){var e=t.store(vf.store),n=t.store(gf.store);return t.store(bf.store).get(bf.key).next(function(t){var r=[];return n.qt(function(n,i){var o=new Yu(n),s=function(t){return[0,rf(t)]}(o);r.push(e.get(s).next(function(n){return n?xf.resolve():function(n){return e.put(new vf(0,rf(n),t.highestListenSequenceNumber))}(o)}))}).next(function(){return xf.waitFor(r)})})},t.prototype.Ne=function(t,e){t.createObjectStore(wf.store,{keyPath:wf.keyPath});var n=e.store(wf.store),r=new id,i=function(t){if(r.add(t)){var e=t.lastSegment(),i=t.popLast();return n.put({collectionId:e,parent:rf(i)})}};return e.store(gf.store).qt({Bt:!0},function(t,e){var n=new Yu(t);return i(n.popLast())}).next(function(){return e.store(ff.store).qt({Bt:!0},function(t,e){var n=af(t[1]);return i(n.popLast())})})},t.prototype.$e=function(t){var e=this,n=t.store(yf.store);return n.qt(function(t,r){var i=Yf(r),o=Xf(e.D,i);return n.put(o)})},t}();function Ld(t){t.createObjectStore(vf.store,{keyPath:vf.keyPath}).createIndex(vf.documentTargetsIndex,vf.documentTargetsKeyPath,{unique:!0}),t.createObjectStore(yf.store,{keyPath:yf.keyPath}).createIndex(yf.queryTargetsIndexName,yf.queryTargetsKeyPath,{unique:!0}),t.createObjectStore(bf.store)}var Md="Failed to obtain exclusive access to the persistence layer. To allow shared access, multi-tab synchronization has to be enabled in all tabs. If you are using `experimentalForceOwningTab:true`, make sure that only one tab has persistence enabled at any given time.",Ud=function(){function t(e,n,r,i,o,s,a,u,c,l){if(this.allowTabSynchronization=e,this.persistenceKey=n,this.clientId=r,this.Fe=o,this.window=s,this.document=a,this.Oe=c,this.ke=l,this.Me=null,this.Le=!1,this.isPrimary=!1,this.networkEnabled=!0,this.Be=null,this.inForeground=!1,this.qe=null,this.Ue=null,this.Qe=Number.NEGATIVE_INFINITY,this.Ke=function(t){return Promise.resolve()},!t.At())throw new Wu($u.UNIMPLEMENTED,"This platform is either missing IndexedDB or is known to have an incomplete implementation. Offline persistence has been disabled.");this.referenceDelegate=new Td(this,i),this.We=n+"main",this.D=new Hf(u),this.je=new jf(this.We,11,new Pd(this.D)),this.Ge=new yd(this.referenceDelegate,this.D),this.Gt=new od,this.ze=function(t,e){return new jd(t,e)}(this.D,this.Gt),this.He=new td,this.window&&this.window.localStorage?this.Je=this.window.localStorage:(this.Je=null,!1===l&&ku("IndexedDbPersistence","LocalStorage is unavailable. As a result, persistence may not work reliably. In particular enablePersistence() could fail immediately after refreshing the page."))}return t.prototype.start=function(){var t=this;return this.Ye().then(function(){if(!t.isPrimary&&!t.allowTabSynchronization)throw new Wu($u.FAILED_PRECONDITION,Md);return t.Xe(),t.Ze(),t.tn(),t.runTransaction("getHighestListenSequenceNumber","readonly",function(e){return t.Ge.getHighestSequenceNumber(e)})}).then(function(e){t.Me=new Cu(e,t.Oe)}).then(function(){t.Le=!0}).catch(function(e){return t.je&&t.je.close(),Promise.reject(e)})},t.prototype.en=function(t){var e=this;return this.Ke=function(n){return Object(Tu.b)(e,void 0,void 0,function(){return Object(Tu.d)(this,function(e){return this.started?[2,t(n)]:[2]})})},t(this.isPrimary)},t.prototype.setDatabaseDeletedListener=function(t){var e=this;this.je.Ct(function(n){return Object(Tu.b)(e,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return null===n.newVersion?[4,t()]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})})})},t.prototype.setNetworkEnabled=function(t){var e=this;this.networkEnabled!==t&&(this.networkEnabled=t,this.Fe.enqueueAndForget(function(){return Object(Tu.b)(e,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return this.started?[4,this.Ye()]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})}))},t.prototype.Ye=function(){var t=this;return this.runTransaction("updateClientMetadataAndTryBecomePrimary","readwrite",function(e){return Vd(e).put(new _f(t.clientId,Date.now(),t.networkEnabled,t.inForeground)).next(function(){if(t.isPrimary)return t.nn(e).next(function(e){e||(t.isPrimary=!1,t.Fe.enqueueRetryable(function(){return t.Ke(!1)}))})}).next(function(){return t.sn(e)}).next(function(n){return t.isPrimary&&!n?t.rn(e).next(function(){return!1}):!!n&&t.on(e).next(function(){return!0})})}).catch(function(e){if(Df(e))return ju("IndexedDbPersistence","Failed to extend owner lease: ",e),t.isPrimary;if(!t.allowTabSynchronization)throw e;return ju("IndexedDbPersistence","Releasing owner lease after error during lease refresh",e),!1}).then(function(e){t.isPrimary!==e&&t.Fe.enqueueRetryable(function(){return t.Ke(e)}),t.isPrimary=e})},t.prototype.nn=function(t){var e=this;return Fd(t).get(cf.key).next(function(t){return xf.resolve(e.cn(t))})},t.prototype.an=function(t){return Vd(t).delete(this.clientId)},t.prototype.un=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e,n,r=this;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return!this.isPrimary||this.hn(this.Qe,18e5)?[3,2]:(this.Qe=Date.now(),[4,this.runTransaction("maybeGarbageCollectMultiClientState","readwrite-primary",function(t){var e=Ff(t,_f.store);return e.kt().next(function(t){var n=r.ln(t,18e5),i=t.filter(function(t){return-1===n.indexOf(t)});return xf.forEach(i,function(t){return e.delete(t.clientId)}).next(function(){return i})})}).catch(function(){return[]})]);case 1:if(t=i.sent(),this.Je)for(e=0,n=t;e<n.length;e++)this.Je.removeItem(this.fn(n[e].clientId));i.label=2;case 2:return[2]}})})},t.prototype.tn=function(){var t=this;this.Ue=this.Fe.enqueueAfterDelay("client_metadata_refresh",4e3,function(){return t.Ye().then(function(){return t.un()}).then(function(){return t.tn()})})},t.prototype.cn=function(t){return!!t&&t.ownerId===this.clientId},t.prototype.sn=function(t){var e=this;return this.ke?xf.resolve(!0):Fd(t).get(cf.key).next(function(n){if(null!==n&&e.hn(n.leaseTimestampMs,5e3)&&!e.dn(n.ownerId)){if(e.cn(n)&&e.networkEnabled)return!0;if(!e.cn(n)){if(!n.allowTabSynchronization)throw new Wu($u.FAILED_PRECONDITION,Md);return!1}}return!(!e.networkEnabled||!e.inForeground)||Vd(t).kt().next(function(t){return void 0===e.ln(t,5e3).find(function(t){return!(e.clientId===t.clientId||!(!e.networkEnabled&&t.networkEnabled||!e.inForeground&&t.inForeground&&e.networkEnabled===t.networkEnabled))})})}).next(function(t){return e.isPrimary!==t&&ju("IndexedDbPersistence","Client "+(t?"is":"is not")+" eligible for a primary lease."),t})},t.prototype.shutdown=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t=this;return Object(Tu.d)(this,function(e){switch(e.label){case 0:return this.Le=!1,this.wn(),this.Ue&&(this.Ue.cancel(),this.Ue=null),this._n(),this.mn(),[4,this.je.runTransaction("shutdown","readwrite",[cf.store,_f.store],function(e){var n=new Uf(e,Cu.o);return t.rn(n).next(function(){return t.an(n)})})];case 1:return e.sent(),this.je.close(),this.yn(),[2]}})})},t.prototype.ln=function(t,e){var n=this;return t.filter(function(t){return n.hn(t.updateTimeMs,e)&&!n.dn(t.clientId)})},t.prototype.gn=function(){var t=this;return this.runTransaction("getActiveClients","readonly",function(e){return Vd(e).kt().next(function(e){return t.ln(e,18e5).map(function(t){return t.clientId})})})},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.getMutationQueue=function(t){return hd.Ht(t,this.D,this.Gt,this.referenceDelegate)},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r,i=this;return ju("IndexedDbPersistence","Starting transaction:",t),this.je.runTransaction(t,"readonly"===e?"readonly":"readwrite",Sf,function(o){return r=new Uf(o,i.Me?i.Me.next():Cu.o),"readwrite-primary"===e?i.nn(r).next(function(t){return!!t||i.sn(r)}).next(function(e){if(!e)throw ku("Failed to obtain primary lease for action '"+t+"'."),i.isPrimary=!1,i.Fe.enqueueRetryable(function(){return i.Ke(!1)}),new Wu($u.FAILED_PRECONDITION,Of);return n(r)}).next(function(t){return i.on(r).next(function(){return t})}):i.pn(r).next(function(){return n(r)})}).then(function(t){return r.raiseOnCommittedEvent(),t})},t.prototype.pn=function(t){var e=this;return Fd(t).get(cf.key).next(function(t){if(null!==t&&e.hn(t.leaseTimestampMs,5e3)&&!e.dn(t.ownerId)&&!e.cn(t)&&!(e.ke||e.allowTabSynchronization&&t.allowTabSynchronization))throw new Wu($u.FAILED_PRECONDITION,Md)})},t.prototype.on=function(t){var e=new cf(this.clientId,this.allowTabSynchronization,Date.now());return Fd(t).put(cf.key,e)},t.At=function(){return jf.At()},t.prototype.rn=function(t){var e=this,n=Fd(t);return n.get(cf.key).next(function(t){return e.cn(t)?(ju("IndexedDbPersistence","Releasing primary lease."),n.delete(cf.key)):xf.resolve()})},t.prototype.hn=function(t,e){var n=Date.now();return!(t<n-e||t>n&&(ku("Detected an update time that is in the future: "+t+" > "+n),1))},t.prototype.Xe=function(){var t=this;null!==this.document&&"function"==typeof this.document.addEventListener&&(this.qe=function(){t.Fe.enqueueAndForget(function(){return t.inForeground="visible"===t.document.visibilityState,t.Ye()})},this.document.addEventListener("visibilitychange",this.qe),this.inForeground="visible"===this.document.visibilityState)},t.prototype._n=function(){this.qe&&(this.document.removeEventListener("visibilitychange",this.qe),this.qe=null)},t.prototype.Ze=function(){var t,e=this;"function"==typeof(null===(t=this.window)||void 0===t?void 0:t.addEventListener)&&(this.Be=function(){e.wn(),e.Fe.enqueueAndForget(function(){return e.shutdown()})},this.window.addEventListener("unload",this.Be))},t.prototype.mn=function(){this.Be&&(this.window.removeEventListener("unload",this.Be),this.Be=null)},t.prototype.dn=function(t){var e;try{var n=null!==(null===(e=this.Je)||void 0===e?void 0:e.getItem(this.fn(t)));return ju("IndexedDbPersistence","Client '"+t+"' "+(n?"is":"is not")+" zombied in LocalStorage"),n}catch(t){return ku("IndexedDbPersistence","Failed to get zombied client id.",t),!1}},t.prototype.wn=function(){if(this.Je)try{this.Je.setItem(this.fn(this.clientId),String(Date.now()))}catch(t){ku("Failed to set zombie client id.",t)}},t.prototype.yn=function(){if(this.Je)try{this.Je.removeItem(this.fn(this.clientId))}catch(t){}},t.prototype.fn=function(t){return"firestore_zombie_"+this.persistenceKey+"_"+t},t}();function Fd(t){return Ff(t,cf.store)}function Vd(t){return Ff(t,_f.store)}function qd(t,e){var n=t.projectId;return t.isDefaultDatabase||(n+="."+t.database),"firestore/"+e+"/"+n+"/"}var Bd=function(t,e){this.progress=t,this.En=e},Hd=function(){function t(t,e,n){this.ze=t,this.Tn=e,this.Gt=n}return t.prototype.In=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKey(t,e).next(function(r){return n.An(t,e,r)})},t.prototype.An=function(t,e,n){return this.ze.getEntry(t,e).next(function(t){for(var r=0,i=n;r<i.length;r++)t=i[r].applyToLocalView(e,t);return t})},t.prototype.Rn=function(t,e,n){var r=sh();return e.forEach(function(t,e){for(var i=0,o=n;i<o.length;i++)e=o[i].applyToLocalView(t,e);r=r.insert(t,e)}),r},t.prototype.bn=function(t,e){var n=this;return this.ze.getEntries(t,e).next(function(e){return n.vn(t,e)})},t.prototype.vn=function(t,e){var n=this;return this.Tn.getAllMutationBatchesAffectingDocumentKeys(t,e).next(function(r){var i=n.Rn(t,e,r),o=oh();return i.forEach(function(t,e){e||(e=new Oc(t,ll.min())),o=o.insert(t,e)}),o})},t.prototype.getDocumentsMatchingQuery=function(t,e,n){return function(t){return tc.isDocumentKey(t.path)&&null===t.collectionGroup&&0===t.filters.length}(e)?this.Pn(t,e.path):tl(e)?this.Vn(t,e,n):this.Sn(t,e,n)},t.prototype.Pn=function(t,e){return this.In(t,new tc(e)).next(function(t){var e=uh();return t instanceof Sc&&(e=e.insert(t.key,t)),e})},t.prototype.Vn=function(t,e,n){var r=this,i=e.collectionGroup,o=uh();return this.Gt.getCollectionParents(t,i).next(function(s){return xf.forEach(s,function(s){var a=function(t,e){return new Jc(e,null,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(e,s.child(i));return r.Sn(t,a,n).next(function(t){t.forEach(function(t,e){o=o.insert(t,e)})})}).next(function(){return o})})},t.prototype.Sn=function(t,e,n){var r,i,o=this;return this.ze.getDocumentsMatchingQuery(t,e,n).next(function(n){return r=n,o.Tn.getAllMutationBatchesAffectingQuery(t,e)}).next(function(e){return o.Dn(t,i=e,r).next(function(t){r=t;for(var e=0,n=i;e<n.length;e++)for(var o=n[e],s=0,a=o.mutations;s<a.length;s++){var u=a[s],c=u.key,l=Ll(u,r.get(c),o.localWriteTime);r=l instanceof Sc?r.insert(c,l):r.remove(c)}})}).next(function(){return r.forEach(function(t,n){al(e,n)||(r=r.remove(t))}),r})},t.prototype.Dn=function(t,e,n){for(var r=fh(),i=0,o=e;i<o.length;i++)for(var s=0,a=o[i].mutations;s<a.length;s++){var u=a[s];u instanceof ql&&null===n.get(u.key)&&(r=r.add(u.key))}var c=n;return this.ze.getEntries(t,r).next(function(t){return t.forEach(function(t,e){null!==e&&e instanceof Sc&&(c=c.insert(t,e))}),c})},t}(),zd=function(){function t(t,e,n,r){this.targetId=t,this.fromCache=e,this.Cn=n,this.xn=r}return t.Nn=function(e,n){for(var r=fh(),i=fh(),o=0,s=n.docChanges;o<s.length;o++){var a=s[o];switch(a.type){case 0:r=r.add(a.doc.key);break;case 1:i=i.add(a.doc.key)}}return new t(e,n.fromCache,r,i)},t}(),Gd=function(){function t(){}return t.prototype.$n=function(t){this.Fn=t},t.prototype.getDocumentsMatchingQuery=function(t,e,n,r){var i=this;return function(t){return 0===t.filters.length&&null===t.limit&&null==t.startAt&&null==t.endAt&&(0===t.explicitOrderBy.length||1===t.explicitOrderBy.length&&t.explicitOrderBy[0].field.isKeyField())}(e)||n.isEqual(ll.min())?this.On(t,e):this.Fn.bn(t,r).next(function(o){var s=i.kn(e,o);return(Qc(e)||Yc(e))&&i.Mn(e.limitType,s,r,n)?i.On(t,e):(Au()<=Ii.a.DEBUG&&ju("QueryEngine","Re-using previous result from %s to execute query: %s",n.toString(),sl(e)),i.Fn.getDocumentsMatchingQuery(t,e,n).next(function(t){return s.forEach(function(e){t=t.insert(e.key,e)}),t}))})},t.prototype.kn=function(t,e){var n=new nh(ul(t));return e.forEach(function(e,r){r instanceof Sc&&al(t,r)&&(n=n.add(r))}),n},t.prototype.Mn=function(t,e,n,r){if(n.size!==e.size)return!0;var i="F"===t?e.last():e.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(r)>0)},t.prototype.On=function(t,e){return Au()<=Ii.a.DEBUG&&ju("QueryEngine","Using full collection scan to execute query:",sl(e)),this.Fn.getDocumentsMatchingQuery(t,e,ll.min())},t}(),Kd=function(){function t(t,e,n,r){this.persistence=t,this.Ln=e,this.D=r,this.Bn=new Zl(Fu),this.qn=new xd(function(t){return Ac(t)},jc),this.Un=ll.min(),this.Tn=t.getMutationQueue(n),this.Qn=t.getRemoteDocumentCache(),this.Ge=t.getTargetCache(),this.Kn=new Hd(this.Qn,this.Tn,this.persistence.getIndexManager()),this.He=t.getBundleCache(),this.Ln.$n(this.Kn)}return t.prototype.collectGarbage=function(t){var e=this;return this.persistence.runTransaction("Collect garbage","readwrite-primary",function(n){return t.collect(n,e.Bn)})},t}();function Jd(t,e,n,r){return new Kd(t,e,n,r)}function $d(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Tu.d)(this,function(s){switch(s.label){case 0:return n=Lu(t),r=n.Tn,i=n.Kn,[4,n.persistence.runTransaction("Handle user change","readonly",function(t){var o;return n.Tn.getAllMutationBatches(t).next(function(s){return o=s,r=n.persistence.getMutationQueue(e),i=new Hd(n.Qn,r,n.persistence.getIndexManager()),r.getAllMutationBatches(t)}).next(function(e){for(var n=[],r=[],s=fh(),a=0,u=o;a<u.length;a++){var c=u[a];n.push(c.batchId);for(var l=0,h=c.mutations;l<h.length;l++)s=s.add(h[l].key)}for(var f=0,d=e;f<d.length;f++){var p=d[f];r.push(p.batchId);for(var g=0,m=p.mutations;g<m.length;g++)s=s.add(m[g].key)}return i.bn(t,s).next(function(t){return{Wn:t,removedBatchIds:n,addedBatchIds:r}})})})];case 1:return o=s.sent(),[2,(n.Tn=r,n.Kn=i,n.Ln.$n(n.Kn),o)]}})})}function Wd(t,e){var n=Lu(t);return n.persistence.runTransaction("Acknowledge batch","readwrite-primary",function(t){var r=e.batch.keys(),i=n.Qn.newChangeBuffer({trackRemovals:!0});return function(t,e,n,r){var i=n.batch,o=i.keys(),s=xf.resolve();return o.forEach(function(t){s=s.next(function(){return r.getEntry(e,t)}).next(function(e){var o=e,s=n.docVersions.get(t);Pu(null!==s),(!o||o.version.compareTo(s)<0)&&(o=i.applyToRemoteDocument(t,o,n))&&r.addEntry(o,n.commitVersion)})}),s.next(function(){return t.Tn.removeMutationBatch(e,i)})}(n,t,e,i).next(function(){return i.apply(t)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}function Qd(t){var e=Lu(t);return e.persistence.runTransaction("Get last remote snapshot version","readonly",function(t){return e.Ge.getLastRemoteSnapshotVersion(t)})}function Yd(t,e){var n=Lu(t),r=e.snapshotVersion,i=n.Bn;return n.persistence.runTransaction("Apply remote event","readwrite-primary",function(t){var o=n.Qn.newChangeBuffer({trackRemovals:!0});i=n.Bn;var s=[];e.targetChanges.forEach(function(e,o){var a=i.get(o);if(a){s.push(n.Ge.removeMatchingKeys(t,e.removedDocuments,o).next(function(){return n.Ge.addMatchingKeys(t,e.addedDocuments,o)}));var u=e.resumeToken;if(u.approximateByteSize()>0){var c=a.withResumeToken(u,r).withSequenceNumber(t.currentSequenceNumber);i=i.insert(o,c),function(t,e,n){return Pu(e.resumeToken.approximateByteSize()>0),0===t.resumeToken.approximateByteSize()||e.snapshotVersion.toMicroseconds()-t.snapshotVersion.toMicroseconds()>=3e8||n.addedDocuments.size+n.modifiedDocuments.size+n.removedDocuments.size>0}(a,c,e)&&s.push(n.Ge.updateTargetData(t,c))}}});var a=oh();if(e.documentUpdates.forEach(function(r,i){e.resolvedLimboDocuments.has(r)&&s.push(n.persistence.referenceDelegate.updateLimboDocument(t,r))}),s.push(Xd(t,o,e.documentUpdates,r,void 0).next(function(t){a=t})),!r.isEqual(ll.min())){var u=n.Ge.getLastRemoteSnapshotVersion(t).next(function(e){return n.Ge.setTargetsMetadata(t,t.currentSequenceNumber,r)});s.push(u)}return xf.waitFor(s).next(function(){return o.apply(t)}).next(function(){return n.Kn.vn(t,a)})}).then(function(t){return n.Bn=i,t})}function Xd(t,e,n,r,i){var o=fh();return n.forEach(function(t){return o=o.add(t)}),e.getEntries(t,o).next(function(t){var o=oh();return n.forEach(function(n,s){var a=t.get(n),u=(null==i?void 0:i.get(n))||r;s instanceof Oc&&s.version.isEqual(ll.min())?(e.removeEntry(n,u),o=o.insert(n,s)):null==a||s.version.compareTo(a.version)>0||0===s.version.compareTo(a.version)&&a.hasPendingWrites?(e.addEntry(s,u),o=o.insert(n,s)):ju("LocalStore","Ignoring outdated watch update for ",n,". Current version:",a.version," Watch version:",s.version)}),o})}function Zd(t,e){var n=Lu(t);return n.persistence.runTransaction("Get next mutation batch","readonly",function(t){return void 0===e&&(e=-1),n.Tn.getNextMutationBatchAfterBatchId(t,e)})}function tp(t,e){var n=Lu(t);return n.persistence.runTransaction("Allocate target","readwrite",function(t){var r;return n.Ge.getTargetData(t,e).next(function(i){return i?xf.resolve(r=i):n.Ge.allocateTargetId(t).next(function(i){return r=new Bf(e,i,0,t.currentSequenceNumber),n.Ge.addTargetData(t,r).next(function(){return r})})})}).then(function(t){var r=n.Bn.get(t.targetId);return(null===r||t.snapshotVersion.compareTo(r.snapshotVersion)>0)&&(n.Bn=n.Bn.insert(t.targetId,t),n.qn.set(e,t.targetId)),t})}function ep(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:r=Lu(t),i=r.Bn.get(e),o=n?"readwrite":"readwrite-primary",a.label=1;case 1:return a.trys.push([1,4,,5]),n?[3,3]:[4,r.persistence.runTransaction("Release target",o,function(t){return r.persistence.referenceDelegate.removeTarget(t,i)})];case 2:a.sent(),a.label=3;case 3:return[3,5];case 4:if(!Df(s=a.sent()))throw s;return ju("LocalStore","Failed to update sequence numbers for target "+e+": "+s),[3,5];case 5:return r.Bn=r.Bn.remove(e),r.qn.delete(i.target),[2]}})})}function np(t,e,n){var r=Lu(t),i=ll.min(),o=fh();return r.persistence.runTransaction("Execute query","readonly",function(t){return function(t,e,n){var r=Lu(t),i=r.qn.get(n);return void 0!==i?xf.resolve(r.Bn.get(i)):r.Ge.getTargetData(e,n)}(r,t,nl(e)).next(function(e){if(e)return i=e.lastLimboFreeSnapshotVersion,r.Ge.getMatchingKeysForTargetId(t,e.targetId).next(function(t){o=t})}).next(function(){return r.Ln.getDocumentsMatchingQuery(t,e,n?i:ll.min(),n?o:fh())}).next(function(t){return{documents:t,jn:o}})})}function rp(t,e){var n=Lu(t),r=Lu(n.Ge),i=n.Bn.get(e);return i?Promise.resolve(i.target):n.persistence.runTransaction("Get target data","readonly",function(t){return r.yt(t,e).next(function(t){return t?t.target:null})})}function ip(t){var e=Lu(t);return e.persistence.runTransaction("Get new document changes","readonly",function(t){return function(t,e,n){var r=Lu(t),i=oh(),o=Kf(n),s=Dd(e),a=IDBKeyRange.lowerBound(o,!0);return s.qt({index:gf.readTimeIndex,range:a},function(t,e){var n=zf(r.D,e);i=i.insert(n.key,n),o=e.readTime}).next(function(){return{En:i,readTime:Jf(o)}})}(e.Qn,t,e.Un)}).then(function(t){var n=t.En;return e.Un=t.readTime,n})}function op(t){return Object(Tu.b)(this,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){return[2,(e=Lu(t)).persistence.runTransaction("Synchronize last document change read time","readonly",function(t){return function(t){var e=Dd(t),n=ll.min();return e.qt({index:gf.readTimeIndex,reverse:!0},function(t,e,r){e.readTime&&(n=Jf(e.readTime)),r.done()}).next(function(){return n})}(t)}).then(function(t){e.Un=t})]})})}function sp(t,e,n,r){return Object(Tu.b)(this,void 0,void 0,function(){var i,o,s,a,u,c,l,h,f,d;return Object(Tu.d)(this,function(p){switch(p.label){case 0:for(i=Lu(t),o=fh(),s=oh(),a=lh(),u=0,c=n;u<c.length;u++)h=e.Gn((l=c[u]).metadata.name),l.document&&(o=o.add(h)),s=s.insert(h,e.zn(l)),a=a.insert(h,e.Hn(l.metadata.readTime));return f=i.Qn.newChangeBuffer({trackRemovals:!0}),[4,tp(i,function(t){return nl(Wc(Yu.fromString("__bundle__/docs/"+t)))}(r))];case 1:return d=p.sent(),[2,i.persistence.runTransaction("Apply bundle documents","readwrite",function(t){return Xd(t,f,s,ll.min(),a).next(function(e){return f.apply(t),e}).next(function(e){return i.Ge.removeMatchingKeysForTargetId(t,d.targetId).next(function(){return i.Ge.addMatchingKeys(t,o,d.targetId)}).next(function(){return i.Kn.vn(t,e)})})})]}})})}function ap(t,e,n){return void 0===n&&(n=fh()),Object(Tu.b)(this,void 0,void 0,function(){var r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return[4,tp(t,nl(Zf(e.bundledQuery)))];case 1:return r=o.sent(),[2,(i=Lu(t)).persistence.runTransaction("Save named query","readwrite",function(t){var o=jh(e.readTime);if(r.snapshotVersion.compareTo(o)>=0)return i.He.saveNamedQuery(t,e);var s=r.withResumeToken(ec.EMPTY_BYTE_STRING,o);return i.Bn=i.Bn.insert(s.targetId,s),i.Ge.updateTargetData(t,s).next(function(){return i.Ge.removeMatchingKeysForTargetId(t,r.targetId)}).next(function(){return i.Ge.addMatchingKeys(t,n,r.targetId)}).next(function(){return i.He.saveNamedQuery(t,e)})})]}})})}var up=function(){function t(t){this.D=t,this.Jn=new Map,this.Yn=new Map}return t.prototype.getBundleMetadata=function(t,e){return xf.resolve(this.Jn.get(e))},t.prototype.saveBundleMetadata=function(t,e){var n;return this.Jn.set(e.id,{id:(n=e).id,version:n.version,createTime:jh(n.createTime)}),xf.resolve()},t.prototype.getNamedQuery=function(t,e){return xf.resolve(this.Yn.get(e))},t.prototype.saveNamedQuery=function(t,e){return this.Yn.set(e.name,function(t){return{name:t.name,query:Zf(t.bundledQuery),readTime:jh(t.readTime)}}(e)),xf.resolve()},t}(),cp=function(){function t(){this.Xn=new nh(lp.Zn),this.ts=new nh(lp.es)}return t.prototype.isEmpty=function(){return this.Xn.isEmpty()},t.prototype.addReference=function(t,e){var n=new lp(t,e);this.Xn=this.Xn.add(n),this.ts=this.ts.add(n)},t.prototype.ns=function(t,e){var n=this;t.forEach(function(t){return n.addReference(t,e)})},t.prototype.removeReference=function(t,e){this.ss(new lp(t,e))},t.prototype.rs=function(t,e){var n=this;t.forEach(function(t){return n.removeReference(t,e)})},t.prototype.os=function(t){var e=this,n=new tc(new Yu([])),r=new lp(n,t),i=new lp(n,t+1),o=[];return this.ts.forEachInRange([r,i],function(t){e.ss(t),o.push(t.key)}),o},t.prototype.cs=function(){var t=this;this.Xn.forEach(function(e){return t.ss(e)})},t.prototype.ss=function(t){this.Xn=this.Xn.delete(t),this.ts=this.ts.delete(t)},t.prototype.us=function(t){var e=new tc(new Yu([])),n=new lp(e,t),r=new lp(e,t+1),i=fh();return this.ts.forEachInRange([n,r],function(t){i=i.add(t.key)}),i},t.prototype.containsKey=function(t){var e=new lp(t,0),n=this.Xn.firstAfterOrEqual(e);return null!==n&&t.isEqual(n.key)},t}(),lp=function(){function t(t,e){this.key=t,this.hs=e}return t.Zn=function(t,e){return tc.comparator(t.key,e.key)||Fu(t.hs,e.hs)},t.es=function(t,e){return Fu(t.hs,e.hs)||tc.comparator(t.key,e.key)},t}(),hp=function(){function t(t,e){this.Gt=t,this.referenceDelegate=e,this.Tn=[],this.ls=1,this.fs=new nh(lp.Zn)}return t.prototype.checkEmpty=function(t){return xf.resolve(0===this.Tn.length)},t.prototype.addMutationBatch=function(t,e,n,r){var i=this.ls;this.ls++;var o=new Vf(i,e,n,r);this.Tn.push(o);for(var s=0,a=r;s<a.length;s++){var u=a[s];this.fs=this.fs.add(new lp(u.key,i)),this.Gt.addToCollectionParentIndex(t,u.key.path.popLast())}return xf.resolve(o)},t.prototype.lookupMutationBatch=function(t,e){return xf.resolve(this.ds(e))},t.prototype.getNextMutationBatchAfterBatchId=function(t,e){var n=this.ws(e+1),r=n<0?0:n;return xf.resolve(this.Tn.length>r?this.Tn[r]:null)},t.prototype.getHighestUnacknowledgedBatchId=function(){return xf.resolve(0===this.Tn.length?-1:this.ls-1)},t.prototype.getAllMutationBatches=function(t){return xf.resolve(this.Tn.slice())},t.prototype.getAllMutationBatchesAffectingDocumentKey=function(t,e){var n=this,r=new lp(e,0),i=new lp(e,Number.POSITIVE_INFINITY),o=[];return this.fs.forEachInRange([r,i],function(t){var e=n.ds(t.hs);o.push(e)}),xf.resolve(o)},t.prototype.getAllMutationBatchesAffectingDocumentKeys=function(t,e){var n=this,r=new nh(Fu);return e.forEach(function(t){var e=new lp(t,0),i=new lp(t,Number.POSITIVE_INFINITY);n.fs.forEachInRange([e,i],function(t){r=r.add(t.hs)})}),xf.resolve(this._s(r))},t.prototype.getAllMutationBatchesAffectingQuery=function(t,e){var n=e.path,r=n.length+1,i=n;tc.isDocumentKey(i)||(i=i.child(""));var o=new lp(new tc(i),0),s=new nh(Fu);return this.fs.forEachWhile(function(t){var e=t.key.path;return!!n.isPrefixOf(e)&&(e.length===r&&(s=s.add(t.hs)),!0)},o),xf.resolve(this._s(s))},t.prototype._s=function(t){var e=this,n=[];return t.forEach(function(t){var r=e.ds(t);null!==r&&n.push(r)}),n},t.prototype.removeMutationBatch=function(t,e){var n=this;Pu(0===this.ys(e.batchId,"removed")),this.Tn.shift();var r=this.fs;return xf.forEach(e.mutations,function(i){var o=new lp(i.key,e.batchId);return r=r.delete(o),n.referenceDelegate.markPotentiallyOrphaned(t,i.key)}).next(function(){n.fs=r})},t.prototype.Xt=function(t){},t.prototype.containsKey=function(t,e){var n=new lp(e,0),r=this.fs.firstAfterOrEqual(n);return xf.resolve(e.isEqual(r&&r.key))},t.prototype.performConsistencyCheck=function(t){return xf.resolve()},t.prototype.ys=function(t,e){return this.ws(t)},t.prototype.ws=function(t){return 0===this.Tn.length?0:t-this.Tn[0].batchId},t.prototype.ds=function(t){var e=this.ws(t);return e<0||e>=this.Tn.length?null:this.Tn[e]},t}(),fp=function(){function t(t,e){this.Gt=t,this.gs=e,this.docs=new Zl(tc.comparator),this.size=0}return t.prototype.addEntry=function(t,e,n){var r=e.key,i=this.docs.get(r),o=i?i.size:0,s=this.gs(e);return this.docs=this.docs.insert(r,{maybeDocument:e,size:s,readTime:n}),this.size+=s-o,this.Gt.addToCollectionParentIndex(t,r.path.popLast())},t.prototype.removeEntry=function(t){var e=this.docs.get(t);e&&(this.docs=this.docs.remove(t),this.size-=e.size)},t.prototype.getEntry=function(t,e){var n=this.docs.get(e);return xf.resolve(n?n.maybeDocument:null)},t.prototype.getEntries=function(t,e){var n=this,r=sh();return e.forEach(function(t){var e=n.docs.get(t);r=r.insert(t,e?e.maybeDocument:null)}),xf.resolve(r)},t.prototype.getDocumentsMatchingQuery=function(t,e,n){for(var r=uh(),i=new tc(e.path.child("")),o=this.docs.getIteratorFrom(i);o.hasNext();){var s=o.getNext(),a=s.value,u=a.maybeDocument,c=a.readTime;if(!e.path.isPrefixOf(s.key.path))break;c.compareTo(n)<=0||u instanceof Sc&&al(e,u)&&(r=r.insert(u.key,u))}return xf.resolve(r)},t.prototype.ps=function(t,e){return xf.forEach(this.docs,function(t){return e(t)})},t.prototype.newChangeBuffer=function(t){return new dp(this)},t.prototype.getSize=function(t){return xf.resolve(this.size)},t}(),dp=function(t){function e(e){var n=this;return(n=t.call(this)||this).Ve=e,n}return Object(Tu.c)(e,t),e.prototype.applyChanges=function(t){var e=this,n=[];return this.changes.forEach(function(r,i){i&&i.maybeDocument?n.push(e.Ve.addEntry(t,i.maybeDocument,e.getReadTime(r))):e.Ve.removeEntry(r)}),xf.waitFor(n)},e.prototype.getFromCache=function(t,e){return this.Ve.getEntry(t,e)},e.prototype.getAllFromCache=function(t,e){return this.Ve.getEntries(t,e)},e}(Ad),pp=function(){function t(t){this.persistence=t,this.Es=new xd(function(t){return Ac(t)},jc),this.lastRemoteSnapshotVersion=ll.min(),this.highestTargetId=0,this.Ts=0,this.Is=new cp,this.targetCount=0,this.As=md.ee()}return t.prototype.forEachTarget=function(t,e){return this.Es.forEach(function(t,n){return e(n)}),xf.resolve()},t.prototype.getLastRemoteSnapshotVersion=function(t){return xf.resolve(this.lastRemoteSnapshotVersion)},t.prototype.getHighestSequenceNumber=function(t){return xf.resolve(this.Ts)},t.prototype.allocateTargetId=function(t){return this.highestTargetId=this.As.next(),xf.resolve(this.highestTargetId)},t.prototype.setTargetsMetadata=function(t,e,n){return n&&(this.lastRemoteSnapshotVersion=n),e>this.Ts&&(this.Ts=e),xf.resolve()},t.prototype.re=function(t){this.Es.set(t.target,t);var e=t.targetId;e>this.highestTargetId&&(this.As=new md(e),this.highestTargetId=e),t.sequenceNumber>this.Ts&&(this.Ts=t.sequenceNumber)},t.prototype.addTargetData=function(t,e){return this.re(e),this.targetCount+=1,xf.resolve()},t.prototype.updateTargetData=function(t,e){return this.re(e),xf.resolve()},t.prototype.removeTargetData=function(t,e){return this.Es.delete(e.target),this.Is.os(e.targetId),this.targetCount-=1,xf.resolve()},t.prototype.removeTargets=function(t,e,n){var r=this,i=0,o=[];return this.Es.forEach(function(s,a){a.sequenceNumber<=e&&null===n.get(a.targetId)&&(r.Es.delete(s),o.push(r.removeMatchingKeysForTargetId(t,a.targetId)),i++)}),xf.waitFor(o).next(function(){return i})},t.prototype.getTargetCount=function(t){return xf.resolve(this.targetCount)},t.prototype.getTargetData=function(t,e){var n=this.Es.get(e)||null;return xf.resolve(n)},t.prototype.addMatchingKeys=function(t,e,n){return this.Is.ns(e,n),xf.resolve()},t.prototype.removeMatchingKeys=function(t,e,n){this.Is.rs(e,n);var r=this.persistence.referenceDelegate,i=[];return r&&e.forEach(function(e){i.push(r.markPotentiallyOrphaned(t,e))}),xf.waitFor(i)},t.prototype.removeMatchingKeysForTargetId=function(t,e){return this.Is.os(e),xf.resolve()},t.prototype.getMatchingKeysForTargetId=function(t,e){var n=this.Is.us(e);return xf.resolve(n)},t.prototype.containsKey=function(t,e){return xf.resolve(this.Is.containsKey(e))},t}(),gp=function(){function t(t,e){var n=this;this.Rs={},this.Me=new Cu(0),this.Le=!1,this.Le=!0,this.referenceDelegate=t(this),this.Ge=new pp(this),this.Gt=new rd,this.ze=function(t,e){return new fp(t,function(t){return n.referenceDelegate.bs(t)})}(this.Gt),this.D=new Hf(e),this.He=new up(this.D)}return t.prototype.start=function(){return Promise.resolve()},t.prototype.shutdown=function(){return this.Le=!1,Promise.resolve()},Object.defineProperty(t.prototype,"started",{get:function(){return this.Le},enumerable:!1,configurable:!0}),t.prototype.setDatabaseDeletedListener=function(){},t.prototype.setNetworkEnabled=function(){},t.prototype.getIndexManager=function(){return this.Gt},t.prototype.getMutationQueue=function(t){var e=this.Rs[t.toKey()];return e||(e=new hp(this.Gt,this.referenceDelegate),this.Rs[t.toKey()]=e),e},t.prototype.getTargetCache=function(){return this.Ge},t.prototype.getRemoteDocumentCache=function(){return this.ze},t.prototype.getBundleCache=function(){return this.He},t.prototype.runTransaction=function(t,e,n){var r=this;ju("MemoryPersistence","Starting transaction:",t);var i=new mp(this.Me.next());return this.referenceDelegate.vs(),n(i).next(function(t){return r.referenceDelegate.Ps(i).next(function(){return t})}).toPromise().then(function(t){return i.raiseOnCommittedEvent(),t})},t.prototype.Vs=function(t,e){return xf.or(Object.values(this.Rs).map(function(n){return function(){return n.containsKey(t,e)}}))},t}(),mp=function(t){function e(e){var n=this;return(n=t.call(this)||this).currentSequenceNumber=e,n}return Object(Tu.c)(e,t),e}(Tf),yp=function(){function t(t){this.persistence=t,this.Ss=new cp,this.Ds=null}return t.Cs=function(e){return new t(e)},Object.defineProperty(t.prototype,"xs",{get:function(){if(this.Ds)return this.Ds;throw Ru()},enumerable:!1,configurable:!0}),t.prototype.addReference=function(t,e,n){return this.Ss.addReference(n,e),this.xs.delete(n.toString()),xf.resolve()},t.prototype.removeReference=function(t,e,n){return this.Ss.removeReference(n,e),this.xs.add(n.toString()),xf.resolve()},t.prototype.markPotentiallyOrphaned=function(t,e){return this.xs.add(e.toString()),xf.resolve()},t.prototype.removeTarget=function(t,e){var n=this;this.Ss.os(e.targetId).forEach(function(t){return n.xs.add(t.toString())});var r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,e.targetId).next(function(t){t.forEach(function(t){return n.xs.add(t.toString())})}).next(function(){return r.removeTargetData(t,e)})},t.prototype.vs=function(){this.Ds=new Set},t.prototype.Ps=function(t){var e=this,n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return xf.forEach(this.xs,function(r){var i=tc.fromPath(r);return e.Ns(t,i).next(function(t){t||n.removeEntry(i)})}).next(function(){return e.Ds=null,n.apply(t)})},t.prototype.updateLimboDocument=function(t,e){var n=this;return this.Ns(t,e).next(function(t){t?n.xs.delete(e.toString()):n.xs.add(e.toString())})},t.prototype.bs=function(t){return 0},t.prototype.Ns=function(t,e){var n=this;return xf.or([function(){return xf.resolve(n.Ss.containsKey(e))},function(){return n.persistence.getTargetCache().containsKey(t,e)},function(){return n.persistence.Vs(t,e)}])},t}(),vp=function(){function t(t){this.uid=t}return t.prototype.isAuthenticated=function(){return null!=this.uid},t.prototype.toKey=function(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"},t.prototype.isEqual=function(t){return t.uid===this.uid},t}();function bp(t,e){return"firestore_clients_"+t+"_"+e}function wp(t,e,n){var r="firestore_mutations_"+t+"_"+n;return e.isAuthenticated()&&(r+="_"+e.uid),r}function _p(t,e){return"firestore_targets_"+t+"_"+e}vp.UNAUTHENTICATED=new vp(null),vp.GOOGLE_CREDENTIALS=new vp("google-credentials-uid"),vp.FIRST_PARTY=new vp("first-party-uid");var Ip=function(){function t(t,e,n,r){this.user=t,this.batchId=e,this.state=n,this.error=r}return t.$s=function(e,n,r){var i,o=JSON.parse(r),s="object"==typeof o&&-1!==["pending","acknowledged","rejected"].indexOf(o.state)&&(void 0===o.error||"object"==typeof o.error);return s&&o.error&&(s="string"==typeof o.error.message&&"string"==typeof o.error.code)&&(i=new Wu(o.error.code,o.error.message)),s?new t(e,n,o.state,i):(ku("SharedClientState","Failed to parse mutation state for ID '"+n+"': "+r),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Ep=function(){function t(t,e,n){this.targetId=t,this.state=e,this.error=n}return t.$s=function(e,n){var r,i=JSON.parse(n),o="object"==typeof i&&-1!==["not-current","current","rejected"].indexOf(i.state)&&(void 0===i.error||"object"==typeof i.error);return o&&i.error&&(o="string"==typeof i.error.message&&"string"==typeof i.error.code)&&(r=new Wu(i.error.code,i.error.message)),o?new t(e,i.state,r):(ku("SharedClientState","Failed to parse target state for ID '"+e+"': "+n),null)},t.prototype.Fs=function(){var t={state:this.state,updateTimeMs:Date.now()};return this.error&&(t.error={code:this.error.code,message:this.error.message}),JSON.stringify(t)},t}(),Sp=function(){function t(t,e){this.clientId=t,this.activeTargetIds=e}return t.$s=function(e,n){for(var r=JSON.parse(n),i="object"==typeof r&&r.activeTargetIds instanceof Array,o=ph(),s=0;i&&s<r.activeTargetIds.length;++s)i=Ju(r.activeTargetIds[s]),o=o.add(r.activeTargetIds[s]);return i?new t(e,o):(ku("SharedClientState","Failed to parse client data for instance '"+e+"': "+n),null)},t}(),Op=function(){function t(t,e){this.clientId=t,this.onlineState=e}return t.$s=function(e){var n=JSON.parse(e);return"object"==typeof n&&-1!==["Unknown","Online","Offline"].indexOf(n.onlineState)&&"string"==typeof n.clientId?new t(n.clientId,n.onlineState):(ku("SharedClientState","Failed to parse online state: "+e),null)},t}(),Tp=function(){function t(){this.activeTargetIds=ph()}return t.prototype.Os=function(t){this.activeTargetIds=this.activeTargetIds.add(t)},t.prototype.ks=function(t){this.activeTargetIds=this.activeTargetIds.delete(t)},t.prototype.Fs=function(){var t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)},t}(),Cp=function(){function t(t,e,n,r,i){this.window=t,this.Fe=e,this.persistenceKey=n,this.Ms=r,this.syncEngine=null,this.onlineStateHandler=null,this.sequenceNumberHandler=null,this.Ls=this.Bs.bind(this),this.qs=new Zl(Fu),this.started=!1,this.Us=[];var o=n.replace(/[.*+?^${}()|[\]\\]/g,"\\$&");this.storage=this.window.localStorage,this.currentUser=i,this.Qs=bp(this.persistenceKey,this.Ms),this.Ks=function(t){return"firestore_sequence_number_"+t}(this.persistenceKey),this.qs=this.qs.insert(this.Ms,new Tp),this.Ws=new RegExp("^firestore_clients_"+o+"_([^_]*)$"),this.js=new RegExp("^firestore_mutations_"+o+"_(\\d+)(?:_(.*))?$"),this.Gs=new RegExp("^firestore_targets_"+o+"_(\\d+)$"),this.zs=function(t){return"firestore_online_state_"+t}(this.persistenceKey),this.Hs=function(t){return"firestore_bundle_loaded_"+t}(this.persistenceKey),this.window.addEventListener("storage",this.Ls)}return t.At=function(t){return!(!t||!t.localStorage)},t.prototype.start=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e,n,r,i,o,s,a,u,c,l=this;return Object(Tu.d)(this,function(h){switch(h.label){case 0:return[4,this.syncEngine.gn()];case 1:for(t=h.sent(),e=0,n=t;e<n.length;e++)(r=n[e])!==this.Ms&&(i=this.getItem(bp(this.persistenceKey,r)))&&(o=Sp.$s(r,i))&&(this.qs=this.qs.insert(o.clientId,o));for(this.Js(),(s=this.storage.getItem(this.zs))&&(a=this.Ys(s))&&this.Xs(a),u=0,c=this.Us;u<c.length;u++)this.Bs(c[u]);return this.Us=[],this.window.addEventListener("unload",function(){return l.shutdown()}),this.started=!0,[2]}})})},t.prototype.writeSequenceNumber=function(t){this.setItem(this.Ks,JSON.stringify(t))},t.prototype.getAllActiveQueryTargets=function(){return this.Zs(this.qs)},t.prototype.isActiveQueryTarget=function(t){var e=!1;return this.qs.forEach(function(n,r){r.activeTargetIds.has(t)&&(e=!0)}),e},t.prototype.addPendingMutation=function(t){this.ti(t,"pending")},t.prototype.updateMutationState=function(t,e,n){this.ti(t,e,n),this.ei(t)},t.prototype.addLocalQueryTarget=function(t){var e="not-current";if(this.isActiveQueryTarget(t)){var n=this.storage.getItem(_p(this.persistenceKey,t));if(n){var r=Ep.$s(t,n);r&&(e=r.state)}}return this.ni.Os(t),this.Js(),e},t.prototype.removeLocalQueryTarget=function(t){this.ni.ks(t),this.Js()},t.prototype.isLocalQueryTarget=function(t){return this.ni.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){this.removeItem(_p(this.persistenceKey,t))},t.prototype.updateQueryState=function(t,e,n){this.si(t,e,n)},t.prototype.handleUserChange=function(t,e,n){var r=this;e.forEach(function(t){r.ei(t)}),this.currentUser=t,n.forEach(function(t){r.addPendingMutation(t)})},t.prototype.setOnlineState=function(t){this.ii(t)},t.prototype.notifyBundleLoaded=function(){this.ri()},t.prototype.shutdown=function(){this.started&&(this.window.removeEventListener("storage",this.Ls),this.removeItem(this.Qs),this.started=!1)},t.prototype.getItem=function(t){var e=this.storage.getItem(t);return ju("SharedClientState","READ",t,e),e},t.prototype.setItem=function(t,e){ju("SharedClientState","SET",t,e),this.storage.setItem(t,e)},t.prototype.removeItem=function(t){ju("SharedClientState","REMOVE",t),this.storage.removeItem(t)},t.prototype.Bs=function(t){var e=this,n=t;if(n.storageArea===this.storage){if(ju("SharedClientState","EVENT",n.key,n.newValue),n.key===this.Qs)return void ku("Received WebStorage notification for local change. Another client might have garbage-collected our state");this.Fe.enqueueRetryable(function(){return Object(Tu.b)(e,void 0,void 0,function(){var t,e,r,i,o,s;return Object(Tu.d)(this,function(a){if(this.started){if(null!==n.key)if(this.Ws.test(n.key)){if(null==n.newValue)return t=this.oi(n.key),[2,this.ci(t,null)];if(e=this.ai(n.key,n.newValue))return[2,this.ci(e.clientId,e)]}else if(this.js.test(n.key)){if(null!==n.newValue&&(r=this.ui(n.key,n.newValue)))return[2,this.hi(r)]}else if(this.Gs.test(n.key)){if(null!==n.newValue&&(i=this.li(n.key,n.newValue)))return[2,this.fi(i)]}else if(n.key===this.zs){if(null!==n.newValue&&(o=this.Ys(n.newValue)))return[2,this.Xs(o)]}else if(n.key===this.Ks)(s=function(t){var e=Cu.o;if(null!=t)try{var n=JSON.parse(t);Pu("number"==typeof n),e=n}catch(t){ku("SharedClientState","Failed to read sequence number from WebStorage",t)}return e}(n.newValue))!==Cu.o&&this.sequenceNumberHandler(s);else if(n.key===this.Hs)return[2,this.syncEngine.di()]}else this.Us.push(n);return[2]})})})}},Object.defineProperty(t.prototype,"ni",{get:function(){return this.qs.get(this.Ms)},enumerable:!1,configurable:!0}),t.prototype.Js=function(){this.setItem(this.Qs,this.ni.Fs())},t.prototype.ti=function(t,e,n){var r=new Ip(this.currentUser,t,e,n),i=wp(this.persistenceKey,this.currentUser,t);this.setItem(i,r.Fs())},t.prototype.ei=function(t){var e=wp(this.persistenceKey,this.currentUser,t);this.removeItem(e)},t.prototype.ii=function(t){this.storage.setItem(this.zs,JSON.stringify({clientId:this.Ms,onlineState:t}))},t.prototype.si=function(t,e,n){var r=_p(this.persistenceKey,t),i=new Ep(t,e,n);this.setItem(r,i.Fs())},t.prototype.ri=function(){this.setItem(this.Hs,"value-not-used")},t.prototype.oi=function(t){var e=this.Ws.exec(t);return e?e[1]:null},t.prototype.ai=function(t,e){var n=this.oi(t);return Sp.$s(n,e)},t.prototype.ui=function(t,e){var n=this.js.exec(t),r=Number(n[1]);return Ip.$s(new vp(void 0!==n[2]?n[2]:null),r,e)},t.prototype.li=function(t,e){var n=this.Gs.exec(t),r=Number(n[1]);return Ep.$s(r,e)},t.prototype.Ys=function(t){return Op.$s(t)},t.prototype.hi=function(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){return t.user.uid===this.currentUser.uid?[2,this.syncEngine.wi(t.batchId,t.state,t.error)]:(ju("SharedClientState","Ignoring mutation for non-active user "+t.user.uid),[2])})})},t.prototype.fi=function(t){return this.syncEngine._i(t.targetId,t.state,t.error)},t.prototype.ci=function(t,e){var n=this,r=e?this.qs.insert(t,e):this.qs.remove(t),i=this.Zs(this.qs),o=this.Zs(r),s=[],a=[];return o.forEach(function(t){i.has(t)||s.push(t)}),i.forEach(function(t){o.has(t)||a.push(t)}),this.syncEngine.mi(s,a).then(function(){n.qs=r})},t.prototype.Xs=function(t){this.qs.get(t.clientId)&&this.onlineStateHandler(t.onlineState)},t.prototype.Zs=function(t){var e=ph();return t.forEach(function(t,n){e=e.unionWith(n.activeTargetIds)}),e},t}(),xp=function(){function t(){this.yi=new Tp,this.gi={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}return t.prototype.addPendingMutation=function(t){},t.prototype.updateMutationState=function(t,e,n){},t.prototype.addLocalQueryTarget=function(t){return this.yi.Os(t),this.gi[t]||"not-current"},t.prototype.updateQueryState=function(t,e,n){this.gi[t]=e},t.prototype.removeLocalQueryTarget=function(t){this.yi.ks(t)},t.prototype.isLocalQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.clearQueryState=function(t){delete this.gi[t]},t.prototype.getAllActiveQueryTargets=function(){return this.yi.activeTargetIds},t.prototype.isActiveQueryTarget=function(t){return this.yi.activeTargetIds.has(t)},t.prototype.start=function(){return this.yi=new Tp,Promise.resolve()},t.prototype.handleUserChange=function(t,e,n){},t.prototype.setOnlineState=function(t){},t.prototype.shutdown=function(){},t.prototype.writeSequenceNumber=function(t){},t.prototype.notifyBundleLoaded=function(){},t}(),Ap=function(){function t(){}return t.prototype.pi=function(t){},t.prototype.shutdown=function(){},t}(),jp=function(){function t(){var t=this;this.Ei=function(){return t.Ti()},this.Ii=function(){return t.Ai()},this.Ri=[],this.bi()}return t.prototype.pi=function(t){this.Ri.push(t)},t.prototype.shutdown=function(){window.removeEventListener("online",this.Ei),window.removeEventListener("offline",this.Ii)},t.prototype.bi=function(){window.addEventListener("online",this.Ei),window.addEventListener("offline",this.Ii)},t.prototype.Ti=function(){ju("ConnectivityMonitor","Network connectivity changed: AVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(0)},t.prototype.Ai=function(){ju("ConnectivityMonitor","Network connectivity changed: UNAVAILABLE");for(var t=0,e=this.Ri;t<e.length;t++)(0,e[t])(1)},t.At=function(){return"undefined"!=typeof window&&void 0!==window.addEventListener&&void 0!==window.removeEventListener},t}(),kp={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery"},Np=function(){function t(t){this.vi=t.vi,this.Pi=t.Pi}return t.prototype.Vi=function(t){this.Si=t},t.prototype.Di=function(t){this.Ci=t},t.prototype.onMessage=function(t){this.xi=t},t.prototype.close=function(){this.Pi()},t.prototype.send=function(t){this.vi(t)},t.prototype.Ni=function(){this.Si()},t.prototype.$i=function(t){this.Ci(t)},t.prototype.Fi=function(t){this.xi(t)},t}(),Dp=function(t){function e(e){var n=this;return(n=t.call(this,e)||this).forceLongPolling=e.forceLongPolling,n.autoDetectLongPolling=e.autoDetectLongPolling,n}return Object(Tu.c)(e,t),e.prototype.qi=function(t,e,n,r){return new Promise(function(i,o){var s=new Ou;s.listenOnce(Iu.COMPLETE,function(){try{switch(s.getLastErrorCode()){case _u.NO_ERROR:var e=s.getResponseJson();ju("Connection","XHR received:",JSON.stringify(e)),i(e);break;case _u.TIMEOUT:ju("Connection",'RPC "'+t+'" timed out'),o(new Wu($u.DEADLINE_EXCEEDED,"Request time out"));break;case _u.HTTP_ERROR:var n=s.getStatus();if(ju("Connection",'RPC "'+t+'" failed with status:',n,"response text:",s.getResponseText()),n>0){var r=s.getResponseJson().error;if(r&&r.status&&r.message){var a=function(t){var e=t.toLowerCase().replace(/_/g,"-");return Object.values($u).indexOf(e)>=0?e:$u.UNKNOWN}(r.status);o(new Wu(a,r.message))}else o(new Wu($u.UNKNOWN,"Server responded with status "+s.getStatus()))}else o(new Wu($u.UNAVAILABLE,"Connection failed."));break;default:Ru()}}finally{ju("Connection",'RPC "'+t+'" completed.')}});var a=JSON.stringify(r);s.send(e,"POST",a,n,15)})},e.prototype.Qi=function(t,e){var n=[this.Oi,"/","google.firestore.v1.Firestore","/",t,"/channel"],r=new mu,i=bs(),o={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:"projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling};this.Bi(o.initMessageHeaders,e),Object(Ei.l)()||Object(Ei.n)()||Object(Ei.j)()||Object(Ei.k)()||Object(Ei.o)()||Object(Ei.i)()||(o.httpHeadersOverwriteParam="$httpHeaders");var s=n.join("");ju("Connection","Creating WebChannel: "+s,o);var a=r.createWebChannel(s,o),u=!1,c=!1,l=new Np({vi:function(t){c?ju("Connection","Not sending because WebChannel is closed:",t):(u||(ju("Connection","Opening WebChannel transport."),a.open(),u=!0),ju("Connection","WebChannel sending:",t),a.send(t))},Pi:function(){return a.close()}}),h=function(t,e,n){t.listen(e,function(t){try{n(t)}catch(t){setTimeout(function(){throw t},0)}})};return h(a,Su.EventType.OPEN,function(){c||ju("Connection","WebChannel transport opened.")}),h(a,Su.EventType.CLOSE,function(){c||(c=!0,ju("Connection","WebChannel transport closed"),l.$i())}),h(a,Su.EventType.ERROR,function(t){c||(c=!0,Nu("Connection","WebChannel transport errored:",t),l.$i(new Wu($u.UNAVAILABLE,"The operation could not be completed")))}),h(a,Su.EventType.MESSAGE,function(t){var e;if(!c){var n=t.data[0];Pu(!!n);var r=n.error||(null===(e=n[0])||void 0===e?void 0:e.error);if(r){ju("Connection","WebChannel received error:",r);var i=r.status,o=function(t){var e=Kl[t];if(void 0!==e)return Xl(e)}(i),s=r.message;void 0===o&&(o=$u.INTERNAL,s="Unknown error status: "+i+" with message "+r.message),c=!0,l.$i(new Wu(o,s)),a.close()}else ju("Connection","WebChannel received:",n),l.Fi(n)}}),h(i,Eu.STAT_EVENT,function(t){10===t.stat?ju("Connection","Detected buffering proxy"):11===t.stat&&ju("Connection","Detected no buffering proxy")}),setTimeout(function(){l.Ni()},0),l},e}(function(){function t(t){this.databaseInfo=t,this.databaseId=t.databaseId,this.Oi=(t.ssl?"https":"http")+"://"+t.host,this.ki="projects/"+this.databaseId.projectId+"/databases/"+this.databaseId.database+"/documents"}return t.prototype.Mi=function(t,e,n,r){var i=this.Li(t,e);ju("RestConnection","Sending: ",i,n);var o={};return this.Bi(o,r),this.qi(t,i,o,n).then(function(t){return ju("RestConnection","Received: ",t),t},function(e){throw Nu("RestConnection",t+" failed with error: ",e,"url: ",i,"request:",n),e})},t.prototype.Ui=function(t,e,n,r){return this.Mi(t,e,n,r)},t.prototype.Bi=function(t,e){if(t["X-Goog-Api-Client"]="gl-js/ fire/8.3.1",t["Content-Type"]="text/plain",e)for(var n in e.authHeaders)e.authHeaders.hasOwnProperty(n)&&(t[n]=e.authHeaders[n])},t.prototype.Li=function(t,e){return this.Oi+"/v1/"+e+":"+kp[t]},t}());function Rp(){return"undefined"!=typeof window?window:null}function Pp(){return"undefined"!=typeof document?document:null}function Lp(t){return new Th(t,!0)}var Mp=function(){function t(t,e,n,r,i){void 0===n&&(n=1e3),void 0===r&&(r=1.5),void 0===i&&(i=6e4),this.Fe=t,this.timerId=e,this.Ki=n,this.Wi=r,this.ji=i,this.Gi=0,this.zi=null,this.Hi=Date.now(),this.reset()}return t.prototype.reset=function(){this.Gi=0},t.prototype.Ji=function(){this.Gi=this.ji},t.prototype.Yi=function(t){var e=this;this.cancel();var n=Math.floor(this.Gi+this.Xi()),r=Math.max(0,Date.now()-this.Hi),i=Math.max(0,n-r);i>0&&ju("ExponentialBackoff","Backing off for "+i+" ms (base delay: "+this.Gi+" ms, delay with jitter: "+n+" ms, last attempt: "+r+" ms ago)"),this.zi=this.Fe.enqueueAfterDelay(this.timerId,i,function(){return e.Hi=Date.now(),t()}),this.Gi*=this.Wi,this.Gi<this.Ki&&(this.Gi=this.Ki),this.Gi>this.ji&&(this.Gi=this.ji)},t.prototype.Zi=function(){null!==this.zi&&(this.zi.skipDelay(),this.zi=null)},t.prototype.cancel=function(){null!==this.zi&&(this.zi.cancel(),this.zi=null)},t.prototype.Xi=function(){return(Math.random()-.5)*this.Gi},t}(),Up=function(){function t(t,e,n,r,i,o){this.Fe=t,this.tr=n,this.er=r,this.nr=i,this.listener=o,this.state=0,this.sr=0,this.ir=null,this.stream=null,this.rr=new Mp(t,e)}return t.prototype.cr=function(){return 1===this.state||2===this.state||4===this.state},t.prototype.ar=function(){return 2===this.state},t.prototype.start=function(){3!==this.state?this.auth():this.ur()},t.prototype.stop=function(){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return this.cr()?[4,this.close(0)]:[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})},t.prototype.hr=function(){this.state=0,this.rr.reset()},t.prototype.lr=function(){var t=this;this.ar()&&null===this.ir&&(this.ir=this.Fe.enqueueAfterDelay(this.tr,6e4,function(){return t.dr()}))},t.prototype.wr=function(t){this._r(),this.stream.send(t)},t.prototype.dr=function(){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(t){return this.ar()?[2,this.close(0)]:[2]})})},t.prototype._r=function(){this.ir&&(this.ir.cancel(),this.ir=null)},t.prototype.close=function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(n){switch(n.label){case 0:return this._r(),this.rr.cancel(),this.sr++,3!==t?this.rr.reset():e&&e.code===$u.RESOURCE_EXHAUSTED?(ku(e.toString()),ku("Using maximum backoff delay to prevent overloading the backend."),this.rr.Ji()):e&&e.code===$u.UNAUTHENTICATED&&this.nr.invalidateToken(),null!==this.stream&&(this.mr(),this.stream.close(),this.stream=null),this.state=t,[4,this.listener.Di(e)];case 1:return n.sent(),[2]}})})},t.prototype.mr=function(){},t.prototype.auth=function(){var t=this;this.state=1;var e=this.yr(this.sr),n=this.sr;this.nr.getToken().then(function(e){t.sr===n&&t.gr(e)},function(n){e(function(){var e=new Wu($u.UNKNOWN,"Fetching auth token failed: "+n.message);return t.pr(e)})})},t.prototype.gr=function(t){var e=this,n=this.yr(this.sr);this.stream=this.Er(t),this.stream.Vi(function(){n(function(){return e.state=2,e.listener.Vi()})}),this.stream.Di(function(t){n(function(){return e.pr(t)})}),this.stream.onMessage(function(t){n(function(){return e.onMessage(t)})})},t.prototype.ur=function(){var t=this;this.state=4,this.rr.Yi(function(){return Object(Tu.b)(t,void 0,void 0,function(){return Object(Tu.d)(this,function(t){return this.state=0,this.start(),[2]})})})},t.prototype.pr=function(t){return ju("PersistentStream","close with error: "+t),this.stream=null,this.close(3,t)},t.prototype.yr=function(t){var e=this;return function(n){e.Fe.enqueueAndForget(function(){return e.sr===t?n():(ju("PersistentStream","stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve())})}},t}(),Fp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"listen_stream_connection_backoff","listen_stream_idle",n,r,o)||this).D=i,s}return Object(Tu.c)(e,t),e.prototype.Er=function(t){return this.er.Qi("Listen",t)},e.prototype.onMessage=function(t){this.rr.reset();var e=function(t,e){var n;if("targetChange"in e){var r=function(t){return"NO_CHANGE"===t?0:"ADD"===t?1:"REMOVE"===t?2:"CURRENT"===t?3:"RESET"===t?4:Ru()}(e.targetChange.targetChangeType||"NO_CHANGE"),i=e.targetChange.targetIds||[],o=function(t,e){return t.V?(Pu(void 0===e||"string"==typeof e),ec.fromBase64String(e||"")):(Pu(void 0===e||e instanceof Uint8Array),ec.fromUint8Array(e||new Uint8Array))}(t,e.targetChange.resumeToken),s=(a=e.targetChange.cause)&&function(t){var e=void 0===t.code?$u.UNKNOWN:Xl(t.code);return new Wu(e,t.message||"")}(a);n=new bh(r,i,o,s||null)}else if("documentChange"in e){i=Rh(t,(r=e.documentChange).document.name),o=jh(r.document.updateTime);var a=new fl({mapValue:{fields:r.document.fields}}),u=(s=new Sc(i,o,a,{}),r.targetIds||[]);n=new yh(u,r.removedTargetIds||[],s.key,s)}else if("documentDelete"in e)i=Rh(t,(r=e.documentDelete).document),o=r.readTime?jh(r.readTime):ll.min(),a=new Oc(i,o),n=new yh([],s=r.removedTargetIds||[],a.key,a);else if("documentRemove"in e)i=Rh(t,(r=e.documentRemove).document),n=new yh([],o=r.removedTargetIds||[],i,null);else{if(!("filter"in e))return Ru();var c=e.filter;i=new Ql(r=c.count||0),n=new vh(o=c.targetId,i)}return n}(this.D,t),n=function(t){if(!("targetChange"in t))return ll.min();var e=t.targetChange;return e.targetIds&&e.targetIds.length?ll.min():e.readTime?jh(e.readTime):ll.min()}(t);return this.listener.Tr(e,n)},e.prototype.Ir=function(t){var e={};e.database=Mh(this.D),e.addTarget=function(t,e){var n,r=e.target;return(n=kc(r)?{documents:Hh(t,r)}:{query:zh(t,r)}).targetId=e.targetId,e.resumeToken.approximateByteSize()>0?n.resumeToken=xh(t,e.resumeToken):e.snapshotVersion.compareTo(ll.min())>0&&(n.readTime=Ch(t,e.snapshotVersion.toTimestamp())),n}(this.D,t);var n=function(t,e){var n=function(t,e){switch(e){case 0:return null;case 1:return"existence-filter-mismatch";case 2:return"limbo-document";default:return Ru()}}(0,e.purpose);return null==n?null:{"goog-listen-tags":n}}(0,t);n&&(e.labels=n),this.wr(e)},e.prototype.Ar=function(t){var e={};e.database=Mh(this.D),e.removeTarget=t,this.wr(e)},e}(Up),Vp=function(t){function e(e,n,r,i,o){var s=this;return(s=t.call(this,e,"write_stream_connection_backoff","write_stream_idle",n,r,o)||this).D=i,s.Rr=!1,s}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"br",{get:function(){return this.Rr},enumerable:!1,configurable:!0}),e.prototype.start=function(){this.Rr=!1,this.lastStreamToken=void 0,t.prototype.start.call(this)},e.prototype.mr=function(){this.Rr&&this.vr([])},e.prototype.Er=function(t){return this.er.Qi("Write",t)},e.prototype.onMessage=function(t){if(Pu(!!t.streamToken),this.lastStreamToken=t.streamToken,this.Rr){this.rr.reset();var e=function(t,e){return t&&t.length>0?(Pu(void 0!==e),t.map(function(t){return function(t,e){var n=jh(t.updateTime?t.updateTime:e);return n.isEqual(ll.min())&&(n=jh(e)),new kl(n,t.transformResults||[])}(t,e)})):[]}(t.writeResults,t.commitTime),n=jh(t.commitTime);return this.listener.Pr(n,e)}return Pu(!t.writeResults||0===t.writeResults.length),this.Rr=!0,this.listener.Vr()},e.prototype.Sr=function(){var t={};t.database=Mh(this.D),this.wr(t)},e.prototype.vr=function(t){var e=this,n={streamToken:this.lastStreamToken,writes:t.map(function(t){return qh(e.D,t)})};this.wr(n)},e}(Up),qp=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).credentials=e,i.er=n,i.D=r,i.Dr=!1,i}return Object(Tu.c)(e,t),e.prototype.Cr=function(){if(this.Dr)throw new Wu($u.FAILED_PRECONDITION,"The client has already been terminated.")},e.prototype.Mi=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Mi(t,e,n,i)}).catch(function(t){throw t.code===$u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.Ui=function(t,e,n){var r=this;return this.Cr(),this.credentials.getToken().then(function(i){return r.er.Ui(t,e,n,i)}).catch(function(t){throw t.code===$u.UNAUTHENTICATED&&r.credentials.invalidateToken(),t})},e.prototype.terminate=function(){this.Dr=!1},e}(function(){}),Bp=function(){function t(t,e){this.asyncQueue=t,this.onlineStateHandler=e,this.state="Unknown",this.Nr=0,this.$r=null,this.Fr=!0}return t.prototype.Or=function(){var t=this;0===this.Nr&&(this.kr("Unknown"),this.$r=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,function(){return t.$r=null,t.Mr("Backend didn't respond within 10 seconds."),t.kr("Offline"),Promise.resolve()}))},t.prototype.Lr=function(t){"Online"===this.state?this.kr("Unknown"):(this.Nr++,this.Nr>=1&&(this.Br(),this.Mr("Connection failed 1 times. Most recent error: "+t.toString()),this.kr("Offline")))},t.prototype.set=function(t){this.Br(),this.Nr=0,"Online"===t&&(this.Fr=!1),this.kr(t)},t.prototype.kr=function(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))},t.prototype.Mr=function(t){var e="Could not reach Cloud Firestore backend. "+t+"\nThis typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.";this.Fr?(ku(e),this.Fr=!1):ju("OnlineStateTracker",e)},t.prototype.Br=function(){null!==this.$r&&(this.$r.cancel(),this.$r=null)},t}(),Hp=function(t,e,n,r,i){var o=this;this.localStore=t,this.datastore=e,this.asyncQueue=n,this.remoteSyncer={},this.qr=[],this.Ur=new Map,this.Qr=new Set,this.Kr=[],this.Wr=i,this.Wr.pi(function(t){n.enqueueAndForget(function(){return Object(Tu.b)(o,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return Xp(this)?(ju("RemoteStore","Restarting streams for network reachability change."),[4,function(t){return Object(Tu.b)(this,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return(e=Lu(t)).Qr.add(4),[4,Gp(e)];case 1:return n.sent(),e.jr.set("Unknown"),e.Qr.delete(4),[4,zp(e)];case 2:return n.sent(),[2]}})})}(this)]):[3,2];case 1:t.sent(),t.label=2;case 2:return[2]}})})})}),this.jr=new Bp(n,r)};function zp(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:if(!Xp(t))return[3,4];e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!0)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Gp(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:e=0,n=t.Kr,r.label=1;case 1:return e<n.length?[4,(0,n[e])(!1)]:[3,4];case 2:r.sent(),r.label=3;case 3:return e++,[3,1];case 4:return[2]}})})}function Kp(t,e){var n=Lu(t);n.Ur.has(e.targetId)||(n.Ur.set(e.targetId,e),Yp(n)?Qp(n):dg(n).ar()&&$p(n,e))}function Jp(t,e){var n=Lu(t),r=dg(n);n.Ur.delete(e),r.ar()&&Wp(n,e),0===n.Ur.size&&(r.ar()?r.lr():Xp(n)&&n.jr.set("Unknown"))}function $p(t,e){t.Gr.H(e.targetId),dg(t).Ir(e)}function Wp(t,e){t.Gr.H(e),dg(t).Ar(e)}function Qp(t){t.Gr=new _h({getRemoteKeysForTarget:function(e){return t.remoteSyncer.getRemoteKeysForTarget(e)},yt:function(e){return t.Ur.get(e)||null}}),dg(t).start(),t.jr.Or()}function Yp(t){return Xp(t)&&!dg(t).cr()&&t.Ur.size>0}function Xp(t){return 0===Lu(t).Qr.size}function Zp(t){t.Gr=void 0}function tg(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){return t.Ur.forEach(function(e,n){$p(t,e)}),[2]})})}function eg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(n){return Zp(t),Yp(t)?(t.jr.Lr(e),Qp(t)):t.jr.set("Unknown"),[2]})})}function ng(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o;return Object(Tu.d)(this,function(s){switch(s.label){case 0:if(t.jr.set("Online"),!(e instanceof bh&&2===e.state&&e.cause))return[3,6];s.label=1;case 1:return s.trys.push([1,3,,5]),[4,function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o;return Object(Tu.d)(this,function(s){switch(s.label){case 0:n=e.cause,r=0,i=e.targetIds,s.label=1;case 1:return r<i.length?t.Ur.has(o=i[r])?[4,t.remoteSyncer.rejectListen(o,n)]:[3,3]:[3,5];case 2:s.sent(),t.Ur.delete(o),t.Gr.removeTarget(o),s.label=3;case 3:s.label=4;case 4:return r++,[3,1];case 5:return[2]}})})}(t,e)];case 2:return s.sent(),[3,5];case 3:return r=s.sent(),ju("RemoteStore","Failed to remove targets %s: %s ",e.targetIds.join(","),r),[4,rg(t,r)];case 4:return s.sent(),[3,5];case 5:return[3,13];case 6:if(e instanceof yh?t.Gr.st(e):e instanceof vh?t.Gr.ht(e):t.Gr.ot(e),n.isEqual(ll.min()))return[3,13];s.label=7;case 7:return s.trys.push([7,11,,13]),[4,Qd(t.localStore)];case 8:return i=s.sent(),n.compareTo(i)>=0?[4,function(t,e){var n=t.Gr.dt(e);return n.targetChanges.forEach(function(n,r){if(n.resumeToken.approximateByteSize()>0){var i=t.Ur.get(r);i&&t.Ur.set(r,i.withResumeToken(n.resumeToken,e))}}),n.targetMismatches.forEach(function(e){var n=t.Ur.get(e);if(n){t.Ur.set(e,n.withResumeToken(ec.EMPTY_BYTE_STRING,n.snapshotVersion)),Wp(t,e);var r=new Bf(n.target,e,1,n.sequenceNumber);$p(t,r)}}),t.remoteSyncer.applyRemoteEvent(n)}(t,n)]:[3,10];case 9:s.sent(),s.label=10;case 10:return[3,13];case 11:return ju("RemoteStore","Failed to raise snapshot:",o=s.sent()),[4,rg(t,o)];case 12:return s.sent(),[3,13];case 13:return[2]}})})}function rg(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r=this;return Object(Tu.d)(this,function(i){switch(i.label){case 0:if(!Df(e))throw e;return t.Qr.add(1),[4,Gp(t)];case 1:return i.sent(),t.jr.set("Offline"),n||(n=function(){return Qd(t.localStore)}),t.asyncQueue.enqueueRetryable(function(){return Object(Tu.b)(r,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return ju("RemoteStore","Retrying IndexedDB access"),[4,n()];case 1:return e.sent(),t.Qr.delete(1),[4,zp(t)];case 2:return e.sent(),[2]}})})}),[2]}})})}function ig(t,e){return e().catch(function(n){return rg(t,n,e)})}function og(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n,r,i,o;return Object(Tu.d)(this,function(s){switch(s.label){case 0:e=Lu(t),n=pg(e),r=e.qr.length>0?e.qr[e.qr.length-1].batchId:-1,s.label=1;case 1:if(!function(t){return Xp(t)&&t.qr.length<10}(e))return[3,7];s.label=2;case 2:return s.trys.push([2,4,,6]),[4,Zd(e.localStore,r)];case 3:return null===(i=s.sent())?(0===e.qr.length&&n.lr(),[3,7]):(r=i.batchId,function(t,e){t.qr.push(e);var n=pg(t);n.ar()&&n.br&&n.vr(e.mutations)}(e,i),[3,6]);case 4:return o=s.sent(),[4,rg(e,o)];case 5:return s.sent(),[3,6];case 6:return[3,1];case 7:return sg(e)&&ag(e),[2]}})})}function sg(t){return Xp(t)&&!pg(t).cr()&&t.qr.length>0}function ag(t){pg(t).start()}function ug(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){return pg(t).Sr(),[2]})})}function cg(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n,r;return Object(Tu.d)(this,function(i){for(e=pg(t),n=0,r=t.qr;n<r.length;n++)e.vr(r[n].mutations);return[2]})})}function lg(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return r=t.qr.shift(),i=qf.from(r,e,n),[4,ig(t,function(){return t.remoteSyncer.applySuccessfulWrite(i)})];case 1:return o.sent(),[4,og(t)];case 2:return o.sent(),[2]}})})}function hg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(n){switch(n.label){case 0:return e&&pg(t).br?[4,function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return Yl(r=e.code)&&r!==$u.ABORTED?(n=t.qr.shift(),pg(t).hr(),[4,ig(t,function(){return t.remoteSyncer.rejectFailedWrite(n.batchId,e)})]):[3,3];case 1:return i.sent(),[4,og(t)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}(t,e)]:[3,2];case 1:n.sent(),n.label=2;case 2:return sg(t)&&ag(t),[2]}})})}function fg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return n=Lu(t),e?(n.Qr.delete(2),[4,zp(n)]):[3,2];case 1:return r.sent(),[3,5];case 2:return e?[3,4]:(n.Qr.add(2),[4,Gp(n)]);case 3:r.sent(),n.jr.set("Unknown"),r.label=4;case 4:r.label=5;case 5:return[2]}})})}function dg(t){var e=this;return t.zr||(t.zr=function(t,e,n){var r=Lu(t);return r.Cr(),new Fp(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:tg.bind(null,t),Di:eg.bind(null,t),Tr:ng.bind(null,t)}),t.Kr.push(function(n){return Object(Tu.b)(e,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return n?(t.zr.hr(),Yp(t)?Qp(t):t.jr.set("Unknown"),[3,3]):[3,1];case 1:return[4,t.zr.stop()];case 2:e.sent(),Zp(t),e.label=3;case 3:return[2]}})})})),t.zr}function pg(t){var e=this;return t.Hr||(t.Hr=function(t,e,n){var r=Lu(t);return r.Cr(),new Vp(e,r.er,r.credentials,r.D,n)}(t.datastore,t.asyncQueue,{Vi:ug.bind(null,t),Di:hg.bind(null,t),Vr:cg.bind(null,t),Pr:lg.bind(null,t)}),t.Kr.push(function(n){return Object(Tu.b)(e,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return n?(t.Hr.hr(),[4,og(t)]):[3,2];case 1:return e.sent(),[3,4];case 2:return[4,t.Hr.stop()];case 3:e.sent(),t.qr.length>0&&(ju("RemoteStore","Stopping write stream with "+t.qr.length+" pending writes"),t.qr=[]),e.label=4;case 4:return[2]}})})})),t.Hr}var gg=function(){function t(t,e,n,r,i){this.asyncQueue=t,this.timerId=e,this.targetTimeMs=n,this.op=r,this.removalCallback=i,this.deferred=new Cf,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(function(t){})}return t.createAndSchedule=function(e,n,r,i,o){var s=new t(e,n,Date.now()+r,i,o);return s.start(r),s},t.prototype.start=function(t){var e=this;this.timerHandle=setTimeout(function(){return e.handleDelayElapsed()},t)},t.prototype.skipDelay=function(){return this.handleDelayElapsed()},t.prototype.cancel=function(t){null!==this.timerHandle&&(this.clearTimeout(),this.deferred.reject(new Wu($u.CANCELLED,"Operation cancelled"+(t?": "+t:""))))},t.prototype.handleDelayElapsed=function(){var t=this;this.asyncQueue.enqueueAndForget(function(){return null!==t.timerHandle?(t.clearTimeout(),t.op().then(function(e){return t.deferred.resolve(e)})):Promise.resolve()})},t.prototype.clearTimeout=function(){null!==this.timerHandle&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)},t}();function mg(t,e){if(ku("AsyncQueue",e+": "+t),Df(t))return new Wu($u.UNAVAILABLE,e+": "+t);throw t}var yg=function(){function t(t){this.comparator=t?function(e,n){return t(e,n)||tc.comparator(e.key,n.key)}:function(t,e){return tc.comparator(t.key,e.key)},this.keyedMap=uh(),this.sortedSet=new Zl(this.comparator)}return t.emptySet=function(e){return new t(e.comparator)},t.prototype.has=function(t){return null!=this.keyedMap.get(t)},t.prototype.get=function(t){return this.keyedMap.get(t)},t.prototype.first=function(){return this.sortedSet.minKey()},t.prototype.last=function(){return this.sortedSet.maxKey()},t.prototype.isEmpty=function(){return this.sortedSet.isEmpty()},t.prototype.indexOf=function(t){var e=this.keyedMap.get(t);return e?this.sortedSet.indexOf(e):-1},Object.defineProperty(t.prototype,"size",{get:function(){return this.sortedSet.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t){this.sortedSet.inorderTraversal(function(e,n){return t(e),!1})},t.prototype.add=function(t){var e=this.delete(t.key);return e.copy(e.keyedMap.insert(t.key,t),e.sortedSet.insert(t,null))},t.prototype.delete=function(t){var e=this.get(t);return e?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(e)):this},t.prototype.isEqual=function(e){if(!(e instanceof t))return!1;if(this.size!==e.size)return!1;for(var n=this.sortedSet.getIterator(),r=e.sortedSet.getIterator();n.hasNext();){var i=n.getNext().key,o=r.getNext().key;if(!i.isEqual(o))return!1}return!0},t.prototype.toString=function(){var t=[];return this.forEach(function(e){t.push(e.toString())}),0===t.length?"DocumentSet ()":"DocumentSet (\n  "+t.join("  \n")+"\n)"},t.prototype.copy=function(e,n){var r=new t;return r.comparator=this.comparator,r.keyedMap=e,r.sortedSet=n,r},t}(),vg=function(){function t(){this.Jr=new Zl(tc.comparator)}return t.prototype.track=function(t){var e=t.doc.key,n=this.Jr.get(e);n?0!==t.type&&3===n.type?this.Jr=this.Jr.insert(e,t):3===t.type&&1!==n.type?this.Jr=this.Jr.insert(e,{type:n.type,doc:t.doc}):2===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):2===t.type&&0===n.type?this.Jr=this.Jr.insert(e,{type:0,doc:t.doc}):1===t.type&&0===n.type?this.Jr=this.Jr.remove(e):1===t.type&&2===n.type?this.Jr=this.Jr.insert(e,{type:1,doc:n.doc}):0===t.type&&1===n.type?this.Jr=this.Jr.insert(e,{type:2,doc:t.doc}):Ru():this.Jr=this.Jr.insert(e,t)},t.prototype.Yr=function(){var t=[];return this.Jr.inorderTraversal(function(e,n){t.push(n)}),t},t}(),bg=function(){function t(t,e,n,r,i,o,s,a){this.query=t,this.docs=e,this.oldDocs=n,this.docChanges=r,this.mutatedKeys=i,this.fromCache=o,this.syncStateChanged=s,this.excludesMetadataChanges=a}return t.fromInitialDocuments=function(e,n,r,i){var o=[];return n.forEach(function(t){o.push({type:0,doc:t})}),new t(e,n,yg.emptySet(n),o,r,i,!0,!1)},Object.defineProperty(t.prototype,"hasPendingWrites",{get:function(){return!this.mutatedKeys.isEmpty()},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){if(!(this.fromCache===t.fromCache&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&il(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;var e=this.docChanges,n=t.docChanges;if(e.length!==n.length)return!1;for(var r=0;r<e.length;r++)if(e[r].type!==n[r].type||!e[r].doc.isEqual(n[r].doc))return!1;return!0},t}(),wg=function(){this.Xr=void 0,this.listeners=[]},_g=function(){this.queries=new xd(function(t){return ol(t)},il),this.onlineState="Unknown",this.Zr=new Set};function Ig(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Tu.d)(this,function(c){switch(c.label){case 0:if(n=Lu(t),i=!1,(o=n.queries.get(r=e.query))||(i=!0,o=new wg),!i)return[3,4];c.label=1;case 1:return c.trys.push([1,3,,4]),s=o,[4,n.onListen(r)];case 2:return s.Xr=c.sent(),[3,4];case 3:return a=c.sent(),u=mg(a,"Initialization of query '"+sl(e.query)+"' failed"),[2,void e.onError(u)];case 4:return n.queries.set(r,o),o.listeners.push(e),e.eo(n.onlineState),o.Xr&&e.no(o.Xr)&&Tg(n),[2]}})})}function Eg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Tu.d)(this,function(a){return n=Lu(t),i=!1,(o=n.queries.get(r=e.query))&&(s=o.listeners.indexOf(e))>=0&&(o.listeners.splice(s,1),i=0===o.listeners.length),i?[2,(n.queries.delete(r),n.onUnlisten(r))]:[2]})})}function Sg(t,e){for(var n=Lu(t),r=!1,i=0,o=e;i<o.length;i++){var s=o[i],a=n.queries.get(s.query);if(a){for(var u=0,c=a.listeners;u<c.length;u++)c[u].no(s)&&(r=!0);a.Xr=s}}r&&Tg(n)}function Og(t,e,n){var r=Lu(t),i=r.queries.get(e);if(i)for(var o=0,s=i.listeners;o<s.length;o++)s[o].onError(n);r.queries.delete(e)}function Tg(t){t.Zr.forEach(function(t){t.next()})}var Cg=function(){function t(t,e,n){this.query=t,this.so=e,this.io=!1,this.ro=null,this.onlineState="Unknown",this.options=n||{}}return t.prototype.no=function(t){if(!this.options.includeMetadataChanges){for(var e=[],n=0,r=t.docChanges;n<r.length;n++){var i=r[n];3!==i.type&&e.push(i)}t=new bg(t.query,t.docs,t.oldDocs,e,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0)}var o=!1;return this.io?this.oo(t)&&(this.so.next(t),o=!0):this.co(t,this.onlineState)&&(this.ao(t),o=!0),this.ro=t,o},t.prototype.onError=function(t){this.so.error(t)},t.prototype.eo=function(t){this.onlineState=t;var e=!1;return this.ro&&!this.io&&this.co(this.ro,t)&&(this.ao(this.ro),e=!0),e},t.prototype.co=function(t,e){return!t.fromCache||!(this.options.uo&&"Offline"!==e||t.docs.isEmpty()&&"Offline"!==e)},t.prototype.oo=function(t){return t.docChanges.length>0||!!(t.syncStateChanged||this.ro&&this.ro.hasPendingWrites!==t.hasPendingWrites)&&!0===this.options.includeMetadataChanges},t.prototype.ao=function(t){t=bg.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache),this.io=!0,this.so.next(t)},t}(),xg=function(){function t(t,e){this.payload=t,this.byteLength=e}return t.prototype.ho=function(){return"metadata"in this.payload},t}(),Ag=function(){function t(t){this.D=t}return t.prototype.Gn=function(t){return Rh(this.D,t)},t.prototype.zn=function(t){return t.metadata.exists?Vh(this.D,t.document,!1):new Oc(this.Gn(t.metadata.name),this.Hn(t.metadata.readTime))},t.prototype.Hn=function(t){return jh(t)},t}();!function(){function t(t,e,n){this.lo=t,this.localStore=e,this.D=n,this.queries=[],this.documents=[],this.progress=function(t){return{taskState:"Running",documentsLoaded:0,bytesLoaded:0,totalDocuments:t.totalDocuments,totalBytes:t.totalBytes}}(t)}t.prototype.fo=function(t){this.progress.bytesLoaded+=t.byteLength;var e=this.progress.documentsLoaded;return t.payload.namedQuery?this.queries.push(t.payload.namedQuery):t.payload.documentMetadata?(this.documents.push({metadata:t.payload.documentMetadata}),t.payload.documentMetadata.exists||++e):t.payload.document&&(this.documents[this.documents.length-1].document=t.payload.document,++e),e!==this.progress.documentsLoaded?(this.progress.documentsLoaded=e,Object.assign({},this.progress)):null},t.prototype.wo=function(t){for(var e=new Map,n=new Ag(this.D),r=0,i=t;r<i.length;r++){var o=i[r];if(o.metadata.queries)for(var s=n.Gn(o.metadata.name),a=0,u=o.metadata.queries;a<u.length;a++){var c=u[a],l=(e.get(c)||fh()).add(s);e.set(c,l)}}return e},t.prototype.complete=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e,n,r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return[4,sp(this.localStore,new Ag(this.D),this.documents,this.lo.id)];case 1:t=o.sent(),e=this.wo(this.documents),n=0,r=this.queries,o.label=2;case 2:return n<r.length?[4,ap(this.localStore,i=r[n],e.get(i.name))]:[3,5];case 3:o.sent(),o.label=4;case 4:return n++,[3,2];case 5:return[2,(this.progress.taskState="Success",new Bd(Object.assign({},this.progress),t))]}})})}}();var jg=function(t){this.key=t},kg=function(t){this.key=t},Ng=function(){function t(t,e){this.query=t,this._o=e,this.mo=null,this.current=!1,this.yo=fh(),this.mutatedKeys=fh(),this.po=ul(t),this.Eo=new yg(this.po)}return Object.defineProperty(t.prototype,"To",{get:function(){return this._o},enumerable:!1,configurable:!0}),t.prototype.Io=function(t,e){var n=this,r=e?e.Ao:new vg,i=e?e.Eo:this.Eo,o=e?e.mutatedKeys:this.mutatedKeys,s=i,a=!1,u=Qc(this.query)&&i.size===this.query.limit?i.last():null,c=Yc(this.query)&&i.size===this.query.limit?i.first():null;if(t.inorderTraversal(function(t,e){var l=i.get(t),h=e instanceof Sc?e:null;h&&(h=al(n.query,h)?h:null);var f=!!l&&n.mutatedKeys.has(l.key),d=!!h&&(h.hasLocalMutations||n.mutatedKeys.has(h.key)&&h.hasCommittedMutations),p=!1;l&&h?l.data().isEqual(h.data())?f!==d&&(r.track({type:3,doc:h}),p=!0):n.Ro(l,h)||(r.track({type:2,doc:h}),p=!0,(u&&n.po(h,u)>0||c&&n.po(h,c)<0)&&(a=!0)):!l&&h?(r.track({type:0,doc:h}),p=!0):l&&!h&&(r.track({type:1,doc:l}),p=!0,(u||c)&&(a=!0)),p&&(h?(s=s.add(h),o=d?o.add(t):o.delete(t)):(s=s.delete(t),o=o.delete(t)))}),Qc(this.query)||Yc(this.query))for(;s.size>this.query.limit;){var l=Qc(this.query)?s.last():s.first();s=s.delete(l.key),o=o.delete(l.key),r.track({type:1,doc:l})}return{Eo:s,Ao:r,Mn:a,mutatedKeys:o}},t.prototype.Ro=function(t,e){return t.hasLocalMutations&&e.hasCommittedMutations&&!e.hasLocalMutations},t.prototype.applyChanges=function(t,e,n){var r=this,i=this.Eo;this.Eo=t.Eo,this.mutatedKeys=t.mutatedKeys;var o=t.Ao.Yr();o.sort(function(t,e){return function(t,e){var n=function(t){switch(t){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return Ru()}};return n(t)-n(e)}(t.type,e.type)||r.po(t.doc,e.doc)}),this.bo(n);var s=e?this.vo():[],a=0===this.yo.size&&this.current?1:0,u=a!==this.mo;return this.mo=a,0!==o.length||u?{snapshot:new bg(this.query,t.Eo,i,o,t.mutatedKeys,0===a,u,!1),Po:s}:{Po:s}},t.prototype.eo=function(t){return this.current&&"Offline"===t?(this.current=!1,this.applyChanges({Eo:this.Eo,Ao:new vg,mutatedKeys:this.mutatedKeys,Mn:!1},!1)):{Po:[]}},t.prototype.Vo=function(t){return!this._o.has(t)&&!!this.Eo.has(t)&&!this.Eo.get(t).hasLocalMutations},t.prototype.bo=function(t){var e=this;t&&(t.addedDocuments.forEach(function(t){return e._o=e._o.add(t)}),t.modifiedDocuments.forEach(function(t){}),t.removedDocuments.forEach(function(t){return e._o=e._o.delete(t)}),this.current=t.current)},t.prototype.vo=function(){var t=this;if(!this.current)return[];var e=this.yo;this.yo=fh(),this.Eo.forEach(function(e){t.Vo(e.key)&&(t.yo=t.yo.add(e.key))});var n=[];return e.forEach(function(e){t.yo.has(e)||n.push(new kg(e))}),this.yo.forEach(function(t){e.has(t)||n.push(new jg(t))}),n},t.prototype.So=function(t){this._o=t.jn,this.yo=fh();var e=this.Io(t.documents);return this.applyChanges(e,!0)},t.prototype.Do=function(){return bg.fromInitialDocuments(this.query,this.Eo,this.mutatedKeys,0===this.mo)},t}(),Dg=function(t,e,n){this.query=t,this.targetId=e,this.view=n},Rg=function(t){this.key=t,this.Co=!1},Pg=function(){function t(t,e,n,r,i,o){this.localStore=t,this.remoteStore=e,this.eventManager=n,this.sharedClientState=r,this.currentUser=i,this.maxConcurrentLimboResolutions=o,this.xo={},this.No=new xd(function(t){return ol(t)},il),this.$o=new Map,this.Fo=new Set,this.Oo=new Zl(tc.comparator),this.ko=new Map,this.Mo=new cp,this.Lo={},this.Bo=new Map,this.qo=md.ne(),this.onlineState="Unknown",this.Uo=void 0}return Object.defineProperty(t.prototype,"isPrimaryClient",{get:function(){return!0===this.Uo},enumerable:!1,configurable:!0}),t}();function Lg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:return n=hm(t),(i=n.No.get(e))?(n.sharedClientState.addLocalQueryTarget(i.targetId),r=i.view.Do(),[3,4]):[3,1];case 1:return[4,tp(n.localStore,nl(e))];case 2:return o=a.sent(),s=n.sharedClientState.addLocalQueryTarget(o.targetId),[4,Mg(n,e,o.targetId,"current"===s)];case 3:r=a.sent(),n.isPrimaryClient&&Kp(n.remoteStore,o),a.label=4;case 4:return[2,r]}})})}function Mg(t,e,n,r){return Object(Tu.b)(this,void 0,void 0,function(){var i,o,s,a,u,c;return Object(Tu.d)(this,function(l){switch(l.label){case 0:return t.Qo=function(e,n,r){return function(t,e,n,r){return Object(Tu.b)(this,void 0,void 0,function(){var i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:return(i=e.view.Io(n)).Mn?[4,np(t.localStore,e.query,!1).then(function(t){return e.view.Io(t.documents,i)})]:[3,2];case 1:i=a.sent(),a.label=2;case 2:return o=r&&r.targetChanges.get(e.targetId),s=e.view.applyChanges(i,t.isPrimaryClient,o),[2,(Qg(t,e.targetId,s.Po),s.snapshot)]}})})}(t,e,n,r)},[4,np(t.localStore,e,!0)];case 1:return i=l.sent(),o=new Ng(e,i.jn),s=o.Io(i.documents),a=mh.createSynthesizedTargetChangeForCurrentChange(n,r&&"Offline"!==t.onlineState),u=o.applyChanges(s,t.isPrimaryClient,a),Qg(t,n,u.Po),c=new Dg(e,n,o),[2,(t.No.set(e,c),t.$o.has(n)?t.$o.get(n).push(e):t.$o.set(n,[e]),u.snapshot)]}})})}function Ug(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return n=Lu(t),r=n.No.get(e),(i=n.$o.get(r.targetId)).length>1?[2,(n.$o.set(r.targetId,i.filter(function(t){return!il(t,e)})),void n.No.delete(e))]:n.isPrimaryClient?(n.sharedClientState.removeLocalQueryTarget(r.targetId),n.sharedClientState.isActiveQueryTarget(r.targetId)?[3,2]:[4,ep(n.localStore,r.targetId,!1).then(function(){n.sharedClientState.clearQueryState(r.targetId),Jp(n.remoteStore,r.targetId),$g(n,r.targetId)}).catch(_d)]):[3,3];case 1:o.sent(),o.label=2;case 2:return[3,5];case 3:return $g(n,r.targetId),[4,ep(n.localStore,r.targetId,!0)];case 4:o.sent(),o.label=5;case 5:return[2]}})})}function Fg(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:r=fm(t),a.label=1;case 1:return a.trys.push([1,5,,6]),[4,function(t,e){var n,r=Lu(t),i=sc.now(),o=e.reduce(function(t,e){return t.add(e.key)},fh());return r.persistence.runTransaction("Locally write mutations","readwrite",function(t){return r.Kn.bn(t,o).next(function(o){n=o;for(var s=[],a=0,u=e;a<u.length;a++){var c=u[a],l=Ml(c,n.get(c.key));null!=l&&s.push(new ql(c.key,l,pl(l.proto.mapValue),Nl.exists(!0)))}return r.Tn.addMutationBatch(t,i,s,e)})}).then(function(t){var e=t.applyToLocalDocumentSet(n);return{batchId:t.batchId,changes:e}})}(r.localStore,e)];case 2:return i=a.sent(),r.sharedClientState.addPendingMutation(i.batchId),function(t,e,n){var r=t.Lo[t.currentUser.toKey()];r||(r=new Zl(Fu)),r=r.insert(e,n),t.Lo[t.currentUser.toKey()]=r}(r,i.batchId,n),[4,Zg(r,i.changes)];case 3:return a.sent(),[4,og(r.remoteStore)];case 4:return a.sent(),[3,6];case 5:return o=a.sent(),s=mg(o,"Failed to persist write"),n.reject(s),[3,6];case 6:return[2]}})})}function Vg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r;return Object(Tu.d)(this,function(i){switch(i.label){case 0:n=Lu(t),i.label=1;case 1:return i.trys.push([1,4,,6]),[4,Yd(n.localStore,e)];case 2:return r=i.sent(),e.targetChanges.forEach(function(t,e){var r=n.ko.get(e);r&&(Pu(t.addedDocuments.size+t.modifiedDocuments.size+t.removedDocuments.size<=1),t.addedDocuments.size>0?r.Co=!0:t.modifiedDocuments.size>0?Pu(r.Co):t.removedDocuments.size>0&&(Pu(r.Co),r.Co=!1))}),[4,Zg(n,r,e)];case 3:return i.sent(),[3,6];case 4:return[4,_d(i.sent())];case 5:return i.sent(),[3,6];case 6:return[2]}})})}function qg(t,e,n){var r=Lu(t);if(r.isPrimaryClient&&0===n||!r.isPrimaryClient&&1===n){var i=[];r.No.forEach(function(t,n){var r=n.view.eo(e);r.snapshot&&i.push(r.snapshot)}),function(t,e){var n=Lu(t);n.onlineState=e;var r=!1;n.queries.forEach(function(t,n){for(var i=0,o=n.listeners;i<o.length;i++)o[i].eo(e)&&(r=!0)}),r&&Tg(n)}(r.eventManager,e),i.length&&r.xo.Tr(i),r.onlineState=e,r.isPrimaryClient&&r.sharedClientState.setOnlineState(e)}}function Bg(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o,s,a,u;return Object(Tu.d)(this,function(c){switch(c.label){case 0:return(r=Lu(t)).sharedClientState.updateQueryState(e,"rejected",n),i=r.ko.get(e),(o=i&&i.key)?(s=(s=new Zl(tc.comparator)).insert(o,new Oc(o,ll.min())),a=fh().add(o),u=new gh(ll.min(),new Map,new nh(Fu),s,a),[4,Vg(r,u)]):[3,2];case 1:return c.sent(),r.Oo=r.Oo.remove(o),r.ko.delete(e),Xg(r),[3,4];case 2:return[4,ep(r.localStore,e,!1).then(function(){return $g(r,e,n)}).catch(_d)];case 3:c.sent(),c.label=4;case 4:return[2]}})})}function Hg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:n=Lu(t),r=e.batch.batchId,o.label=1;case 1:return o.trys.push([1,4,,6]),[4,Wd(n.localStore,e)];case 2:return i=o.sent(),Jg(n,r,null),Kg(n,r),n.sharedClientState.updateMutationState(r,"acknowledged"),[4,Zg(n,i)];case 3:return o.sent(),[3,6];case 4:return[4,_d(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function zg(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:r=Lu(t),o.label=1;case 1:return o.trys.push([1,4,,6]),[4,function(t,e){var n=Lu(t);return n.persistence.runTransaction("Reject batch","readwrite-primary",function(t){var r;return n.Tn.lookupMutationBatch(t,e).next(function(e){return Pu(null!==e),r=e.keys(),n.Tn.removeMutationBatch(t,e)}).next(function(){return n.Tn.performConsistencyCheck(t)}).next(function(){return n.Kn.bn(t,r)})})}(r.localStore,e)];case 2:return i=o.sent(),Jg(r,e,n),Kg(r,e),r.sharedClientState.updateMutationState(e,"rejected",n),[4,Zg(r,i)];case 3:return o.sent(),[3,6];case 4:return[4,_d(o.sent())];case 5:return o.sent(),[3,6];case 6:return[2]}})})}function Gg(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:Xp((n=Lu(t)).remoteStore)||ju("SyncEngine","The network is disabled. The task returned by 'awaitPendingWrites()' will not complete until the network is enabled."),a.label=1;case 1:return a.trys.push([1,3,,4]),[4,function(t){var e=Lu(t);return e.persistence.runTransaction("Get highest unacknowledged batch id","readonly",function(t){return e.Tn.getHighestUnacknowledgedBatchId(t)})}(n.localStore)];case 2:return-1===(r=a.sent())?[2,void e.resolve()]:((i=n.Bo.get(r)||[]).push(e),n.Bo.set(r,i),[3,4]);case 3:return o=a.sent(),s=mg(o,"Initialization of waitForPendingWrites() operation failed"),e.reject(s),[3,4];case 4:return[2]}})})}function Kg(t,e){(t.Bo.get(e)||[]).forEach(function(t){t.resolve()}),t.Bo.delete(e)}function Jg(t,e,n){var r=Lu(t),i=r.Lo[r.currentUser.toKey()];if(i){var o=i.get(e);o&&(n?o.reject(n):o.resolve(),i=i.remove(e)),r.Lo[r.currentUser.toKey()]=i}}function $g(t,e,n){void 0===n&&(n=null),t.sharedClientState.removeLocalQueryTarget(e);for(var r=0,i=t.$o.get(e);r<i.length;r++){var o=i[r];t.No.delete(o),n&&t.xo.Ko(o,n)}t.$o.delete(e),t.isPrimaryClient&&t.Mo.os(e).forEach(function(e){t.Mo.containsKey(e)||Wg(t,e)})}function Wg(t,e){t.Fo.delete(e.path.canonicalString());var n=t.Oo.get(e);null!==n&&(Jp(t.remoteStore,n),t.Oo=t.Oo.remove(e),t.ko.delete(n),Xg(t))}function Qg(t,e,n){for(var r=0,i=n;r<i.length;r++){var o=i[r];o instanceof jg?(t.Mo.addReference(o.key,e),Yg(t,o)):o instanceof kg?(ju("SyncEngine","Document no longer in limbo: "+o.key),t.Mo.removeReference(o.key,e),t.Mo.containsKey(o.key)||Wg(t,o.key)):Ru()}}function Yg(t,e){var n=e.key,r=n.path.canonicalString();t.Oo.get(n)||t.Fo.has(r)||(ju("SyncEngine","New document in limbo: "+n),t.Fo.add(r),Xg(t))}function Xg(t){for(;t.Fo.size>0&&t.Oo.size<t.maxConcurrentLimboResolutions;){var e=t.Fo.values().next().value;t.Fo.delete(e);var n=new tc(Yu.fromString(e)),r=t.qo.next();t.ko.set(r,new Rg(n)),t.Oo=t.Oo.insert(n,r),Kp(t.remoteStore,new Bf(nl(Wc(n.path)),r,2,Cu.o))}}function Zg(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:return r=Lu(t),i=[],o=[],s=[],r.No.isEmpty()?[3,3]:(r.No.forEach(function(t,a){s.push(r.Qo(a,e,n).then(function(t){if(t){r.isPrimaryClient&&r.sharedClientState.updateQueryState(a.targetId,t.fromCache?"not-current":"current"),i.push(t);var e=zd.Nn(a.targetId,t);o.push(e)}}))}),[4,Promise.all(s)]);case 1:return a.sent(),r.xo.Tr(i),[4,function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c;return Object(Tu.d)(this,function(l){switch(l.label){case 0:n=Lu(t),l.label=1;case 1:return l.trys.push([1,3,,4]),[4,n.persistence.runTransaction("notifyLocalViewChanges","readwrite",function(t){return xf.forEach(e,function(e){return xf.forEach(e.Cn,function(r){return n.persistence.referenceDelegate.addReference(t,e.targetId,r)}).next(function(){return xf.forEach(e.xn,function(r){return n.persistence.referenceDelegate.removeReference(t,e.targetId,r)})})})})];case 2:return l.sent(),[3,4];case 3:if(!Df(r=l.sent()))throw r;return ju("LocalStore","Failed to update sequence numbers: "+r),[3,4];case 4:for(i=0,o=e;i<o.length;i++)a=(s=o[i]).targetId,s.fromCache||(u=n.Bn.get(a),c=u.withLastLimboFreeSnapshotVersion(u.snapshotVersion),n.Bn=n.Bn.insert(a,c));return[2]}})})}(r.localStore,o)];case 2:a.sent(),a.label=3;case 3:return[2]}})})}function tm(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return(n=Lu(t)).currentUser.isEqual(e)?[3,3]:(ju("SyncEngine","User change. New user:",e.toKey()),[4,$d(n.localStore,e)]);case 1:return r=i.sent(),n.currentUser=e,function(t,e){t.Bo.forEach(function(t){t.forEach(function(t){t.reject(new Wu($u.CANCELLED,"'waitForPendingWrites' promise is rejected due to a user change."))})}),t.Bo.clear()}(n),n.sharedClientState.handleUserChange(e,r.removedBatchIds,r.addedBatchIds),[4,Zg(n,r.Wn)];case 2:i.sent(),i.label=3;case 3:return[2]}})})}function em(t,e){var n=Lu(t),r=n.ko.get(e);if(r&&r.Co)return fh().add(r.key);var i=fh(),o=n.$o.get(e);if(!o)return i;for(var s=0,a=o;s<a.length;s++){var u=n.No.get(a[s]);i=i.unionWith(u.view.To)}return i}function nm(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return[4,np((n=Lu(t)).localStore,e.query,!0)];case 1:return r=o.sent(),i=e.view.So(r),[2,(n.isPrimaryClient&&Qg(n,e.targetId,i.Po),i)]}})})}function rm(t){return Object(Tu.b)(this,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){return[2,ip((e=Lu(t)).localStore).then(function(t){return Zg(e,t)})]})})}function im(t,e,n,r){return Object(Tu.b)(this,void 0,void 0,function(){var i,o;return Object(Tu.d)(this,function(s){switch(s.label){case 0:return[4,function(t,e){var n=Lu(t),r=Lu(n.Tn);return n.persistence.runTransaction("Lookup mutation documents","readonly",function(t){return r.Jt(t,e).next(function(e){return e?n.Kn.bn(t,e):xf.resolve(null)})})}((i=Lu(t)).localStore,e)];case 1:return null===(o=s.sent())?[3,6]:"pending"!==n?[3,3]:[4,og(i.remoteStore)];case 2:return s.sent(),[3,4];case 3:"acknowledged"===n||"rejected"===n?(Jg(i,e,r||null),Kg(i,e),function(t,e){Lu(Lu(t).Tn).Xt(e)}(i.localStore,e)):Ru(),s.label=4;case 4:return[4,Zg(i,o)];case 5:return s.sent(),[3,7];case 6:ju("SyncEngine","Cannot apply mutation batch with id: "+e),s.label=7;case 7:return[2]}})})}function om(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u;return Object(Tu.d)(this,function(c){switch(c.label){case 0:return hm(n=Lu(t)),fm(n),!0!==e||!0===n.Uo?[3,3]:(r=n.sharedClientState.getAllActiveQueryTargets(),[4,sm(n,r.toArray())]);case 1:return i=c.sent(),n.Uo=!0,[4,fg(n.remoteStore,!0)];case 2:for(c.sent(),o=0,s=i;o<s.length;o++)Kp(n.remoteStore,s[o]);return[3,7];case 3:return!1!==e||!1===n.Uo?[3,7]:(a=[],u=Promise.resolve(),n.$o.forEach(function(t,e){n.sharedClientState.isLocalQueryTarget(e)?a.push(e):u=u.then(function(){return $g(n,e),ep(n.localStore,e,!0)}),Jp(n.remoteStore,e)}),[4,u]);case 4:return c.sent(),[4,sm(n,a)];case 5:return c.sent(),function(t){var e=Lu(t);e.ko.forEach(function(t,n){Jp(e.remoteStore,n)}),e.Mo.cs(),e.ko=new Map,e.Oo=new Zl(tc.comparator)}(n),n.Uo=!1,[4,fg(n.remoteStore,!1)];case 6:c.sent(),c.label=7;case 7:return[2]}})})}function sm(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a,u,c,l,h,f,d,p;return Object(Tu.d)(this,function(g){switch(g.label){case 0:n=Lu(t),r=[],i=[],o=0,s=e,g.label=1;case 1:return o<s.length?(u=void 0,(c=n.$o.get(a=s[o]))&&0!==c.length?[4,tp(n.localStore,nl(c[0]))]:[3,7]):[3,13];case 2:u=g.sent(),l=0,h=c,g.label=3;case 3:return l<h.length?(f=n.No.get(h[l]),[4,nm(n,f)]):[3,6];case 4:(d=g.sent()).snapshot&&i.push(d.snapshot),g.label=5;case 5:return l++,[3,3];case 6:return[3,11];case 7:return[4,rp(n.localStore,a)];case 8:return p=g.sent(),[4,tp(n.localStore,p)];case 9:return u=g.sent(),[4,Mg(n,am(p),a,!1)];case 10:g.sent(),g.label=11;case 11:r.push(u),g.label=12;case 12:return o++,[3,1];case 13:return[2,(n.xo.Tr(i),r)]}})})}function am(t){return $c(t.path,t.collectionGroup,t.orderBy,t.filters,t.limit,"F",t.startAt,t.endAt)}function um(t){var e=Lu(t);return Lu(Lu(e.localStore).persistence).gn()}function cm(t,e,n,r){return Object(Tu.b)(this,void 0,void 0,function(){var i,o,s;return Object(Tu.d)(this,function(a){switch(a.label){case 0:return(i=Lu(t)).Uo?(ju("SyncEngine","Ignoring unexpected query state notification."),[3,8]):[3,1];case 1:if(!i.$o.has(e))return[3,8];switch(n){case"current":case"not-current":return[3,2];case"rejected":return[3,5]}return[3,7];case 2:return[4,ip(i.localStore)];case 3:return o=a.sent(),s=gh.createSynthesizedRemoteEventForCurrentChange(e,"current"===n),[4,Zg(i,o,s)];case 4:return a.sent(),[3,8];case 5:return[4,ep(i.localStore,e,!0)];case 6:return a.sent(),$g(i,e,r),[3,8];case 7:Ru(),a.label=8;case 8:return[2]}})})}function lm(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o,s,a,u,c,l,h;return Object(Tu.d)(this,function(f){switch(f.label){case 0:if(!(r=hm(t)).Uo)return[3,10];i=0,o=e,f.label=1;case 1:return i<o.length?r.$o.has(s=o[i])?(ju("SyncEngine","Adding an already active target "+s),[3,5]):[4,rp(r.localStore,s)]:[3,6];case 2:return a=f.sent(),[4,tp(r.localStore,a)];case 3:return u=f.sent(),[4,Mg(r,am(a),u.targetId,!1)];case 4:f.sent(),Kp(r.remoteStore,u),f.label=5;case 5:return i++,[3,1];case 6:c=function(t){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return r.$o.has(t)?[4,ep(r.localStore,t,!1).then(function(){Jp(r.remoteStore,t),$g(r,t)}).catch(_d)]:[3,2];case 1:e.sent(),e.label=2;case 2:return[2]}})},l=0,h=n,f.label=7;case 7:return l<h.length?[5,c(h[l])]:[3,10];case 8:f.sent(),f.label=9;case 9:return l++,[3,7];case 10:return[2]}})})}function hm(t){var e=Lu(t);return e.remoteStore.remoteSyncer.applyRemoteEvent=Vg.bind(null,e),e.remoteStore.remoteSyncer.getRemoteKeysForTarget=em.bind(null,e),e.remoteStore.remoteSyncer.rejectListen=Bg.bind(null,e),e.xo.Tr=Sg.bind(null,e.eventManager),e.xo.Ko=Og.bind(null,e.eventManager),e}function fm(t){var e=Lu(t);return e.remoteStore.remoteSyncer.applySuccessfulWrite=Hg.bind(null,e),e.remoteStore.remoteSyncer.rejectFailedWrite=zg.bind(null,e),e}var dm=function(){function t(){this.synchronizeTabs=!1}return t.prototype.initialize=function(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return this.D=Lp(t.databaseInfo.databaseId),this.sharedClientState=this.jo(t),this.persistence=this.Go(t),[4,this.persistence.start()];case 1:return e.sent(),this.gcScheduler=this.zo(t),this.localStore=this.Ho(t),[2]}})})},t.prototype.zo=function(t){return null},t.prototype.Ho=function(t){return Jd(this.persistence,new Gd,t.initialUser,this.D)},t.prototype.Go=function(t){return new gp(yp.Cs,this.D)},t.prototype.jo=function(t){return new xp},t.prototype.terminate=function(){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return this.gcScheduler&&this.gcScheduler.stop(),[4,this.sharedClientState.shutdown()];case 1:return t.sent(),[4,this.persistence.shutdown()];case 2:return t.sent(),[2]}})})},t}(),pm=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).Jo=e,i.cacheSizeBytes=n,i.forceOwnership=r,i.synchronizeTabs=!1,i}return Object(Tu.c)(e,t),e.prototype.initialize=function(e){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(n){switch(n.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return n.sent(),[4,op(this.localStore)];case 2:return n.sent(),[4,this.Jo.initialize(this,e)];case 3:return n.sent(),[4,fm(this.Jo.syncEngine)];case 4:return n.sent(),[4,og(this.Jo.remoteStore)];case 5:return n.sent(),[2]}})})},e.prototype.Ho=function(t){return Jd(this.persistence,new Gd,t.initialUser,this.D)},e.prototype.zo=function(t){return new Sd(this.persistence.referenceDelegate.garbageCollector,t.asyncQueue)},e.prototype.Go=function(t){var e=qd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey),n=void 0!==this.cacheSizeBytes?ud.withCacheSize(this.cacheSizeBytes):ud.DEFAULT;return new Ud(this.synchronizeTabs,e,t.clientId,n,t.asyncQueue,Rp(),Pp(),this.D,this.sharedClientState,!!this.forceOwnership)},e.prototype.jo=function(t){return new xp},e}(dm),gm=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n,!1)||this).Jo=e,r.cacheSizeBytes=n,r.synchronizeTabs=!0,r}return Object(Tu.c)(e,t),e.prototype.initialize=function(e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r=this;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return[4,t.prototype.initialize.call(this,e)];case 1:return i.sent(),n=this.Jo.syncEngine,this.sharedClientState instanceof Cp?(this.sharedClientState.syncEngine={wi:im.bind(null,n),_i:cm.bind(null,n),mi:lm.bind(null,n),gn:um.bind(null,n),di:rm.bind(null,n)},[4,this.sharedClientState.start()]):[3,3];case 2:i.sent(),i.label=3;case 3:return[4,this.persistence.en(function(t){return Object(Tu.b)(r,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return[4,om(this.Jo.syncEngine,t)];case 1:return e.sent(),this.gcScheduler&&(t&&!this.gcScheduler.started?this.gcScheduler.start(this.localStore):t||this.gcScheduler.stop()),[2]}})})})];case 4:return i.sent(),[2]}})})},e.prototype.jo=function(t){var e=Rp();if(!Cp.At(e))throw new Wu($u.UNIMPLEMENTED,"IndexedDB persistence is only available on platforms that support LocalStorage.");var n=qd(t.databaseInfo.databaseId,t.databaseInfo.persistenceKey);return new Cp(e,t.asyncQueue,n,t.clientId,t.initialUser)},e}(pm),mm=function(){function t(){}return t.prototype.initialize=function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n=this;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return this.localStore?[3,2]:(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(e),this.remoteStore=this.createRemoteStore(e),this.eventManager=this.createEventManager(e),this.syncEngine=this.createSyncEngine(e,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=function(t){return qg(n.syncEngine,t,1)},this.remoteStore.remoteSyncer.handleCredentialChange=tm.bind(null,this.syncEngine),[4,fg(this.remoteStore,this.syncEngine.isPrimaryClient)]);case 1:r.sent(),r.label=2;case 2:return[2]}})})},t.prototype.createEventManager=function(t){return new _g},t.prototype.createDatastore=function(t){var e=Lp(t.databaseInfo.databaseId),n=new Dp(t.databaseInfo);return function(t,e,n){return new qp(t,e,n)}(t.credentials,n,e)},t.prototype.createRemoteStore=function(t){var e,n,r,i,o,s=this;return e=this.localStore,n=this.datastore,r=t.asyncQueue,i=function(t){return qg(s.syncEngine,t,0)},o=jp.At()?new jp:new Ap,new Hp(e,n,r,i,o)},t.prototype.createSyncEngine=function(t,e){return function(t,e,n,r,i,o,s){var a=new Pg(t,e,n,r,i,o);return s&&(a.Uo=!0),a}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,e)},t.prototype.terminate=function(){return function(t){return Object(Tu.b)(this,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return e=Lu(t),ju("RemoteStore","RemoteStore shutting down."),e.Qr.add(5),[4,Gp(e)];case 1:return n.sent(),e.Wr.shutdown(),e.jr.set("Unknown"),[2]}})})}(this.remoteStore)},t}(),ym=function(){function t(t){this.observer=t,this.muted=!1}return t.prototype.next=function(t){this.observer.next&&this.Yo(this.observer.next,t)},t.prototype.error=function(t){this.observer.error?this.Yo(this.observer.error,t):console.error("Uncaught Error in snapshot listener:",t)},t.prototype.Xo=function(){this.muted=!0},t.prototype.Yo=function(t,e){var n=this;this.muted||setTimeout(function(){n.muted||t(e)},0)},t}(),vm=(function(){function t(t,e){var n=this;this.Zo=t,this.D=e,this.metadata=new Cf,this.buffer=new Uint8Array,this.tc=new TextDecoder("utf-8"),this.ec().then(function(t){t&&t.ho()?n.metadata.resolve(t.payload.metadata):n.metadata.reject(new Error("The first element of the bundle is not a metadata, it is\n             "+JSON.stringify(null==t?void 0:t.payload)))},function(t){return n.metadata.reject(t)})}t.prototype.close=function(){return this.Zo.cancel()},t.prototype.getMetadata=function(){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(t){return[2,this.metadata.promise]})})},t.prototype.Wo=function(){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return[4,this.getMetadata()];case 1:return[2,(t.sent(),this.ec())]}})})},t.prototype.ec=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e,n,r;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return[4,this.nc()];case 1:return null===(t=i.sent())?[2,null]:(e=this.tc.decode(t),n=Number(e),isNaN(n)&&this.sc("length string ("+e+") is not valid number"),[4,this.ic(n)]);case 2:return r=i.sent(),[2,new xg(JSON.parse(r),t.length+n)]}})})},t.prototype.rc=function(){return this.buffer.findIndex(function(t){return t==="{".charCodeAt(0)})},t.prototype.nc=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return this.rc()<0?[4,this.oc()]:[3,3];case 1:if(n.sent())return[3,3];n.label=2;case 2:return[3,0];case 3:return 0===this.buffer.length?[2,null]:((t=this.rc())<0&&this.sc("Reached the end of bundle when a length string is expected."),e=this.buffer.slice(0,t),[2,(this.buffer=this.buffer.slice(t),e)])}})})},t.prototype.ic=function(t){return Object(Tu.b)(this,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return this.buffer.length<t?[4,this.oc()]:[3,3];case 1:n.sent()&&this.sc("Reached the end of bundle when more is expected."),n.label=2;case 2:return[3,0];case 3:return e=this.tc.decode(this.buffer.slice(0,t)),[2,(this.buffer=this.buffer.slice(t),e)]}})})},t.prototype.sc=function(t){throw this.Zo.cancel(),new Error("Invalid bundle format: "+t)},t.prototype.oc=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return[4,this.Zo.read()];case 1:return(t=n.sent()).done||((e=new Uint8Array(this.buffer.length+t.value.length)).set(this.buffer),e.set(t.value,this.buffer.length),this.buffer=e),[2,t.done]}})})}}(),function(){function t(t){this.datastore=t,this.readVersions=new Map,this.mutations=[],this.committed=!1,this.lastWriteError=null,this.writtenDocs=new Set}return t.prototype.lookup=function(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n=this;return Object(Tu.d)(this,function(r){switch(r.label){case 0:if(this.ensureCommitNotCalled(),this.mutations.length>0)throw new Wu($u.INVALID_ARGUMENT,"Firestore transactions require all reads to be executed before all writes.");return[4,function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i,o,s,a;return Object(Tu.d)(this,function(u){switch(u.label){case 0:return n=Lu(t),r=Mh(n.D)+"/documents",i={documents:e.map(function(t){return Dh(n.D,t)})},[4,n.Ui("BatchGetDocuments",r,i)];case 1:return o=u.sent(),s=new Map,o.forEach(function(t){var e=function(t,e){return"found"in e?function(t,e){Pu(!!e.found);var n=Rh(t,e.found.name),r=jh(e.found.updateTime),i=new fl({mapValue:{fields:e.found.fields}});return new Sc(n,r,i,{})}(t,e):"missing"in e?function(t,e){Pu(!!e.missing),Pu(!!e.readTime);var n=Rh(t,e.missing),r=jh(e.readTime);return new Oc(n,r)}(t,e):Ru()}(n.D,t);s.set(e.key.toString(),e)}),a=[],[2,(e.forEach(function(t){var e=s.get(t.toString());Pu(!!e),a.push(e)}),a)]}})})}(this.datastore,t)];case 1:return[2,((e=r.sent()).forEach(function(t){t instanceof Oc||t instanceof Sc?n.recordVersion(t):Ru()}),e)]}})})},t.prototype.set=function(t,e){this.write(e.toMutation(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.update=function(t,e){try{this.write(e.toMutation(t,this.preconditionForUpdate(t)))}catch(t){this.lastWriteError=t}this.writtenDocs.add(t.toString())},t.prototype.delete=function(t){this.write(new $l(t,this.precondition(t))),this.writtenDocs.add(t.toString())},t.prototype.commit=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e=this;return Object(Tu.d)(this,function(n){switch(n.label){case 0:if(this.ensureCommitNotCalled(),this.lastWriteError)throw this.lastWriteError;return t=this.readVersions,this.mutations.forEach(function(e){t.delete(e.key.toString())}),t.forEach(function(t,n){var r=tc.fromPath(n);e.mutations.push(new Wl(r,e.precondition(r)))}),[4,function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return n=Lu(t),r=Mh(n.D)+"/documents",i={writes:e.map(function(t){return qh(n.D,t)})},[4,n.Mi("Commit",r,i)];case 1:return o.sent(),[2]}})})}(this.datastore,this.mutations)];case 1:return n.sent(),this.committed=!0,[2]}})})},t.prototype.recordVersion=function(t){var e;if(t instanceof Sc)e=t.version;else{if(!(t instanceof Oc))throw Ru();e=ll.min()}var n=this.readVersions.get(t.key.toString());if(n){if(!e.isEqual(n))throw new Wu($u.ABORTED,"Document version changed between two reads.")}else this.readVersions.set(t.key.toString(),e)},t.prototype.precondition=function(t){var e=this.readVersions.get(t.toString());return!this.writtenDocs.has(t.toString())&&e?Nl.updateTime(e):Nl.none()},t.prototype.preconditionForUpdate=function(t){var e=this.readVersions.get(t.toString());if(!this.writtenDocs.has(t.toString())&&e){if(e.isEqual(ll.min()))throw new Wu($u.INVALID_ARGUMENT,"Can't update a document that doesn't exist.");return Nl.updateTime(e)}return Nl.exists(!0)},t.prototype.write=function(t){this.ensureCommitNotCalled(),this.mutations.push(t)},t.prototype.ensureCommitNotCalled=function(){},t}()),bm=function(){function t(t,e,n,r){this.asyncQueue=t,this.datastore=e,this.updateFunction=n,this.deferred=r,this.cc=5,this.rr=new Mp(this.asyncQueue,"transaction_retry")}return t.prototype.run=function(){this.ac()},t.prototype.ac=function(){var t=this;this.rr.Yi(function(){return Object(Tu.b)(t,void 0,void 0,function(){var t,e,n=this;return Object(Tu.d)(this,function(r){return t=new vm(this.datastore),(e=this.uc(t))&&e.then(function(e){n.asyncQueue.enqueueAndForget(function(){return t.commit().then(function(){n.deferred.resolve(e)}).catch(function(t){n.hc(t)})})}).catch(function(t){n.hc(t)}),[2]})})})},t.prototype.uc=function(t){try{var e=this.updateFunction(t);return!Gu(e)&&e.catch&&e.then?e:(this.deferred.reject(Error("Transaction callback must return a Promise")),null)}catch(t){return this.deferred.reject(t),null}},t.prototype.hc=function(t){var e=this;this.cc>0&&this.lc(t)?(this.cc-=1,this.asyncQueue.enqueueAndForget(function(){return e.ac(),Promise.resolve()})):this.deferred.reject(t)},t.prototype.lc=function(t){if("FirebaseError"===t.name){var e=t.code;return"aborted"===e||"failed-precondition"===e||!Yl(e)}return!1},t}(),wm=function(){function t(t,e,n){var r=this;this.credentials=t,this.asyncQueue=e,this.databaseInfo=n,this.user=vp.UNAUTHENTICATED,this.clientId=Uu.u(),this.credentialListener=function(){},this.receivedInitialUser=new Cf,this.credentials.setChangeListener(function(t){ju("FirestoreClient","Received user=",t.uid),r.user=t,r.credentialListener(t),r.receivedInitialUser.resolve()})}return t.prototype.getConfiguration=function(){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return[4,this.receivedInitialUser.promise];case 1:return[2,(t.sent(),{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,credentials:this.credentials,initialUser:this.user,maxConcurrentLimboResolutions:100})]}})})},t.prototype.setCredentialChangeListener=function(t){var e=this;this.credentialListener=t,this.receivedInitialUser.promise.then(function(){return e.credentialListener(e.user)})},t.prototype.verifyNotTerminated=function(){if(this.asyncQueue.isShuttingDown)throw new Wu($u.FAILED_PRECONDITION,"The client has already been terminated.")},t.prototype.terminate=function(){var t=this;this.asyncQueue.enterRestrictedMode();var e=new Cf;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Tu.b)(t,void 0,void 0,function(){var t,n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,5,,6]),this.onlineComponents?[4,this.onlineComponents.terminate()]:[3,2];case 1:r.sent(),r.label=2;case 2:return this.offlineComponents?[4,this.offlineComponents.terminate()]:[3,4];case 3:r.sent(),r.label=4;case 4:return this.credentials.removeChangeListener(),e.resolve(),[3,6];case 5:return t=r.sent(),n=mg(t,"Failed to shutdown persistence"),e.reject(n),[3,6];case 6:return[2]}})})}),e.promise},t}();function _m(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r,i=this;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return t.asyncQueue.verifyOperationInProgress(),ju("FirestoreClient","Initializing OfflineComponentProvider"),[4,t.getConfiguration()];case 1:return n=o.sent(),[4,e.initialize(n)];case 2:return o.sent(),r=n.initialUser,t.setCredentialChangeListener(function(n){r.isEqual(n)||(r=n,t.asyncQueue.enqueueRetryable(function(){return Object(Tu.b)(i,void 0,void 0,function(){return Object(Tu.d)(this,function(t){switch(t.label){case 0:return[4,$d(e.localStore,n)];case 1:return t.sent(),[2]}})})}))}),e.persistence.setDatabaseDeletedListener(function(){return t.terminate()}),t.offlineComponents=e,[2]}})})}function Im(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return t.asyncQueue.verifyOperationInProgress(),[4,Em(t)];case 1:return n=i.sent(),ju("FirestoreClient","Initializing OnlineComponentProvider"),[4,t.getConfiguration()];case 2:return r=i.sent(),[4,e.initialize(n,r)];case 3:return i.sent(),t.setCredentialChangeListener(function(n){return t.asyncQueue.enqueueRetryable(function(){return function(t,e){return Object(Tu.b)(this,void 0,void 0,function(){var n,r;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return(n=Lu(t)).asyncQueue.verifyOperationInProgress(),ju("RemoteStore","RemoteStore received new credentials"),r=Xp(n),n.Qr.add(3),[4,Gp(n)];case 1:return i.sent(),r&&n.jr.set("Unknown"),[4,n.remoteSyncer.handleCredentialChange(e)];case 2:return i.sent(),n.Qr.delete(3),[4,zp(n)];case 3:return i.sent(),[2]}})})}(e.remoteStore,n)})}),t.onlineComponents=e,[2]}})})}function Em(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return t.offlineComponents?[3,2]:(ju("FirestoreClient","Using default OfflineComponentProvider"),[4,_m(t,new dm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.offlineComponents]}})})}function Sm(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return t.onlineComponents?[3,2]:(ju("FirestoreClient","Using default OnlineComponentProvider"),[4,Im(t,new mm)]);case 1:e.sent(),e.label=2;case 2:return[2,t.onlineComponents]}})})}function Om(t){return Em(t).then(function(t){return t.persistence})}function Tm(t){return Em(t).then(function(t){return t.localStore})}function Cm(t){return Sm(t).then(function(t){return t.remoteStore})}function xm(t){return Sm(t).then(function(t){return t.syncEngine})}function Am(t){return Object(Tu.b)(this,void 0,void 0,function(){var e,n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return[4,Sm(t)];case 1:return e=r.sent(),[2,((n=e.eventManager).onListen=Lg.bind(null,e.syncEngine),n.onUnlisten=Ug.bind(null,e.syncEngine),n)]}})})}function jm(t,e,n){var r=this;void 0===n&&(n={});var i=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(r,void 0,void 0,function(){var r;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ym({next:function(o){e.enqueueAndForget(function(){return Eg(t,s)});var a=o.docs.has(n);!a&&o.fromCache?i.reject(new Wu($u.UNAVAILABLE,"Failed to get document because the client is offline.")):a&&o.fromCache&&r&&"server"===r.source?i.reject(new Wu($u.UNAVAILABLE,'Failed to get document from server. (However, this document does exist in the local cache. Run again without setting source to "server" to retrieve the cached document.)')):i.resolve(o)},error:function(t){return i.reject(t)}}),s=new Cg(Wc(n.path),o,{includeMetadataChanges:!0,uo:!0});return Ig(t,s)},[4,Am(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}function km(t,e,n){var r=this;void 0===n&&(n={});var i=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(r,void 0,void 0,function(){var r;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return r=function(t,e,n,r,i){var o=new ym({next:function(n){e.enqueueAndForget(function(){return Eg(t,s)}),n.fromCache&&"server"===r.source?i.reject(new Wu($u.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):i.resolve(n)},error:function(t){return i.reject(t)}}),s=new Cg(n,o,{includeMetadataChanges:!0,uo:!0});return Ig(t,s)},[4,Am(t)];case 1:return[2,r.apply(void 0,[o.sent(),t.asyncQueue,e,n,i])]}})})}),i.promise}var Nm=function(t,e,n,r,i,o){this.databaseId=t,this.persistenceKey=e,this.host=n,this.ssl=r,this.forceLongPolling=i,this.autoDetectLongPolling=o},Dm=function(){function t(t,e){this.projectId=t,this.database=e||"(default)"}return Object.defineProperty(t.prototype,"isDefaultDatabase",{get:function(){return"(default)"===this.database},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(e){return e instanceof t&&e.projectId===this.projectId&&e.database===this.database},t}(),Rm=new Map,Pm=function(t,e){this.user=e,this.type="OAuth",this.authHeaders={},this.authHeaders.Authorization="Bearer "+t},Lm=function(){function t(){this.changeListener=null}return t.prototype.getToken=function(){return Promise.resolve(null)},t.prototype.invalidateToken=function(){},t.prototype.setChangeListener=function(t){this.changeListener=t,t(vp.UNAUTHENTICATED)},t.prototype.removeChangeListener=function(){this.changeListener=null},t}(),Mm=function(){function t(t){var e=this;this.fc=null,this.currentUser=vp.UNAUTHENTICATED,this.receivedInitialUser=!1,this.dc=0,this.changeListener=null,this.forceRefresh=!1,this.fc=function(){e.dc++,e.currentUser=e.wc(),e.receivedInitialUser=!0,e.changeListener&&e.changeListener(e.currentUser)},this.dc=0,this.auth=t.getImmediate({optional:!0}),this.auth?this.auth.addAuthTokenListener(this.fc):(this.fc(null),t.get().then(function(t){e.auth=t,e.fc&&e.auth.addAuthTokenListener(e.fc)},function(){}))}return t.prototype.getToken=function(){var t=this,e=this.dc,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(function(n){return t.dc!==e?(ju("FirebaseCredentialsProvider","getToken aborted due to token change."),t.getToken()):n?(Pu("string"==typeof n.accessToken),new Pm(n.accessToken,t.currentUser)):null}):Promise.resolve(null)},t.prototype.invalidateToken=function(){this.forceRefresh=!0},t.prototype.setChangeListener=function(t){this.changeListener=t,this.receivedInitialUser&&t(this.currentUser)},t.prototype.removeChangeListener=function(){this.auth&&this.auth.removeAuthTokenListener(this.fc),this.fc=null,this.changeListener=null},t.prototype.wc=function(){var t=this.auth&&this.auth.getUid();return Pu(null===t||"string"==typeof t),new vp(t)},t}(),Um=function(){function t(t,e){this._c=t,this.mc=e,this.type="FirstParty",this.user=vp.FIRST_PARTY}return Object.defineProperty(t.prototype,"authHeaders",{get:function(){var t={"X-Goog-AuthUser":this.mc},e=this._c.auth.getAuthHeaderValueForFirstParty([]);return e&&(t.Authorization=e),t},enumerable:!1,configurable:!0}),t}(),Fm=function(){function t(t,e){this._c=t,this.mc=e}return t.prototype.getToken=function(){return Promise.resolve(new Um(this._c,this.mc))},t.prototype.setChangeListener=function(t){t(vp.FIRST_PARTY)},t.prototype.removeChangeListener=function(){},t.prototype.invalidateToken=function(){},t}();function Vm(t,e,n){if(!n)throw new Wu($u.INVALID_ARGUMENT,"Function "+t+"() cannot be called with an empty "+e+".")}function qm(t,e){if(void 0===e)return{merge:!1};if(void 0!==e.mergeFields&&void 0!==e.merge)throw new Wu($u.INVALID_ARGUMENT,"Invalid options passed to function "+t+'(): You cannot specify both "merge" and "mergeFields".');return e}function Bm(t,e,n,r){if(!0===e&&!0===r)throw new Wu($u.INVALID_ARGUMENT,t+" and "+n+" cannot be used together.")}function Hm(t){if(!tc.isDocumentKey(t))throw new Wu($u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t+" has "+t.length+".")}function zm(t){if(tc.isDocumentKey(t))throw new Wu($u.INVALID_ARGUMENT,"Invalid collection reference. Collection references must have an odd number of segments, but "+t+" has "+t.length+".")}function Gm(t){if(void 0===t)return"undefined";if(null===t)return"null";if("string"==typeof t)return t.length>20&&(t=t.substring(0,20)+"..."),JSON.stringify(t);if("number"==typeof t||"boolean"==typeof t)return""+t;if("object"==typeof t){if(t instanceof Array)return"an array";var e=function(t){if(t.constructor){var e=/function\s+([^\s(]+)\s*\(/.exec(t.constructor.toString());if(e&&e.length>1)return e[1]}return null}(t);return e?"a custom "+e+" object":"an object"}return"function"==typeof t?"a function":Ru()}function Km(t,e){if("_delegate"in t&&(t=t._delegate),!(t instanceof e)){if(e.name===t.constructor.name)throw new Wu($u.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");var n=Gm(t);throw new Wu($u.INVALID_ARGUMENT,"Expected type '"+e.name+"', but it was: "+n)}return t}function Jm(t,e){if(e<=0)throw new Wu($u.INVALID_ARGUMENT,"Function "+t+"() requires a positive number, but it was: "+e+".")}var $m=function(){function t(t){var e;if(void 0===t.host){if(void 0!==t.ssl)throw new Wu($u.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host="firestore.googleapis.com",this.ssl=!0}else this.host=t.host,this.ssl=null===(e=t.ssl)||void 0===e||e;if(this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,void 0===t.cacheSizeBytes)this.cacheSizeBytes=41943040;else{if(-1!==t.cacheSizeBytes&&t.cacheSizeBytes<1048576)throw new Wu($u.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,Bm("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling)}return t.prototype.isEqual=function(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties},t}(),Wm=function(){function t(t,e){this._persistenceKey="(lite)",this._settings=new $m({}),this._settingsFrozen=!1,t instanceof Dm?(this._databaseId=t,this._credentials=new Lm):(this._app=t,this._databaseId=function(t){if(!Object.prototype.hasOwnProperty.apply(t.options,["projectId"]))throw new Wu($u.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new Dm(t.options.projectId)}(t),this._credentials=new Mm(e))}return Object.defineProperty(t.prototype,"app",{get:function(){if(!this._app)throw new Wu($u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_initialized",{get:function(){return this._settingsFrozen},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"_terminated",{get:function(){return void 0!==this._terminateTask},enumerable:!1,configurable:!0}),t.prototype._setSettings=function(t){if(this._settingsFrozen)throw new Wu($u.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new $m(t),void 0!==t.credentials&&(this._credentials=function(t){if(!t)return new Lm;switch(t.type){case"gapi":var e=t.client;return Pu(!("object"!=typeof e||null===e||!e.auth||!e.auth.getAuthHeaderValueForFirstParty)),new Fm(e,t.sessionIndex||"0");case"provider":return t.client;default:throw new Wu($u.INVALID_ARGUMENT,"makeCredentialsProvider failed due to invalid credential type")}}(t.credentials))},t.prototype._getSettings=function(){return this._settings},t.prototype._freezeSettings=function(){return this._settingsFrozen=!0,this._settings},t.prototype._delete=function(){return this._terminateTask||(this._terminateTask=this._terminate()),this._terminateTask},t.prototype.toJSON=function(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}},t.prototype._terminate=function(){return(t=Rm.get(this))&&(ju("ComponentProvider","Removing Datastore"),Rm.delete(this),t.terminate()),Promise.resolve();var t},t}(),Qm=function(t){this._delegate=t},Ym=function(){function t(t,e,n){this._converter=e,this._key=n,this.type="document",this.firestore=t}return Object.defineProperty(t.prototype,"_path",{get:function(){return this._key.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"path",{get:function(){return this._key.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"parent",{get:function(){return new Zm(this.firestore,this._converter,this._key.path.popLast())},enumerable:!1,configurable:!0}),t.prototype.withConverter=function(e){return new t(this.firestore,e,this._key)},t}(),Xm=function(){function t(t,e,n){this._converter=e,this._query=n,this.type="query",this.firestore=t}return t.prototype.withConverter=function(e){return new t(this.firestore,e,this._query)},t}(),Zm=function(t){function e(e,n,r){var i=this;return(i=t.call(this,e,n,Wc(r))||this).firestore=e,i._path=r,i.type="collection",i}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._query.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._query.path.canonicalString()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._path.popLast();return t.isEmpty()?null:new Ym(this.firestore,null,new tc(t))},enumerable:!1,configurable:!0}),e.prototype.withConverter=function(t){return new e(this.firestore,t,this._path)},e}(Xm);function ty(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Qm&&(t=t._delegate),Vm("collection","path",e),t instanceof Wm)return zm(n=Yu.fromString.apply(Yu,Object(Tu.f)([e],r))),new Zm(t,null,n);if(!(t instanceof Ym||t instanceof Zm))throw new Wu($u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return zm(n=Yu.fromString.apply(Yu,Object(Tu.f)([t.path],r)).child(Yu.fromString(e))),new Zm(t.firestore,null,n)}function ey(t,e){for(var n,r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(t instanceof Qm&&(t=t._delegate),1===arguments.length&&(e=Uu.u()),Vm("doc","path",e),t instanceof Wm)return Hm(n=Yu.fromString.apply(Yu,Object(Tu.f)([e],r))),new Ym(t,null,new tc(n));if(!(t instanceof Ym||t instanceof Zm))throw new Wu($u.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");return Hm(n=t._path.child(Yu.fromString.apply(Yu,Object(Tu.f)([e],r)))),new Ym(t.firestore,t instanceof Zm?t._converter:null,new tc(n))}function ny(t,e){return t instanceof Qm&&(t=t._delegate),e instanceof Qm&&(e=e._delegate),(t instanceof Ym||t instanceof Zm)&&(e instanceof Ym||e instanceof Zm)&&t.firestore===e.firestore&&t.path===e.path&&t._converter===e._converter}function ry(t,e){return t instanceof Qm&&(t=t._delegate),e instanceof Qm&&(e=e._delegate),t instanceof Xm&&e instanceof Xm&&t.firestore===e.firestore&&il(t._query,e._query)&&t._converter===e._converter}var iy=function(){function t(){var t=this;this.yc=Promise.resolve(),this.gc=[],this.Ec=!1,this.Tc=[],this.Ic=null,this.Ac=!1,this.Rc=[],this.rr=new Mp(this,"async_queue_retry"),this.bc=function(){var e=Pp();e&&ju("AsyncQueue","Visibility state changed to "+e.visibilityState),t.rr.Zi()};var e=Pp();e&&"function"==typeof e.addEventListener&&e.addEventListener("visibilitychange",this.bc)}return Object.defineProperty(t.prototype,"isShuttingDown",{get:function(){return this.Ec},enumerable:!1,configurable:!0}),t.prototype.enqueueAndForget=function(t){this.enqueue(t)},t.prototype.enqueueAndForgetEvenWhileRestricted=function(t){this.vc(),this.Pc(t)},t.prototype.enterRestrictedMode=function(){if(!this.Ec){this.Ec=!0;var t=Pp();t&&"function"==typeof t.removeEventListener&&t.removeEventListener("visibilitychange",this.bc)}},t.prototype.enqueue=function(t){return this.vc(),this.Ec?new Promise(function(t){}):this.Pc(t)},t.prototype.enqueueRetryable=function(t){var e=this;this.enqueueAndForget(function(){return e.gc.push(t),e.Vc()})},t.prototype.Vc=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t,e=this;return Object(Tu.d)(this,function(n){switch(n.label){case 0:if(0===this.gc.length)return[3,5];n.label=1;case 1:return n.trys.push([1,3,,4]),[4,this.gc[0]()];case 2:return n.sent(),this.gc.shift(),this.rr.reset(),[3,4];case 3:if(!Df(t=n.sent()))throw t;return ju("AsyncQueue","Operation failed with retryable error: "+t),[3,4];case 4:this.gc.length>0&&this.rr.Yi(function(){return e.Vc()}),n.label=5;case 5:return[2]}})})},t.prototype.Pc=function(t){var e=this,n=this.yc.then(function(){return e.Ac=!0,t().catch(function(t){throw e.Ic=t,e.Ac=!1,ku("INTERNAL UNHANDLED ERROR: ",function(t){var e=t.message||"";return t.stack&&(e=t.stack.includes(t.message)?t.stack:t.message+"\n"+t.stack),e}(t)),t}).then(function(t){return e.Ac=!1,t})});return this.yc=n,n},t.prototype.enqueueAfterDelay=function(t,e,n){var r=this;this.vc(),this.Rc.indexOf(t)>-1&&(e=0);var i=gg.createAndSchedule(this,t,e,n,function(t){return r.Sc(t)});return this.Tc.push(i),i},t.prototype.vc=function(){this.Ic&&Ru()},t.prototype.verifyOperationInProgress=function(){},t.prototype.Dc=function(){return Object(Tu.b)(this,void 0,void 0,function(){var t;return Object(Tu.d)(this,function(e){switch(e.label){case 0:return[4,t=this.yc];case 1:e.sent(),e.label=2;case 2:if(t!==this.yc)return[3,0];e.label=3;case 3:return[2]}})})},t.prototype.Cc=function(t){for(var e=0,n=this.Tc;e<n.length;e++)if(n[e].timerId===t)return!0;return!1},t.prototype.xc=function(t){var e=this;return this.Dc().then(function(){e.Tc.sort(function(t,e){return t.targetTimeMs-e.targetTimeMs});for(var n=0,r=e.Tc;n<r.length;n++){var i=r[n];if(i.skipDelay(),"all"!==t&&i.timerId===t)break}return e.Dc()})},t.prototype.Nc=function(t){this.Rc.push(t)},t.prototype.Sc=function(t){var e=this.Tc.indexOf(t);this.Tc.splice(e,1)},t}();function oy(t){return function(t,e){if("object"!=typeof t||null===t)return!1;for(var n=t,r=0,i=["next","error","complete"];r<i.length;r++){var o=i[r];if(o in n&&"function"==typeof n[o])return!0}return!1}(t)}!function(){function t(){this._progressObserver={},this._taskCompletionResolver=new Cf,this._lastProgress={taskState:"Running",totalBytes:0,totalDocuments:0,bytesLoaded:0,documentsLoaded:0}}t.prototype.onProgress=function(t,e,n){this._progressObserver={next:t,error:e,complete:n}},t.prototype.catch=function(t){return this._taskCompletionResolver.promise.catch(t)},t.prototype.then=function(t,e){return this._taskCompletionResolver.promise.then(t,e)},t.prototype._completeWith=function(t){this._updateProgress(t),this._progressObserver.complete&&this._progressObserver.complete(),this._taskCompletionResolver.resolve(t)},t.prototype._failWith=function(t){this._lastProgress.taskState="Error",this._progressObserver.next&&this._progressObserver.next(this._lastProgress),this._progressObserver.error&&this._progressObserver.error(t),this._taskCompletionResolver.reject(t)},t.prototype._updateProgress=function(t){this._lastProgress=t,this._progressObserver.next&&this._progressObserver.next(t)}}();var sy=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._queue=new iy,r._persistenceKey="name"in e?e.name:"[DEFAULT]",r}return Object(Tu.c)(e,t),e.prototype._terminate=function(){return this._firestoreClient||uy(this),this._firestoreClient.terminate()},e}(Wm);function ay(t){return t._firestoreClient||uy(t),t._firestoreClient.verifyNotTerminated(),t._firestoreClient}function uy(t){var e=t._freezeSettings(),n=function(t,e,n){return new Nm(t,e,n.host,n.ssl,n.experimentalForceLongPolling,n.experimentalAutoDetectLongPolling)}(t._databaseId,t._persistenceKey,e);t._firestoreClient=new wm(t._credentials,t._queue,n)}function cy(t,e,n){var r=this,i=new Cf;return t.asyncQueue.enqueue(function(){return Object(Tu.b)(r,void 0,void 0,function(){var r;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,3,,4]),[4,_m(t,n)];case 1:return o.sent(),[4,Im(t,e)];case 2:return o.sent(),i.resolve(),[3,4];case 3:if(!function(t){return"FirebaseError"===t.name?t.code===$u.FAILED_PRECONDITION||t.code===$u.UNIMPLEMENTED:!("undefined"!=typeof DOMException&&t instanceof DOMException)||22===t.code||20===t.code||11===t.code}(r=o.sent()))throw r;return console.warn("Error enabling offline persistence. Falling back to persistence disabled: "+r),i.reject(r),[3,4];case 4:return[2]}})})}).then(function(){return i.promise})}function ly(t){if(t._initialized||t._terminated)throw new Wu($u.FAILED_PRECONDITION,"Firestore has already been started and persistence can no longer be enabled. You can only enable persistence before calling any other methods on a Firestore object.")}var hy=function(){function t(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var n=0;n<t.length;++n)if(0===t[n].length)throw new Wu($u.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new Zu(t)}return t.prototype.isEqual=function(t){return this._internalPath.isEqual(t._internalPath)},t}(),fy=function(){function t(t){this._byteString=t}return t.fromBase64String=function(e){try{return new t(ec.fromBase64String(e))}catch(e){throw new Wu($u.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+e)}},t.fromUint8Array=function(e){return new t(ec.fromUint8Array(e))},t.prototype.toBase64=function(){return this._byteString.toBase64()},t.prototype.toUint8Array=function(){return this._byteString.toUint8Array()},t.prototype.toString=function(){return"Bytes(base64: "+this.toBase64()+")"},t.prototype.isEqual=function(t){return this._byteString.isEqual(t._byteString)},t}(),dy=function(t){this._methodName=t},py=function(){function t(t,e){if(!isFinite(t)||t<-90||t>90)throw new Wu($u.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(e)||e<-180||e>180)throw new Wu($u.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+e);this._lat=t,this._long=e}return Object.defineProperty(t.prototype,"latitude",{get:function(){return this._lat},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"longitude",{get:function(){return this._long},enumerable:!1,configurable:!0}),t.prototype.isEqual=function(t){return this._lat===t._lat&&this._long===t._long},t.prototype.toJSON=function(){return{latitude:this._lat,longitude:this._long}},t.prototype._compareTo=function(t){return Fu(this._lat,t._lat)||Fu(this._long,t._long)},t}(),gy=/^__.*__$/,my=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return null!==this.fieldMask?new ql(t,this.data,this.fieldMask,e,this.fieldTransforms):new Vl(t,this.data,e,this.fieldTransforms)},t}(),yy=function(){function t(t,e,n){this.data=t,this.fieldMask=e,this.fieldTransforms=n}return t.prototype.toMutation=function(t,e){return new ql(t,this.data,this.fieldMask,e,this.fieldTransforms)},t}();function vy(t){switch(t){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw Ru()}}var by=function(){function t(t,e,n,r,i,o){this.settings=t,this.databaseId=e,this.D=n,this.ignoreUndefinedProperties=r,void 0===i&&this.$c(),this.fieldTransforms=i||[],this.fieldMask=o||[]}return Object.defineProperty(t.prototype,"path",{get:function(){return this.settings.path},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"Fc",{get:function(){return this.settings.Fc},enumerable:!1,configurable:!0}),t.prototype.Oc=function(e){return new t(Object.assign(Object.assign({},this.settings),e),this.databaseId,this.D,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)},t.prototype.kc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.Lc(t),r},t.prototype.Bc=function(t){var e,n=null===(e=this.path)||void 0===e?void 0:e.child(t),r=this.Oc({path:n,Mc:!1});return r.$c(),r},t.prototype.qc=function(t){return this.Oc({path:void 0,Mc:!0})},t.prototype.Uc=function(t){return Fy(t,this.settings.methodName,this.settings.Qc||!1,this.path,this.settings.Kc)},t.prototype.contains=function(t){return void 0!==this.fieldMask.find(function(e){return t.isPrefixOf(e)})||void 0!==this.fieldTransforms.find(function(e){return t.isPrefixOf(e.field)})},t.prototype.$c=function(){if(this.path)for(var t=0;t<this.path.length;t++)this.Lc(this.path.get(t))},t.prototype.Lc=function(t){if(0===t.length)throw this.Uc("Document fields must not be empty");if(vy(this.Fc)&&gy.test(t))throw this.Uc('Document fields cannot begin and end with "__"')},t}(),wy=function(){function t(t,e,n){this.databaseId=t,this.ignoreUndefinedProperties=e,this.D=n||Lp(t)}return t.prototype.Wc=function(t,e,n,r){return void 0===r&&(r=!1),new by({Fc:t,methodName:e,Kc:n,path:Zu.emptyPath(),Mc:!1,Qc:r},this.databaseId,this.D,this.ignoreUndefinedProperties)},t}();function _y(t){var e=t._freezeSettings(),n=Lp(t._databaseId);return new wy(t._databaseId,!!e.ignoreUndefinedProperties,n)}function Iy(t,e,n,r,i,o){void 0===o&&(o={});var s=t.Wc(o.merge||o.mergeFields?2:0,e,n,i);Py("Data must be an object, but it was:",s,r);var a,u,c=Dy(r,s);if(o.merge)a=new hl(s.fieldMask),u=s.fieldTransforms;else if(o.mergeFields){for(var l=[],h=0,f=o.mergeFields;h<f.length;h++){var d=Ly(e,f[h],n);if(!s.contains(d))throw new Wu($u.INVALID_ARGUMENT,"Field '"+d+"' is specified in your field mask but missing from your input data.");Vy(l,d)||l.push(d)}a=new hl(l),u=s.fieldTransforms.filter(function(t){return a.covers(t.field)})}else a=null,u=s.fieldTransforms;return new my(new fl(c),a,u)}var Ey=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype._toFieldTransform=function(t){if(2!==t.Fc)throw t.Uc(1===t.Fc?this._methodName+"() can only appear at the top level of your update data":this._methodName+"() cannot be used with set() unless you pass {merge:true}");return t.fieldMask.push(t.path),null},e.prototype.isEqual=function(t){return t instanceof e},e}(dy);function Sy(t,e,n){return new by({Fc:3,Kc:e.settings.Kc,methodName:t._methodName,Mc:n},e.databaseId,e.D,e.ignoreUndefinedProperties)}var Oy=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype._toFieldTransform=function(t){return new jl(t.path,new Il)},e.prototype.isEqual=function(t){return t instanceof e},e}(dy),Ty=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Tu.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Sy(this,t,!0),n=this.jc.map(function(t){return Ny(t,e)}),r=new El(n);return new jl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(dy),Cy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).jc=n,r}return Object(Tu.c)(e,t),e.prototype._toFieldTransform=function(t){var e=Sy(this,t,!0),n=this.jc.map(function(t){return Ny(t,e)}),r=new Ol(n);return new jl(t.path,r)},e.prototype.isEqual=function(t){return this===t},e}(dy),xy=function(t){function e(e,n){var r=this;return(r=t.call(this,e)||this).Gc=n,r}return Object(Tu.c)(e,t),e.prototype._toFieldTransform=function(t){var e=new Cl(t.D,yl(t.D,this.Gc));return new jl(t.path,e)},e.prototype.isEqual=function(t){return this===t},e}(dy);function Ay(t,e,n,r){var i=t.Wc(1,e,n);Py("Data must be an object, but it was:",i,r);var o=[],s=new dl;Hu(r,function(t,r){var a=Uy(e,t,n);r instanceof Qm&&(r=r._delegate);var u=i.Bc(a);if(r instanceof Ey)o.push(a);else{var c=Ny(r,u);null!=c&&(o.push(a),s.set(a,c))}});var a=new hl(o);return new yy(s.v(),a,i.fieldTransforms)}function jy(t,e,n,r,i,o){var s=t.Wc(1,e,n),a=[Ly(e,r,n)],u=[i];if(o.length%2!=0)throw new Wu($u.INVALID_ARGUMENT,"Function "+e+"() needs to be called with an even number of arguments that alternate between field names and values.");for(var c=0;c<o.length;c+=2)a.push(Ly(e,o[c])),u.push(o[c+1]);for(var l=[],h=new dl,f=a.length-1;f>=0;--f)if(!Vy(l,a[f])){var d=a[f],p=u[f];p instanceof Qm&&(p=p._delegate);var g=s.Bc(d);if(p instanceof Ey)l.push(d);else{var m=Ny(p,g);null!=m&&(l.push(d),h.set(d,m))}}var y=new hl(l);return new yy(h.v(),y,s.fieldTransforms)}function ky(t,e,n,r){return void 0===r&&(r=!1),Ny(n,t.Wc(r?4:3,e))}function Ny(t,e){if(t instanceof Qm&&(t=t._delegate),Ry(t))return Py("Unsupported field value:",e,t),Dy(t,e);if(t instanceof dy)return function(t,e){if(!vy(e.Fc))throw e.Uc(t._methodName+"() can only be used with update() and set()");if(!e.path)throw e.Uc(t._methodName+"() is not currently supported inside arrays");var n=t._toFieldTransform(e);n&&e.fieldTransforms.push(n)}(t,e),null;if(void 0===t&&e.ignoreUndefinedProperties)return null;if(e.path&&e.fieldMask.push(e.path),t instanceof Array){if(e.settings.Mc&&4!==e.Fc)throw e.Uc("Nested arrays are not supported");return function(t,e){for(var n=[],r=0,i=0,o=t;i<o.length;i++){var s=Ny(o[i],e.qc(r));null==s&&(s={nullValue:"NULL_VALUE"}),n.push(s),r++}return{arrayValue:{values:n}}}(t,e)}return function(t,e){if(t instanceof Qm&&(t=t._delegate),null===t)return{nullValue:"NULL_VALUE"};if("number"==typeof t)return yl(e.D,t);if("boolean"==typeof t)return{booleanValue:t};if("string"==typeof t)return{stringValue:t};if(t instanceof Date){var n=sc.fromDate(t);return{timestampValue:Ch(e.D,n)}}if(t instanceof sc)return n=new sc(t.seconds,1e3*Math.floor(t.nanoseconds/1e3)),{timestampValue:Ch(e.D,n)};if(t instanceof py)return{geoPointValue:{latitude:t.latitude,longitude:t.longitude}};if(t instanceof fy)return{bytesValue:xh(e.D,t._byteString)};if(t instanceof Ym){var r=t.firestore._databaseId;if(!r.isEqual(n=e.databaseId))throw e.Uc("Document reference is for database "+r.projectId+"/"+r.database+" but should be for database "+n.projectId+"/"+n.database);return{referenceValue:kh(t.firestore._databaseId||e.databaseId,t._key.path)}}throw e.Uc("Unsupported field value: "+Gm(t))}(t,e)}function Dy(t,e){var n={};return zu(t)?e.path&&e.path.length>0&&e.fieldMask.push(e.path):Hu(t,function(t,r){var i=Ny(r,e.kc(t));null!=i&&(n[t]=i)}),{mapValue:{fields:n}}}function Ry(t){return!("object"!=typeof t||null===t||t instanceof Array||t instanceof Date||t instanceof sc||t instanceof py||t instanceof fy||t instanceof Ym||t instanceof dy)}function Py(t,e,n){if(!Ry(n)||!function(t){return"object"==typeof t&&null!==t&&(Object.getPrototypeOf(t)===Object.prototype||null===Object.getPrototypeOf(t))}(n)){var r=Gm(n);throw e.Uc("an object"===r?t+" a custom object":t+" "+r)}}function Ly(t,e,n){if(e instanceof Qm&&(e=e._delegate),e instanceof hy)return e._internalPath;if("string"==typeof e)return Uy(t,e);throw Fy("Field path arguments must be of type string or FieldPath.",t,!1,void 0,n)}var My=new RegExp("[~\\*/\\[\\]]");function Uy(t,e,n){if(e.search(My)>=0)throw Fy("Invalid field path ("+e+"). Paths must not contain '~', '*', '/', '[', or ']'",t,!1,void 0,n);try{return(new(hy.bind.apply(hy,Object(Tu.f)([void 0],e.split(".")))))._internalPath}catch(r){throw Fy("Invalid field path ("+e+"). Paths must not be empty, begin with '.', end with '.', or contain '..'",t,!1,void 0,n)}}function Fy(t,e,n,r,i){var o=r&&!r.isEmpty(),s=void 0!==i,a="Function "+e+"() called with invalid data";n&&(a+=" (via `toFirestore()`)");var u="";return(o||s)&&(u+=" (found",o&&(u+=" in field "+r),s&&(u+=" in document "+i),u+=")"),new Wu($u.INVALID_ARGUMENT,(a+=". ")+t+u)}function Vy(t,e){return t.some(function(t){return t.isEqual(e)})}var qy=function(){function t(t,e,n,r,i){this._firestore=t,this._userDataWriter=e,this._key=n,this._document=r,this._converter=i}return Object.defineProperty(t.prototype,"id",{get:function(){return this._key.path.lastSegment()},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"ref",{get:function(){return new Ym(this._firestore,this._converter,this._key)},enumerable:!1,configurable:!0}),t.prototype.exists=function(){return null!==this._document},t.prototype.data=function(){if(this._document){if(this._converter){var t=new By(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.toProto())}},t.prototype.get=function(t){if(this._document){var e=this._document.data().field(Hy("DocumentSnapshot.get",t));if(null!==e)return this._userDataWriter.convertValue(e)}},t}(),By=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.data=function(){return t.prototype.data.call(this)},e}(qy);function Hy(t,e){return"string"==typeof e?Uy(t,e):e instanceof Qm?e._delegate._internalPath:e._internalPath}var zy=function(){function t(t,e){this.hasPendingWrites=t,this.fromCache=e}return t.prototype.isEqual=function(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache},t}(),Gy=function(t){function e(e,n,r,i,o,s){var a=this;return(a=t.call(this,e,n,r,i,s)||this)._firestore=e,a._firestoreImpl=e,a.metadata=o,a}return Object(Tu.c)(e,t),e.prototype.exists=function(){return t.prototype.exists.call(this)},e.prototype.data=function(t){if(void 0===t&&(t={}),this._document){if(this._converter){var e=new Ky(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(e,t)}return this._userDataWriter.convertValue(this._document.toProto(),t.serverTimestamps)}},e.prototype.get=function(t,e){if(void 0===e&&(e={}),this._document){var n=this._document.data().field(Hy("DocumentSnapshot.get",t));if(null!==n)return this._userDataWriter.convertValue(n,e.serverTimestamps)}},e}(qy),Ky=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.data=function(e){return void 0===e&&(e={}),t.prototype.data.call(this,e)},e}(Gy),Jy=function(){function t(t,e,n,r){this._firestore=t,this._userDataWriter=e,this._snapshot=r,this.metadata=new zy(r.hasPendingWrites,r.fromCache),this.query=n}return Object.defineProperty(t.prototype,"docs",{get:function(){var t=[];return this.forEach(function(e){return t.push(e)}),t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"size",{get:function(){return this._snapshot.docs.size},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"empty",{get:function(){return 0===this.size},enumerable:!1,configurable:!0}),t.prototype.forEach=function(t,e){var n=this;this._snapshot.docs.forEach(function(r){t.call(e,new Ky(n._firestore,n._userDataWriter,r.key,r,new zy(n._snapshot.mutatedKeys.has(r.key),n._snapshot.fromCache),n.query._converter))})},t.prototype.docChanges=function(t){void 0===t&&(t={});var e=!!t.includeMetadataChanges;if(e&&this._snapshot.excludesMetadataChanges)throw new Wu($u.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===e||(this._cachedChanges=function(t,e){if(t._snapshot.oldDocs.isEmpty()){var n=0;return t._snapshot.docChanges.map(function(e){return{type:"added",doc:new Ky(t._firestore,t._userDataWriter,e.doc.key,e.doc,new zy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),oldIndex:-1,newIndex:n++}})}var r=t._snapshot.oldDocs;return t._snapshot.docChanges.filter(function(t){return e||3!==t.type}).map(function(e){var n=new Ky(t._firestore,t._userDataWriter,e.doc.key,e.doc,new zy(t._snapshot.mutatedKeys.has(e.doc.key),t._snapshot.fromCache),t.query._converter),i=-1,o=-1;return 0!==e.type&&(i=r.indexOf(e.doc.key),r=r.delete(e.doc.key)),1!==e.type&&(o=(r=r.add(e.doc)).indexOf(e.doc.key)),{type:$y(e.type),doc:n,oldIndex:i,newIndex:o}})}(this,e),this._cachedChangesIncludeMetadataChanges=e),this._cachedChanges},t}();function $y(t){switch(t){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return Ru()}}function Wy(t,e){return t instanceof Gy&&e instanceof Gy?t._firestore===e._firestore&&t._key.isEqual(e._key)&&(null===t._document?null===e._document:t._document.isEqual(e._document))&&t._converter===e._converter:t instanceof Jy&&e instanceof Jy&&t._firestore===e._firestore&&ry(t.query,e.query)&&t.metadata.isEqual(e.metadata)&&t._snapshot.isEqual(e._snapshot)}function Qy(t){if(Yc(t)&&0===t.explicitOrderBy.length)throw new Wu($u.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}var Yy=function(){};function Xy(t){for(var e=[],n=1;n<arguments.length;n++)e[n-1]=arguments[n];for(var r=0,i=e;r<i.length;r++){var o=i[r];t=o._apply(t)}return t}var Zy=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).zc=e,i.Hc=n,i.Jc=r,i.type="where",i}return Object(Tu.c)(e,t),e.prototype._apply=function(t){var e=_y(t.firestore),n=function(t,e,n,r,i,o,s){var a;if(i.isKeyField()){if("array-contains"===o||"array-contains-any"===o)throw new Wu($u.INVALID_ARGUMENT,"Invalid Query. You can't perform '"+o+"' queries on FieldPath.documentId().");if("in"===o||"not-in"===o){sv(s,o);for(var u=[],c=0,l=s;c<l.length;c++)u.push(ov(r,t,l[c]));a={arrayValue:{values:u}}}else a=ov(r,t,s)}else"in"!==o&&"not-in"!==o&&"array-contains-any"!==o||sv(s,o),a=ky(n,"where",s,"in"===o||"not-in"===o);var h=Nc.create(i,o,a);return function(t,e){if(e.g()){var n=Zc(t);if(null!==n&&!n.isEqual(e.field))throw new Wu($u.INVALID_ARGUMENT,"Invalid query. All where filters with an inequality (<, <=, !=, not-in, >, or >=) must be on the same field. But you have inequality filters on '"+n.toString()+"' and '"+e.field.toString()+"'");var r=Xc(t);null!==r&&av(0,e.field,r)}var i=function(t,e){for(var n=0,r=t.filters;n<r.length;n++){var i=r[n];if(e.indexOf(i.op)>=0)return i.op}return null}(t,function(t){switch(t){case"!=":return["!=","not-in"];case"array-contains":return["array-contains","array-contains-any","not-in"];case"in":return["array-contains-any","in","not-in"];case"array-contains-any":return["array-contains","array-contains-any","in","not-in"];case"not-in":return["array-contains","array-contains-any","in","not-in","!="];default:return[]}}(e.op));if(null!==i)throw new Wu($u.INVALID_ARGUMENT,i===e.op?"Invalid query. You cannot use more than one '"+e.op.toString()+"' filter.":"Invalid query. You cannot use '"+e.op.toString()+"' filters with '"+i.toString()+"' filters.")}(t,h),h}(t._query,0,e,t.firestore._databaseId,this.zc,this.Hc,this.Jc);return new Xm(t.firestore,t._converter,function(t,e){var n=t.filters.concat([e]);return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),n,t.limit,t.limitType,t.startAt,t.endAt)}(t._query,n))},e}(Yy),tv=function(t){function e(e,n){var r=this;return(r=t.call(this)||this).zc=e,r.Yc=n,r.type="orderBy",r}return Object(Tu.c)(e,t),e.prototype._apply=function(t){var e=function(t,e,n){if(null!==t.startAt)throw new Wu($u.INVALID_ARGUMENT,"Invalid query. You must not call startAt() or startAfter() before calling orderBy().");if(null!==t.endAt)throw new Wu($u.INVALID_ARGUMENT,"Invalid query. You must not call endAt() or endBefore() before calling orderBy().");var r=new Hc(e,n);return function(t,e){if(null===Xc(t)){var n=Zc(t);null!==n&&av(0,n,e.field)}}(t,r),r}(t._query,this.zc,this.Yc);return new Xm(t.firestore,t._converter,function(t,e){var n=t.explicitOrderBy.concat([e]);return new Jc(t.path,t.collectionGroup,n,t.filters.slice(),t.limit,t.limitType,t.startAt,t.endAt)}(t._query,e))},e}(Yy),ev=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.Xc=n,i.Zc=r,i}return Object(Tu.c)(e,t),e.prototype._apply=function(t){return new Xm(t.firestore,t._converter,rl(t._query,this.Xc,this.Zc))},e}(Yy),nv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Tu.c)(e,t),e.prototype._apply=function(t){var e=iv(t,this.type,this.ta,this.ea);return new Xm(t.firestore,t._converter,function(t,e){return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,e,t.endAt)}(t._query,e))},e}(Yy),rv=function(t){function e(e,n,r){var i=this;return(i=t.call(this)||this).type=e,i.ta=n,i.ea=r,i}return Object(Tu.c)(e,t),e.prototype._apply=function(t){var e=iv(t,this.type,this.ta,this.ea);return new Xm(t.firestore,t._converter,function(t,e){return new Jc(t.path,t.collectionGroup,t.explicitOrderBy.slice(),t.filters.slice(),t.limit,t.limitType,t.startAt,e)}(t._query,e))},e}(Yy);function iv(t,e,n,r){if(n[0]instanceof Qm&&(n[0]=n[0]._delegate),n[0]instanceof qy)return function(t,e,n,r,i){if(!r)throw new Wu($u.NOT_FOUND,"Can't use a DocumentSnapshot that doesn't exist for "+n+"().");for(var o=[],s=0,a=el(t);s<a.length;s++){var u=a[s];if(u.field.isKeyField())o.push(yc(e,r.key));else{var c=r.field(u.field);if(ac(c))throw new Wu($u.INVALID_ARGUMENT,'Invalid query. You are trying to start or end a query using a document for which the field "'+u.field+'" is an uncommitted server timestamp. (Since the value of this field is unknown, you cannot start/end a query with it.)');if(null===c){var l=u.field.canonicalString();throw new Wu($u.INVALID_ARGUMENT,"Invalid query. You are trying to start or end a query using a document for which the field '"+l+"' (used as the orderBy) does not exist.")}o.push(c)}}return new qc(o,i)}(t._query,t.firestore._databaseId,e,n[0]._document,r);var i=_y(t.firestore);return function(t,e,n,r,i,o){var s=t.explicitOrderBy;if(i.length>s.length)throw new Wu($u.INVALID_ARGUMENT,"Too many arguments provided to "+r+"(). The number of arguments must be less than or equal to the number of orderBy() clauses");for(var a=[],u=0;u<i.length;u++){var c=i[u];if(s[u].field.isKeyField()){if("string"!=typeof c)throw new Wu($u.INVALID_ARGUMENT,"Invalid query. Expected a string for document ID in "+r+"(), but got a "+typeof c);if(!tl(t)&&-1!==c.indexOf("/"))throw new Wu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection and ordering by FieldPath.documentId(), the value passed to "+r+"() must be a plain document ID, but '"+c+"' contains a slash.");var l=t.path.child(Yu.fromString(c));if(!tc.isDocumentKey(l))throw new Wu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection group and ordering by FieldPath.documentId(), the value passed to "+r+"() must result in a valid document path, but '"+l+"' is not because it contains an odd number of segments.");var h=new tc(l);a.push(yc(e,h))}else{var f=ky(n,r,c);a.push(f)}}return new qc(a,o)}(t._query,t.firestore._databaseId,i,e,n,r)}function ov(t,e,n){if(n instanceof Qm&&(n=n._delegate),"string"==typeof n){if(""===n)throw new Wu($u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid document ID, but it was an empty string.");if(!tl(e)&&-1!==n.indexOf("/"))throw new Wu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection by FieldPath.documentId(), you must provide a plain document ID, but '"+n+"' contains a '/' character.");var r=e.path.child(Yu.fromString(n));if(!tc.isDocumentKey(r))throw new Wu($u.INVALID_ARGUMENT,"Invalid query. When querying a collection group by FieldPath.documentId(), the value provided must result in a valid document path, but '"+r+"' is not because it has an odd number of segments ("+r.length+").");return yc(t,new tc(r))}if(n instanceof Ym)return yc(t,n._key);throw new Wu($u.INVALID_ARGUMENT,"Invalid query. When querying with FieldPath.documentId(), you must provide a valid string or a DocumentReference, but it was: "+Gm(n)+".")}function sv(t,e){if(!Array.isArray(t)||0===t.length)throw new Wu($u.INVALID_ARGUMENT,"Invalid Query. A non-empty array is required for '"+e.toString()+"' filters.");if(t.length>10)throw new Wu($u.INVALID_ARGUMENT,"Invalid Query. '"+e.toString()+"' filters support a maximum of 10 elements in the value array.")}function av(t,e,n){if(!n.isEqual(e))throw new Wu($u.INVALID_ARGUMENT,"Invalid query. You have a where filter with an inequality (<, <=, !=, not-in, >, or >=) on field '"+e.toString()+"' and so you must also use '"+e.toString()+"' as your first argument to orderBy(), but your first orderBy() is on field '"+n.toString()+"' instead.")}var uv=function(){function t(){}return t.prototype.convertValue=function(t,e){switch(void 0===e&&(e="none"),lc(t)){case 0:return null;case 1:return t.booleanValue;case 2:return ic(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,e);case 5:return t.stringValue;case 6:return this.convertBytes(oc(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,e);case 10:return this.convertObject(t.mapValue,e);default:throw Ru()}},t.prototype.convertObject=function(t,e){var n=this,r={};return Hu(t.fields||{},function(t,i){r[t]=n.convertValue(i,e)}),r},t.prototype.convertGeoPoint=function(t){return new py(ic(t.latitude),ic(t.longitude))},t.prototype.convertArray=function(t,e){var n=this;return(t.values||[]).map(function(t){return n.convertValue(t,e)})},t.prototype.convertServerTimestamp=function(t,e){switch(e){case"previous":var n=uc(t);return null==n?null:this.convertValue(n,e);case"estimate":return this.convertTimestamp(cc(t));default:return null}},t.prototype.convertTimestamp=function(t){var e=rc(t);return new sc(e.seconds,e.nanos)},t.prototype.convertDocumentKey=function(t,e){var n=Yu.fromString(t);Pu(nf(n));var r=new Dm(n.get(1),n.get(3)),i=new tc(n.popFirst(5));return r.isEqual(e)||ku("Document "+i+" contains a document reference within a different database ("+r.projectId+"/"+r.database+") which is not supported. It will be treated as a reference in the current database ("+e.projectId+"/"+e.database+") instead."),i},t}();function cv(t,e,n){return t?n&&(n.merge||n.mergeFields)?t.toFirestore(e,n):t.toFirestore(e):e}var lv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Tu.c)(e,t),e.prototype.convertBytes=function(t){return new fy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ym(this.firestore,null,e)},e}(uv),hv=function(){function t(t,e){this._firestore=t,this._commitHandler=e,this._mutations=[],this._committed=!1,this._dataReader=_y(t)}return t.prototype.set=function(t,e,n){this._verifyNotCommitted();var r=fv(t,this._firestore),i=cv(r._converter,e,n),o=Iy(this._dataReader,"WriteBatch.set",r._key,i,null!==r._converter,n);return this._mutations.push(o.toMutation(r._key,Nl.none())),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];this._verifyNotCommitted();var o,s=fv(t,this._firestore);return e instanceof Qm&&(e=e._delegate),o="string"==typeof e||e instanceof hy?jy(this._dataReader,"WriteBatch.update",s._key,e,n,r):Ay(this._dataReader,"WriteBatch.update",s._key,e),this._mutations.push(o.toMutation(s._key,Nl.exists(!0))),this},t.prototype.delete=function(t){this._verifyNotCommitted();var e=fv(t,this._firestore);return this._mutations=this._mutations.concat(new $l(e._key,Nl.none())),this},t.prototype.commit=function(){return this._verifyNotCommitted(),this._committed=!0,this._mutations.length>0?this._commitHandler(this._mutations):Promise.resolve()},t.prototype._verifyNotCommitted=function(){if(this._committed)throw new Wu($u.FAILED_PRECONDITION,"A write batch can no longer be used after commit() has been called.")},t}();function fv(t,e){if(t instanceof Qm&&(t=t._delegate),t.firestore!==e)throw new Wu($u.INVALID_ARGUMENT,"Provided document reference is from a different Firestore instance.");return t}var dv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Tu.c)(e,t),e.prototype.convertBytes=function(t){return new fy(t)},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return new Ym(this.firestore,null,e)},e}(uv);function pv(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];t=Km(t,Ym);var o=Km(t.firestore,sy),s=_y(o);return e instanceof Qm&&(e=e._delegate),mv(o,[("string"==typeof e||e instanceof hy?jy(s,"updateDoc",t._key,e,n,r):Ay(s,"updateDoc",t._key,e)).toMutation(t._key,Nl.exists(!0))])}function gv(t){for(var e,n,r,i=[],o=1;o<arguments.length;o++)i[o-1]=arguments[o];t instanceof Qm&&(t=t._delegate);var s={includeMetadataChanges:!1},a=0;"object"!=typeof i[a]||oy(i[a])||(s=i[a],a++);var u,c,l,h={includeMetadataChanges:s.includeMetadataChanges};if(oy(i[a])){var f=i[a];i[a]=null===(e=f.next)||void 0===e?void 0:e.bind(f),i[a+1]=null===(n=f.error)||void 0===n?void 0:n.bind(f),i[a+2]=null===(r=f.complete)||void 0===r?void 0:r.bind(f)}if(t instanceof Ym)c=Km(t.firestore,sy),l=Wc(t._key.path),u={next:function(e){i[a]&&i[a](yv(c,t,e))},error:i[a+1],complete:i[a+2]};else{var d=Km(t,Xm);c=Km(d.firestore,sy),l=d._query;var p=new dv(c);u={next:function(t){i[a]&&i[a](new Jy(c,p,d,t))},error:i[a+1],complete:i[a+2]},Qy(t._query)}return function(t,e,n,r){var i=this,o=new ym(r),s=new Cg(e,o,n);return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(i,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return e=Ig,[4,Am(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})}),function(){o.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(i,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return e=Eg,[4,Am(t)];case 1:return[2,e.apply(void 0,[n.sent(),s])]}})})})}}(ay(c),l,h,u)}function mv(t,e){return function(t,e){var n=this,r=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(n,void 0,void 0,function(){var n;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return n=Fg,[4,xm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(ay(t),e)}function yv(t,e,n){var r=n.docs.get(e._key),i=new dv(t);return new Gy(t,i,e._key,r,new zy(n.hasPendingWrites,n.fromCache),e._converter)}var vv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this)._firestore=e,r}return Object(Tu.c)(e,t),e.prototype.get=function(e){var n=this,r=fv(e,this._firestore),i=new dv(this._firestore);return t.prototype.get.call(this,e).then(function(t){return new Gy(n._firestore,i,r._key,t._document,new zy(!1,!1),r._converter)})},e}(function(){function t(t,e){this._firestore=t,this._transaction=e,this._dataReader=_y(t)}return t.prototype.get=function(t){var e=this,n=fv(t,this._firestore),r=new lv(this._firestore);return this._transaction.lookup([n._key]).then(function(t){if(!t||1!==t.length)return Ru();var i=t[0];if(i instanceof Oc)return new qy(e._firestore,r,n._key,null,n._converter);if(i instanceof Sc)return new qy(e._firestore,r,i.key,i,n._converter);throw Ru()})},t.prototype.set=function(t,e,n){var r=fv(t,this._firestore),i=cv(r._converter,e,n),o=Iy(this._dataReader,"Transaction.set",r._key,i,null!==r._converter,n);return this._transaction.set(r._key,o),this},t.prototype.update=function(t,e,n){for(var r=[],i=3;i<arguments.length;i++)r[i-3]=arguments[i];var o,s=fv(t,this._firestore);return e instanceof Qm&&(e=e._delegate),o="string"==typeof e||e instanceof hy?jy(this._dataReader,"Transaction.update",s._key,e,n,r):Ay(this._dataReader,"Transaction.update",s._key,e),this._transaction.update(s._key,o),this},t.prototype.delete=function(t){var e=fv(t,this._firestore);return this._transaction.delete(e._key),this},t}());function bv(){if("undefined"==typeof Uint8Array)throw new Wu($u.UNIMPLEMENTED,"Uint8Arrays are not available in this environment.")}function wv(){if("undefined"==typeof atob)throw new Wu($u.UNIMPLEMENTED,"Blobs are unavailable in Firestore in this environment.")}var _v=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.fromBase64String=function(t){return wv(),new e(fy.fromBase64String(t))},e.fromUint8Array=function(t){return bv(),new e(fy.fromUint8Array(t))},e.prototype.toBase64=function(){return wv(),this._delegate.toBase64()},e.prototype.toUint8Array=function(){return bv(),this._delegate.toUint8Array()},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e.prototype.toString=function(){return"Blob(base64: "+this.toBase64()+")"},e}(Qm),Iv=function(){function t(){}return t.prototype.enableIndexedDbPersistence=function(t,e){return function(t,e){ly(t=Km(t,sy));var n=ay(t),r=t._freezeSettings(),i=new mm;return cy(n,i,new pm(i,r.cacheSizeBytes,null==e?void 0:e.forceOwnership))}(t._delegate,{forceOwnership:e})},t.prototype.enableMultiTabIndexedDbPersistence=function(t){return function(t){ly(t=Km(t,sy));var e=ay(t),n=t._freezeSettings(),r=new mm;return cy(e,r,new gm(r,n.cacheSizeBytes))}(t._delegate)},t.prototype.clearIndexedDbPersistence=function(t){return function(t){var e=this;if(t._initialized&&!t._terminated)throw new Wu($u.FAILED_PRECONDITION,"Persistence can only be cleared before a Firestore instance is initialized or after it is terminated.");var n=new Cf;return t._queue.enqueueAndForgetEvenWhileRestricted(function(){return Object(Tu.b)(e,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return r.trys.push([0,2,,3]),[4,function(t){return Object(Tu.b)(this,void 0,void 0,function(){return Object(Tu.d)(this,function(e){switch(e.label){case 0:return jf.At()?[4,jf.delete(t+"main")]:[2,Promise.resolve()];case 1:return e.sent(),[2]}})})}(qd(t._databaseId,t._persistenceKey))];case 1:return r.sent(),n.resolve(),[3,3];case 2:return e=r.sent(),n.reject(e),[3,3];case 3:return[2]}})})}),n.promise}(t._delegate)},t}(),Ev=function(t){function e(e,n,r){var i=this;return(i=t.call(this,n)||this).na=r,i.INTERNAL={delete:function(){return i.terminate()}},e instanceof Dm||(i.sa=e),i}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"_databaseId",{get:function(){return this._delegate._databaseId},enumerable:!1,configurable:!0}),e.prototype.settings=function(t){t.merge&&delete(t=Object.assign(Object.assign({},this._delegate._getSettings()),t)).merge,this._delegate._setSettings(t)},e.prototype.useEmulator=function(t,e){!function(t,e,n){var r=(t=Km(t,Wm))._getSettings();"firestore.googleapis.com"!==r.host&&r.host!==e&&Nu("Host has been set in both settings() and useEmulator(), emulator host will be used"),t._setSettings(Object.assign(Object.assign({},r),{host:e+":"+n,ssl:!1}))}(this._delegate,t,e)},e.prototype.enableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Tu.b)(e,void 0,void 0,function(){var e,n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return[4,Om(t)];case 1:return e=r.sent(),[4,Cm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!0),function(t){var e=Lu(t);return e.Qr.delete(0),zp(e)}(n))]}})})})}(ay(Km(this._delegate,sy)))},e.prototype.disableNetwork=function(){return function(t){var e=this;return t.asyncQueue.enqueue(function(){return Object(Tu.b)(e,void 0,void 0,function(){var e,n;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return[4,Om(t)];case 1:return e=r.sent(),[4,Cm(t)];case 2:return n=r.sent(),[2,(e.setNetworkEnabled(!1),function(t){return Object(Tu.b)(this,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return(e=Lu(t)).Qr.add(0),[4,Gp(e)];case 1:return n.sent(),e.jr.set("Offline"),[2]}})})}(n))]}})})})}(ay(Km(this._delegate,sy)))},e.prototype.enablePersistence=function(t){var e=!1,n=!1;return t&&Bm("synchronizeTabs",e=!!t.synchronizeTabs,"experimentalForceOwningTab",n=!!t.experimentalForceOwningTab),e?this.na.enableMultiTabIndexedDbPersistence(this):this.na.enableIndexedDbPersistence(this,n)},e.prototype.clearPersistence=function(){return this.na.clearIndexedDbPersistence(this)},e.prototype.terminate=function(){return this.sa&&(this.sa._removeServiceInstance("firestore"),this.sa._removeServiceInstance("firestore-exp")),this._delegate._delete()},e.prototype.waitForPendingWrites=function(){return function(t){var e=this,n=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(e,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(r){switch(r.label){case 0:return e=Gg,[4,xm(t)];case 1:return[2,e.apply(void 0,[r.sent(),n])]}})})}),n.promise}(ay(Km(this._delegate,sy)))},e.prototype.onSnapshotsInSync=function(t){return function(t,e){return function(t,e){var n=this,r=new ym(e);return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(n,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lu(t).Zr.add(e),e.next()},[4,Am(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})}),function(){r.Xo(),t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(n,void 0,void 0,function(){var e;return Object(Tu.d)(this,function(n){switch(n.label){case 0:return e=function(t,e){Lu(t).Zr.delete(e)},[4,Am(t)];case 1:return[2,e.apply(void 0,[n.sent(),r])]}})})})}}(ay(t=Km(t,sy)),oy(e)?e:{next:e})}(this._delegate,t)},Object.defineProperty(e.prototype,"app",{get:function(){if(!this.sa)throw new Wu($u.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this.sa},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Mv(this,ty(this._delegate,t))}catch(t){throw Av(t,"collection()","Firestore.collection()")}},e.prototype.doc=function(t){try{return new xv(this,ey(this._delegate,t))}catch(t){throw Av(t,"doc()","Firestore.doc()")}},e.prototype.collectionGroup=function(t){try{return new Rv(this,function(t,e){if(t=Km(t,Wm),Vm("collectionGroup","collection id",e),e.indexOf("/")>=0)throw new Wu($u.INVALID_ARGUMENT,"Invalid collection ID '"+e+"' passed to function collectionGroup(). Collection IDs must not contain '/'.");return new Xm(t,null,function(t){return new Jc(Yu.emptyPath(),t)}(e))}(this._delegate,t))}catch(t){throw Av(t,"collectionGroup()","Firestore.collectionGroup()")}},e.prototype.runTransaction=function(t){var e=this;return function(t,e){return function(t,e){var n=this,r=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(n,void 0,void 0,function(){var n;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return[4,function(t){return Sm(t).then(function(t){return t.datastore})}(t)];case 1:return n=i.sent(),new bm(t.asyncQueue,n,e,r).run(),[2]}})})}),r.promise}(ay(t),function(n){return e(new vv(t,n))})}(this._delegate,function(n){return t(new Ov(e,n))})},e.prototype.batch=function(){var t=this;return ay(this._delegate),new Tv(new hv(this._delegate,function(e){return mv(t._delegate,e)}))},e.prototype.loadBundle=function(t){throw new Wu($u.FAILED_PRECONDITION,'"loadBundle()" does not exist, have you imported "firebase/firestore/bundle"?')},e.prototype.namedQuery=function(t){throw new Wu($u.FAILED_PRECONDITION,'"namedQuery()" does not exist, have you imported "firebase/firestore/bundle"?')},e}(Qm),Sv=function(t){function e(e){var n=this;return(n=t.call(this)||this).firestore=e,n}return Object(Tu.c)(e,t),e.prototype.convertBytes=function(t){return new _v(new fy(t))},e.prototype.convertReference=function(t){var e=this.convertDocumentKey(t,this.firestore._databaseId);return xv.ia(e,this.firestore,null)},e}(uv),Ov=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r._userDataWriter=new Sv(e),r}return Object(Tu.c)(e,t),e.prototype.get=function(t){var e=this,n=Uv(t);return this._delegate.get(n).then(function(t){return new Nv(e._firestore,new Gy(e._firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,n._converter))})},e.prototype.set=function(t,e,n){var r=Uv(t);return n?(qm("Transaction.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Uv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Tu.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Uv(t);return this._delegate.delete(e),this},e}(Qm),Tv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.set=function(t,e,n){var r=Uv(t);return n?(qm("WriteBatch.set",n),this._delegate.set(r,e,n)):this._delegate.set(r,e),this},e.prototype.update=function(t,e,n){for(var r,i=[],o=3;o<arguments.length;o++)i[o-3]=arguments[o];var s=Uv(t);return 2===arguments.length?this._delegate.update(s,e):(r=this._delegate).update.apply(r,Object(Tu.f)([s,e,n],i)),this},e.prototype.delete=function(t){var e=Uv(t);return this._delegate.delete(e),this},e.prototype.commit=function(){return this._delegate.commit()},e}(Qm),Cv=function(t){function e(e,n,r){var i=this;return(i=t.call(this,r)||this)._firestore=e,i._userDataWriter=n,i}return Object(Tu.c)(e,t),e.prototype.fromFirestore=function(t,e){var n=new Ky(this._firestore._delegate,this._userDataWriter,t._key,t._document,t.metadata,null);return this._delegate.fromFirestore(new Dv(this._firestore,n),null!=e?e:{})},e.prototype.toFirestore=function(t,e){return e?this._delegate.toFirestore(t,e):this._delegate.toFirestore(t)},e.ra=function(t,n){var r=e.oa,i=r.get(t);i||(i=new WeakMap,r.set(t,i));var o=i.get(n);return o||(o=new e(t,new Sv(t),n),i.set(n,o)),o},e}(Qm);Cv.oa=new WeakMap;var xv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Sv(e),r}return Object(Tu.c)(e,t),e.ca=function(t,n,r){if(t.length%2!=0)throw new Wu($u.INVALID_ARGUMENT,"Invalid document reference. Document references must have an even number of segments, but "+t.canonicalString()+" has "+t.length);return new e(n,new Ym(n._delegate,r,new tc(t)))},e.ia=function(t,n,r){return new e(n,new Ym(n._delegate,r,t))},Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){return new Mv(this.firestore,this._delegate.parent)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),e.prototype.collection=function(t){try{return new Mv(this.firestore,ty(this._delegate,t))}catch(t){throw Av(t,"collection()","DocumentReference.collection()")}},e.prototype.isEqual=function(t){return t instanceof Qm&&(t=t._delegate),t instanceof Ym&&ny(this._delegate,t)},e.prototype.set=function(t,e){e=qm("DocumentReference.set",e);try{return function(t,e,n){t=Km(t,Ym);var r=Km(t.firestore,sy),i=cv(t._converter,e,n);return mv(r,[Iy(_y(r),"setDoc",t._key,i,null!==t._converter,n).toMutation(t._key,Nl.none())])}(this._delegate,t,e)}catch(t){throw Av(t,"setDoc()","DocumentReference.set()")}},e.prototype.update=function(t,e){for(var n=[],r=2;r<arguments.length;r++)n[r-2]=arguments[r];try{return 1===arguments.length?pv(this._delegate,t):pv.apply(void 0,Object(Tu.f)([this._delegate,t,e],n))}catch(t){throw Av(t,"updateDoc()","DocumentReference.update()")}},e.prototype.delete=function(){return mv(Km((t=this._delegate).firestore,sy),[new $l(t._key,Nl.none())]);var t},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jv(e),i=kv(e,function(e){return new Nv(t.firestore,new Gy(t.firestore._delegate,t._userDataWriter,e._key,e._document,e.metadata,t._delegate._converter))});return gv(this._delegate,r,i)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Km(t,Ym);var e=Km(t.firestore,sy),n=ay(e),r=new dv(e);return function(t,e){var n=this,r=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(n,void 0,void 0,function(){var n;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i;return Object(Tu.d)(this,function(o){switch(o.label){case 0:return o.trys.push([0,2,,3]),[4,function(t,e){var n=Lu(t);return n.persistence.runTransaction("read document","readonly",function(t){return n.Kn.In(t,e)})}(t,e)];case 1:return(i=o.sent())instanceof Sc?n.resolve(i):i instanceof Oc?n.resolve(null):n.reject(new Wu($u.UNAVAILABLE,"Failed to get document from cache. (However, this document may exist on the server. Run again without setting 'source' in the GetOptions to attempt to retrieve the document from the server.)")),[3,3];case 2:return r=o.sent(),i=mg(r,"Failed to get document '"+e+" from cache"),n.reject(i),[3,3];case 3:return[2]}})})},[4,Tm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._key).then(function(n){return new Gy(e,r,t._key,n,new zy(n instanceof Sc&&n.hasLocalMutations,!0),t._converter)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Km(t,Ym);var e=Km(t.firestore,sy);return jm(ay(e),t._key,{source:"server"}).then(function(n){return yv(e,t,n)})}(this._delegate):function(t){t=Km(t,Ym);var e=Km(t.firestore,sy);return jm(ay(e),t._key).then(function(n){return yv(e,t,n)})}(this._delegate)).then(function(t){return new Nv(e.firestore,new Gy(e.firestore._delegate,e._userDataWriter,t._key,t._document,t.metadata,e._delegate._converter))})},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Cv.ra(this.firestore,t):null))},e}(Qm);function Av(t,e,n){return t.message=t.message.replace(e,n),t}function jv(t){for(var e=0,n=t;e<n.length;e++){var r=n[e];if("object"==typeof r&&!oy(r))return r}return{}}function kv(t,e){var n,r,i;return{next:function(t){i.next&&i.next(e(t))},error:null===(n=(i=oy(t[0])?t[0]:oy(t[1])?t[1]:"function"==typeof t[0]?{next:t[0],error:t[1],complete:t[2]}:{next:t[1],error:t[2],complete:t[3]}).error)||void 0===n?void 0:n.bind(i),complete:null===(r=i.complete)||void 0===r?void 0:r.bind(i)}}var Nv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"ref",{get:function(){return new xv(this._firestore,this._delegate.ref)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"exists",{get:function(){return this._delegate.exists()},enumerable:!1,configurable:!0}),e.prototype.data=function(t){return this._delegate.data(t)},e.prototype.get=function(t,e){return this._delegate.get(t,e)},e.prototype.isEqual=function(t){return Wy(this._delegate,t._delegate)},e}(Qm),Dv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.prototype.data=function(t){return this._delegate.data(t)},e}(Nv),Rv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this).firestore=e,r._userDataWriter=new Sv(e),r}return Object(Tu.c)(e,t),e.prototype.where=function(t,n,r){try{return new e(this.firestore,Xy(this._delegate,function(t,e,n){var r=e,i=Hy("where",t);return new Zy(i,r,n)}(t,n,r)))}catch(t){throw Av(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.orderBy=function(t,n){try{return new e(this.firestore,Xy(this._delegate,function(t,e){void 0===e&&(e="asc");var n=e,r=Hy("orderBy",t);return new tv(r,n)}(t,n)))}catch(t){throw Av(t,/(orderBy|where)\(\)/,"Query.$1()")}},e.prototype.limit=function(t){try{return new e(this.firestore,Xy(this._delegate,function(t){return Jm("limit",t),new ev("limit",t,"F")}(t)))}catch(t){throw Av(t,"limit()","Query.limit()")}},e.prototype.limitToLast=function(t){try{return new e(this.firestore,Xy(this._delegate,function(t){return Jm("limitToLast",t),new ev("limitToLast",t,"L")}(t)))}catch(t){throw Av(t,"limitToLast()","Query.limitToLast()")}},e.prototype.startAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nv("startAt",t,!0)}).apply(void 0,t)))}catch(t){throw Av(t,"startAt()","Query.startAt()")}},e.prototype.startAfter=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new nv("startAfter",t,!1)}).apply(void 0,t)))}catch(t){throw Av(t,"startAfter()","Query.startAfter()")}},e.prototype.endBefore=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rv("endBefore",t,!0)}).apply(void 0,t)))}catch(t){throw Av(t,"endBefore()","Query.endBefore()")}},e.prototype.endAt=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];try{return new e(this.firestore,Xy(this._delegate,(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new rv("endAt",t,!1)}).apply(void 0,t)))}catch(t){throw Av(t,"endAt()","Query.endAt()")}},e.prototype.isEqual=function(t){return ry(this._delegate,t._delegate)},e.prototype.get=function(t){var e=this;return("cache"===(null==t?void 0:t.source)?function(t){t=Km(t,Xm);var e=Km(t.firestore,sy),n=ay(e),r=new dv(e);return function(t,e){var n=this,r=new Cf;return t.asyncQueue.enqueueAndForget(function(){return Object(Tu.b)(n,void 0,void 0,function(){var n;return Object(Tu.d)(this,function(i){switch(i.label){case 0:return n=function(t,e,n){return Object(Tu.b)(this,void 0,void 0,function(){var r,i,o,s,a;return Object(Tu.d)(this,function(u){switch(u.label){case 0:return u.trys.push([0,2,,3]),[4,np(t,e,!0)];case 1:return a=u.sent(),r=new Ng(e,a.jn),i=r.Io(a.documents),o=r.applyChanges(i,!1),n.resolve(o.snapshot),[3,3];case 2:return s=u.sent(),a=mg(s,"Failed to execute query '"+e+" against cache"),n.reject(a),[3,3];case 3:return[2]}})})},[4,Tm(t)];case 1:return[2,n.apply(void 0,[i.sent(),e,r])]}})})}),r.promise}(n,t._query).then(function(n){return new Jy(e,r,t,n)})}(this._delegate):"server"===(null==t?void 0:t.source)?function(t){t=Km(t,Xm);var e=Km(t.firestore,sy),n=ay(e),r=new dv(e);return km(n,t._query,{source:"server"}).then(function(n){return new Jy(e,r,t,n)})}(this._delegate):function(t){t=Km(t,Xm);var e=Km(t.firestore,sy),n=ay(e),r=new dv(e);return Qy(t._query),km(n,t._query).then(function(n){return new Jy(e,r,t,n)})}(this._delegate)).then(function(t){return new Lv(e.firestore,new Jy(e.firestore._delegate,e._userDataWriter,e._delegate,t._snapshot))})},e.prototype.onSnapshot=function(){for(var t=this,e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];var r=jv(e),i=kv(e,function(e){return new Lv(t.firestore,new Jy(t.firestore._delegate,t._userDataWriter,t._delegate,e._snapshot))});return gv(this._delegate,r,i)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Cv.ra(this.firestore,t):null))},e}(Qm),Pv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"type",{get:function(){return this._delegate.type},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"doc",{get:function(){return new Dv(this._firestore,this._delegate.doc)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"oldIndex",{get:function(){return this._delegate.oldIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"newIndex",{get:function(){return this._delegate.newIndex},enumerable:!1,configurable:!0}),e}(Qm),Lv=function(t){function e(e,n){var r=this;return(r=t.call(this,n)||this)._firestore=e,r}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"query",{get:function(){return new Rv(this._firestore,this._delegate.query)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"metadata",{get:function(){return this._delegate.metadata},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"size",{get:function(){return this._delegate.size},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"empty",{get:function(){return this._delegate.empty},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"docs",{get:function(){var t=this;return this._delegate.docs.map(function(e){return new Dv(t._firestore,e)})},enumerable:!1,configurable:!0}),e.prototype.docChanges=function(t){var e=this;return this._delegate.docChanges(t).map(function(t){return new Pv(e._firestore,t)})},e.prototype.forEach=function(t,e){var n=this;this._delegate.forEach(function(r){t.call(e,new Dv(n._firestore,r))})},e.prototype.isEqual=function(t){return Wy(this._delegate,t._delegate)},e}(Qm),Mv=function(t){function e(e,n){var r=this;return(r=t.call(this,e,n)||this).firestore=e,r._delegate=n,r}return Object(Tu.c)(e,t),Object.defineProperty(e.prototype,"id",{get:function(){return this._delegate.id},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"path",{get:function(){return this._delegate.path},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"parent",{get:function(){var t=this._delegate.parent;return t?new xv(this.firestore,t):null},enumerable:!1,configurable:!0}),e.prototype.doc=function(t){try{return new xv(this.firestore,void 0===t?ey(this._delegate):ey(this._delegate,t))}catch(t){throw Av(t,"doc()","CollectionReference.doc()")}},e.prototype.add=function(t){var e=this;return function(t,e){var n=Km(t.firestore,sy),r=ey(t),i=cv(t._converter,e);return mv(n,[Iy(_y(t.firestore),"addDoc",r._key,i,null!==t._converter,{}).toMutation(r._key,Nl.exists(!1))]).then(function(){return r})}(this._delegate,t).then(function(t){return new xv(e.firestore,t)})},e.prototype.isEqual=function(t){return ny(this._delegate,t._delegate)},e.prototype.withConverter=function(t){return new e(this.firestore,this._delegate.withConverter(t?Cv.ra(this.firestore,t):null))},e}(Rv);function Uv(t){return t instanceof Qm&&(t=t._delegate),Km(t,Ym)}var Fv,Vv=function(t){function e(){for(var e=[],n=0;n<arguments.length;n++)e[n]=arguments[n];return t.call(this,new(hy.bind.apply(hy,Object(Tu.f)([void 0],e))))||this}return Object(Tu.c)(e,t),e.documentId=function(){return new e(Zu.keyField().canonicalString())},e.prototype.isEqual=function(t){return t instanceof Qm&&(t=t._delegate),t instanceof hy&&this._delegate._internalPath.isEqual(t._internalPath)},e}(Qm),qv=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return Object(Tu.c)(e,t),e.serverTimestamp=function(){var t=new Oy("serverTimestamp");return t._methodName="FieldValue.serverTimestamp",new e(t)},e.delete=function(){var t=new Ey("deleteField");return t._methodName="FieldValue.delete",new e(t)},e.arrayUnion=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Ty("arrayUnion",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayUnion",new e(r)},e.arrayRemove=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];var r=(function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];return new Cy("arrayRemove",t)}).apply(void 0,t);return r._methodName="FieldValue.arrayRemove",new e(r)},e.increment=function(t){var n=function(t){return new xy("increment",t)}(t);return n._methodName="FieldValue.increment",new e(n)},e.prototype.isEqual=function(t){return this._delegate.isEqual(t._delegate)},e}(Qm),Bv=n("/6Yf"),Hv={Firestore:Ev,GeoPoint:py,Timestamp:sc,Blob:_v,Transaction:Ov,WriteBatch:Tv,DocumentReference:xv,DocumentSnapshot:Nv,Query:Rv,QueryDocumentSnapshot:Dv,QuerySnapshot:Lv,CollectionReference:Mv,FieldPath:Vv,FieldValue:qv,setLogLevel:function(t){xu.setLogLevel(t)},CACHE_SIZE_UNLIMITED:-1};(function(t,e){t.INTERNAL.registerComponent(new Bv.a("firestore",function(t){return function(t,e){return new Ev(t,new sy(t,e),new Iv)}(t.getProvider("app").getImmediate(),t.getProvider("auth-internal"))},"PUBLIC").setServiceProps(Object.assign({},Hv)))})(Fv=_i.a),Fv.registerVersion("@firebase/firestore","2.2.1");var zv=n("VRyK"),Gv=n("qgXg"),Kv=n("Ylt2");class Jv extends dt.a{constructor(t=Number.POSITIVE_INFINITY,e=Number.POSITIVE_INFINITY,n){super(),this.scheduler=n,this._events=[],this._infiniteTimeWindow=!1,this._bufferSize=t<1?1:t,this._windowTime=e<1?1:e,e===Number.POSITIVE_INFINITY?(this._infiniteTimeWindow=!0,this.next=this.nextInfiniteTimeWindow):this.next=this.nextTimeWindow}nextInfiniteTimeWindow(t){if(!this.isStopped){const e=this._events;e.push(t),e.length>this._bufferSize&&e.shift()}super.next(t)}nextTimeWindow(t){this.isStopped||(this._events.push(new $v(this._getNow(),t)),this._trimBufferThenGetEvents()),super.next(t)}_subscribe(t){const e=this._infiniteTimeWindow,n=e?this._events:this._trimBufferThenGetEvents(),r=this.scheduler,i=n.length;let o;if(this.closed)throw new pt.a;if(this.isStopped||this.hasError?o=ge.a.EMPTY:(this.observers.push(t),o=new Kv.a(this,t)),r&&t.add(t=new vi.a(t,r)),e)for(let s=0;s<i&&!t.closed;s++)t.next(n[s]);else for(let s=0;s<i&&!t.closed;s++)t.next(n[s].value);return this.hasError?t.error(this.thrownError):this.isStopped&&t.complete(),o}_getNow(){return(this.scheduler||Gv.a).now()}_trimBufferThenGetEvents(){const t=this._getNow(),e=this._bufferSize,n=this._windowTime,r=this._events,i=r.length;let o=0;for(;o<i&&!(t-r[o].time<n);)o++;return i>e&&(o=Math.max(o,i-e)),o>0&&r.splice(0,o),r}}class $v{constructor(t,e){this.time=t,this.value=e}}function Wv(t,e,n){let r;return r=t&&"object"==typeof t?t:{bufferSize:t,windowTime:e,refCount:!1,scheduler:n},t=>t.lift(function({bufferSize:t=Number.POSITIVE_INFINITY,windowTime:e=Number.POSITIVE_INFINITY,refCount:n,scheduler:r}){let i,o,s=0,a=!1,u=!1;return function(c){let l;s++,!i||a?(a=!1,i=new Jv(t,e,r),l=i.subscribe(this),o=c.subscribe({next(t){i.next(t)},error(t){a=!0,i.error(t)},complete(){u=!0,o=void 0,i.complete()}}),u&&(o=void 0)):l=i.subscribe(this),this.add(()=>{s--,l.unsubscribe(),l=void 0,o&&!u&&n&&0===s&&(o.unsubscribe(),o=void 0,i=void 0)})}}(r))}function Qv(t,e){return e?Lt(()=>t,e):Lt(()=>t)}var Yv=n("tf+s");const Xv=new r.r("angularfire2.auth.use-emulator"),Zv=new r.r("angularfire2.auth.settings"),tb=new r.r("angularfire2.auth.tenant-id"),eb=new r.r("angularfire2.auth.langugage-code"),nb=new r.r("angularfire2.auth.use-device-language"),rb=new r.r("angularfire.auth.persistence");let ib=(()=>{class t{constructor(t,e,r,i,o,s,a,u,c,l){const h=new bi.d(i),f=Object(bi.h)(h),d=new dt.a,p=Object(ft.a)(void 0).pipe(Object(vi.b)(h.outsideAngular),Lt(()=>i.runOutsideAngular(()=>n.e(4).then(n.bind(null,"6nsN")))),Object(Rt.a)(()=>Object(bi.g)(t,i,e)),Object(Rt.a)(t=>i.runOutsideAngular(()=>{const e=o,n=s;return Object(bi.f)(`${t.name}.auth`,"AngularFireAuth",t,()=>{const r=i.runOutsideAngular(()=>t.auth());return e&&r.useEmulator(`http://${e.join(":")}`),a&&(r.tenantId=a),r.languageCode=u,c&&r.useDeviceLanguage(),n&&(r.settings=n),l&&r.setPersistence(l),r},[e,a,u,c,n,l])})),Wv({bufferSize:1,refCount:!1}));if(N(r))this.authState=this.user=this.idToken=this.idTokenResult=this.credential=Object(ft.a)(null);else{p.pipe(fe()).subscribe();const t=p.pipe(Lt(t=>t.getRedirectResult().then(t=>t,()=>null)),f,Wv({bufferSize:1,refCount:!1})),e=t=>new It.a(e=>({unsubscribe:i.runOutsideAngular(()=>t(e))})),n=p.pipe(Lt(t=>e(t.onAuthStateChanged.bind(t)))),r=p.pipe(Lt(t=>e(t.onIdTokenChanged.bind(t))));this.authState=t.pipe(Qv(n),Object(Yv.a)(h.outsideAngular),Object(vi.b)(h.insideAngular)),this.user=t.pipe(Qv(r),Object(Yv.a)(h.outsideAngular),Object(vi.b)(h.insideAngular)),this.idToken=this.user.pipe(Lt(t=>t?Object(ht.a)(t.getIdToken()):Object(ft.a)(null))),this.idTokenResult=this.user.pipe(Lt(t=>t?Object(ht.a)(t.getIdTokenResult()):Object(ft.a)(null))),this.credential=Object(zv.a)(t,d,this.authState.pipe(Jt(t=>!t))).pipe(Object(Rt.a)(t=>(null==t?void 0:t.user)?t:null),Object(Yv.a)(h.outsideAngular),Object(vi.b)(h.insideAngular))}return Object(bi.i)(this,p,i,{spy:{apply:(t,e,n)=>{(t.startsWith("signIn")||t.startsWith("createUser"))&&n.then(t=>d.next(t))}}})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(bi.c),r.Mb(bi.b,8),r.Mb(r.C),r.Mb(r.A),r.Mb(Xv,8),r.Mb(Zv,8),r.Mb(tb,8),r.Mb(eb,8),r.Mb(nb,8),r.Mb(rb,8))},t.\u0275prov=Object(r.Cb)({factory:function(){return new t(Object(r.Mb)(bi.c),Object(r.Mb)(bi.b,8),Object(r.Mb)(r.C),Object(r.Mb)(r.A),Object(r.Mb)(Xv,8),Object(r.Mb)(Zv,8),Object(r.Mb)(tb,8),Object(r.Mb)(eb,8),Object(r.Mb)(nb,8),Object(r.Mb)(rb,8))},token:t,providedIn:"any"}),t})();Object(bi.e)(ib,[{app:null,applyActionCode:null,checkActionCode:null,confirmPasswordReset:null,createUserWithEmailAndPassword:null,currentUser:null,fetchSignInMethodsForEmail:null,isSignInWithEmailLink:null,getRedirectResult:null,languageCode:null,settings:null,onAuthStateChanged:null,onIdTokenChanged:null,sendSignInLinkToEmail:null,sendPasswordResetEmail:null,setPersistence:null,signInAndRetrieveDataWithCredential:null,signInAnonymously:null,signInWithCredential:null,signInWithCustomToken:null,signInWithEmailAndPassword:null,signInWithPhoneNumber:null,signInWithEmailLink:null,signInWithPopup:null,signInWithRedirect:null,signOut:null,tenantId:null,updateCurrentUser:null,useDeviceLanguage:null,useEmulator:null,verifyPasswordResetCode:null}]);let ob=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[ib]}),t})();function sb(t,e){return function(t,e=fi.a){return new It.a(n=>{let r;return null!=e?e.schedule(()=>{r=t.onSnapshot({includeMetadataChanges:!0},n)}):r=t.onSnapshot({includeMetadataChanges:!0},n),()=>{null!=r&&r()}})}(t,e)}function ab(t,e){return sb(t,e).pipe(Object(Rt.a)(t=>({payload:t,type:"query"})))}function ub(t,e){return ab(t,e).pipe(Ht(void 0),di(),Object(Rt.a)(([t,e])=>{const n=e.payload.docChanges(),r=n.map(t=>({type:t.type,payload:t}));return t&&JSON.stringify(t.payload.metadata)!==JSON.stringify(e.payload.metadata)&&e.payload.docs.forEach((e,i)=>{const o=n.find(t=>t.doc.ref.isEqual(e.ref)),s=null==t?void 0:t.payload.docs.find(t=>t.ref.isEqual(e.ref));o&&JSON.stringify(o.doc.metadata)===JSON.stringify(e.metadata)||!o&&s&&JSON.stringify(s.metadata)===JSON.stringify(e.metadata)||r.push({type:"modified",payload:{oldIndex:i,newIndex:i,type:"modified",doc:e}})}),r}))}function cb(t,e,n){return ub(t,n).pipe(zt((t,n)=>function(t,e,n){return e.forEach(e=>{n.indexOf(e.type)>-1&&(t=function(t,e){switch(e.type){case"added":if(!t[e.newIndex]||!t[e.newIndex].doc.ref.isEqual(e.doc.ref))return lb(t,e.newIndex,0,e);break;case"modified":if(null==t[e.oldIndex]||t[e.oldIndex].doc.ref.isEqual(e.doc.ref)){if(e.oldIndex!==e.newIndex){const n=t.slice();return n.splice(e.oldIndex,1),n.splice(e.newIndex,0,e),n}return lb(t,e.newIndex,1,e)}break;case"removed":if(t[e.oldIndex]&&t[e.oldIndex].doc.ref.isEqual(e.doc.ref))return lb(t,e.oldIndex,1)}return t}(t,e))}),t}(t,n.map(t=>t.payload),e),[]),t=>t.lift(new mi(void 0,void 0)),Object(Rt.a)(t=>t.map(t=>({type:t.type,payload:t}))))}function lb(t,e,n,...r){const i=t.slice();return i.splice(e,n,...r),i}function hb(t){return t&&0!==t.length||(t=["added","removed","modified"]),t}class fb{constructor(t,e,n){this.ref=t,this.query=e,this.afs=n}stateChanges(t){let e=ub(this.query,this.afs.schedulers.outsideAngular);return t&&t.length>0&&(e=e.pipe(Object(Rt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)))),e.pipe(Ht(void 0),di(),Jt(([t,e])=>e.length>0||!t),Object(Rt.a)(([t,e])=>e),this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=hb(t);return cb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ab(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ht.a)(this.query.get(t)).pipe(Object(vi.b)(this.afs.schedulers.insideAngular))}add(t){return this.ref.add(t)}doc(t){return new db(this.ref.doc(t),this.afs)}}class db{constructor(t,e){this.ref=t,this.afs=e}set(t,e){return this.ref.set(t,e)}update(t){return this.ref.update(t)}delete(){return this.ref.delete()}collection(t,e){const n=this.ref.collection(t),{ref:r,query:i}=bb(n,e);return new fb(r,i,this.afs)}snapshotChanges(){return sb(this.ref,this.afs.schedulers.outsideAngular).pipe(Ht(void 0),di(),Object(Rt.a)(([t,e])=>e.exists?(null==t?void 0:t.exists)?{payload:e,type:"modified"}:{payload:e,type:"added"}:{payload:e,type:"removed"})).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return this.snapshotChanges().pipe(Object(Rt.a)(({payload:e})=>t.idField?Object.assign(Object.assign({},e.data()),{[t.idField]:e.id}):e.data()))}get(t){return Object(ht.a)(this.ref.get(t)).pipe(Object(vi.b)(this.afs.schedulers.insideAngular))}}class pb{constructor(t,e){this.query=t,this.afs=e}stateChanges(t){return t&&0!==t.length?ub(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.filter(e=>t.indexOf(e.type)>-1)),Jt(t=>t.length>0),this.afs.keepUnstableUntilFirst):ub(this.query,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}auditTrail(t){return this.stateChanges(t).pipe(zt((t,e)=>[...t,...e],[]))}snapshotChanges(t){const e=hb(t);return cb(this.query,e,this.afs.schedulers.outsideAngular).pipe(this.afs.keepUnstableUntilFirst)}valueChanges(t={}){return ab(this.query,this.afs.schedulers.outsideAngular).pipe(Object(Rt.a)(e=>e.payload.docs.map(e=>t.idField?Object.assign({[t.idField]:e.id},e.data()):e.data())),this.afs.keepUnstableUntilFirst)}get(t){return Object(ht.a)(this.query.get(t)).pipe(Object(vi.b)(this.afs.schedulers.insideAngular))}}const gb=new r.r("angularfire2.enableFirestorePersistence"),mb=new r.r("angularfire2.firestore.persistenceSettings"),yb=new r.r("angularfire2.firestore.settings"),vb=new r.r("angularfire2.firestore.use-emulator");function bb(t,e=(t=>t)){return{query:e(t),ref:t}}let wb=(()=>{class t{constructor(t,e,n,r,i,o,s,a,u){this.schedulers=new bi.d(o),this.keepUnstableUntilFirst=Object(bi.h)(this.schedulers);const c=Object(bi.g)(t,o,e);!wi.a.auth&&u&&Object(bi.j)();const l=a;[this.firestore,this.persistenceEnabled$]=Object(bi.f)(`${c.name}.firestore`,"AngularFirestore",c,()=>{const t=o.runOutsideAngular(()=>c.firestore());if(r&&t.settings(r),l&&t.useEmulator(...l),n&&!N(i)){const e=()=>{try{return Object(ht.a)(t.enablePersistence(s||void 0).then(()=>!0,()=>!1))}catch(Fv){return"undefined"!=typeof console&&console.warn(Fv),Object(ft.a)(!1)}};return[t,o.runOutsideAngular(e)]}return[t,Object(ft.a)(!1)]},[r,l,n])}collection(t,e){let n;n="string"==typeof t?this.firestore.collection(t):t;const{ref:r,query:i}=bb(n,e),o=this.schedulers.ngZone.run(()=>r);return new fb(o,i,this)}collectionGroup(t,e){const n=e||(t=>t),r=this.firestore.collectionGroup(t);return new pb(n(r),this)}doc(t){let e;e="string"==typeof t?this.firestore.doc(t):t;const n=this.schedulers.ngZone.run(()=>e);return new db(n,this)}createId(){return this.firestore.collection("_").doc().id}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(bi.c),r.Mb(bi.b,8),r.Mb(gb,8),r.Mb(yb,8),r.Mb(r.C),r.Mb(r.A),r.Mb(mb,8),r.Mb(vb,8),r.Mb(Xv,8))},t.\u0275prov=Object(r.Cb)({factory:function(){return new t(Object(r.Mb)(bi.c),Object(r.Mb)(bi.b,8),Object(r.Mb)(gb,8),Object(r.Mb)(yb,8),Object(r.Mb)(r.C),Object(r.Mb)(r.A),Object(r.Mb)(mb,8),Object(r.Mb)(vb,8),Object(r.Mb)(Xv,8))},token:t,providedIn:"any"}),t})(),_b=(()=>{class t{static enablePersistence(e){return{ngModule:t,providers:[{provide:gb,useValue:!0},{provide:mb,useValue:e}]}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({providers:[wb]}),t})(),Ib=(()=>{class t{constructor(t,e,n,r){this.afs=t,this.afAuth=e,this.router=n,this.ngZone=r,this.afAuth.authState.subscribe(t=>{t?(this.userData=t,localStorage.setItem("user",JSON.stringify(this.userData)),JSON.parse(localStorage.getItem("user"))):(localStorage.setItem("user",null),JSON.parse(localStorage.getItem("user")))})}SignIn(t,e){return this.afAuth.signInWithEmailAndPassword(t,e).then(t=>{this.ngZone.run(()=>{this.router.navigate(["acheter-produit"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t.message)})}SignUp(t,e,n){return this.afAuth.createUserWithEmailAndPassword(e,n).then(e=>{e.user.updateProfile({displayName:t}),this.SendVerificationMail(),this.SetUserData(e.user)}).catch(t=>{window.alert(t.message)})}SendVerificationMail(){return this.afAuth.currentUser.then(t=>{t.sendEmailVerification(),this.router.navigate(["verify-email-address"])})}ForgotPassword(t){return this.afAuth.sendPasswordResetEmail(t).then(()=>{window.alert("Password reset email sent, check your inbox."),this.router.navigate(["sign-in"])}).catch(t=>{window.alert(t)})}get isLoggedIn(){const t=JSON.parse(localStorage.getItem("user"));return null!==t&&!1!==t.emailVerified}AuthLogin(t){return this.afAuth.signInWithPopup(t).then(t=>{this.ngZone.run(()=>{this.router.navigate(["dashboard"])}),this.SetUserData(t.user)}).catch(t=>{window.alert(t)})}SetUserData(t){return this.afs.doc(`users/${t.uid}`).set({uid:t.uid,email:t.email,displayName:t.displayName,photoURL:t.photoURL,emailVerified:t.emailVerified},{merge:!0})}SignOut(){return this.afAuth.signOut().then(()=>{localStorage.removeItem("user"),this.router.navigate(["sign-in"])})}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(wb),r.Mb(ib),r.Mb(Hr),r.Mb(r.A))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();function Eb(t,e){if(1&t&&(r.Jb(0,"div",15),r.Jb(1,"div",16),r.Jb(2,"div",17),r.Jb(3,"h1"),r.Jb(4,"strong"),r.Yb(5),r.Ib(),r.Ib(),r.Jb(6,"p"),r.Yb(7,"User ID: "),r.Jb(8,"strong"),r.Yb(9),r.Ib(),r.Ib(),r.Jb(10,"p"),r.Yb(11,"Email: "),r.Jb(12,"strong"),r.Yb(13),r.Ib(),r.Ib(),r.Jb(14,"p"),r.Yb(15,"Email Verified: "),r.Jb(16,"strong"),r.Yb(17),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&t){const t=e.ngIf;r.xb(5),r.Zb(t.displayName?t.displayName:"User"),r.xb(4),r.Zb(t.uid),r.xb(4),r.Zb(t.email),r.xb(4),r.Zb(t.emailVerified)}}let Sb=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-dashboard"]],decls:25,vars:1,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","/acheter-produit",1,"navbar-brand"],["src","../../../assets/marketplace.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/acheter-produit",1,"nav-link"],["routerLink","/vendre-produit",1,"nav-link"],["routerLink","/mon-panier",1,"nav-link"],["routerLink","/dashboard",1,"nav-link","active"],[1,"nav","navbar-nav","navbar-right"],[1,"nav-link",3,"click"],[1,"container"],["class","row",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"media-body"]],template:function(t,e){1&t&&(r.Jb(0,"nav",0),r.Jb(1,"div",1),r.Jb(2,"a",2),r.Hb(3,"img",3),r.Yb(4," MarketPlace802 "),r.Ib(),r.Jb(5,"div",4),r.Jb(6,"ul",5),r.Jb(7,"li",6),r.Jb(8,"a",7),r.Yb(9,"Acheter"),r.Ib(),r.Ib(),r.Jb(10,"li",6),r.Jb(11,"a",8),r.Yb(12,"Vendre"),r.Ib(),r.Ib(),r.Jb(13,"li",6),r.Jb(14,"a",9),r.Yb(15,"Mon Panier"),r.Ib(),r.Ib(),r.Jb(16,"li",6),r.Jb(17,"a",10),r.Yb(18,"Mes Donnes"),r.Ib(),r.Ib(),r.Ib(),r.Jb(19,"ul",11),r.Jb(20,"li",6),r.Jb(21,"a",12),r.Pb("click",function(){return e.authService.SignOut()}),r.Yb(22,"Se deconnecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Jb(23,"div",13),r.Xb(24,Eb,18,4,"div",14),r.Ib()),2&t&&(r.xb(24),r.Rb("ngIf",e.authService.userData))},directives:[Gr,x],styles:[""]}),t})(),Ob=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-sign-in"]],decls:31,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-6"],[1,"mb-3"],["for","inputEmail",1,"form-label"],["type","email","id","inputEmail","required","",1,"form-control"],["inputEmail",""],["for","inputPassword",1,"form-label"],["type","password","id","inputPassword","required","",1,"form-control"],["inputPassword",""],["routerLink","/forgot-password",1,"link-primary"],["type","button",1,"btn","btn-primary",3,"click"],["routerLink","/register-user",1,"link-primary"]],template:function(t,e){if(1&t){const t=r.Kb();r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"div",2),r.Jb(3,"h1"),r.Yb(4,"Bonjour,"),r.Ib(),r.Jb(5,"h1"),r.Yb(6,"MarketPlace802"),r.Ib(),r.Ib(),r.Jb(7,"div",2),r.Jb(8,"h1"),r.Yb(9,"Se connecter"),r.Ib(),r.Jb(10,"form"),r.Jb(11,"div",3),r.Jb(12,"label",4),r.Yb(13,"Email"),r.Ib(),r.Hb(14,"input",5,6),r.Ib(),r.Jb(16,"div",3),r.Jb(17,"label",7),r.Yb(18,"Mot de passe"),r.Ib(),r.Hb(19,"input",8,9),r.Ib(),r.Jb(21,"div",3),r.Jb(22,"span",10),r.Yb(23,"Mot de passe oubli\xe9?"),r.Ib(),r.Ib(),r.Jb(24,"button",11),r.Pb("click",function(){r.Ub(t);const n=r.Tb(15),i=r.Tb(20);return e.authService.SignIn(n.value,i.value)}),r.Yb(25,"Se connecter"),r.Ib(),r.Ib(),r.Jb(26,"div",3),r.Jb(27,"span"),r.Yb(28,"Je n'ai pas de compte?"),r.Jb(29,"span",12),r.Yb(30," S'inscrire"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib()}},directives:[zr],styles:[""]}),t})(),Tb=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-sign-up"]],decls:28,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-6","align-self-center"],[1,"mb-3"],["for","inputDisplayName",1,"form-label"],["type","text","id","inputDisplayName","required","",1,"form-control"],["inputDisplayName",""],["for","inputEmail",1,"form-label"],["type","email","id","inputEmail","required","",1,"form-control"],["inputEmail",""],["for","inputPassword",1,"form-label"],["type","password","id","inputPassword","required","",1,"form-control"],["inputPassword",""],["type","button",1,"btn","btn-primary",3,"click"],["routerLink","/sign-in",1,"link-primary"]],template:function(t,e){if(1&t){const t=r.Kb();r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"div",2),r.Jb(3,"h1"),r.Yb(4,"S'inscrire"),r.Ib(),r.Jb(5,"form"),r.Jb(6,"div",3),r.Jb(7,"label",4),r.Yb(8,"Nom d'utilisateur"),r.Ib(),r.Hb(9,"input",5,6),r.Ib(),r.Jb(11,"div",3),r.Jb(12,"label",7),r.Yb(13,"Email"),r.Ib(),r.Hb(14,"input",8,9),r.Ib(),r.Jb(16,"div",3),r.Jb(17,"label",10),r.Yb(18,"Mot de passe"),r.Ib(),r.Hb(19,"input",11,12),r.Ib(),r.Jb(21,"button",13),r.Pb("click",function(){r.Ub(t);const n=r.Tb(10),i=r.Tb(15),o=r.Tb(20);return e.authService.SignUp(n.value,i.value,o.value)}),r.Yb(22,"S'inscrire"),r.Ib(),r.Ib(),r.Jb(23,"div",3),r.Jb(24,"span"),r.Yb(25,"J'ai d\xe9j\xe0 un compte?"),r.Jb(26,"span",14),r.Yb(27," Se connecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib()}},directives:[zr],styles:[""]}),t})(),Cb=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-forgot-password"]],decls:20,vars:0,consts:[[1,"container"],[1,"row"],[1,"col-6","align-self-center"],[1,"mb-3"],["for","inputEmail",1,"form-label"],["type","email","id","inputEmail","aria-describedby","emailHelp","required","",1,"form-control"],["passwordResetEmail",""],["id","emailHelp",1,"form-text"],["type","button","value","Reset Password",1,"btn","btn-primary",3,"click"],["routerLink","/sign-in",1,"link-primary"]],template:function(t,e){if(1&t){const t=r.Kb();r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"div",2),r.Jb(3,"h1"),r.Yb(4,"R\xe9initialiser mot de passe"),r.Ib(),r.Jb(5,"form"),r.Jb(6,"div",3),r.Jb(7,"label",4),r.Yb(8,"Email"),r.Ib(),r.Hb(9,"input",5,6),r.Jb(11,"div",7),r.Yb(12,"Renseignez votre mail pour r\xe9initialiser mot de passe "),r.Ib(),r.Ib(),r.Jb(13,"button",8),r.Pb("click",function(){r.Ub(t);const n=r.Tb(10);return e.authService.ForgotPassword(n.value)}),r.Yb(14,"R\xe9initialiser"),r.Ib(),r.Ib(),r.Jb(15,"div",3),r.Jb(16,"span"),r.Yb(17,"J'ai d\xe9j\xe0 un compte?"),r.Jb(18,"span",9),r.Yb(19," Se connecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib()}},directives:[zr],styles:[""]}),t})();function xb(t,e){if(1&t&&(r.Jb(0,"div",8),r.Jb(1,"p",3),r.Yb(2,"Un mail a \xe9t\xe9 envoy\xe9 au "),r.Jb(3,"strong"),r.Yb(4),r.Ib(),r.Yb(5,"."),r.Ib(),r.Jb(6,"p",3),r.Yb(7,"S'il vous plait, v\xe9rifiez votre bo\xeete mail pour r\xe9initialiser votre mot de passe."),r.Ib(),r.Ib()),2&t){const t=e.ngIf;r.xb(4),r.Zb(t.email)}}let Ab=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-verify-email"]],decls:14,vars:1,consts:[[1,"container"],[1,"row"],[1,"col-6"],[1,"text-center"],["class","md-3 text-center",4,"ngIf"],["type","button",1,"btn","btn-primary",3,"click"],[1,"mb-3","text-center"],["routerLink","/sign-in",1,"link-primary"],[1,"md-3","text-center"]],template:function(t,e){1&t&&(r.Jb(0,"div",0),r.Jb(1,"div",1),r.Jb(2,"div",2),r.Jb(3,"h3",3),r.Yb(4,"Thank You for Registering"),r.Ib(),r.Xb(5,xb,8,1,"div",4),r.Jb(6,"div",3),r.Jb(7,"button",5),r.Pb("click",function(){return e.authService.SendVerificationMail()}),r.Yb(8," Renvoyer le mail "),r.Ib(),r.Ib(),r.Jb(9,"div",6),r.Jb(10,"span"),r.Yb(11,"Revenir sur la page de connexion?"),r.Jb(12,"span",7),r.Yb(13," Se connecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib()),2&t&&(r.xb(5),r.Rb("ngIf",e.authService.userData))},directives:[x,zr],styles:[""]}),t})(),jb=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-acheter-produit"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","/acheter-produit",1,"navbar-brand"],["src","../../../assets/marketplace.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/acheter-produit",1,"nav-link","active"],["routerLink","/vendre-produit",1,"nav-link"],["routerLink","/mon-panier",1,"nav-link"],["routerLink","/dashboard",1,"nav-link"],[1,"nav","navbar-nav","navbar-right"],[1,"nav-link",3,"click"],[1,"container"],[1,"row"]],template:function(t,e){1&t&&(r.Jb(0,"nav",0),r.Jb(1,"div",1),r.Jb(2,"a",2),r.Hb(3,"img",3),r.Yb(4," MarketPlace802 "),r.Ib(),r.Jb(5,"div",4),r.Jb(6,"ul",5),r.Jb(7,"li",6),r.Jb(8,"a",7),r.Yb(9,"Acheter"),r.Ib(),r.Ib(),r.Jb(10,"li",6),r.Jb(11,"a",8),r.Yb(12,"Vendre"),r.Ib(),r.Ib(),r.Jb(13,"li",6),r.Jb(14,"a",9),r.Yb(15,"Mon Panier"),r.Ib(),r.Ib(),r.Jb(16,"li",6),r.Jb(17,"a",10),r.Yb(18,"Mes Donnes"),r.Ib(),r.Ib(),r.Ib(),r.Jb(19,"ul",11),r.Jb(20,"li",6),r.Jb(21,"a",12),r.Pb("click",function(){return e.authService.SignOut()}),r.Yb(22,"Se deconnecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Jb(23,"div",13),r.Jb(24,"div",14),r.Jb(25,"h1"),r.Yb(26,"Acheter"),r.Ib(),r.Ib(),r.Ib())},directives:[Gr],styles:[""]}),t})(),kb=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-vendre-produit"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","/acheter-produit",1,"navbar-brand"],["src","../../../assets/marketplace.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],["id","navbarSupportedContent",1,"collapse","navbar-collapse"],[1,"navbar-nav","me-auto","mb-2","mb-lg-0"],[1,"nav-item"],["routerLink","/acheter-produit",1,"nav-link"],["routerLink","/vendre-produit",1,"nav-link","active"],["routerLink","/mon-panier",1,"nav-link"],["routerLink","/dashboard",1,"nav-link"],[1,"nav","navbar-nav","navbar-right"],[1,"nav-link",3,"click"],[1,"container"],[1,"row"]],template:function(t,e){1&t&&(r.Jb(0,"nav",0),r.Jb(1,"div",1),r.Jb(2,"a",2),r.Hb(3,"img",3),r.Yb(4," MarketPlace802 "),r.Ib(),r.Jb(5,"div",4),r.Jb(6,"ul",5),r.Jb(7,"li",6),r.Jb(8,"a",7),r.Yb(9,"Acheter"),r.Ib(),r.Ib(),r.Jb(10,"li",6),r.Jb(11,"a",8),r.Yb(12,"Vendre"),r.Ib(),r.Ib(),r.Jb(13,"li",6),r.Jb(14,"a",9),r.Yb(15,"Mon Panier"),r.Ib(),r.Ib(),r.Jb(16,"li",6),r.Jb(17,"a",10),r.Yb(18,"Mes Donnes"),r.Ib(),r.Ib(),r.Ib(),r.Jb(19,"ul",11),r.Jb(20,"li",6),r.Jb(21,"a",12),r.Pb("click",function(){return e.authService.SignOut()}),r.Yb(22,"Se deconnecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Jb(23,"div",13),r.Jb(24,"div",14),r.Jb(25,"h1"),r.Yb(26,"Vendre"),r.Ib(),r.Ib(),r.Ib())},directives:[Gr],styles:[""]}),t})(),Nb=(()=>{class t{constructor(t){this.authService=t}ngOnInit(){}}return t.\u0275fac=function(e){return new(e||t)(r.Gb(Ib))},t.\u0275cmp=r.Ab({type:t,selectors:[["app-mon-panier"]],decls:27,vars:0,consts:[[1,"navbar","navbar-expand-lg","navbar-light","bg-light"],[1,"container-fluid"],["routerLink","/acheter-produit",1,"navbar-brand"],["src","../../../assets/marketplace.png","alt","","width","30","height","24",1,"d-inline-block","align-text-top"],[1,"collapse","navbar-collapse"],[1,"nav","navbar-nav"],[1,"nav-item"],["routerLink","/acheter-produit",1,"nav-link"],["routerLink","/vendre-produit",1,"nav-link"],["routerLink","/mon-panier",1,"nav-link","active"],["routerLink","/dashboard",1,"nav-link"],[1,"nav","navbar-nav","navbar-right"],[1,"nav-link",3,"click"],[1,"container"],[1,"row"]],template:function(t,e){1&t&&(r.Jb(0,"nav",0),r.Jb(1,"div",1),r.Jb(2,"a",2),r.Hb(3,"img",3),r.Yb(4," MarketPlace802 "),r.Ib(),r.Jb(5,"div",4),r.Jb(6,"ul",5),r.Jb(7,"li",6),r.Jb(8,"a",7),r.Yb(9,"Acheter"),r.Ib(),r.Ib(),r.Jb(10,"li",6),r.Jb(11,"a",8),r.Yb(12,"Vendre"),r.Ib(),r.Ib(),r.Jb(13,"li",6),r.Jb(14,"a",9),r.Yb(15,"Mon Panier"),r.Ib(),r.Ib(),r.Jb(16,"li",6),r.Jb(17,"a",10),r.Yb(18,"Mes Donnes"),r.Ib(),r.Ib(),r.Ib(),r.Jb(19,"ul",11),r.Jb(20,"li",6),r.Jb(21,"a",12),r.Pb("click",function(){return e.authService.SignOut()}),r.Yb(22,"Se deconnecter"),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Ib(),r.Jb(23,"div",13),r.Jb(24,"div",14),r.Jb(25,"h1"),r.Yb(26,"Mon Panier"),r.Ib(),r.Ib(),r.Ib())},directives:[Gr],styles:[""]}),t})(),Db=(()=>{class t{constructor(t,e){this.authService=t,this.router=e}canActivate(t,e){return!0!==this.authService.isLoggedIn&&this.router.navigate(["sign-in"]),!0}}return t.\u0275fac=function(e){return new(e||t)(r.Mb(Ib),r.Mb(Hr))},t.\u0275prov=r.Cb({token:t,factory:t.\u0275fac,providedIn:"root"}),t})();const Rb=[{path:"",redirectTo:"/sign-in",pathMatch:"full"},{path:"sign-in",component:Ob},{path:"register-user",component:Tb},{path:"dashboard",component:Sb,canActivate:[Db]},{path:"forgot-password",component:Cb},{path:"acheter-produit",component:jb,canActivate:[Db]},{path:"vendre-produit",component:kb,canActivate:[Db]},{path:"mon-panier",component:Nb,canActivate:[Db]},{path:"verify-email-address",component:Ab}];let Pb=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t}),t.\u0275inj=r.Db({imports:[[ri.forRoot(Rb)],ri]}),t})(),Lb=(()=>{class t{constructor(){this.title="my-app"}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=r.Ab({type:t,selectors:[["app-root"]],decls:1,vars:0,template:function(t,e){1&t&&r.Hb(0,"router-outlet")},directives:[Jr],styles:[""]}),t})();const Mb={apiKey:"AIzaSyDO3GRg3k_R4Xlge5HtB5MthKxJMhSzpQs",authDomain:"info802-d8e44.firebaseapp.com",databaseURL:"https://info802-d8e44-default-rtdb.europe-west1.firebasedatabase.app",projectId:"info802-d8e44",storageBucket:"info802-d8e44.appspot.com",messagingSenderId:"167671150783",appId:"1:167671150783:web:16089bbe457792c2bd6e0a",measurementId:"G-NXCBD8YYB5"};let Ub=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275mod=r.Eb({type:t,bootstrap:[Lb]}),t.\u0275inj=r.Db({providers:[Ib],imports:[[bi.a.initializeApp(Mb),ob,_b,lt,Pb]]}),t})();Object(r.T)(),ut().bootstrapModule(Ub).catch(t=>console.error(t))},zn8P:function(t,e){function n(t){return Promise.resolve().then(function(){var e=new Error("Cannot find module '"+t+"'");throw e.code="MODULE_NOT_FOUND",e})}n.keys=function(){return[]},n.resolve=n,t.exports=n,n.id="zn8P"},zx2A:function(t,e,n){"use strict";n.d(e,"a",function(){return s}),n.d(e,"b",function(){return a}),n.d(e,"c",function(){return u});var r=n("7o/Q"),i=n("HDdC"),o=n("SeVD");class s extends r.a{constructor(t){super(),this.parent=t}_next(t){this.parent.notifyNext(t)}_error(t){this.parent.notifyError(t),this.unsubscribe()}_complete(){this.parent.notifyComplete(),this.unsubscribe()}}class a extends r.a{notifyNext(t){this.destination.next(t)}notifyError(t){this.destination.error(t)}notifyComplete(){this.destination.complete()}}function u(t,e){if(e.closed)return;if(t instanceof i.a)return t.subscribe(e);let n;try{n=Object(o.a)(t)(e)}catch(r){e.error(r)}return n}}},[[0,0]]]);